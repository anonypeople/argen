<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.sdml.info/srcML/src" language="Java"
      filename="D:\bio\git\biorimp\BIO-RIMP\test_data\code\jhotdraw\src\main\java\org\jhotdraw\draw\action\ButtonFactory.java">
    <comment type="block">/*
        * @(#)ButtonFactory.java 2.0.1 2007-12-17
        *
        * Copyright (c) 1996-2007 by the original authors of JHotDraw
        * and all its contributors.
        * All rights reserved.
        *
        * The copyright of this software is owned by the authors and
        * contributors of the JHotDraw project ("the copyright holders").
        * You may not use, copy or modify this software, except in
        * accordance with the license agreement you entered into with
        * the copyright holders. For details see accompanying license terms.
        */
    </comment>

    <package>package
        <name><name>org</name>.<name>jhotdraw</name>.<name>draw</name>.
            <name>action</name>
        </name>
        ;
    </package>

    <import>import
        <name><name>com</name>.<name>sun</name>.<name>org</name>.<name>apache</name>.<name>bcel</name>.<name>
            internal</name>.<name>classfile</name>.
            <name>JavaClass</name>
        </name>
        ;
    </import>
    <import>import
        <name><name>org</name>.<name>jhotdraw</name>.<name>gui</name>.
            <name>JPopupButton</name>
        </name>
        ;
    </import>
    <import>import
        <name><name>org</name>.<name>jhotdraw</name>.
            <name>util</name>
        </name>
        .*;
    </import>
    <import>import
        <name><name>java</name>.
            <name>awt</name>
        </name>
        .*;
    </import>
    <import>import
        <name><name>java</name>.<name>awt</name>.
            <name>event</name>
        </name>
        .*;
    </import>
    <import>import
        <name><name>java</name>.
            <name>beans</name>
        </name>
        .*;
    </import>
    <import>import
        <name><name>java</name>.
            <name>text</name>
        </name>
        .*;
    </import>
    <import>import
        <name><name>java</name>.
            <name>util</name>
        </name>
        .*;
    </import>
    <import>import
        <name><name>javax</name>.
            <name>swing</name>
        </name>
        .*;
    </import>
    <import>import
        <name><name>javax</name>.<name>swing</name>.
            <name>text</name>
        </name>
        .*;
    </import>
    <import>import
        <name><name>org</name>.<name>jhotdraw</name>.<name>app</name>.
            <name>action</name>
        </name>
        .*;
    </import>
    <import>import static
        <name><name>org</name>.<name>jhotdraw</name>.<name>draw</name>.
            <name>AttributeKeys</name>
        </name>
        .*;
    </import>
    <import>import
        <name><name>org</name>.<name>jhotdraw</name>.
            <name>geom</name>
        </name>
        .*;
    </import>
    <import>import
        <name><name>org</name>.<name>jhotdraw</name>.
            <name>draw</name>
        </name>
        .*;
    </import>

    <comment type="javadoc">/**
        * ButtonFactory.
        *
        * @author Werner Randelshofer
        * @version 2.0.1 2007-12-17 Fixed createToggleGridButton method.
        * &lt;br&gt;2.0 2007-03-31 Renamed from ToolBarButtonFactory to ButtonFactory.
        * Replaced most add...ButtonTo methods by create...Button methods.
        * &lt;br&gt;1.3 2006-12-29 Split methods even more up. Added additional buttons.
        * &lt;br&gt;1.2 2006-07-16 Split some methods up for better reuse.
        * &lt;br&gt;1.1 2006-03-27 Font exclusion list updated.
        * &lt;br&gt;1.0 13. Februar 2006 Created.
        */
    </comment>
    <class>
        <specifier>public</specifier>
        class <name>ButtonFactory</name>
        <block>{
            <comment type="javadoc">/**
                * Mac OS X 'Apple Color Palette'.
                * This palette has 8 columns.
                */
            </comment>
            <decl_stmt>
                <decl>
                    <type>
                        <specifier>public</specifier>
                        <specifier>final</specifier>
                        <specifier>static</specifier>
                        <name><name>java</name>.<name>util</name>.
                            <name>
                                <name>List</name>
                                <argument_list>&lt;
                                    <argument>
                                        <name>ColorIcon</name>
                                    </argument>
                                    &gt;
                                </argument_list>
                            </name>
                        </name>
                    </type>
                    <name>DEFAULT_COLORS</name>
                </decl>
                ;
            </decl_stmt>
            static
            <block>{
                <decl_stmt>
                    <decl>
                        <type>
                            <name>
                                <name>LinkedList</name>
                                <argument_list>&lt;
                                    <argument>
                                        <name>ColorIcon</name>
                                    </argument>
                                    &gt;
                                </argument_list>
                            </name>
                        </type>
                        <name>m</name> =
                        <init>
                            <expr>new
                                <call>
                                    <name>
                                        <name>LinkedList</name>
                                        <argument_list>&lt;
                                            <argument>
                                                <name>ColorIcon</name>
                                            </argument>
                                            &gt;
                                        </argument_list>
                                    </name>
                                    <argument_list>()</argument_list>
                                </call>
                            </expr>
                        </init>
                    </decl>
                    ;
                </decl_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0x800000</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Cayenne"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0x808000</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Asparagus"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0x008000</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Clover"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0x008080</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Teal"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0x000080</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Midnight"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0x800080</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Plum"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0x7f7f7f</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Tin"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0x808080</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Nickel"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0xff0000</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Maraschino"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0xffff00</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Lemon"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0x00ff00</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Spring"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0x00ffff</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Turquoise"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0x0000ff</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Blueberry"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0xff00ff</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Magenta"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0x666666</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Steel"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0x999999</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Aluminium"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0xff6666</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Salmon"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0xffff66</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Banana"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0x66ff66</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Flora"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0x66ffff</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Ice"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0x6666ff</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Orchid"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0xff66ff</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Bubblegum"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0x4c4c4c</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Iron"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0xb3b3b3</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Magnesium"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0x804000</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Mocha"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0x408000</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Fern"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0x008040</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Moss"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0x004080</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Ocean"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0x400080</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Eggplant"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0x800040</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Maroon"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0x333333</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Tungsten"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0xcccccc</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Silver"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0xff8000</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Tangerine"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0x80ff00</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Lime"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0x00ff80</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Sea Foam"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0x0080ff</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Aqua"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0x8000ff</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Grape"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0xff0080</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Strawberry"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0x191919</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Lead"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0xe6e6e6</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Mercury"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0xffcc66</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Cantaloupe"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0xccff66</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Honeydew"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0x66ffcc</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Spindrift"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0x66ccff</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Sky"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0xcc66ff</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Lavender"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0xff6fcf</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Carnation"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0x000000</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Licorice"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <call>
                            <name><name>m</name>.
                                <name>add</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>new
                                        <call>
                                            <name>ColorIcon</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0xffffff</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"Snow"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                <expr_stmt>
                    <expr>
                        <name>DEFAULT_COLORS</name>
                        =
                        <call>
                            <name><name>Collections</name>.
                                <name>unmodifiableList</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>
                                        <name>m</name>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                }
            </block>
            <decl_stmt>
                <decl>
                    <type>
                        <specifier>public</specifier>
                        <specifier>final</specifier>
                        <specifier>static</specifier>
                        <name>int</name>
                    </type>
                    <name>DEFAULT_COLORS_COLUMN_COUNT</name> =
                    <init>
                        <expr>8</expr>
                    </init>
                </decl>
                ;
            </decl_stmt>
            <comment type="javadoc">/**
                * Websave color palette as used by Macromedia Fireworks.
                * This palette has 19 columns.
                * The leftmost column contains a redundant set of color
                * icons to make selection of gray scales and of the
                * primary colors easier.
                */
            </comment>
            <decl_stmt>
                <decl>
                    <type>
                        <specifier>public</specifier>
                        <specifier>final</specifier>
                        <specifier>static</specifier>
                        <name><name>java</name>.<name>util</name>.
                            <name>
                                <name>List</name>
                                <argument_list>&lt;
                                    <argument>
                                        <name>ColorIcon</name>
                                    </argument>
                                    &gt;
                                </argument_list>
                            </name>
                        </name>
                    </type>
                    <name>WEBSAVE_COLORS</name>
                </decl>
                ;
            </decl_stmt>
            static
            <block>{
                <decl_stmt>
                    <decl>
                        <type>
                            <name>
                                <name>LinkedList</name>
                                <argument_list>&lt;
                                    <argument>
                                        <name>ColorIcon</name>
                                    </argument>
                                    &gt;
                                </argument_list>
                            </name>
                        </type>
                        <name>m</name> =
                        <init>
                            <expr>new
                                <call>
                                    <name>
                                        <name>LinkedList</name>
                                        <argument_list>&lt;
                                            <argument>
                                                <name>ColorIcon</name>
                                            </argument>
                                            &gt;
                                        </argument_list>
                                    </name>
                                    <argument_list>()</argument_list>
                                </call>
                            </expr>
                        </init>
                    </decl>
                    ;
                </decl_stmt>
                <for>for (
                    <init>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>b</name>=
                            <init>
                                <expr>0</expr>
                            </init>
                        </decl>
                        ;
                    </init>
                    <condition>
                        <expr>
                            <name>b</name>
                            &lt;= 0xff
                        </expr>
                        ;
                    </condition>
                    <incr>
                        <expr>
                            <name>b</name>
                            += 0x33
                        </expr>
                    </incr>
                    )
                    <block>{
                        <decl_stmt>
                            <decl>
                                <type>
                                    <name>int</name>
                                </type>
                                <name>rgb</name> =
                                <init>
                                    <expr>(<name>b</name> &lt;&lt; 16) | (<name>b</name> &lt;&lt; 8) |
                                        <name>b</name>
                                    </expr>
                                </init>
                            </decl>
                            ;
                        </decl_stmt>
                        <expr_stmt>
                            <expr>
                                <call>
                                    <name><name>m</name>.
                                        <name>add</name>
                                    </name>
                                    <argument_list>(
                                        <argument>
                                            <expr>new
                                                <call>
                                                    <name>ColorIcon</name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>rgb</name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                            </expr>
                            ;
                        </expr_stmt>
                        <for>for (
                            <init>
                                <decl>
                                    <type>
                                        <name>int</name>
                                    </type>
                                    <name>r</name>=
                                    <init>
                                        <expr>0</expr>
                                    </init>
                                </decl>
                                ;
                            </init>
                            <condition>
                                <expr>
                                    <name>r</name>
                                    &lt;= 0x66
                                </expr>
                                ;
                            </condition>
                            <incr>
                                <expr>
                                    <name>r</name>
                                    += 0x33
                                </expr>
                            </incr>
                            )
                            <block>{
                                <for>for (
                                    <init>
                                        <decl>
                                            <type>
                                                <name>int</name>
                                            </type>
                                            <name>g</name>=
                                            <init>
                                                <expr>0</expr>
                                            </init>
                                        </decl>
                                        ;
                                    </init>
                                    <condition>
                                        <expr>
                                            <name>g</name>
                                            &lt;= 0xff
                                        </expr>
                                        ;
                                    </condition>
                                    <incr>
                                        <expr>
                                            <name>g</name>
                                            += 0x33
                                        </expr>
                                    </incr>
                                    )
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name>rgb</name>
                                                = (<name>r</name> &lt;&lt; 16) | (<name>g</name> &lt;&lt; 8) |
                                                <name>b</name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>m</name>.
                                                        <name>add</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>new
                                                                <call>
                                                                    <name>ColorIcon</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>
                                                                                <name>rgb</name>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </for>
                                }
                            </block>
                        </for>
                        }
                    </block>
                </for>
                <decl_stmt>
                    <decl>
                        <type>
                            <name>int</name>
                            <index>[]</index>
                        </type>
                        <name>firstColumn</name> =
                        <init>
                            <expr>
                                <block>{
                                    <expr>0xff0000</expr>,
                                    <expr>0x00ff00</expr>,
                                    <expr>0x0000ff</expr>,
                                    <expr>0xff00ff</expr>,
                                    <expr>0x00ffff</expr>,
                                    <expr>0xffff00</expr>,
                                    }
                                </block>
                            </expr>
                        </init>
                    </decl>
                    ;
                </decl_stmt>
                <for>for (
                    <init>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>b</name>=
                            <init>
                                <expr>0x0</expr>
                            </init>
                            , <name>i</name>=
                            <init>
                                <expr>0</expr>
                            </init>
                        </decl>
                        ;
                    </init>
                    <condition>
                        <expr>
                            <name>b</name>
                            &lt;= 0xff
                        </expr>
                        ;
                    </condition>
                    <incr>
                        <expr>
                            <name>b</name>
                            += 0x33
                        </expr>
                        ,
                        <expr><name>i</name>++
                        </expr>
                    </incr>
                    )
                    <block>{
                        <decl_stmt>
                            <decl>
                                <type>
                                    <name>int</name>
                                </type>
                                <name>rgb</name> =
                                <init>
                                    <expr>(<name>b</name> &lt;&lt; 16) | (<name>b</name> &lt;&lt; 8) |
                                        <name>b</name>
                                    </expr>
                                </init>
                            </decl>
                            ;
                        </decl_stmt>
                        <expr_stmt>
                            <expr>
                                <call>
                                    <name><name>m</name>.
                                        <name>add</name>
                                    </name>
                                    <argument_list>(
                                        <argument>
                                            <expr>new
                                                <call>
                                                    <name>ColorIcon</name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>
                                                                    <name>firstColumn</name>
                                                                    <index>[
                                                                        <expr>
                                                                            <name>i</name>
                                                                        </expr>
                                                                        ]
                                                                    </index>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                            </expr>
                            ;
                        </expr_stmt>
                        <for>for (
                            <init>
                                <decl>
                                    <type>
                                        <name>int</name>
                                    </type>
                                    <name>r</name>=
                                    <init>
                                        <expr>0x99</expr>
                                    </init>
                                </decl>
                                ;
                            </init>
                            <condition>
                                <expr>
                                    <name>r</name>
                                    &lt;= 0xff
                                </expr>
                                ;
                            </condition>
                            <incr>
                                <expr>
                                    <name>r</name>
                                    += 0x33
                                </expr>
                            </incr>
                            )
                            <block>{
                                <for>for (
                                    <init>
                                        <decl>
                                            <type>
                                                <name>int</name>
                                            </type>
                                            <name>g</name>=
                                            <init>
                                                <expr>0</expr>
                                            </init>
                                        </decl>
                                        ;
                                    </init>
                                    <condition>
                                        <expr>
                                            <name>g</name>
                                            &lt;= 0xff
                                        </expr>
                                        ;
                                    </condition>
                                    <incr>
                                        <expr>
                                            <name>g</name>
                                            += 0x33
                                        </expr>
                                    </incr>
                                    )
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name>rgb</name>
                                                = 0xff000000 | (<name>r</name> &lt;&lt; 16) | (<name>g</name> &lt;&lt;
                                                8) |
                                                <name>b</name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>m</name>.
                                                        <name>add</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>new
                                                                <call>
                                                                    <name>ColorIcon</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>
                                                                                <name>rgb</name>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </for>
                                }
                            </block>
                        </for>
                        }
                    </block>
                </for>
                <expr_stmt>
                    <expr>
                        <name>WEBSAVE_COLORS</name>
                        =
                        <call>
                            <name><name>Collections</name>.
                                <name>unmodifiableList</name>
                            </name>
                            <argument_list>(
                                <argument>
                                    <expr>
                                        <name>m</name>
                                    </expr>
                                </argument>
                                )
                            </argument_list>
                        </call>
                    </expr>
                    ;
                </expr_stmt>
                }
            </block>
            <decl_stmt>
                <decl>
                    <type>
                        <specifier>public</specifier>
                        <specifier>final</specifier>
                        <specifier>static</specifier>
                        <name>int</name>
                    </type>
                    <name>WEBSAVE_COLORS_COLUMN_COUNT</name> =
                    <init>
                        <expr>19</expr>
                    </init>
                </decl>
                ;
            </decl_stmt>


            <class>
                <specifier>private</specifier>
                <specifier>static</specifier> class <name>ToolButtonListener</name>
                <super>
                    <implements>implements
                        <name>ItemListener</name>
                    </implements>
                </super>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <specifier>private</specifier>
                                <name>Tool</name>
                            </type>
                            <name>tool</name>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <specifier>private</specifier>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                        ;
                    </decl_stmt>
                    <constructor>
                        <specifier>public</specifier>
                        <name>ToolButtonListener</name>
                        <parameter_list>(
                            <param>
                                <decl>
                                    <type>
                                        <name>Tool</name>
                                    </type>
                                    <name>t</name>
                                </decl>
                            </param>
                            ,
                            <param>
                                <decl>
                                    <type>
                                        <name>DrawingEditor</name>
                                    </type>
                                    <name>editor</name>
                                </decl>
                            </param>
                            )
                        </parameter_list>
                        <block>{
                            <expr_stmt>
                                <expr>
                                    <name><name>this</name>.
                                        <name>tool</name>
                                    </name>
                                    =
                                    <name>t</name>
                                </expr>
                                ;
                            </expr_stmt>
                            <expr_stmt>
                                <expr>
                                    <name><name>this</name>.
                                        <name>editor</name>
                                    </name>
                                    =
                                    <name>editor</name>
                                </expr>
                                ;
                            </expr_stmt>
                            }
                        </block>
                    </constructor>
                    <function>
                        <type>
                            <specifier>public</specifier>
                            <name>void</name>
                        </type>
                        <name>itemStateChanged</name>
                        <parameter_list>(
                            <param>
                                <decl>
                                    <type>
                                        <name>ItemEvent</name>
                                    </type>
                                    <name>evt</name>
                                </decl>
                            </param>
                            )
                        </parameter_list>
                        <block>{
                            <if>if
                                <condition>(
                                    <expr>
                                        <call>
                                            <name><name>evt</name>.
                                                <name>getStateChange</name>
                                            </name>
                                            <argument_list>()</argument_list>
                                        </call>
                                        ==
                                        <name><name>ItemEvent</name>.
                                            <name>SELECTED</name>
                                        </name>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>editor</name>.
                                                        <name>setTool</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>tool</name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </then>
                            </if>
                            }
                        </block>
                    </function>
                    }
                </block>
            </class>

            <comment type="javadoc">/** Prevent instance creation. */</comment>
            <constructor>
                <specifier>private</specifier>
                <name>ButtonFactory</name>
                <parameter_list>()</parameter_list>
                <block>{
                    }
                </block>
            </constructor>

            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>
                        <name>Collection</name>
                        <argument_list>&lt;
                            <argument>
                                <name>Action</name>
                            </argument>
                            &gt;
                        </argument_list>
                    </name>
                </type>
                <name>createDrawingActions</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>LinkedList</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>Action</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>a</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>
                                            <name>LinkedList</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>Action</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>a</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>CutAction</name>
                                                <argument_list>()</argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>a</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>CopyAction</name>
                                                <argument_list>()</argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>a</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>PasteAction</name>
                                                <argument_list>()</argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>a</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>SelectAllAction</name>
                                                <argument_list>()</argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>a</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>SelectSameAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <return>return
                        <expr>
                            <name>a</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>
                        <name>Collection</name>
                        <argument_list>&lt;
                            <argument>
                                <name>Action</name>
                            </argument>
                            &gt;
                        </argument_list>
                    </name>
                </type>
                <name>createSelectionActions</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>LinkedList</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>Action</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>a</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>
                                            <name>LinkedList</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>Action</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>a</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>DuplicateAction</name>
                                                <argument_list>()</argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>a</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>null</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <comment type="line">// separator</comment>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>a</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>GroupAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>a</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>UngroupAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>a</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>null</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <comment type="line">// separator</comment>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>a</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>MoveToFrontAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>a</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>MoveToBackAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <return>return
                        <expr>
                            <name>a</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JToggleButton</name>
                </type>
                <name>addSelectionToolTo</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>JToolBar</name>
                            </type>
                            <name>tb</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <specifier>final</specifier>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <return>return
                        <expr>
                            <call>
                                <name>addSelectionToolTo</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>tb</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>editor</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>createDrawingActions</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>createSelectionActions</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JToggleButton</name>
                </type>
                <name>addSelectionToolTo</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>JToolBar</name>
                            </type>
                            <name>tb</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <specifier>final</specifier>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>
                                    <name>Collection</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>Action</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>drawingActions</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>
                                    <name>Collection</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>Action</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>selectionActions</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>ResourceBundleUtil</name>
                            </type>
                            <name>labels</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>ResourceBundleUtil</name>.
                                            <name>getLAFBundle</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>"org.jhotdraw.draw.Labels"</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>JToggleButton</name>
                            </type>
                            <name>t</name>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>Tool</name>
                            </type>
                            <name>tool</name>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>String</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>attributes</name>
                        </decl>
                        ;
                    </decl_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>ButtonGroup</name>
                            </type>
                            <name>group</name>
                        </decl>
                        ;
                    </decl_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>tb</name>.
                                        <name>getClientProperty</name>
                                    </name>
                                    <argument_list>(
                                        <argument>
                                            <expr>"toolButtonGroup"</expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                                <name>instanceof</name>
                                <name>ButtonGroup</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name>group</name>
                                        = (<name>ButtonGroup</name>)
                                        <call>
                                            <name><name>tb</name>.
                                                <name>getClientProperty</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>"toolButtonGroup"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                        <else>else
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name>group</name>
                                        = new
                                        <call>
                                            <name>ButtonGroup</name>
                                            <argument_list>()</argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>tb</name>.
                                                <name>putClientProperty</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>"toolButtonGroup"</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name>group</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </else>
                    </if>

                    <comment type="line">// Selection tool</comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>Tool</name>
                            </type>
                            <name>selectionTool</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>DelegationSelectionTool</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>drawingActions</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>selectionActions</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>editor</name>.
                                    <name>setTool</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>selectionTool</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <name>t</name>
                            = new
                            <call>
                                <name>JToggleButton</name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <specifier>final</specifier>
                                <name>JToggleButton</name>
                            </type>
                            <name>defaultToolButton</name> =
                            <init>
                                <expr>
                                    <name>t</name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>ToolListener</name>
                            </type>
                            <name>toolHandler</name>
                        </decl>
                        ;
                    </decl_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>tb</name>.
                                        <name>getClientProperty</name>
                                    </name>
                                    <argument_list>(
                                        <argument>
                                            <expr>"toolHandler"</expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                                <name>instanceof</name>
                                <name>ToolListener</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name>toolHandler</name>
                                        = (<name>ToolListener</name>)
                                        <call>
                                            <name><name>tb</name>.
                                                <name>getClientProperty</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>"toolHandler"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                        <else>else
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name>toolHandler</name>
                                        = new
                                        <class>
                                            <super>
                                                <name>ToolListener</name>
                                            </super>
                                            <argument_list>()</argument_list>
                                            <block>{
                                                <function>
                                                    <type>
                                                        <specifier>public</specifier>
                                                        <name>void</name>
                                                    </type>
                                                    <name>toolStarted</name>
                                                    <parameter_list>(
                                                        <param>
                                                            <decl>
                                                                <type>
                                                                    <name>ToolEvent</name>
                                                                </type>
                                                                <name>event</name>
                                                            </decl>
                                                        </param>
                                                        )
                                                    </parameter_list>
                                                    <block>{
                                                        }
                                                    </block>
                                                </function>

                                                <function>
                                                    <type>
                                                        <specifier>public</specifier>
                                                        <name>void</name>
                                                    </type>
                                                    <name>toolDone</name>
                                                    <parameter_list>(
                                                        <param>
                                                            <decl>
                                                                <type>
                                                                    <name>ToolEvent</name>
                                                                </type>
                                                                <name>event</name>
                                                            </decl>
                                                        </param>
                                                        )
                                                    </parameter_list>
                                                    <block>{
                                                        <expr_stmt>
                                                            <expr>
                                                                <call>
                                                                    <name><name>defaultToolButton</name>.
                                                                        <name>setSelected</name>
                                                                    </name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>true</expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            ;
                                                        </expr_stmt>
                                                        }
                                                    </block>
                                                </function>

                                                <function>
                                                    <type>
                                                        <specifier>public</specifier>
                                                        <name>void</name>
                                                    </type>
                                                    <name>areaInvalidated</name>
                                                    <parameter_list>(
                                                        <param>
                                                            <decl>
                                                                <type>
                                                                    <name>ToolEvent</name>
                                                                </type>
                                                                <name>e</name>
                                                            </decl>
                                                        </param>
                                                        )
                                                    </parameter_list>
                                                    <block>{
                                                        }
                                                    </block>
                                                </function>
                                                }
                                            </block>
                                        </class>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>tb</name>.
                                                <name>putClientProperty</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>"toolHandler"</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name>toolHandler</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </else>
                    </if>

                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>labels</name>.
                                    <name>configureToolBarButton</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>t</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"selectionTool"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>t</name>.
                                    <name>setSelected</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>true</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>t</name>.
                                    <name>addItemListener</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>ToolButtonListener</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>selectionTool</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>t</name>.
                                    <name>setFocusable</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>group</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>t</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>tb</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>t</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <return>return
                        <expr>
                            <name>t</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Method addSelectionToolTo must have been invoked prior to this on the
                * JToolBar.
                *
                */
            </comment>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JToggleButton</name>
                </type>
                <name>addToolTo</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>JToolBar</name>
                            </type>
                            <name>tb</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>Tool</name>
                            </type>
                            <name>tool</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>labelKey</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>ResourceBundleUtil</name>
                            </type>
                            <name>labels</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>ButtonGroup</name>
                            </type>
                            <name>group</name> =
                            <init>
                                <expr>(<name>ButtonGroup</name>)
                                    <call>
                                        <name><name>tb</name>.
                                            <name>getClientProperty</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>"toolButtonGroup"</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>ToolListener</name>
                            </type>
                            <name>toolHandler</name> =
                            <init>
                                <expr>(<name>ToolListener</name>)
                                    <call>
                                        <name><name>tb</name>.
                                            <name>getClientProperty</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>"toolHandler"</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>JToggleButton</name>
                            </type>
                            <name>t</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>JToggleButton</name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>labels</name>.
                                    <name>configureToolBarButton</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>t</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>labelKey</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>t</name>.
                                    <name>addItemListener</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>ToolButtonListener</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>tool</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>t</name>.
                                    <name>setFocusable</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>tool</name>.
                                    <name>addToolListener</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>toolHandler</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>group</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>t</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>tb</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>t</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <return>return
                        <expr>
                            <name>t</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>


            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>void</name>
                </type>
                <name>addZoomButtonsTo</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>JToolBar</name>
                            </type>
                            <name>bar</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <specifier>final</specifier>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>bar</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>createZoomButton</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    }
                </block>
            </function>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>AbstractButton</name>
                </type>
                <name>createZoomButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <specifier>final</specifier>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>ResourceBundleUtil</name>
                            </type>
                            <name>labels</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>ResourceBundleUtil</name>.
                                            <name>getLAFBundle</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>"org.jhotdraw.draw.Labels"</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <specifier>final</specifier>
                                <name>JPopupButton</name>
                            </type>
                            <name>zoomPopupButton</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>JPopupButton</name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>labels</name>.
                                    <name>configureToolBarButton</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>zoomPopupButton</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"viewZoom"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>zoomPopupButton</name>.
                                    <name>setFocusable</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>editor</name>.
                                        <name>getDrawingViews</name>
                                    </name>
                                    <argument_list>()</argument_list>
                                </call>
                                .
                                <call>
                                    <name>size</name>
                                    <argument_list>()</argument_list>
                                </call>
                                == 0
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>zoomPopupButton</name>.
                                                <name>setText</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>"100 %"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                        <else>else
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>zoomPopupButton</name>.
                                                <name>setText</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <call>(<name>int</name>)
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>editor</name>.
                                                                                <name>getDrawingViews</name>
                                                                            </name>
                                                                            <argument_list>()</argument_list>
                                                                        </call>
                                                                        .
                                                                        <call>
                                                                            <name>iterator</name>
                                                                            <argument_list>()</argument_list>
                                                                        </call>
                                                                        .
                                                                        <call>
                                                                            <name>next</name>
                                                                            <argument_list>()</argument_list>
                                                                        </call>
                                                                        .
                                                                        <call>
                                                                            <name>getScaleFactor</name>
                                                                            <argument_list>()</argument_list>
                                                                        </call>
                                                                        * 100
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                        + " %"
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </else>
                    </if>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>editor</name>.
                                    <name>addPropertyChangeListener</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <class>
                                                <super>
                                                    <name>PropertyChangeListener</name>
                                                </super>
                                                <argument_list>()</argument_list>
                                                <block>{
                                                    <function>
                                                        <type>
                                                            <specifier>public</specifier>
                                                            <name>void</name>
                                                        </type>
                                                        <name>propertyChange</name>
                                                        <parameter_list>(
                                                            <param>
                                                                <decl>
                                                                    <type>
                                                                        <name>PropertyChangeEvent</name>
                                                                    </type>
                                                                    <name>evt</name>
                                                                </decl>
                                                            </param>
                                                            )
                                                        </parameter_list>
                                                        <block>{
                                                            <comment type="line">// String constants are interned
                                                            </comment>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>evt</name>.
                                                                                <name>getPropertyName</name>
                                                                            </name>
                                                                            <argument_list>()</argument_list>
                                                                        </call>
                                                                        ==
                                                                        <name><name>DrawingEditor</name>.
                                                                            <name>ACTIVE_VIEW_PROPERTY</name>
                                                                        </name>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <if>if
                                                                            <condition>(
                                                                                <expr>
                                                                                    <call>
                                                                                        <name><name>evt</name>.
                                                                                            <name>getNewValue</name>
                                                                                        </name>
                                                                                        <argument_list>()
                                                                                        </argument_list>
                                                                                    </call>
                                                                                    ==
                                                                                    <name>null</name>
                                                                                </expr>
                                                                                )
                                                                            </condition>
                                                                            <then>
                                                                                <block>{
                                                                                    <expr_stmt>
                                                                                        <expr>
                                                                                            <call>
                                                                                                <name><name>
                                                                                                    zoomPopupButton</name>
                                                                                                    .
                                                                                                    <name>setText</name>
                                                                                                </name>
                                                                                                <argument_list>(
                                                                                                    <argument>
                                                                                                        <expr>"100 %"
                                                                                                        </expr>
                                                                                                    </argument>
                                                                                                    )
                                                                                                </argument_list>
                                                                                            </call>
                                                                                        </expr>
                                                                                        ;
                                                                                    </expr_stmt>
                                                                                    }
                                                                                </block>
                                                                            </then>
                                                                            <else>else
                                                                                <block>{
                                                                                    <expr_stmt>
                                                                                        <expr>
                                                                                            <call>
                                                                                                <name><name>
                                                                                                    zoomPopupButton</name>
                                                                                                    .
                                                                                                    <name>setText</name>
                                                                                                </name>
                                                                                                <argument_list>(
                                                                                                    <argument>
                                                                                                        <expr>
                                                                                                            <call>
                                                                                                                (<name>
                                                                                                                int</name>)
                                                                                                                <argument_list>
                                                                                                                    (
                                                                                                                    <argument>
                                                                                                                        <expr>
                                                                                                                            <call>
                                                                                                                                <name>
                                                                                                                                    <name>
                                                                                                                                        editor</name>
                                                                                                                                    .
                                                                                                                                    <name>
                                                                                                                                        getActiveView
                                                                                                                                    </name>
                                                                                                                                </name>
                                                                                                                                <argument_list>
                                                                                                                                    ()
                                                                                                                                </argument_list>
                                                                                                                            </call>
                                                                                                                            .
                                                                                                                            <call>
                                                                                                                                <name>
                                                                                                                                    getScaleFactor
                                                                                                                                </name>
                                                                                                                                <argument_list>
                                                                                                                                    ()
                                                                                                                                </argument_list>
                                                                                                                            </call>
                                                                                                                            *
                                                                                                                            100
                                                                                                                        </expr>
                                                                                                                    </argument>
                                                                                                                    )
                                                                                                                </argument_list>
                                                                                                            </call>
                                                                                                            + " %"
                                                                                                        </expr>
                                                                                                    </argument>
                                                                                                    )
                                                                                                </argument_list>
                                                                                            </call>
                                                                                        </expr>
                                                                                        ;
                                                                                    </expr_stmt>
                                                                                    }
                                                                                </block>
                                                                            </else>
                                                                        </if>
                                                                        }
                                                                    </block>
                                                                </then>
                                                            </if>
                                                            }
                                                        </block>
                                                    </function>
                                                    }
                                                </block>
                                            </class>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                                <index>[]</index>
                            </type>
                            <name>factors</name> =
                            <init>
                                <expr>
                                    <block>{<expr>16</expr>, <expr>8</expr>, <expr>5</expr>, <expr>4</expr>, <expr>
                                        3</expr>, <expr>2</expr>, <expr>1.5</expr>, <expr>1.25</expr>, <expr>
                                        1</expr>, <expr>0.75</expr>, <expr>0.5</expr>, <expr>0.25</expr>, <expr>
                                        0.10</expr>}
                                    </block>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <for>for (
                        <init>
                            <decl>
                                <type>
                                    <name>int</name>
                                </type>
                                <name>i</name>=
                                <init>
                                    <expr>0</expr>
                                </init>
                            </decl>
                            ;
                        </init>
                        <condition>
                            <expr>
                                <name>i</name>
                                &lt;
                                <name><name>factors</name>.
                                    <name>length</name>
                                </name>
                            </expr>
                            ;
                        </condition>
                        <incr>
                            <expr><name>i</name>++
                            </expr>
                        </incr>
                        )
                        <block>{
                            <expr_stmt>
                                <expr>
                                    <call>
                                        <name><name>zoomPopupButton</name>.
                                            <name>add</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>new
                                                    <class>
                                                        <super>
                                                            <name>ZoomEditorAction</name>
                                                        </super>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>editor</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>
                                                                        <name>factors</name>
                                                                        <index>[
                                                                            <expr>
                                                                                <name>i</name>
                                                                            </expr>
                                                                            ]
                                                                        </index>
                                                                    </name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>zoomPopupButton</name>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                        <block>{
                                                            <function>
                                                                <type>
                                                                    <specifier>public</specifier>
                                                                    <name>void</name>
                                                                </type>
                                                                <name>actionPerformed</name>
                                                                <parameter_list>(
                                                                    <param>
                                                                        <decl>
                                                                            <type>
                                                                                <name><name>java</name>.<name>awt</name>.<name>
                                                                                    event</name>.
                                                                                    <name>ActionEvent</name>
                                                                                </name>
                                                                            </type>
                                                                            <name>e</name>
                                                                        </decl>
                                                                    </param>
                                                                    )
                                                                </parameter_list>
                                                                <block>{
                                                                    <expr_stmt>
                                                                        <expr>
                                                                            <call>
                                                                                <name><name>super</name>.
                                                                                    <name>actionPerformed</name>
                                                                                </name>
                                                                                <argument_list>(
                                                                                    <argument>
                                                                                        <expr>
                                                                                            <name>e</name>
                                                                                        </expr>
                                                                                    </argument>
                                                                                    )
                                                                                </argument_list>
                                                                            </call>
                                                                        </expr>
                                                                        ;
                                                                    </expr_stmt>
                                                                    <expr_stmt>
                                                                        <expr>
                                                                            <call>
                                                                                <name><name>zoomPopupButton</name>.
                                                                                    <name>setText</name>
                                                                                </name>
                                                                                <argument_list>(
                                                                                    <argument>
                                                                                        <expr>
                                                                                            <call>(<name>int</name>)
                                                                                                <argument_list>(
                                                                                                    <argument>
                                                                                                        <expr>
                                                                                                            <call>
                                                                                                                <name>
                                                                                                                    <name>
                                                                                                                        editor</name>
                                                                                                                    .
                                                                                                                    <name>
                                                                                                                        getActiveView
                                                                                                                    </name>
                                                                                                                </name>
                                                                                                                <argument_list>
                                                                                                                    ()
                                                                                                                </argument_list>
                                                                                                            </call>
                                                                                                            .
                                                                                                            <call>
                                                                                                                <name>
                                                                                                                    getScaleFactor
                                                                                                                </name>
                                                                                                                <argument_list>
                                                                                                                    ()
                                                                                                                </argument_list>
                                                                                                            </call>
                                                                                                            * 100
                                                                                                        </expr>
                                                                                                    </argument>
                                                                                                    )
                                                                                                </argument_list>
                                                                                            </call>
                                                                                            + " %"
                                                                                        </expr>
                                                                                    </argument>
                                                                                    )
                                                                                </argument_list>
                                                                            </call>
                                                                        </expr>
                                                                        ;
                                                                    </expr_stmt>
                                                                    }
                                                                </block>
                                                            </function>
                                                            }
                                                        </block>
                                                    </class>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                                ;
                            </expr_stmt>
                            }
                        </block>
                    </for>
                    <comment type="line">//zoomPopupButton.setPreferredSize(new Dimension(16,16));</comment>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>zoomPopupButton</name>.
                                    <name>setFocusable</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <return>return
                        <expr>
                            <name>zoomPopupButton</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>AbstractButton</name>
                </type>
                <name>createZoomButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingView</name>
                            </type>
                            <name>view</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <return>return
                        <expr>
                            <call>
                                <name>createZoomButton</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>view</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>new
                                            <name>
                                                <name>double</name>
                                                <index>[]</index>
                                            </name>
                                            <block>{
                                                <expr>5</expr>, <expr>4</expr>, <expr>3</expr>, <expr>2</expr>, <expr>
                                                    1.5</expr>, <expr>1.25</expr>, <expr>1</expr>, <expr>
                                                    0.75</expr>, <expr>0.5</expr>, <expr>0.25</expr>,
                                                <expr>0.10</expr>
                                                }
                                            </block>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>AbstractButton</name>
                </type>
                <name>createZoomButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <specifier>final</specifier>
                                <name>DrawingView</name>
                            </type>
                            <name>view</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>
                                    <name>double</name>
                                    <index>[]</index>
                                </name>
                            </type>
                            <name>factors</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>ResourceBundleUtil</name>
                            </type>
                            <name>labels</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>ResourceBundleUtil</name>.
                                            <name>getLAFBundle</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>"org.jhotdraw.draw.Labels"</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <specifier>final</specifier>
                                <name>JPopupButton</name>
                            </type>
                            <name>zoomPopupButton</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>JPopupButton</name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>labels</name>.
                                    <name>configureToolBarButton</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>zoomPopupButton</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"viewZoom"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>zoomPopupButton</name>.
                                    <name>setFocusable</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>zoomPopupButton</name>.
                                    <name>setText</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <call>(<name>int</name>)
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <call>
                                                                <name><name>view</name>.
                                                                    <name>getScaleFactor</name>
                                                                </name>
                                                                <argument_list>()</argument_list>
                                                            </call>
                                                            * 100
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                            + " %"
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>view</name>.
                                    <name>addPropertyChangeListener</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <class>
                                                <super>
                                                    <name>PropertyChangeListener</name>
                                                </super>
                                                <argument_list>()</argument_list>
                                                <block>{
                                                    <function>
                                                        <type>
                                                            <specifier>public</specifier>
                                                            <name>void</name>
                                                        </type>
                                                        <name>propertyChange</name>
                                                        <parameter_list>(
                                                            <param>
                                                                <decl>
                                                                    <type>
                                                                        <name>PropertyChangeEvent</name>
                                                                    </type>
                                                                    <name>evt</name>
                                                                </decl>
                                                            </param>
                                                            )
                                                        </parameter_list>
                                                        <block>{
                                                            <comment type="line">// String constants are interned
                                                            </comment>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>evt</name>.
                                                                                <name>getPropertyName</name>
                                                                            </name>
                                                                            <argument_list>()</argument_list>
                                                                        </call>
                                                                        == "scaleFactor"
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>zoomPopupButton</name>.
                                                                                        <name>setText</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <call>(<name>int</name>)
                                                                                                    <argument_list>(
                                                                                                        <argument>
                                                                                                            <expr>
                                                                                                                <call>
                                                                                                                    <name>
                                                                                                                        <name>
                                                                                                                            view</name>
                                                                                                                        .
                                                                                                                        <name>
                                                                                                                            getScaleFactor
                                                                                                                        </name>
                                                                                                                    </name>
                                                                                                                    <argument_list>
                                                                                                                        ()
                                                                                                                    </argument_list>
                                                                                                                </call>
                                                                                                                * 100
                                                                                                            </expr>
                                                                                                        </argument>
                                                                                                        )
                                                                                                    </argument_list>
                                                                                                </call>
                                                                                                + " %"
                                                                                            </expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        }
                                                                    </block>
                                                                </then>
                                                            </if>
                                                            }
                                                        </block>
                                                    </function>
                                                    }
                                                </block>
                                            </class>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <for>for (
                        <init>
                            <decl>
                                <type>
                                    <name>int</name>
                                </type>
                                <name>i</name>=
                                <init>
                                    <expr>0</expr>
                                </init>
                            </decl>
                            ;
                        </init>
                        <condition>
                            <expr>
                                <name>i</name>
                                &lt;
                                <name><name>factors</name>.
                                    <name>length</name>
                                </name>
                            </expr>
                            ;
                        </condition>
                        <incr>
                            <expr><name>i</name>++
                            </expr>
                        </incr>
                        )
                        <block>{
                            <expr_stmt>
                                <expr>
                                    <call>
                                        <name><name>zoomPopupButton</name>.
                                            <name>add</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>new
                                                    <class>
                                                        <super>
                                                            <name>ZoomAction</name>
                                                        </super>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>view</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>
                                                                        <name>factors</name>
                                                                        <index>[
                                                                            <expr>
                                                                                <name>i</name>
                                                                            </expr>
                                                                            ]
                                                                        </index>
                                                                    </name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>zoomPopupButton</name>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                        <block>{
                                                            <function>
                                                                <type>
                                                                    <specifier>public</specifier>
                                                                    <name>void</name>
                                                                </type>
                                                                <name>actionPerformed</name>
                                                                <parameter_list>(
                                                                    <param>
                                                                        <decl>
                                                                            <type>
                                                                                <name><name>java</name>.<name>awt</name>.<name>
                                                                                    event</name>.
                                                                                    <name>ActionEvent</name>
                                                                                </name>
                                                                            </type>
                                                                            <name>e</name>
                                                                        </decl>
                                                                    </param>
                                                                    )
                                                                </parameter_list>
                                                                <block>{
                                                                    <expr_stmt>
                                                                        <expr>
                                                                            <call>
                                                                                <name><name>super</name>.
                                                                                    <name>actionPerformed</name>
                                                                                </name>
                                                                                <argument_list>(
                                                                                    <argument>
                                                                                        <expr>
                                                                                            <name>e</name>
                                                                                        </expr>
                                                                                    </argument>
                                                                                    )
                                                                                </argument_list>
                                                                            </call>
                                                                        </expr>
                                                                        ;
                                                                    </expr_stmt>
                                                                    <expr_stmt>
                                                                        <expr>
                                                                            <call>
                                                                                <name><name>zoomPopupButton</name>.
                                                                                    <name>setText</name>
                                                                                </name>
                                                                                <argument_list>(
                                                                                    <argument>
                                                                                        <expr>
                                                                                            <call>(<name>int</name>)
                                                                                                <argument_list>(
                                                                                                    <argument>
                                                                                                        <expr>
                                                                                                            <call>
                                                                                                                <name>
                                                                                                                    <name>
                                                                                                                        view</name>
                                                                                                                    .
                                                                                                                    <name>
                                                                                                                        getScaleFactor
                                                                                                                    </name>
                                                                                                                </name>
                                                                                                                <argument_list>
                                                                                                                    ()
                                                                                                                </argument_list>
                                                                                                            </call>
                                                                                                            * 100
                                                                                                        </expr>
                                                                                                    </argument>
                                                                                                    )
                                                                                                </argument_list>
                                                                                            </call>
                                                                                            + " %"
                                                                                        </expr>
                                                                                    </argument>
                                                                                    )
                                                                                </argument_list>
                                                                            </call>
                                                                        </expr>
                                                                        ;
                                                                    </expr_stmt>
                                                                    }
                                                                </block>
                                                            </function>
                                                            }
                                                        </block>
                                                    </class>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                                ;
                            </expr_stmt>
                            }
                        </block>
                    </for>
                    <comment type="line">//zoomPopupButton.setPreferredSize(new Dimension(16,16));</comment>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>zoomPopupButton</name>.
                                    <name>setFocusable</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <return>return
                        <expr>
                            <name>zoomPopupButton</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>
            <comment type="javadoc">/**
                * Creates toolbar buttons and adds them to the specified JToolBar
                */
            </comment>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>void</name>
                </type>
                <name>addAttributesButtonsTo</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>JToolBar</name>
                            </type>
                            <name>bar</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>ResourceBundleUtil</name>
                            </type>
                            <name>labels</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>ResourceBundleUtil</name>.
                                            <name>getLAFBundle</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>"org.jhotdraw.draw.Labels"</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>JButton</name>
                            </type>
                            <name>b</name>
                        </decl>
                        ;
                    </decl_stmt>

                    <expr_stmt>
                        <expr>
                            <name>b</name>
                            =
                            <call>
                                <name><name>bar</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>PickAttributesAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>b</name>.
                                    <name>setFocusable</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <name>b</name>
                            =
                            <call>
                                <name><name>bar</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>ApplyAttributesAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>b</name>.
                                    <name>setFocusable</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>bar</name>.
                                    <name>addSeparator</name>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <expr_stmt>
                        <expr>
                            <call>
                                <name>addColorButtonsTo</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>bar</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>editor</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>bar</name>.
                                    <name>addSeparator</name>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>addStrokeButtonsTo</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>bar</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>editor</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>bar</name>.
                                    <name>addSeparator</name>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>addFontButtonsTo</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>bar</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>editor</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    }
                </block>
            </function>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>void</name>
                </type>
                <name>addColorButtonsTo</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>JToolBar</name>
                            </type>
                            <name>bar</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>addColorButtonsTo</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>bar</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>editor</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>DEFAULT_COLORS</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>DEFAULT_COLORS_COLUMN_COUNT</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    }
                </block>
            </function>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>void</name>
                </type>
                <name>addColorButtonsTo</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>JToolBar</name>
                            </type>
                            <name>bar</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name><name>java</name>.<name>util</name>.
                                    <name>
                                        <name>List</name>
                                        <argument_list>&lt;
                                            <argument>
                                                <name>ColorIcon</name>
                                            </argument>
                                            &gt;
                                        </argument_list>
                                    </name>
                                </name>
                            </type>
                            <name>colors</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>columnCount</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>ResourceBundleUtil</name>
                            </type>
                            <name>labels</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>ResourceBundleUtil</name>.
                                            <name>getLAFBundle</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>"org.jhotdraw.draw.Labels"</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>bar</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>createEditorColorButton</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>STROKE_COLOR</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>colors</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>columnCount</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"attribute.strokeColor"</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>labels</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>new
                                                            <call>
                                                                <name>
                                                                    <name>HashMap</name>
                                                                    <argument_list>&lt;
                                                                        <argument>
                                                                            <name>AttributeKey</name>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <name>Object</name>
                                                                        </argument>
                                                                        &gt;
                                                                    </argument_list>
                                                                </name>
                                                                <argument_list>()</argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>bar</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>createEditorColorButton</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>FILL_COLOR</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>colors</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>columnCount</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"attribute.fillColor"</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>labels</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>new
                                                            <call>
                                                                <name>
                                                                    <name>HashMap</name>
                                                                    <argument_list>&lt;
                                                                        <argument>
                                                                            <name>AttributeKey</name>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <name>Object</name>
                                                                        </argument>
                                                                        &gt;
                                                                    </argument_list>
                                                                </name>
                                                                <argument_list>()</argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>bar</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>createEditorColorButton</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>TEXT_COLOR</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>colors</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>columnCount</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"attribute.textColor"</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>labels</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>new
                                                            <call>
                                                                <name>
                                                                    <name>HashMap</name>
                                                                    <argument_list>&lt;
                                                                        <argument>
                                                                            <name>AttributeKey</name>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <name>Object</name>
                                                                        </argument>
                                                                        &gt;
                                                                    </argument_list>
                                                                </name>
                                                                <argument_list>()</argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    }
                </block>
            </function>
            <comment type="javadoc">/**
                * Creates a color button, with an action region and a popup menu. The
                * button works like the color button in Microsoft Office:
                * &lt;ul&gt;
                * &lt;li&gt;When the user clicks on the action region, the default color of the
                * DrawingEditor is applied to the selected figures.&lt;/li&gt;
                * &lt;li&gt;When the user opens the popup menu, a color palette is displayed.
                * Choosing a color from the palette changes the default color of the
                * editor and also changes the color of the selected figures.&lt;/li&gt;
                * &lt;li&gt;A rectangle on the color button displays the current default color of
                * the DrawingEditor. The rectangle has the dimensions 1, 17, 20, 4 (x, y,
                * width, height).&lt;/li&gt;
                * &lt;/ul&gt;
                *
                * @param editor The DrawingEditor.
                * @param attributeKey The AttributeKey of the default color.
                * @param swatches A list with labeled colors containing the color palette
                * of the popup menu. The actual labels are retrieved from the supplied
                * resource bundle. This is usually a LinkedMap, so that the colors have
                * a predictable order.
                * @param columnCount The number of columns of the color palette.
                * @param labelKey The resource bundle key used for retrieving the icon and
                * the tooltip of the button.
                * @param labels The resource bundle.
                */
            </comment>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JPopupButton</name>
                </type>
                <name>createEditorColorButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>AttributeKey</name>
                            </type>
                            <name>attributeKey</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name><name>java</name>.<name>util</name>.
                                    <name>
                                        <name>List</name>
                                        <argument_list>&lt;
                                            <argument>
                                                <name>ColorIcon</name>
                                            </argument>
                                            &gt;
                                        </argument_list>
                                    </name>
                                </name>
                            </type>
                            <name>swatches</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>columnCount</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>labelKey</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>ResourceBundleUtil</name>
                            </type>
                            <name>labels</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <return>return
                        <expr>
                            <call>
                                <name>createEditorColorButton</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>editor</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>attributeKey</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>swatches</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>columnCount</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>labelKey</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>labels</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>null</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>
            <comment type="javadoc">/**
                * Creates a color button, with an action region and a popup menu. The
                * button works like the color button in Microsoft Office:
                * &lt;ul&gt;
                * &lt;li&gt;When the user clicks on the action region, the default color of the
                * DrawingEditor is applied to the selected figures.&lt;/li&gt;
                * &lt;li&gt;When the user opens the popup menu, a color palette is displayed.
                * Choosing a color from the palette changes the default color of the
                * editor and also changes the color of the selected figures.&lt;/li&gt;
                * &lt;li&gt;A rectangle on the color button displays the current default color of
                * the DrawingEditor. The rectangle has the dimensions 1, 17, 20, 4 (x, y,
                * width, height).&lt;/li&gt;
                * &lt;/ul&gt;
                *
                * @param editor The DrawingEditor.
                * @param attributeKey The AttributeKey of the default color.
                * @param swatches A list with labeled colors containing the color palette
                * of the popup menu. The actual labels are retrieved from the supplied
                * resource bundle. This is usually a LinkedMap, so that the colors have
                * a predictable order.
                * @param columnCount The number of columns of the color palette.
                * @param labelKey The resource bundle key used for retrieving the icon and
                * the tooltip of the button.
                * @param labels The resource bundle.
                * @param defaultAttributes A set of attributes which are also applied to
                * the selected figures, when a color is selected. This can be used, to
                * set attributes that otherwise prevent the color from being shown. For
                * example, when the color attribute is set, we wan't the gradient attribute
                * of the Figure to be cleared.
                */
            </comment>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JPopupButton</name>
                </type>
                <name>createEditorColorButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>AttributeKey</name>
                            </type>
                            <name>attributeKey</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name><name>java</name>.<name>util</name>.
                                    <name>
                                        <name>List</name>
                                        <argument_list>&lt;
                                            <argument>
                                                <name>ColorIcon</name>
                                            </argument>
                                            &gt;
                                        </argument_list>
                                    </name>
                                </name>
                            </type>
                            <name>swatches</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>columnCount</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>labelKey</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>ResourceBundleUtil</name>
                            </type>
                            <name>labels</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>
                                    <name>Map</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>defaultAttributes</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <return>return
                        <expr>
                            <call>
                                <name>createEditorColorButton</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>editor</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>attributeKey</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>swatches</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>columnCount</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>labelKey</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>labels</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>defaultAttributes</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>Rectangle</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>1</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>17</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>20</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>4</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Creates a color button, with an action region and a popup menu. The
                * button works like the color button in Microsoft Office:
                * &lt;ul&gt;
                * &lt;li&gt;When the user clicks on the action region, the default color of the
                * DrawingEditor is applied to the selected figures.&lt;/li&gt;
                * &lt;li&gt;When the user opens the popup menu, a color palette is displayed.
                * Choosing a color from the palette changes the default color of the
                * editor and also changes the color of the selected figures.&lt;/li&gt;
                * &lt;li&gt;A shape on the color button displays the current default color of the
                * DrawingEditor.&lt;/li&gt;
                * &lt;/ul&gt;
                *
                * @param editor The DrawingEditor.
                * @param attributeKey The AttributeKey of the default color.
                * @param swatches A list with labeled colors containing the color palette
                * of the popup menu. The actual labels are retrieved from the supplied
                * resource bundle. This is usually a LinkedHashMap, so that the colors have
                * a predictable order.
                * @param columnCount The number of columns of the color palette.
                * @param labelKey The resource bundle key used for retrieving the icon and
                * the tooltip of the button.
                * @param labels The resource bundle.
                * @param defaultAttributes A set of attributes which are also applied to
                * the selected figures, when a color is selected. This can be used, to
                * set attributes that otherwise prevent the color from being shown. For
                * example, when the color attribute is set, we wan't the gradient attribute
                * of the Figure to be cleared.
                * @param colorShape This shape is superimposed on the icon of the button.
                * The shape is drawn with the default color of the DrawingEditor.
                */
            </comment>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JPopupButton</name>
                </type>
                <name>createEditorColorButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>AttributeKey</name>
                            </type>
                            <name>attributeKey</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name><name>java</name>.<name>util</name>.
                                    <name>
                                        <name>List</name>
                                        <argument_list>&lt;
                                            <argument>
                                                <name>ColorIcon</name>
                                            </argument>
                                            &gt;
                                        </argument_list>
                                    </name>
                                </name>
                            </type>
                            <name>swatches</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>columnCount</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>labelKey</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>ResourceBundleUtil</name>
                            </type>
                            <name>labels</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>
                                    <name>Map</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>defaultAttributes</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>Shape</name>
                            </type>
                            <name>colorShape</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <specifier>final</specifier>
                                <name>JPopupButton</name>
                            </type>
                            <name>popupButton</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>JPopupButton</name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>defaultAttributes</name>
                                ==
                                <name>null</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name>defaultAttributes</name>
                                        = new
                                        <call>
                                            <name>
                                                <name>HashMap</name>
                                                <argument_list>&lt;
                                                    <argument>
                                                        <name>AttributeKey</name>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <name>Object</name>
                                                    </argument>
                                                    &gt;
                                                </argument_list>
                                            </name>
                                            <argument_list>()</argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>

                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>popupButton</name>.
                                    <name>setAction</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>DefaultAttributeAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>attributeKey</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>defaultAttributes</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>Rectangle</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>0</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>0</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>22</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>22</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>popupButton</name>.
                                    <name>setColumnCount</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>columnCount</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <for>for (
                        <init>
                            <decl>
                                <type>
                                    <name>ColorIcon</name>
                                </type>
                                <name>swatch</name> :
                                <range>
                                    <expr>
                                        <name>swatches</name>
                                    </expr>
                                </range>
                            </decl>
                        </init>
                        )
                        <block>{
                            <decl_stmt>
                                <decl>
                                    <type>
                                        <name>AttributeAction</name>
                                    </type>
                                    <name>a</name>
                                </decl>
                                ;
                            </decl_stmt>
                            <decl_stmt>
                                <decl>
                                    <type>
                                        <name>
                                            <name>HashMap</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>AttributeKey</name>
                                                </argument>
                                                ,
                                                <argument>
                                                    <name>Object</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                    </type>
                                    <name>attributes</name> =
                                    <init>
                                        <expr>new
                                            <call>
                                                <name>
                                                    <name>HashMap</name>
                                                    <argument_list>&lt;
                                                        <argument>
                                                            <name>AttributeKey</name>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <name>Object</name>
                                                        </argument>
                                                        &gt;
                                                    </argument_list>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>defaultAttributes</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </init>
                                </decl>
                                ;
                            </decl_stmt>
                            <expr_stmt>
                                <expr>
                                    <call>
                                        <name><name>attributes</name>.
                                            <name>put</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>attributeKey</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name><name>swatch</name>.
                                                            <name>getColor</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                                ;
                            </expr_stmt>
                            <expr_stmt>
                                <expr>
                                    <call>
                                        <name><name>popupButton</name>.
                                            <name>add</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr><name>a</name>=
                                                    new
                                                    <call>
                                                        <name>AttributeAction</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>editor</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>attributes</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <call>
                                                                        <name><name>labels</name>.
                                                                            <name>getString</name>
                                                                        </name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>
                                                                                    <name>labelKey</name>
                                                                                </expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>swatch</name>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                                ;
                            </expr_stmt>
                            <expr_stmt>
                                <expr>
                                    <call>
                                        <name><name>a</name>.
                                            <name>putValue</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name><name>Action</name>.
                                                        <name>SHORT_DESCRIPTION</name>
                                                    </name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name><name>swatch</name>.
                                                            <name>getName</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                                ;
                            </expr_stmt>
                            }
                        </block>
                    </for>

                    <comment type="line">// No color</comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>AttributeAction</name>
                            </type>
                            <name>a</name>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>attributes</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>
                                            <name>HashMap</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>AttributeKey</name>
                                                </argument>
                                                ,
                                                <argument>
                                                    <name>Object</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>defaultAttributes</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>attributes</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>attributeKey</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>null</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>popupButton</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr><name>a</name>=
                                            new
                                            <call>
                                                <name>AttributeAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>attributes</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <call>
                                                                <name><name>labels</name>.
                                                                    <name>getString</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"noColor"</expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>new
                                                            <call>
                                                                <name>ColorIcon</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            <name>null</name>
                                                                        </expr>
                                                                    </argument>
                                                                    ,
                                                                    <argument>
                                                                        <expr>"---"</expr>
                                                                    </argument>
                                                                    ,
                                                                    <argument>
                                                                        <expr>
                                                                            <call>
                                                                                <name><name>swatches</name>.
                                                                                    <name>get</name>
                                                                                </name>
                                                                                <argument_list>(
                                                                                    <argument>
                                                                                        <expr>0</expr>
                                                                                    </argument>
                                                                                    )
                                                                                </argument_list>
                                                                            </call>
                                                                            .
                                                                            <call>
                                                                                <name>getIconWidth</name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                        </expr>
                                                                    </argument>
                                                                    ,
                                                                    <argument>
                                                                        <expr>
                                                                            <call>
                                                                                <name><name>swatches</name>.
                                                                                    <name>get</name>
                                                                                </name>
                                                                                <argument_list>(
                                                                                    <argument>
                                                                                        <expr>0</expr>
                                                                                    </argument>
                                                                                    )
                                                                                </argument_list>
                                                                            </call>
                                                                            .
                                                                            <call>
                                                                                <name>getIconHeight</name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>a</name>.
                                    <name>putValue</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name><name>Action</name>.
                                                <name>SHORT_DESCRIPTION</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"---"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <comment type="line">// Color chooser</comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>ImageIcon</name>
                            </type>
                            <name>chooserIcon</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>ImageIcon</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name><name>ButtonFactory</name>.
                                                        <name>
                                                            <name/>
                                                        </name>
                                                    </name>
                                                    class.
                                                    <call>
                                                        <name>getResource</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    "/org/jhotdraw/draw/action/images/showColorChooser.png"
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>popupButton</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>EditorColorChooserAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>attributeKey</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"color"</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>chooserIcon</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>defaultAttributes</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>labels</name>.
                                    <name>configureToolBarButton</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>popupButton</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>labelKey</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>Icon</name>
                            </type>
                            <name>icon</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>EditorColorIcon</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>editor</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>attributeKey</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name><name>labels</name>.
                                                            <name>getImageIcon</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>labelKey</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name><name>ButtonFactory</name>.
                                                                        <name>
                                                                            <name/>
                                                                        </name>
                                                                    </name>
                                                                    class
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                    .
                                                    <call>
                                                        <name>getImage</name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>colorShape</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>popupButton</name>.
                                    <name>setIcon</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>icon</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>popupButton</name>.
                                    <name>setDisabledIcon</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>icon</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>popupButton</name>.
                                    <name>setFocusable</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>editor</name>.
                                    <name>addPropertyChangeListener</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <class>
                                                <super>
                                                    <name>PropertyChangeListener</name>
                                                </super>
                                                <argument_list>()</argument_list>
                                                <block>{
                                                    <function>
                                                        <type>
                                                            <specifier>public</specifier>
                                                            <name>void</name>
                                                        </type>
                                                        <name>propertyChange</name>
                                                        <parameter_list>(
                                                            <param>
                                                                <decl>
                                                                    <type>
                                                                        <name>PropertyChangeEvent</name>
                                                                    </type>
                                                                    <name>evt</name>
                                                                </decl>
                                                            </param>
                                                            )
                                                        </parameter_list>
                                                        <block>{
                                                            <expr_stmt>
                                                                <expr>
                                                                    <call>
                                                                        <name><name>popupButton</name>.
                                                                            <name>repaint</name>
                                                                        </name>
                                                                        <argument_list>()</argument_list>
                                                                    </call>
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            }
                                                        </block>
                                                    </function>
                                                    }
                                                </block>
                                            </class>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <return>return
                        <expr>
                            <name>popupButton</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JPopupButton</name>
                </type>
                <name>createSelectionColorButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>AttributeKey</name>
                            </type>
                            <name>attributeKey</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>
                                    <name>Map</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>String</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Color</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>colorMap</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>columnCount</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>labelKey</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>ResourceBundleUtil</name>
                            </type>
                            <name>labels</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <return>return
                        <expr>
                            <call>
                                <name>createSelectionColorButton</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>editor</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>attributeKey</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>colorMap</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>columnCount</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>labelKey</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>labels</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>null</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JPopupButton</name>
                </type>
                <name>createSelectionColorButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>AttributeKey</name>
                            </type>
                            <name>attributeKey</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>
                                    <name>Map</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>String</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Color</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>colorMap</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>columnCount</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>labelKey</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>ResourceBundleUtil</name>
                            </type>
                            <name>labels</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>
                                    <name>Map</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>defaultAttributes</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <return>return
                        <expr>
                            <call>
                                <name>createSelectionColorButton</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>editor</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>attributeKey</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>colorMap</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>columnCount</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>labelKey</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>labels</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>defaultAttributes</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>Rectangle</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>1</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>17</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>20</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>4</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>
            <comment type="javadoc">/**
                * Creates a color button, with an action region and a popup menu. The
                * button works like the color button in Adobe Fireworks:
                * &lt;ul&gt;
                * &lt;li&gt;When the user clicks at the button a popup menu with a color palette
                * is displayed.
                * Choosing a color from the palette changes the default color of the
                * editor and also changes the color of the selected figures.&lt;/li&gt;
                * &lt;li&gt;A shape on the color button displays the color of the selected
                * figures. If no figures are selected, the default color of the
                * DrawingEditor is displayed.&lt;/li&gt;
                * &lt;/ul&gt;
                *
                * @param editor The DrawingEditor.
                * @param attributeKey The AttributeKey of the default color.
                * @param colorMap A map with labeled colors containing the color palette
                * of the popup menu. The actual labels are retrieved from the supplied
                * resource bundle. This is usually a LinkedHashMap, so that the colors have
                * a predictable order.
                * @param columnCount The number of columns of the color palette.
                * @param labelKey The resource bundle key used for retrieving the icon and
                * the tooltip of the button.
                * @param labels The resource bundle.
                * @param defaultAttributes A set of attributes which are also applied to
                * the selected figures, when a color is selected. This can be used, to
                * set attributes that otherwise prevent the color from being shown. For
                * example, when the color attribute is set, we wan't the gradient attribute
                * of the Figure to be cleared.
                * @param colorShape This shape is superimposed on the icon of the button.
                * The shape is drawn with the default color of the DrawingEditor.
                */
            </comment>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JPopupButton</name>
                </type>
                <name>createSelectionColorButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>AttributeKey</name>
                            </type>
                            <name>attributeKey</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>
                                    <name>Map</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>String</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Color</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>colorMap</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>columnCount</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>labelKey</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>ResourceBundleUtil</name>
                            </type>
                            <name>labels</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>
                                    <name>Map</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>defaultAttributes</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>Shape</name>
                            </type>
                            <name>colorShape</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <specifier>final</specifier>
                                <name>JPopupButton</name>
                            </type>
                            <name>popupButton</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>JPopupButton</name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>defaultAttributes</name>
                                ==
                                <name>null</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name>defaultAttributes</name>
                                        = new
                                        <call>
                                            <name>
                                                <name>HashMap</name>
                                                <argument_list>&lt;
                                                    <argument>
                                                        <name>AttributeKey</name>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <name>Object</name>
                                                    </argument>
                                                    &gt;
                                                </argument_list>
                                            </name>
                                            <argument_list>()</argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>

                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>popupButton</name>.
                                    <name>setColumnCount</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>columnCount</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <for>for (
                        <init>
                            <decl>
                                <type>
                                    <name><name>Map</name>.
                                        <name>
                                            <name>Entry</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>String</name>
                                                </argument>
                                                ,
                                                <argument>
                                                    <name>Color</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                    </name>
                                </type>
                                <name>entry</name> :
                                <range>
                                    <expr>
                                        <call>
                                            <name><name>colorMap</name>.
                                                <name>entrySet</name>
                                            </name>
                                            <argument_list>()</argument_list>
                                        </call>
                                    </expr>
                                </range>
                            </decl>
                        </init>
                        )
                        <block>{
                            <decl_stmt>
                                <decl>
                                    <type>
                                        <name>AttributeAction</name>
                                    </type>
                                    <name>a</name>
                                </decl>
                                ;
                            </decl_stmt>
                            <decl_stmt>
                                <decl>
                                    <type>
                                        <name>
                                            <name>HashMap</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>AttributeKey</name>
                                                </argument>
                                                ,
                                                <argument>
                                                    <name>Object</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                    </type>
                                    <name>attributes</name> =
                                    <init>
                                        <expr>new
                                            <call>
                                                <name>
                                                    <name>HashMap</name>
                                                    <argument_list>&lt;
                                                        <argument>
                                                            <name>AttributeKey</name>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <name>Object</name>
                                                        </argument>
                                                        &gt;
                                                    </argument_list>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>defaultAttributes</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </init>
                                </decl>
                                ;
                            </decl_stmt>
                            <expr_stmt>
                                <expr>
                                    <call>
                                        <name><name>attributes</name>.
                                            <name>put</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>attributeKey</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name><name>entry</name>.
                                                            <name>getValue</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                                ;
                            </expr_stmt>
                            <expr_stmt>
                                <expr>
                                    <call>
                                        <name><name>popupButton</name>.
                                            <name>add</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr><name>a</name>=
                                                    new
                                                    <call>
                                                        <name>AttributeAction</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>editor</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>attributes</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <call>
                                                                        <name><name>labels</name>.
                                                                            <name>getString</name>
                                                                        </name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>
                                                                                    <name>labelKey</name>
                                                                                </expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>new
                                                                    <call>
                                                                        <name>ColorIcon</name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>
                                                                                    <call>
                                                                                        <name><name>entry</name>.
                                                                                            <name>getValue</name>
                                                                                        </name>
                                                                                        <argument_list>()
                                                                                        </argument_list>
                                                                                    </call>
                                                                                </expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                                ;
                            </expr_stmt>
                            <expr_stmt>
                                <expr>
                                    <call>
                                        <name><name>a</name>.
                                            <name>putValue</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name><name>Action</name>.
                                                        <name>SHORT_DESCRIPTION</name>
                                                    </name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name><name>entry</name>.
                                                            <name>getKey</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                                ;
                            </expr_stmt>
                            }
                        </block>
                    </for>

                    <comment type="line">// No color</comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>AttributeAction</name>
                            </type>
                            <name>a</name>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>attributes</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>
                                            <name>HashMap</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>AttributeKey</name>
                                                </argument>
                                                ,
                                                <argument>
                                                    <name>Object</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>defaultAttributes</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>attributes</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>attributeKey</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>null</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>popupButton</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr><name>a</name>=
                                            new
                                            <call>
                                                <name>AttributeAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>attributes</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <call>
                                                                <name><name>labels</name>.
                                                                    <name>getString</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"noColor"</expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>new
                                                            <call>
                                                                <name>ColorIcon</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            <name>null</name>
                                                                        </expr>
                                                                    </argument>
                                                                    ,
                                                                    <argument>
                                                                        <expr>"---"</expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>a</name>.
                                    <name>putValue</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name><name>Action</name>.
                                                <name>SHORT_DESCRIPTION</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"---"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <comment type="line">// Color chooser</comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>ImageIcon</name>
                            </type>
                            <name>chooserIcon</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>ImageIcon</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name><name>ButtonFactory</name>.
                                                        <name>
                                                            <name/>
                                                        </name>
                                                    </name>
                                                    class.
                                                    <call>
                                                        <name>getResource</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    "/org/jhotdraw/draw/action/images/showColorChooser.png"
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>popupButton</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>SelectionColorChooserAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>attributeKey</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"color"</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>chooserIcon</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>defaultAttributes</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>labels</name>.
                                    <name>configureToolBarButton</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>popupButton</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>labelKey</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>Icon</name>
                            </type>
                            <name>icon</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>SelectionColorIcon</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>editor</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>attributeKey</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name><name>labels</name>.
                                                            <name>getImageIcon</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>labelKey</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name><name>ButtonFactory</name>.
                                                                        <name>
                                                                            <name/>
                                                                        </name>
                                                                    </name>
                                                                    class
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                    .
                                                    <call>
                                                        <name>getImage</name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>colorShape</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>popupButton</name>.
                                    <name>setIcon</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>icon</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>popupButton</name>.
                                    <name>setDisabledIcon</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>icon</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>popupButton</name>.
                                    <name>setFocusable</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <specifier>final</specifier>
                                <name>FigureSelectionListener</name>
                            </type>
                            <name>selectionHandler</name> =
                            <init>
                                <expr>new
                                    <class>
                                        <super>
                                            <name>FigureSelectionListener</name>
                                        </super>
                                        <argument_list>()</argument_list>
                                        <block>{
                                            <function>
                                                <type>
                                                    <specifier>public</specifier>
                                                    <name>void</name>
                                                </type>
                                                <name>selectionChanged</name>
                                                <parameter_list>(
                                                    <param>
                                                        <decl>
                                                            <type>
                                                                <name>FigureSelectionEvent</name>
                                                            </type>
                                                            <name>evt</name>
                                                        </decl>
                                                    </param>
                                                    )
                                                </parameter_list>
                                                <block>{
                                                    <expr_stmt>
                                                        <expr>
                                                            <call>
                                                                <name><name>popupButton</name>.
                                                                    <name>repaint</name>
                                                                </name>
                                                                <argument_list>()</argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    }
                                                </block>
                                            </function>
                                            }
                                        </block>
                                    </class>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>editor</name>.
                                    <name>addPropertyChangeListener</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <class>
                                                <super>
                                                    <name>PropertyChangeListener</name>
                                                </super>
                                                <argument_list>()</argument_list>
                                                <block>{
                                                    <function>
                                                        <type>
                                                            <specifier>public</specifier>
                                                            <name>void</name>
                                                        </type>
                                                        <name>propertyChange</name>
                                                        <parameter_list>(
                                                            <param>
                                                                <decl>
                                                                    <type>
                                                                        <name>PropertyChangeEvent</name>
                                                                    </type>
                                                                    <name>evt</name>
                                                                </decl>
                                                            </param>
                                                            )
                                                        </parameter_list>
                                                        <block>{
                                                            <decl_stmt>
                                                                <decl>
                                                                    <type>
                                                                        <name>String</name>
                                                                    </type>
                                                                    <name>name</name> =
                                                                    <init>
                                                                        <expr>
                                                                            <call>
                                                                                <name><name>evt</name>.
                                                                                    <name>getPropertyName</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                        </expr>
                                                                    </init>
                                                                </decl>
                                                                ;
                                                            </decl_stmt>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <name>name</name>
                                                                        ==
                                                                        <name><name>DrawingEditor</name>.
                                                                            <name>ACTIVE_VIEW_PROPERTY</name>
                                                                        </name>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <if>if
                                                                            <condition>(
                                                                                <expr>
                                                                                    <call>
                                                                                        <name><name>evt</name>.
                                                                                            <name>getOldValue</name>
                                                                                        </name>
                                                                                        <argument_list>()
                                                                                        </argument_list>
                                                                                    </call>
                                                                                    !=
                                                                                    <name>null</name>
                                                                                </expr>
                                                                                )
                                                                            </condition>
                                                                            <then>
                                                                                <block>{
                                                                                    <expr_stmt>
                                                                                        <expr>((<name>DrawingView</name>)
                                                                                            <call>
                                                                                                <name><name>evt</name>.
                                                                                                    <name>getOldValue
                                                                                                    </name>
                                                                                                </name>
                                                                                                <argument_list>()
                                                                                                </argument_list>
                                                                                            </call>
                                                                                            ).
                                                                                            <call>
                                                                                                <name>
                                                                                                    removeFigureSelectionListener
                                                                                                </name>
                                                                                                <argument_list>(
                                                                                                    <argument>
                                                                                                        <expr>
                                                                                                            <name>
                                                                                                                selectionHandler
                                                                                                            </name>
                                                                                                        </expr>
                                                                                                    </argument>
                                                                                                    )
                                                                                                </argument_list>
                                                                                            </call>
                                                                                        </expr>
                                                                                        ;
                                                                                    </expr_stmt>
                                                                                    }
                                                                                </block>
                                                                            </then>
                                                                        </if>
                                                                        <if>if
                                                                            <condition>(
                                                                                <expr>
                                                                                    <call>
                                                                                        <name><name>evt</name>.
                                                                                            <name>getNewValue</name>
                                                                                        </name>
                                                                                        <argument_list>()
                                                                                        </argument_list>
                                                                                    </call>
                                                                                    !=
                                                                                    <name>null</name>
                                                                                </expr>
                                                                                )
                                                                            </condition>
                                                                            <then>
                                                                                <block>{
                                                                                    <expr_stmt>
                                                                                        <expr>((<name>DrawingView</name>)
                                                                                            <call>
                                                                                                <name><name>evt</name>.
                                                                                                    <name>getNewValue
                                                                                                    </name>
                                                                                                </name>
                                                                                                <argument_list>()
                                                                                                </argument_list>
                                                                                            </call>
                                                                                            ).
                                                                                            <call>
                                                                                                <name>
                                                                                                    addFigureSelectionListener
                                                                                                </name>
                                                                                                <argument_list>(
                                                                                                    <argument>
                                                                                                        <expr>
                                                                                                            <name>
                                                                                                                selectionHandler
                                                                                                            </name>
                                                                                                        </expr>
                                                                                                    </argument>
                                                                                                    )
                                                                                                </argument_list>
                                                                                            </call>
                                                                                        </expr>
                                                                                        ;
                                                                                    </expr_stmt>
                                                                                    }
                                                                                </block>
                                                                            </then>
                                                                        </if>
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>popupButton</name>.
                                                                                        <name>repaint</name>
                                                                                    </name>
                                                                                    <argument_list>()</argument_list>
                                                                                </call>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        }
                                                                    </block>
                                                                </then>
                                                                <else>else
                                                                    <block>{
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>popupButton</name>.
                                                                                        <name>repaint</name>
                                                                                    </name>
                                                                                    <argument_list>()</argument_list>
                                                                                </call>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>

                                                                        }
                                                                    </block>
                                                                </else>
                                                            </if>
                                                            }
                                                        </block>
                                                    </function>
                                                    }
                                                </block>
                                            </class>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <return>return
                        <expr>
                            <name>popupButton</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>void</name>
                </type>
                <name>addStrokeButtonsTo</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>JToolBar</name>
                            </type>
                            <name>bar</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>bar</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>createStrokeDecorationButton</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>bar</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>createStrokeWidthButton</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>bar</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>createStrokeDashesButton</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>bar</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>createStrokeTypeButton</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>bar</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>createStrokePlacementButton</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>bar</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>createStrokeCapButton</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>bar</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>createStrokeJoinButton</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    }
                </block>
            </function>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JPopupButton</name>
                </type>
                <name>createStrokeWidthButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <return>return
                        <expr>
                            <call>
                                <name>createStrokeWidthButton</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>editor</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>new
                                            <name>
                                                <name>double</name>
                                                <index>[]</index>
                                            </name>
                                            <block>{<expr>0.5d</expr>, <expr>1d</expr>, <expr>2d</expr>, <expr>3d</expr>, <expr>
                                                5d</expr>, <expr>9d</expr>, <expr>13d</expr>}
                                            </block>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name><name>ResourceBundleUtil</name>.
                                                    <name>getLAFBundle</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"org.jhotdraw.draw.Labels"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JPopupButton</name>
                </type>
                <name>createStrokeWidthButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>ResourceBundleUtil</name>
                            </type>
                            <name>labels</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <return>return
                        <expr>
                            <call>
                                <name>createStrokeWidthButton</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>editor</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>new
                                            <name>
                                                <name>double</name>
                                                <index>[]</index>
                                            </name>
                                            <block>{<expr>0.5d</expr>, <expr>1d</expr>, <expr>2d</expr>, <expr>3d</expr>, <expr>
                                                5d</expr>, <expr>9d</expr>, <expr>13d</expr>}
                                            </block>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>labels</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JPopupButton</name>
                </type>
                <name>createStrokeWidthButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>
                                    <name>double</name>
                                    <index>[]</index>
                                </name>
                            </type>
                            <name>widths</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <return>return
                        <expr>
                            <call>
                                <name>createStrokeWidthButton</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>editor</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>new
                                            <name>
                                                <name>double</name>
                                                <index>[]</index>
                                            </name>
                                            <block>{<expr>0.5d</expr>, <expr>1d</expr>, <expr>2d</expr>, <expr>3d</expr>, <expr>
                                                5d</expr>, <expr>9d</expr>, <expr>13d</expr>}
                                            </block>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name><name>ResourceBundleUtil</name>.
                                                    <name>getLAFBundle</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"org.jhotdraw.draw.Labels"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JPopupButton</name>
                </type>
                <name>createStrokeWidthButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>
                                    <name>double</name>
                                    <index>[]</index>
                                </name>
                            </type>
                            <name>widths</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>ResourceBundleUtil</name>
                            </type>
                            <name>labels</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>JPopupButton</name>
                            </type>
                            <name>strokeWidthPopupButton</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>JPopupButton</name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>labels</name>.
                                    <name>configureToolBarButton</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>strokeWidthPopupButton</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"attribute.strokeWidth"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>strokeWidthPopupButton</name>.
                                    <name>setFocusable</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>NumberFormat</name>
                            </type>
                            <name>formatter</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>NumberFormat</name>.
                                            <name>getInstance</name>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>formatter</name>
                                <name>instanceof</name>
                                <name>DecimalFormat</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>((<name>DecimalFormat</name>) <name>formatter</name>).
                                        <call>
                                            <name>setMaximumFractionDigits</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>1</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <expr_stmt>
                                    <expr>((<name>DecimalFormat</name>) <name>formatter</name>).
                                        <call>
                                            <name>setMinimumFractionDigits</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>
                    <for>for (
                        <init>
                            <decl>
                                <type>
                                    <name>int</name>
                                </type>
                                <name>i</name>=
                                <init>
                                    <expr>0</expr>
                                </init>
                            </decl>
                            ;
                        </init>
                        <condition>
                            <expr>
                                <name>i</name>
                                &lt;
                                <name><name>widths</name>.
                                    <name>length</name>
                                </name>
                            </expr>
                            ;
                        </condition>
                        <incr>
                            <expr><name>i</name>++
                            </expr>
                        </incr>
                        )
                        <block>{
                            <decl_stmt>
                                <decl>
                                    <type>
                                        <name>String</name>
                                    </type>
                                    <name>label</name> =
                                    <init>
                                        <expr>
                                            <call>
                                                <name><name>Double</name>.
                                                    <name>toString</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>
                                                                <name>widths</name>
                                                                <index>[
                                                                    <expr>
                                                                        <name>i</name>
                                                                    </expr>
                                                                    ]
                                                                </index>
                                                            </name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </init>
                                </decl>
                                ;
                            </decl_stmt>
                            <decl_stmt>
                                <decl>
                                    <type>
                                        <name>Icon</name>
                                    </type>
                                    <name>icon</name> =
                                    <init>
                                        <expr>new
                                            <call>
                                                <name>StrokeIcon</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>new
                                                            <call>
                                                                <name>BasicStroke</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>(<name>float</name>)
                                                                            <name>
                                                                                <name>widths</name>
                                                                                <index>[
                                                                                    <expr>
                                                                                        <name>i</name>
                                                                                    </expr>
                                                                                    ]
                                                                                </index>
                                                                            </name>
                                                                        </expr>
                                                                    </argument>
                                                                    ,
                                                                    <argument>
                                                                        <expr>
                                                                            <name><name>BasicStroke</name>.
                                                                                <name>CAP_BUTT</name>
                                                                            </name>
                                                                        </expr>
                                                                    </argument>
                                                                    ,
                                                                    <argument>
                                                                        <expr>
                                                                            <name><name>BasicStroke</name>.
                                                                                <name>JOIN_BEVEL</name>
                                                                            </name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </init>
                                </decl>
                                ;
                            </decl_stmt>
                            <decl_stmt>
                                <decl>
                                    <type>
                                        <name>AttributeAction</name>
                                    </type>
                                    <name>a</name> =
                                    <init>
                                        <expr>new
                                            <call>
                                                <name>AttributeAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>STROKE_WIDTH</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>new
                                                            <call>
                                                                <name>Double</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            <name>
                                                                                <name>widths</name>
                                                                                <index>[
                                                                                    <expr>
                                                                                        <name>i</name>
                                                                                    </expr>
                                                                                    ]
                                                                                </index>
                                                                            </name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>label</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>icon</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </init>
                                </decl>
                                ;
                            </decl_stmt>
                            <expr_stmt>
                                <expr>
                                    <call>
                                        <name><name>a</name>.
                                            <name>putValue</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name><name>Actions</name>.
                                                        <name>UNDO_PRESENTATION_NAME_KEY</name>
                                                    </name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name><name>labels</name>.
                                                            <name>getString</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>"attribute.strokeWidth"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                                ;
                            </expr_stmt>
                            <decl_stmt>
                                <decl>
                                    <type>
                                        <name>AbstractButton</name>
                                    </type>
                                    <name>btn</name> =
                                    <init>
                                        <expr>
                                            <call>
                                                <name><name>strokeWidthPopupButton</name>.
                                                    <name>add</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>a</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </init>
                                </decl>
                                ;
                            </decl_stmt>
                            <expr_stmt>
                                <expr>
                                    <call>
                                        <name><name>btn</name>.
                                            <name>setDisabledIcon</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>icon</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                                ;
                            </expr_stmt>
                            }
                        </block>
                    </for>
                    <return>return
                        <expr>
                            <name>strokeWidthPopupButton</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JPopupButton</name>
                </type>
                <name>createStrokeDecorationButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>ResourceBundleUtil</name>
                            </type>
                            <name>labels</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>ResourceBundleUtil</name>.
                                            <name>getLAFBundle</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>"org.jhotdraw.draw.Labels"</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>JPopupButton</name>
                            </type>
                            <name>strokeDecorationPopupButton</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>JPopupButton</name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>labels</name>.
                                    <name>configureToolBarButton</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>strokeDecorationPopupButton</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"attribute.strokeDecoration"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>strokeDecorationPopupButton</name>.
                                    <name>setFocusable</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>strokeDecorationPopupButton</name>.
                                    <name>setColumnCount</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>2</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>LineDecoration</name>
                                <index>[]</index>
                            </type>
                            <name>decorations</name> =
                            <init>
                                <expr>
                                    <block>{
                                        <comment type="line">// Arrow</comment>
                                        <expr>new
                                            <call>
                                                <name>ArrowTip</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>0.35</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>12</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>11.3</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                        ,

                                        <comment type="line">// Arrow</comment>
                                        <expr>new
                                            <call>
                                                <name>ArrowTip</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>0.35</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>13</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>7</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                        ,

                                        <comment type="line">// Generalization triangle</comment>
                                        <expr>new
                                            <call>
                                                <name>ArrowTip</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name><name>Math</name>.
                                                                <name>PI</name>
                                                            </name>
                                                            / 5
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>12</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>9.8</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>true</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>true</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>false</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                        ,

                                        <comment type="line">// Dependency arrow</comment>
                                        <expr>new
                                            <call>
                                                <name>ArrowTip</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name><name>Math</name>.
                                                                <name>PI</name>
                                                            </name>
                                                            / 6
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>12</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>0</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>false</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>true</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>false</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                        ,

                                        <comment type="line">// Link arrow</comment>
                                        <expr>new
                                            <call>
                                                <name>ArrowTip</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name><name>Math</name>.
                                                                <name>PI</name>
                                                            </name>
                                                            / 11
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>13</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>0</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>false</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>true</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>true</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                        ,

                                        <comment type="line">// Aggregation diamond</comment>
                                        <expr>new
                                            <call>
                                                <name>ArrowTip</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name><name>Math</name>.
                                                                <name>PI</name>
                                                            </name>
                                                            / 6
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>10</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>18</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>false</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>true</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>false</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                        ,

                                        <comment type="line">// Composition diamond</comment>
                                        <expr>new
                                            <call>
                                                <name>ArrowTip</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name><name>Math</name>.
                                                                <name>PI</name>
                                                            </name>
                                                            / 6
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>10</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>18</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>true</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>true</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>true</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                        ,
                                        <expr>
                                            <name>null</name>
                                        </expr>
                                        }
                                    </block>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <for>for (
                        <init>
                            <decl>
                                <type>
                                    <name>int</name>
                                </type>
                                <name>i</name>=
                                <init>
                                    <expr>0</expr>
                                </init>
                            </decl>
                            ;
                        </init>
                        <condition>
                            <expr>
                                <name>i</name>
                                &lt;
                                <name><name>decorations</name>.
                                    <name>length</name>
                                </name>
                            </expr>
                            ;
                        </condition>
                        <incr>
                            <expr><name>i</name>++
                            </expr>
                        </incr>
                        )
                        <block>{
                            <expr_stmt>
                                <expr>
                                    <call>
                                        <name><name>strokeDecorationPopupButton</name>.
                                            <name>add</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>new
                                                    <call>
                                                        <name>AttributeAction</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>editor</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>START_DECORATION</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>
                                                                        <name>decorations</name>
                                                                        <index>[
                                                                            <expr>
                                                                                <name>i</name>
                                                                            </expr>
                                                                            ]
                                                                        </index>
                                                                    </name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>null</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>new
                                                                    <call>
                                                                        <name>LineDecorationIcon</name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>
                                                                                    <name>
                                                                                        <name>decorations</name>
                                                                                        <index>[
                                                                                            <expr>
                                                                                                <name>i</name>
                                                                                            </expr>
                                                                                            ]
                                                                                        </index>
                                                                                    </name>
                                                                                </expr>
                                                                            </argument>
                                                                            ,
                                                                            <argument>
                                                                                <expr>true</expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                                ;
                            </expr_stmt>
                            <expr_stmt>
                                <expr>
                                    <call>
                                        <name><name>strokeDecorationPopupButton</name>.
                                            <name>add</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>new
                                                    <call>
                                                        <name>AttributeAction</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>editor</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>END_DECORATION</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>
                                                                        <name>decorations</name>
                                                                        <index>[
                                                                            <expr>
                                                                                <name>i</name>
                                                                            </expr>
                                                                            ]
                                                                        </index>
                                                                    </name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>null</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>new
                                                                    <call>
                                                                        <name>LineDecorationIcon</name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>
                                                                                    <name>
                                                                                        <name>decorations</name>
                                                                                        <index>[
                                                                                            <expr>
                                                                                                <name>i</name>
                                                                                            </expr>
                                                                                            ]
                                                                                        </index>
                                                                                    </name>
                                                                                </expr>
                                                                            </argument>
                                                                            ,
                                                                            <argument>
                                                                                <expr>false</expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                                ;
                            </expr_stmt>
                            }
                        </block>
                    </for>

                    <return>return
                        <expr>
                            <name>strokeDecorationPopupButton</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JPopupButton</name>
                </type>
                <name>createStrokeDashesButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <return>return
                        <expr>
                            <call>
                                <name>createStrokeDashesButton</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>editor</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name><name>ResourceBundleUtil</name>.
                                                    <name>getLAFBundle</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"org.jhotdraw.draw.Labels"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JPopupButton</name>
                </type>
                <name>createStrokeDashesButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>ResourceBundleUtil</name>
                            </type>
                            <name>labels</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <return>return
                        <expr>
                            <call>
                                <name>createStrokeDashesButton</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>editor</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>new
                                            <name>
                                                <name>double</name>
                                                <index>[]</index>
                                                <index>[]</index>
                                            </name>
                                            <block>{
                                                <expr>
                                                    <name>null</name>
                                                </expr>
                                                ,
                                                <expr>
                                                    <block>{<expr>4d</expr>, <expr>4d</expr>}
                                                    </block>
                                                </expr>
                                                ,
                                                <expr>
                                                    <block>{<expr>2d</expr>, <expr>2d</expr>}
                                                    </block>
                                                </expr>
                                                ,
                                                <expr>
                                                    <block>{<expr>4d</expr>, <expr>2d</expr>}
                                                    </block>
                                                </expr>
                                                ,
                                                <expr>
                                                    <block>{<expr>2d</expr>, <expr>4d</expr>}
                                                    </block>
                                                </expr>
                                                ,
                                                <expr>
                                                    <block>{<expr>8d</expr>, <expr>2d</expr>}
                                                    </block>
                                                </expr>
                                                ,
                                                <expr>
                                                    <block>{<expr>6d</expr>, <expr>2d</expr>, <expr>2d</expr>, <expr>
                                                        2d</expr>}
                                                    </block>
                                                </expr>
                                                ,
                                                }
                                            </block>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>labels</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JPopupButton</name>
                </type>
                <name>createStrokeDashesButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>
                                    <name>double</name>
                                    <index>[]</index>
                                    <index>[]</index>
                                </name>
                            </type>
                            <name>dashes</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <return>return
                        <expr>
                            <call>
                                <name>createStrokeDashesButton</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>editor</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>dashes</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name><name>ResourceBundleUtil</name>.
                                                    <name>getLAFBundle</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"org.jhotdraw.draw.Labels"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JPopupButton</name>
                </type>
                <name>createStrokeDashesButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>
                                    <name>double</name>
                                    <index>[]</index>
                                    <index>[]</index>
                                </name>
                            </type>
                            <name>dashes</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>ResourceBundleUtil</name>
                            </type>
                            <name>labels</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>JPopupButton</name>
                            </type>
                            <name>strokeDashesPopupButton</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>JPopupButton</name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>labels</name>.
                                    <name>configureToolBarButton</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>strokeDashesPopupButton</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"attribute.strokeDashes"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>strokeDashesPopupButton</name>.
                                    <name>setFocusable</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <comment type="line">//strokeDashesPopupButton.setColumnCount(2, false);</comment>
                    <for>for (
                        <init>
                            <decl>
                                <type>
                                    <name>int</name>
                                </type>
                                <name>i</name>=
                                <init>
                                    <expr>0</expr>
                                </init>
                            </decl>
                            ;
                        </init>
                        <condition>
                            <expr>
                                <name>i</name>
                                &lt;
                                <name><name>dashes</name>.
                                    <name>length</name>
                                </name>
                            </expr>
                            ;
                        </condition>
                        <incr>
                            <expr><name>i</name>++
                            </expr>
                        </incr>
                        )
                        <block>{

                            <decl_stmt>
                                <decl>
                                    <type>
                                        <name>float</name>
                                        <index>[]</index>
                                    </type>
                                    <name>fdashes</name>
                                </decl>
                                ;
                            </decl_stmt>
                            <if>if
                                <condition>(
                                    <expr>
                                        <name>
                                            <name>dashes</name>
                                            <index>[
                                                <expr>
                                                    <name>i</name>
                                                </expr>
                                                ]
                                            </index>
                                        </name>
                                        ==
                                        <name>null</name>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name>fdashes</name>
                                                =
                                                <name>null</name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </then>
                                <else>else
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name>fdashes</name>
                                                = new
                                                <name>
                                                    <name>float</name>
                                                    <index>[
                                                        <expr>
                                                            <name>
                                                                <name>dashes</name>
                                                                <index>[
                                                                    <expr>
                                                                        <name>i</name>
                                                                    </expr>
                                                                    ]
                                                                </index>
                                                            </name>
                                                            .
                                                            <name>length</name>
                                                        </expr>
                                                        ]
                                                    </index>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <for>for (
                                            <init>
                                                <decl>
                                                    <type>
                                                        <name>int</name>
                                                    </type>
                                                    <name>j</name> =
                                                    <init>
                                                        <expr>0</expr>
                                                    </init>
                                                </decl>
                                                ;
                                            </init>
                                            <condition>
                                                <expr>
                                                    <name>j</name>
                                                    &lt;
                                                    <name>
                                                        <name>dashes</name>
                                                        <index>[
                                                            <expr>
                                                                <name>i</name>
                                                            </expr>
                                                            ]
                                                        </index>
                                                    </name>
                                                    .
                                                    <name>length</name>
                                                </expr>
                                                ;
                                            </condition>
                                            <incr>
                                                <expr><name>j</name>++
                                                </expr>
                                            </incr>
                                            )
                                            <block>{
                                                <expr_stmt>
                                                    <expr>
                                                        <name>
                                                            <name>fdashes</name>
                                                            <index>[
                                                                <expr>
                                                                    <name>j</name>
                                                                </expr>
                                                                ]
                                                            </index>
                                                        </name>
                                                        = (<name>float</name>)
                                                        <name>
                                                            <name>dashes</name>
                                                            <index>[
                                                                <expr>
                                                                    <name>i</name>
                                                                </expr>
                                                                ]
                                                            </index>
                                                            <index>[
                                                                <expr>
                                                                    <name>j</name>
                                                                </expr>
                                                                ]
                                                            </index>
                                                        </name>
                                                    </expr>
                                                    ;
                                                </expr_stmt>
                                                }
                                            </block>
                                        </for>
                                        }
                                    </block>
                                </else>
                            </if>

                            <decl_stmt>
                                <decl>
                                    <type>
                                        <name>Icon</name>
                                    </type>
                                    <name>icon</name> =
                                    <init>
                                        <expr>new
                                            <call>
                                                <name>StrokeIcon</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>new
                                                            <call>
                                                                <name>BasicStroke</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>2f</expr>
                                                                    </argument>
                                                                    ,
                                                                    <argument>
                                                                        <expr>
                                                                            <name><name>BasicStroke</name>.
                                                                                <name>CAP_BUTT</name>
                                                                            </name>
                                                                        </expr>
                                                                    </argument>
                                                                    ,
                                                                    <argument>
                                                                        <expr>
                                                                            <name><name>BasicStroke</name>.
                                                                                <name>JOIN_BEVEL</name>
                                                                            </name>
                                                                        </expr>
                                                                    </argument>
                                                                    ,
                                                                    <argument>
                                                                        <expr>10f</expr>
                                                                    </argument>
                                                                    ,
                                                                    <argument>
                                                                        <expr>
                                                                            <name>fdashes</name>
                                                                        </expr>
                                                                    </argument>
                                                                    ,
                                                                    <argument>
                                                                        <expr>0</expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </init>
                                </decl>
                                ;
                            </decl_stmt>


                            <decl_stmt>
                                <decl>
                                    <type>
                                        <name>AbstractButton</name>
                                    </type>
                                    <name>btn</name> =
                                    <init>
                                        <expr>
                                            <call>
                                                <name><name>strokeDashesPopupButton</name>.
                                                    <name>add</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>new
                                                            <call>
                                                                <name>AttributeAction</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            <name>editor</name>
                                                                        </expr>
                                                                    </argument>
                                                                    ,
                                                                    <argument>
                                                                        <expr>
                                                                            <name>STROKE_DASHES</name>
                                                                        </expr>
                                                                    </argument>
                                                                    ,
                                                                    <argument>
                                                                        <expr>
                                                                            <name>
                                                                                <name>dashes</name>
                                                                                <index>[
                                                                                    <expr>
                                                                                        <name>i</name>
                                                                                    </expr>
                                                                                    ]
                                                                                </index>
                                                                            </name>
                                                                        </expr>
                                                                    </argument>
                                                                    ,
                                                                    <argument>
                                                                        <expr>
                                                                            <name>null</name>
                                                                        </expr>
                                                                    </argument>
                                                                    ,
                                                                    <argument>
                                                                        <expr>
                                                                            <name>icon</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </init>
                                </decl>
                                ;
                            </decl_stmt>
                            <expr_stmt>
                                <expr>
                                    <call>
                                        <name><name>btn</name>.
                                            <name>setDisabledIcon</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>icon</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                                ;
                            </expr_stmt>
                            }
                        </block>
                    </for>
                    <return>return
                        <expr>
                            <name>strokeDashesPopupButton</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JPopupButton</name>
                </type>
                <name>createStrokeTypeButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>ResourceBundleUtil</name>
                            </type>
                            <name>labels</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>ResourceBundleUtil</name>.
                                            <name>getLAFBundle</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>"org.jhotdraw.draw.Labels"</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>JPopupButton</name>
                            </type>
                            <name>strokeTypePopupButton</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>JPopupButton</name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>labels</name>.
                                    <name>configureToolBarButton</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>strokeTypePopupButton</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"attribute.strokeType"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>strokeTypePopupButton</name>.
                                    <name>setFocusable</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>strokeTypePopupButton</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>AttributeAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>STROKE_TYPE</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name><name>AttributeKeys</name>.<name>StrokeType</name>.
                                                                <name>BASIC</name>
                                                            </name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <call>
                                                                <name><name>labels</name>.
                                                                    <name>getString</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"attribute.strokeType.basic"</expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>new
                                                            <call>
                                                                <name>StrokeIcon</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>new
                                                                            <call>
                                                                                <name>BasicStroke</name>
                                                                                <argument_list>(
                                                                                    <argument>
                                                                                        <expr>1</expr>
                                                                                    </argument>
                                                                                    ,
                                                                                    <argument>
                                                                                        <expr>
                                                                                            <name><name>
                                                                                                BasicStroke</name>.
                                                                                                <name>CAP_BUTT</name>
                                                                                            </name>
                                                                                        </expr>
                                                                                    </argument>
                                                                                    ,
                                                                                    <argument>
                                                                                        <expr>
                                                                                            <name><name>
                                                                                                BasicStroke</name>.
                                                                                                <name>JOIN_BEVEL</name>
                                                                                            </name>
                                                                                        </expr>
                                                                                    </argument>
                                                                                    )
                                                                                </argument_list>
                                                                            </call>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>attr</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>
                                            <name>HashMap</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>AttributeKey</name>
                                                </argument>
                                                ,
                                                <argument>
                                                    <name>Object</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>attr</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>STROKE_TYPE</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name><name>AttributeKeys</name>.<name>StrokeType</name>.
                                                <name>DOUBLE</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>attr</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>STROKE_INNER_WIDTH_FACTOR</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>2d</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>strokeTypePopupButton</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>AttributeAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>attr</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <call>
                                                                <name><name>labels</name>.
                                                                    <name>getString</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"attribute.strokeType.double"</expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>new
                                                            <call>
                                                                <name>StrokeIcon</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>new
                                                                            <call>
                                                                                <name>DoubleStroke</name>
                                                                                <argument_list>(
                                                                                    <argument>
                                                                                        <expr>2</expr>
                                                                                    </argument>
                                                                                    ,
                                                                                    <argument>
                                                                                        <expr>1</expr>
                                                                                    </argument>
                                                                                    )
                                                                                </argument_list>
                                                                            </call>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <name>attr</name>
                            = new
                            <call>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>attr</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>STROKE_TYPE</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name><name>AttributeKeys</name>.<name>StrokeType</name>.
                                                <name>DOUBLE</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>attr</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>STROKE_INNER_WIDTH_FACTOR</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>3d</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>strokeTypePopupButton</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>AttributeAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>attr</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <call>
                                                                <name><name>labels</name>.
                                                                    <name>getString</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"attribute.strokeType.double"</expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>new
                                                            <call>
                                                                <name>StrokeIcon</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>new
                                                                            <call>
                                                                                <name>DoubleStroke</name>
                                                                                <argument_list>(
                                                                                    <argument>
                                                                                        <expr>3</expr>
                                                                                    </argument>
                                                                                    ,
                                                                                    <argument>
                                                                                        <expr>1</expr>
                                                                                    </argument>
                                                                                    )
                                                                                </argument_list>
                                                                            </call>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <name>attr</name>
                            = new
                            <call>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>attr</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>STROKE_TYPE</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name><name>AttributeKeys</name>.<name>StrokeType</name>.
                                                <name>DOUBLE</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>attr</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>STROKE_INNER_WIDTH_FACTOR</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>4d</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>strokeTypePopupButton</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>AttributeAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>attr</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <call>
                                                                <name><name>labels</name>.
                                                                    <name>getString</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"attribute.strokeType.double"</expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>new
                                                            <call>
                                                                <name>StrokeIcon</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>new
                                                                            <call>
                                                                                <name>DoubleStroke</name>
                                                                                <argument_list>(
                                                                                    <argument>
                                                                                        <expr>4</expr>
                                                                                    </argument>
                                                                                    ,
                                                                                    <argument>
                                                                                        <expr>1</expr>
                                                                                    </argument>
                                                                                    )
                                                                                </argument_list>
                                                                            </call>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>


                    <return>return
                        <expr>
                            <name>strokeTypePopupButton</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JPopupButton</name>
                </type>
                <name>createStrokePlacementButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>ResourceBundleUtil</name>
                            </type>
                            <name>labels</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>ResourceBundleUtil</name>.
                                            <name>getLAFBundle</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>"org.jhotdraw.draw.Labels"</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>JPopupButton</name>
                            </type>
                            <name>strokePlacementPopupButton</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>JPopupButton</name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>labels</name>.
                                    <name>configureToolBarButton</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>strokePlacementPopupButton</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"attribute.strokePlacement"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>strokePlacementPopupButton</name>.
                                    <name>setFocusable</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>attr</name>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <name>attr</name>
                            = new
                            <call>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>attr</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>STROKE_PLACEMENT</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name><name>AttributeKeys</name>.<name>StrokePlacement</name>.
                                                <name>CENTER</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>attr</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>FILL_UNDER_STROKE</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name><name>AttributeKeys</name>.<name>Underfill</name>.
                                                <name>CENTER</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>strokePlacementPopupButton</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>AttributeAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>attr</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <call>
                                                                <name><name>labels</name>.
                                                                    <name>getString</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"attribute.strokePlacement.center"</expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>null</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <name>attr</name>
                            = new
                            <call>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>attr</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>STROKE_PLACEMENT</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name><name>AttributeKeys</name>.<name>StrokePlacement</name>.
                                                <name>INSIDE</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>attr</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>FILL_UNDER_STROKE</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name><name>AttributeKeys</name>.<name>Underfill</name>.
                                                <name>CENTER</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>strokePlacementPopupButton</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>AttributeAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>attr</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <call>
                                                                <name><name>labels</name>.
                                                                    <name>getString</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"attribute.strokePlacement.inside"</expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>null</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <name>attr</name>
                            = new
                            <call>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>attr</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>STROKE_PLACEMENT</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name><name>AttributeKeys</name>.<name>StrokePlacement</name>.
                                                <name>OUTSIDE</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>attr</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>FILL_UNDER_STROKE</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name><name>AttributeKeys</name>.<name>Underfill</name>.
                                                <name>CENTER</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>strokePlacementPopupButton</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>AttributeAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>attr</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <call>
                                                                <name><name>labels</name>.
                                                                    <name>getString</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"attribute.strokePlacement.outside"</expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>null</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <name>attr</name>
                            = new
                            <call>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>attr</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>STROKE_PLACEMENT</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name><name>AttributeKeys</name>.<name>StrokePlacement</name>.
                                                <name>CENTER</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>attr</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>FILL_UNDER_STROKE</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name><name>AttributeKeys</name>.<name>Underfill</name>.
                                                <name>FULL</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>strokePlacementPopupButton</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>AttributeAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>attr</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <call>
                                                                <name><name>labels</name>.
                                                                    <name>getString</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"attribute.strokePlacement.centerFilled"
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>null</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <name>attr</name>
                            = new
                            <call>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>attr</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>STROKE_PLACEMENT</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name><name>AttributeKeys</name>.<name>StrokePlacement</name>.
                                                <name>INSIDE</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>attr</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>FILL_UNDER_STROKE</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name><name>AttributeKeys</name>.<name>Underfill</name>.
                                                <name>FULL</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>strokePlacementPopupButton</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>AttributeAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>attr</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <call>
                                                                <name><name>labels</name>.
                                                                    <name>getString</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"attribute.strokePlacement.insideFilled"
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>null</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <name>attr</name>
                            = new
                            <call>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>attr</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>STROKE_PLACEMENT</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name><name>AttributeKeys</name>.<name>StrokePlacement</name>.
                                                <name>OUTSIDE</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>attr</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>FILL_UNDER_STROKE</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name><name>AttributeKeys</name>.<name>Underfill</name>.
                                                <name>FULL</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>strokePlacementPopupButton</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>AttributeAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>attr</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <call>
                                                                <name><name>labels</name>.
                                                                    <name>getString</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            "attribute.strokePlacement.outsideFilled"
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>null</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <name>attr</name>
                            = new
                            <call>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>attr</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>STROKE_PLACEMENT</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name><name>AttributeKeys</name>.<name>StrokePlacement</name>.
                                                <name>CENTER</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>attr</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>FILL_UNDER_STROKE</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name><name>AttributeKeys</name>.<name>Underfill</name>.
                                                <name>NONE</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>strokePlacementPopupButton</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>AttributeAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>attr</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <call>
                                                                <name><name>labels</name>.
                                                                    <name>getString</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            "attribute.strokePlacement.centerUnfilled"
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>null</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <name>attr</name>
                            = new
                            <call>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>attr</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>STROKE_PLACEMENT</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name><name>AttributeKeys</name>.<name>StrokePlacement</name>.
                                                <name>INSIDE</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>attr</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>FILL_UNDER_STROKE</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name><name>AttributeKeys</name>.<name>Underfill</name>.
                                                <name>NONE</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>strokePlacementPopupButton</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>AttributeAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>attr</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <call>
                                                                <name><name>labels</name>.
                                                                    <name>getString</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            "attribute.strokePlacement.insideUnfilled"
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>null</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <name>attr</name>
                            = new
                            <call>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>attr</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>STROKE_PLACEMENT</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name><name>AttributeKeys</name>.<name>StrokePlacement</name>.
                                                <name>OUTSIDE</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>attr</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>FILL_UNDER_STROKE</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name><name>AttributeKeys</name>.<name>Underfill</name>.
                                                <name>NONE</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>strokePlacementPopupButton</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>AttributeAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>attr</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <call>
                                                                <name><name>labels</name>.
                                                                    <name>getString</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            "attribute.strokePlacement.outsideUnfilled"
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>null</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <return>return
                        <expr>
                            <name>strokePlacementPopupButton</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>void</name>
                </type>
                <name>addFontButtonsTo</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>JToolBar</name>
                            </type>
                            <name>bar</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>bar</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>createFontButton</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>bar</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>createFontStyleBoldButton</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>bar</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>createFontStyleItalicButton</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>bar</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>createFontStyleUnderlineButton</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    }
                </block>
            </function>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JPopupButton</name>
                </type>
                <name>createFontButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <return>return
                        <expr>
                            <call>
                                <name>createFontButton</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>editor</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name><name>ResourceBundleUtil</name>.
                                                    <name>getLAFBundle</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"org.jhotdraw.draw.Labels"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JPopupButton</name>
                </type>
                <name>createFontButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>ResourceBundleUtil</name>
                            </type>
                            <name>labels</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>JPopupButton</name>
                            </type>
                            <name>fontPopupButton</name>
                        </decl>
                        ;
                    </decl_stmt>

                    <expr_stmt>
                        <expr>
                            <name>fontPopupButton</name>
                            = new
                            <call>
                                <name>JPopupButton</name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>labels</name>.
                                    <name>configureToolBarButton</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>fontPopupButton</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"attribute.font"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>fontPopupButton</name>.
                                    <name>setFocusable</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>Font</name>
                                <index>[]</index>
                            </type>
                            <name>allFonts</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>GraphicsEnvironment</name>.
                                            <name>getLocalGraphicsEnvironment</name>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                    .
                                    <call>
                                        <name>getAllFonts</name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>HashSet</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>String</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>fontExclusionList</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>
                                            <name>HashSet</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>String</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name><name>Arrays</name>.
                                                            <name>asList</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>new
                                                                    <name>
                                                                        <name>String</name>
                                                                        <index>[]</index>
                                                                    </name>
                                                                    <block>{
                                                                        <comment type="line">// Mac OS X 10.3 Font
                                                                            Exclusion List
                                                                        </comment>
                                                                        <expr>"#GungSeo"</expr>, <expr>
                                                                            "#HeadLineA"</expr>, <expr>
                                                                            "#PCMyungjo"</expr>, <expr>"#PilGi"</expr>, <expr>
                                                                            "Al Bayan"</expr>, <expr>"Apple
                                                                            LiGothic"</expr>,
                                                                        <expr>"Apple LiSung"</expr>, <expr>
                                                                            "AppleMyungjo"</expr>, <expr>"Arial
                                                                            Hebrew"</expr>, <expr>
                                                                            "Ayuthaya"</expr>, <expr>"Baghdad"</expr>,
                                                                        <expr>"BiauKai"</expr>, <expr>"Charcoal
                                                                            CY"</expr>, <expr>"Corsiva
                                                                            Hebrew"</expr>, <expr>"DecoType
                                                                            Naskh"</expr>,
                                                                        <expr>"Devanagari MT"</expr>, <expr>"Fang
                                                                            Song"</expr>, <expr>"GB18030 Bitmap"</expr>, <expr>
                                                                            "Geeza Pro"</expr>,
                                                                        <expr>"Geezah"</expr>, <expr>"Geneva CY"</expr>, <expr>
                                                                            "Gujarati MT"</expr>, <expr>"Gurmukhi
                                                                            MT"</expr>, <expr>"Hei"</expr>,
                                                                        <expr>"Helvetica CY"</expr>, <expr>"Hiragino
                                                                            Kaku Gothic Std"</expr>, <expr>"Hiragino
                                                                            Maru Gothic Pro"</expr>,
                                                                        <expr>"Hiragino Mincho Pro"</expr>, <expr>
                                                                            "Hiragino Kaku Gothic Pro"</expr>,
                                                                        <expr>"InaiMathi"</expr>,
                                                                        <expr>"Kai"</expr>,
                                                                        <expr>"Krungthep"</expr>, <expr>
                                                                            "KufiStandardGK"</expr>, <expr>"LiHei
                                                                            Pro"</expr>, <expr>"LiSong Pro"</expr>,
                                                                        <expr>"Mshtakan"</expr>,
                                                                        <expr>"Monaco CY"</expr>,
                                                                        <expr>"Nadeem"</expr>,
                                                                        <expr>"New Peninim MT"</expr>, <expr>
                                                                            "Osaka"</expr>,
                                                                        <expr>"Plantagenet Cherokee"</expr>,
                                                                        <expr>"Raanana"</expr>, <expr>
                                                                            "STFangsong"</expr>, <expr>"STHeiti"</expr>,
                                                                        <expr>"STKaiti"</expr>, <expr>
                                                                            "STSong"</expr>, <expr>
                                                                            "Sathu"</expr>, <expr>"Silom"</expr>,
                                                                        <expr>"Thonburi"</expr>, <expr>"Times CY"</expr>,

                                                                        <comment type="line">// Windows XP Professional
                                                                            Font Exclusion List
                                                                        </comment>
                                                                        <expr>"Arial Unicode MS"</expr>, <expr>
                                                                            "Batang"</expr>, <expr>"Estrangelo
                                                                            Edessa"</expr>, <expr>"Gautami"</expr>,
                                                                        <expr>"Kartika"</expr>, <expr>
                                                                            "Latha"</expr>, <expr>"Lucida Sans
                                                                            Unicode"</expr>, <expr>
                                                                            "Mangal"</expr>, <expr>"Marlett"</expr>,
                                                                        <expr>"MS Mincho"</expr>, <expr>"MS
                                                                            Outlook"</expr>, <expr>"MV
                                                                            Boli"</expr>, <expr>"OCR-B-10 BT"</expr>,
                                                                        <expr>"Raavi"</expr>, <expr>
                                                                            "Shruti"</expr>, <expr>
                                                                            "SimSun"</expr>, <expr>
                                                                            "Sylfaen"</expr>, <expr>
                                                                            "Symbol"</expr>, <expr>"Tunga"</expr>,
                                                                        <expr>"Vrinda"</expr>, <expr>"Wingdings"</expr>, <expr>
                                                                            "Wingdings 2"</expr>, <expr>"Wingdings
                                                                            3"</expr>,
                                                                        <expr>"ZWAdobeF"</expr>
                                                                        }
                                                                    </block>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>LinkedList</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>Font</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>fontList</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>
                                            <name>LinkedList</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>Font</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <for>for (
                        <init>
                            <decl>
                                <type>
                                    <name>int</name>
                                </type>
                                <name>i</name>=
                                <init>
                                    <expr>0</expr>
                                </init>
                            </decl>
                            ;
                        </init>
                        <condition>
                            <expr>
                                <name>i</name>
                                &lt;
                                <name><name>allFonts</name>.
                                    <name>length</name>
                                </name>
                            </expr>
                            ;
                        </condition>
                        <incr>
                            <expr><name>i</name>++
                            </expr>
                        </incr>
                        )
                        <block>{
                            <if>if
                                <condition>(
                                    <expr>!
                                        <call>
                                            <name><name>fontExclusionList</name>.
                                                <name>contains</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>
                                                            <name>allFonts</name>
                                                            <index>[
                                                                <expr>
                                                                    <name>i</name>
                                                                </expr>
                                                                ]
                                                            </index>
                                                        </name>
                                                        .
                                                        <call>
                                                            <name>getFamily</name>
                                                            <argument_list>()</argument_list>
                                                        </call>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>fontList</name>.
                                                        <name>add</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>
                                                                    <name>allFonts</name>
                                                                    <index>[
                                                                        <expr>
                                                                            <name>i</name>
                                                                        </expr>
                                                                        ]
                                                                    </index>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </then>
                            </if>
                            }
                        </block>
                    </for>
                    <expr_stmt>
                        <expr>
                            <name>allFonts</name>
                            = new
                            <name>
                                <name>Font</name>
                                <index>[
                                    <expr>
                                        <call>
                                            <name><name>fontList</name>.
                                                <name>size</name>
                                            </name>
                                            <argument_list>()</argument_list>
                                        </call>
                                    </expr>
                                    ]
                                </index>
                            </name>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <name>allFonts</name>
                            = (
                            <name>
                                <name>Font</name>
                                <index>[]</index>
                            </name>
                            )
                            <call>
                                <name><name>fontList</name>.
                                    <name>toArray</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>allFonts</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>Arrays</name>.
                                    <name>sort</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>allFonts</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>new
                                            <class>
                                                <super>
                                                    <name>
                                                        <name>Comparator</name>
                                                        <argument_list>&lt;
                                                            <argument>
                                                                <name>Font</name>
                                                            </argument>
                                                            &gt;
                                                        </argument_list>
                                                    </name>
                                                </super>
                                                <argument_list>()</argument_list>
                                                <block>{
                                                    <function>
                                                        <type>
                                                            <specifier>public</specifier>
                                                            <name>int</name>
                                                        </type>
                                                        <name>compare</name>
                                                        <parameter_list>(
                                                            <param>
                                                                <decl>
                                                                    <type>
                                                                        <name>Font</name>
                                                                    </type>
                                                                    <name>f1</name>
                                                                </decl>
                                                            </param>
                                                            ,
                                                            <param>
                                                                <decl>
                                                                    <type>
                                                                        <name>Font</name>
                                                                    </type>
                                                                    <name>f2</name>
                                                                </decl>
                                                            </param>
                                                            )
                                                        </parameter_list>
                                                        <block>{
                                                            <decl_stmt>
                                                                <decl>
                                                                    <type>
                                                                        <name>int</name>
                                                                    </type>
                                                                    <name>result</name> =
                                                                    <init>
                                                                        <expr>
                                                                            <call>
                                                                                <name><name>f1</name>.
                                                                                    <name>getFamily</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            .
                                                                            <call>
                                                                                <name>compareTo</name>
                                                                                <argument_list>(
                                                                                    <argument>
                                                                                        <expr>
                                                                                            <call>
                                                                                                <name><name>f2</name>.
                                                                                                    <name>getFamily
                                                                                                    </name>
                                                                                                </name>
                                                                                                <argument_list>()
                                                                                                </argument_list>
                                                                                            </call>
                                                                                        </expr>
                                                                                    </argument>
                                                                                    )
                                                                                </argument_list>
                                                                            </call>
                                                                        </expr>
                                                                    </init>
                                                                </decl>
                                                                ;
                                                            </decl_stmt>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <name>result</name>
                                                                        == 0
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name>result</name>
                                                                                =
                                                                                <call>
                                                                                    <name><name>f1</name>.
                                                                                        <name>getFontName</name>
                                                                                    </name>
                                                                                    <argument_list>()</argument_list>
                                                                                </call>
                                                                                .
                                                                                <call>
                                                                                    <name>compareTo</name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <call>
                                                                                                    <name><name>
                                                                                                        f2</name>.
                                                                                                        <name>
                                                                                                            getFontName
                                                                                                        </name>
                                                                                                    </name>
                                                                                                    <argument_list>()
                                                                                                    </argument_list>
                                                                                                </call>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        }
                                                                    </block>
                                                                </then>
                                                            </if>
                                                            <return>return
                                                                <expr>
                                                                    <name>result</name>
                                                                </expr>
                                                                ;
                                                            </return>
                                                            }
                                                        </block>
                                                    </function>
                                                    }
                                                </block>
                                            </class>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>LinkedList</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>Font</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>fontFamilies</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>
                                            <name>LinkedList</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>Font</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>JMenu</name>
                            </type>
                            <name>submenu</name> =
                            <init>
                                <expr>
                                    <name>null</name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <for>for (
                        <init>
                            <decl>
                                <type>
                                    <name>int</name>
                                </type>
                                <name>i</name>=
                                <init>
                                    <expr>0</expr>
                                </init>
                            </decl>
                            ;
                        </init>
                        <condition>
                            <expr>
                                <name>i</name>
                                &lt;
                                <name><name>allFonts</name>.
                                    <name>length</name>
                                </name>
                            </expr>
                            ;
                        </condition>
                        <incr>
                            <expr><name>i</name>++
                            </expr>
                        </incr>
                        )
                        <block>{
                            <if>if
                                <condition>(
                                    <expr>
                                        <name>submenu</name>
                                        !=
                                        <name>null</name>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <if>if
                                            <condition>(
                                                <expr>!
                                                    <name>
                                                        <name>allFonts</name>
                                                        <index>[
                                                            <expr>
                                                                <name>i</name>
                                                            </expr>
                                                            ]
                                                        </index>
                                                    </name>
                                                    .
                                                    <call>
                                                        <name>getFamily</name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    .
                                                    <call>
                                                        <name>equals</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>
                                                                        <name>allFonts</name>
                                                                        <index>[
                                                                            <expr>
                                                                                <name>i</name>
                                                                                - 1
                                                                            </expr>
                                                                            ]
                                                                        </index>
                                                                    </name>
                                                                    .
                                                                    <call>
                                                                        <name>getFamily</name>
                                                                        <argument_list>()</argument_list>
                                                                    </call>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <expr_stmt>
                                                        <expr>
                                                            <name>submenu</name>
                                                            =
                                                            <name>null</name>
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        }
                                    </block>
                                </then>
                            </if>
                            <if>if
                                <condition>(
                                    <expr>
                                        <name>submenu</name>
                                        ==
                                        <name>null</name>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <name>i</name>
                                                    &lt;
                                                    <name><name>allFonts</name>.
                                                        <name>length</name>
                                                    </name>
                                                    - 2
                                                    &amp;&amp;
                                                    <name>
                                                        <name>allFonts</name>
                                                        <index>[
                                                            <expr>
                                                                <name>i</name>
                                                            </expr>
                                                            ]
                                                        </index>
                                                    </name>
                                                    .
                                                    <call>
                                                        <name>getFamily</name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    .
                                                    <call>
                                                        <name>equals</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>
                                                                        <name>allFonts</name>
                                                                        <index>[
                                                                            <expr>
                                                                                <name>i</name>
                                                                                + 1
                                                                            </expr>
                                                                            ]
                                                                        </index>
                                                                    </name>
                                                                    .
                                                                    <call>
                                                                        <name>getFamily</name>
                                                                        <argument_list>()</argument_list>
                                                                    </call>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <expr_stmt>
                                                        <expr>
                                                            <call>
                                                                <name><name>fontFamilies</name>.
                                                                    <name>add</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            <name>
                                                                                <name>allFonts</name>
                                                                                <index>[
                                                                                    <expr>
                                                                                        <name>i</name>
                                                                                    </expr>
                                                                                    ]
                                                                                </index>
                                                                            </name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <expr_stmt>
                                                        <expr>
                                                            <name>submenu</name>
                                                            = new
                                                            <call>
                                                                <name>JMenu</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            <name>
                                                                                <name>allFonts</name>
                                                                                <index>[
                                                                                    <expr>
                                                                                        <name>i</name>
                                                                                    </expr>
                                                                                    ]
                                                                                </index>
                                                                            </name>
                                                                            .
                                                                            <call>
                                                                                <name>getFamily</name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <comment type="line">//submenu.setFont(JPopupButton.ITEM_FONT);
                                                    </comment>
                                                    <expr_stmt>
                                                        <expr>
                                                            <call>
                                                                <name><name>fontPopupButton</name>.
                                                                    <name>add</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            <name>submenu</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </expr_stmt>

                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        }
                                    </block>
                                </then>
                            </if>
                            <decl_stmt>
                                <decl>
                                    <type>
                                        <name>Action</name>
                                    </type>
                                    <name>action</name> =
                                    <init>
                                        <expr>new
                                            <call>
                                                <name>AttributeAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>FONT_FACE</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>
                                                                <name>allFonts</name>
                                                                <index>[
                                                                    <expr>
                                                                        <name>i</name>
                                                                    </expr>
                                                                    ]
                                                                </index>
                                                            </name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>(<name>submenu</name> == <name>null</name>) ?
                                                            <name>
                                                                <name>allFonts</name>
                                                                <index>[
                                                                    <expr>
                                                                        <name>i</name>
                                                                    </expr>
                                                                    ]
                                                                </index>
                                                            </name>
                                                            .
                                                            <call>
                                                                <name>getFamily</name>
                                                                <argument_list>()</argument_list>
                                                            </call>
                                                            :
                                                            <name>
                                                                <name>allFonts</name>
                                                                <index>[
                                                                    <expr>
                                                                        <name>i</name>
                                                                    </expr>
                                                                    ]
                                                                </index>
                                                            </name>
                                                            .
                                                            <call>
                                                                <name>getFontName</name>
                                                                <argument_list>()</argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>null</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>new
                                                            <call>
                                                                <name><name>StyledEditorKit</name>.
                                                                    <name>FontFamilyAction</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            <name>
                                                                                <name>allFonts</name>
                                                                                <index>[
                                                                                    <expr>
                                                                                        <name>i</name>
                                                                                    </expr>
                                                                                    ]
                                                                                </index>
                                                                            </name>
                                                                            .
                                                                            <call>
                                                                                <name>getFontName</name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                        </expr>
                                                                    </argument>
                                                                    ,
                                                                    <argument>
                                                                        <expr>
                                                                            <name>
                                                                                <name>allFonts</name>
                                                                                <index>[
                                                                                    <expr>
                                                                                        <name>i</name>
                                                                                    </expr>
                                                                                    ]
                                                                                </index>
                                                                            </name>
                                                                            .
                                                                            <call>
                                                                                <name>getFamily</name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </init>
                                </decl>
                                ;
                            </decl_stmt>

                            <if>if
                                <condition>(
                                    <expr>
                                        <name>submenu</name>
                                        ==
                                        <name>null</name>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>fontFamilies</name>.
                                                        <name>add</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>
                                                                    <name>allFonts</name>
                                                                    <index>[
                                                                        <expr>
                                                                            <name>i</name>
                                                                        </expr>
                                                                        ]
                                                                    </index>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>fontPopupButton</name>.
                                                        <name>add</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>action</name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </then>
                                <else>else
                                    <block>{
                                        <decl_stmt>
                                            <decl>
                                                <type>
                                                    <name>JMenuItem</name>
                                                </type>
                                                <name>item</name> =
                                                <init>
                                                    <expr>
                                                        <call>
                                                            <name><name>submenu</name>.
                                                                <name>add</name>
                                                            </name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>action</name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                </init>
                                            </decl>
                                            ;
                                        </decl_stmt>
                                        <comment type="line">//item.setFont(JPopupButton.itemFont);</comment>
                                        }
                                    </block>
                                </else>
                            </if>
                            }
                        </block>
                    </for>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>fontPopupButton</name>.
                                    <name>setColumnCount</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <call>
                                                <name><name>Math</name>.
                                                    <name>max</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>1</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <call>
                                                                <name><name>fontFamilies</name>.
                                                                    <name>size</name>
                                                                </name>
                                                                <argument_list>()</argument_list>
                                                            </call>
                                                            /32
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>true</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>fontPopupButton</name>.
                                    <name>setFocusable</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <return>return
                        <expr>
                            <name>fontPopupButton</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JButton</name>
                </type>
                <name>createFontStyleBoldButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <return>return
                        <expr>
                            <call>
                                <name>createFontStyleBoldButton</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>editor</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name><name>ResourceBundleUtil</name>.
                                                    <name>getLAFBundle</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"org.jhotdraw.draw.Labels"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JButton</name>
                </type>
                <name>createFontStyleBoldButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>ResourceBundleUtil</name>
                            </type>
                            <name>labels</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>JButton</name>
                            </type>
                            <name>btn</name>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <name>btn</name>
                            = new
                            <call>
                                <name>JButton</name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>labels</name>.
                                    <name>configureToolBarButton</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>btn</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"attribute.fontStyle.bold"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>btn</name>.
                                    <name>setFocusable</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>AbstractAction</name>
                            </type>
                            <name>a</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>AttributeToggler</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>editor</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>FONT_BOLD</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name><name>Boolean</name>.
                                                        <name>TRUE</name>
                                                    </name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name><name>Boolean</name>.
                                                        <name>FALSE</name>
                                                    </name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>new
                                                    <call>
                                                        <name><name>StyledEditorKit</name>.
                                                            <name>BoldAction</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>a</name>.
                                    <name>putValue</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name><name>Actions</name>.
                                                <name>UNDO_PRESENTATION_NAME_KEY</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name><name>labels</name>.
                                                    <name>getString</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"attribute.fontStyle.bold"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>btn</name>.
                                    <name>addActionListener</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <return>return
                        <expr>
                            <name>btn</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JButton</name>
                </type>
                <name>createFontStyleItalicButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <return>return
                        <expr>
                            <call>
                                <name>createFontStyleItalicButton</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>editor</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name><name>ResourceBundleUtil</name>.
                                                    <name>getLAFBundle</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"org.jhotdraw.draw.Labels"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JButton</name>
                </type>
                <name>createFontStyleItalicButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>ResourceBundleUtil</name>
                            </type>
                            <name>labels</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>JButton</name>
                            </type>
                            <name>btn</name>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <name>btn</name>
                            = new
                            <call>
                                <name>JButton</name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>labels</name>.
                                    <name>configureToolBarButton</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>btn</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"attribute.fontStyle.italic"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>btn</name>.
                                    <name>setFocusable</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>AbstractAction</name>
                            </type>
                            <name>a</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>AttributeToggler</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>editor</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>FONT_ITALIC</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name><name>Boolean</name>.
                                                        <name>TRUE</name>
                                                    </name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name><name>Boolean</name>.
                                                        <name>FALSE</name>
                                                    </name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>new
                                                    <call>
                                                        <name><name>StyledEditorKit</name>.
                                                            <name>BoldAction</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>a</name>.
                                    <name>putValue</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name><name>Actions</name>.
                                                <name>UNDO_PRESENTATION_NAME_KEY</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name><name>labels</name>.
                                                    <name>getString</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"attribute.fontStyle.italic"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>btn</name>.
                                    <name>addActionListener</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <return>return
                        <expr>
                            <name>btn</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JButton</name>
                </type>
                <name>createFontStyleUnderlineButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <return>return
                        <expr>
                            <call>
                                <name>createFontStyleUnderlineButton</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>editor</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name><name>ResourceBundleUtil</name>.
                                                    <name>getLAFBundle</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"org.jhotdraw.draw.Labels"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JButton</name>
                </type>
                <name>createFontStyleUnderlineButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>ResourceBundleUtil</name>
                            </type>
                            <name>labels</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>JButton</name>
                            </type>
                            <name>btn</name>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <name>btn</name>
                            = new
                            <call>
                                <name>JButton</name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>labels</name>.
                                    <name>configureToolBarButton</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>btn</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"attribute.fontStyle.underline"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>btn</name>.
                                    <name>setFocusable</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>AbstractAction</name>
                            </type>
                            <name>a</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>AttributeToggler</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>editor</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>FONT_UNDERLINE</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name><name>Boolean</name>.
                                                        <name>TRUE</name>
                                                    </name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name><name>Boolean</name>.
                                                        <name>FALSE</name>
                                                    </name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>new
                                                    <call>
                                                        <name><name>StyledEditorKit</name>.
                                                            <name>BoldAction</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>a</name>.
                                    <name>putValue</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name><name>Actions</name>.
                                                <name>UNDO_PRESENTATION_NAME_KEY</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name><name>labels</name>.
                                                    <name>getString</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"attribute.fontStyle.underline"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>btn</name>.
                                    <name>addActionListener</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <return>return
                        <expr>
                            <name>btn</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>
            <comment type="javadoc">/**
                * Creates toolbar buttons and adds them to the specified JToolBar
                */
            </comment>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>void</name>
                </type>
                <name>addAlignmentButtonsTo</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>JToolBar</name>
                            </type>
                            <name>bar</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <specifier>final</specifier>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>ResourceBundleUtil</name>
                            </type>
                            <name>labels</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>ResourceBundleUtil</name>.
                                            <name>getLAFBundle</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>"org.jhotdraw.draw.Labels"</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>bar</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name><name>AlignAction</name>.
                                                    <name>West</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                            .
                            <call>
                                <name>setFocusable</name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>bar</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name><name>AlignAction</name>.
                                                    <name>East</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                            .
                            <call>
                                <name>setFocusable</name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>bar</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name><name>AlignAction</name>.
                                                    <name>Horizontal</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                            .
                            <call>
                                <name>setFocusable</name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>bar</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name><name>AlignAction</name>.
                                                    <name>North</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                            .
                            <call>
                                <name>setFocusable</name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>bar</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name><name>AlignAction</name>.
                                                    <name>South</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                            .
                            <call>
                                <name>setFocusable</name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>bar</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name><name>AlignAction</name>.
                                                    <name>Vertical</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                            .
                            <call>
                                <name>setFocusable</name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>bar</name>.
                                    <name>addSeparator</name>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>bar</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name><name>MoveAction</name>.
                                                    <name>West</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                            .
                            <call>
                                <name>setFocusable</name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>bar</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name><name>MoveAction</name>.
                                                    <name>East</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                            .
                            <call>
                                <name>setFocusable</name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>bar</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name><name>MoveAction</name>.
                                                    <name>North</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                            .
                            <call>
                                <name>setFocusable</name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>bar</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name><name>MoveAction</name>.
                                                    <name>South</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                            .
                            <call>
                                <name>setFocusable</name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>bar</name>.
                                    <name>addSeparator</name>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>bar</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>MoveToFrontAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                            .
                            <call>
                                <name>setFocusable</name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>bar</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>MoveToBackAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                            .
                            <call>
                                <name>setFocusable</name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    }
                </block>
            </function>
            <comment type="javadoc">/**
                * Creates a button which toggles between two GridConstrainer for
                * a DrawingView.
                */
            </comment>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>AbstractButton</name>
                </type>
                <name>createToggleGridButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <specifier>final</specifier>
                                <name>DrawingView</name>
                            </type>
                            <name>view</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>ResourceBundleUtil</name>
                            </type>
                            <name>labels</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>ResourceBundleUtil</name>.
                                            <name>getLAFBundle</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>"org.jhotdraw.draw.Labels"</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <specifier>final</specifier>
                                <name>JToggleButton</name>
                            </type>
                            <name>toggleButton</name>
                        </decl>
                        ;
                    </decl_stmt>

                    <expr_stmt>
                        <expr>
                            <name>toggleButton</name>
                            = new
                            <call>
                                <name>JToggleButton</name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>labels</name>.
                                    <name>configureToolBarButton</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>toggleButton</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"alignGrid"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>toggleButton</name>.
                                    <name>setFocusable</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>toggleButton</name>.
                                    <name>addItemListener</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <class>
                                                <super>
                                                    <name>ItemListener</name>
                                                </super>
                                                <argument_list>()</argument_list>
                                                <block>{
                                                    <function>
                                                        <type>
                                                            <specifier>public</specifier>
                                                            <name>void</name>
                                                        </type>
                                                        <name>itemStateChanged</name>
                                                        <parameter_list>(
                                                            <param>
                                                                <decl>
                                                                    <type>
                                                                        <name>ItemEvent</name>
                                                                    </type>
                                                                    <name>event</name>
                                                                </decl>
                                                            </param>
                                                            )
                                                        </parameter_list>
                                                        <block>{
                                                            <expr_stmt>
                                                                <expr>
                                                                    <call>
                                                                        <name><name>view</name>.
                                                                            <name>setConstrainerVisible</name>
                                                                        </name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>
                                                                                    <call>
                                                                                        <name><name>toggleButton</name>.
                                                                                            <name>isSelected</name>
                                                                                        </name>
                                                                                        <argument_list>()
                                                                                        </argument_list>
                                                                                    </call>
                                                                                </expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            <comment type="line">//view.getComponent().repaint();
                                                            </comment>
                                                            }
                                                        </block>
                                                    </function>
                                                    }
                                                </block>
                                            </class>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>view</name>.
                                    <name>addPropertyChangeListener</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <class>
                                                <super>
                                                    <name>PropertyChangeListener</name>
                                                </super>
                                                <argument_list>()</argument_list>
                                                <block>{
                                                    <function>
                                                        <type>
                                                            <specifier>public</specifier>
                                                            <name>void</name>
                                                        </type>
                                                        <name>propertyChange</name>
                                                        <parameter_list>(
                                                            <param>
                                                                <decl>
                                                                    <type>
                                                                        <name>PropertyChangeEvent</name>
                                                                    </type>
                                                                    <name>evt</name>
                                                                </decl>
                                                            </param>
                                                            )
                                                        </parameter_list>
                                                        <block>{
                                                            <comment type="line">// String constants are interned
                                                            </comment>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>evt</name>.
                                                                                <name>getPropertyName</name>
                                                                            </name>
                                                                            <argument_list>()</argument_list>
                                                                        </call>
                                                                        ==
                                                                        <name><name>DrawingView</name>.
                                                                            <name>CONSTRAINER_VISIBLE_PROPERTY</name>
                                                                        </name>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>toggleButton</name>.
                                                                                        <name>setSelected</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <call>
                                                                                                    <name><name>
                                                                                                        view</name>.
                                                                                                        <name>
                                                                                                            isConstrainerVisible
                                                                                                        </name>
                                                                                                    </name>
                                                                                                    <argument_list>()
                                                                                                    </argument_list>
                                                                                                </call>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        }
                                                                    </block>
                                                                </then>
                                                            </if>
                                                            }
                                                        </block>
                                                    </function>
                                                    }
                                                </block>
                                            </class>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <return>return
                        <expr>
                            <name>toggleButton</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JPopupButton</name>
                </type>
                <name>createStrokeCapButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <return>return
                        <expr>
                            <call>
                                <name>createStrokeCapButton</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>editor</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name><name>ResourceBundleUtil</name>.
                                                    <name>getLAFBundle</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"org.jhotdraw.draw.Labels"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JPopupButton</name>
                </type>
                <name>createStrokeCapButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>ResourceBundleUtil</name>
                            </type>
                            <name>labels</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>JPopupButton</name>
                            </type>
                            <name>popupButton</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>JPopupButton</name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>labels</name>.
                                    <name>configureToolBarButton</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>popupButton</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"attribute.strokeCap"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>popupButton</name>.
                                    <name>setFocusable</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>attr</name>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <name>attr</name>
                            = new
                            <call>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>attr</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>STROKE_CAP</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name><name>BasicStroke</name>.
                                                <name>CAP_BUTT</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>popupButton</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>AttributeAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>attr</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <call>
                                                                <name><name>labels</name>.
                                                                    <name>getString</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"attribute.strokeCap.butt"</expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>null</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <name>attr</name>
                            = new
                            <call>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>attr</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>STROKE_CAP</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name><name>BasicStroke</name>.
                                                <name>CAP_ROUND</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>popupButton</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>AttributeAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>attr</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <call>
                                                                <name><name>labels</name>.
                                                                    <name>getString</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"attribute.strokeCap.round"</expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>null</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <name>attr</name>
                            = new
                            <call>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>attr</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>STROKE_CAP</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name><name>BasicStroke</name>.
                                                <name>CAP_SQUARE</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>popupButton</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>AttributeAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>attr</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <call>
                                                                <name><name>labels</name>.
                                                                    <name>getString</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"attribute.strokeCap.square"</expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>null</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <return>return
                        <expr>
                            <name>popupButton</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JPopupButton</name>
                </type>
                <name>createStrokeJoinButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <return>return
                        <expr>
                            <call>
                                <name>createStrokeJoinButton</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>editor</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name><name>ResourceBundleUtil</name>.
                                                    <name>getLAFBundle</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"org.jhotdraw.draw.Labels"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JPopupButton</name>
                </type>
                <name>createStrokeJoinButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>ResourceBundleUtil</name>
                            </type>
                            <name>labels</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>JPopupButton</name>
                            </type>
                            <name>popupButton</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>JPopupButton</name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>labels</name>.
                                    <name>configureToolBarButton</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>popupButton</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"attribute.strokeJoin"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>popupButton</name>.
                                    <name>setFocusable</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>attr</name>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <name>attr</name>
                            = new
                            <call>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>attr</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>STROKE_JOIN</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name><name>BasicStroke</name>.
                                                <name>JOIN_BEVEL</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>popupButton</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>AttributeAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>attr</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <call>
                                                                <name><name>labels</name>.
                                                                    <name>getString</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"attribute.strokeJoin.bevel"</expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>null</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <name>attr</name>
                            = new
                            <call>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>attr</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>STROKE_JOIN</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name><name>BasicStroke</name>.
                                                <name>JOIN_ROUND</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>popupButton</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>AttributeAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>attr</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <call>
                                                                <name><name>labels</name>.
                                                                    <name>getString</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"attribute.strokeJoin.round"</expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>null</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <name>attr</name>
                            = new
                            <call>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>attr</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>STROKE_JOIN</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name><name>BasicStroke</name>.
                                                <name>JOIN_MITER</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>popupButton</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>AttributeAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>attr</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <call>
                                                                <name><name>labels</name>.
                                                                    <name>getString</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"attribute.strokeJoin.miter"</expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>null</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <return>return
                        <expr>
                            <name>popupButton</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JButton</name>
                </type>
                <name>createPickAttributesButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>JButton</name>
                            </type>
                            <name>btn</name>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <name>btn</name>
                            = new
                            <call>
                                <name>JButton</name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>PickAttributesAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>btn</name>.
                                        <name>getIcon</name>
                                    </name>
                                    <argument_list>()</argument_list>
                                </call>
                                !=
                                <name>null</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>btn</name>.
                                                <name>putClientProperty</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>"hideActionText"</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name><name>Boolean</name>.
                                                            <name>TRUE</name>
                                                        </name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>btn</name>.
                                    <name>setHorizontalTextPosition</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name><name>JButton</name>.
                                                <name>CENTER</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>btn</name>.
                                    <name>setVerticalTextPosition</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name><name>JButton</name>.
                                                <name>BOTTOM</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>btn</name>.
                                    <name>setText</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>null</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>btn</name>.
                                    <name>setFocusable</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <return>return
                        <expr>
                            <name>btn</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Creates a button that applies the default attributes of the editor to
                * the current selection.
                */
            </comment>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>JButton</name>
                </type>
                <name>createApplyAttributesButton</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DrawingEditor</name>
                            </type>
                            <name>editor</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>JButton</name>
                            </type>
                            <name>btn</name>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <name>btn</name>
                            = new
                            <call>
                                <name>JButton</name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>ApplyAttributesAction</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>editor</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>btn</name>.
                                        <name>getIcon</name>
                                    </name>
                                    <argument_list>()</argument_list>
                                </call>
                                !=
                                <name>null</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>btn</name>.
                                                <name>putClientProperty</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>"hideActionText"</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name><name>Boolean</name>.
                                                            <name>TRUE</name>
                                                        </name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>btn</name>.
                                    <name>setHorizontalTextPosition</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name><name>JButton</name>.
                                                <name>CENTER</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>btn</name>.
                                    <name>setVerticalTextPosition</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name><name>JButton</name>.
                                                <name>BOTTOM</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>btn</name>.
                                    <name>setText</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>null</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>btn</name>.
                                    <name>setFocusable</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <return>return
                        <expr>
                            <name>btn</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            }
        </block>
    </class>
</unit>
