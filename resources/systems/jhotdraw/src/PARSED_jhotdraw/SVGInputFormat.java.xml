<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.sdml.info/srcML/src" language="Java"
      filename="D:\bio\git\biorimp\BIO-RIMP\test_data\code\jhotdraw\src\main\java\org\jhotdraw\samples\svg\io\SVGInputFormat.java">
    <comment type="block">/*
        * @(#)SVGInputFormat.java 1.2 2007-07-16
        *
        * Copyright (c) 1996-2007 by the original authors of JHotDraw
        * and all its contributors.
        * All rights reserved.
        *
        * The copyright of this software is owned by the authors and
        * contributors of the JHotDraw project ("the copyright holders").
        * You may not use, copy or modify this software, except in
        * accordance with the license agreement you entered into with
        * the copyright holders. For details see accompanying license terms.
        */
    </comment>
    <package>package
        <name><name>org</name>.<name>jhotdraw</name>.<name>samples</name>.<name>svg</name>.
            <name>io</name>
        </name>
        ;
    </package>

    <import>import
        <name><name>java</name>.
            <name>awt</name>
        </name>
        .*;
    </import>
    <import>import
        <name><name>java</name>.<name>awt</name>.<name>datatransfer</name>.
            <name>DataFlavor</name>
        </name>
        ;
    </import>
    <import>import
        <name><name>java</name>.<name>awt</name>.<name>datatransfer</name>.
            <name>Transferable</name>
        </name>
        ;
    </import>
    <import>import
        <name><name>java</name>.<name>awt</name>.<name>datatransfer</name>.
            <name>UnsupportedFlavorException</name>
        </name>
        ;
    </import>
    <import>import
        <name><name>java</name>.<name>awt</name>.
            <name>geom</name>
        </name>
        .*;
    </import>
    <import>import
        <name><name>java</name>.<name>awt</name>.
            <name>image</name>
        </name>
        .*;
    </import>
    <import>import
        <name><name>java</name>.
            <name>io</name>
        </name>
        .*;
    </import>
    <import>import
        <name><name>java</name>.
            <name>net</name>
        </name>
        .*;
    </import>
    <import>import
        <name><name>java</name>.
            <name>util</name>
        </name>
        .*;
    </import>
    <import>import
        <name><name>javax</name>.
            <name>imageio</name>
        </name>
        .*;
    </import>
    <import>import
        <name><name>javax</name>.
            <name>swing</name>
        </name>
        .*;
    </import>
    <import>import
        <name><name>javax</name>.<name>swing</name>.
            <name>text</name>
        </name>
        .*;
    </import>
    <import>import
        <name><name>net</name>.<name>n3</name>.
            <name>nanoxml</name>
        </name>
        .*;
    </import>
    <import>import
        <name><name>org</name>.<name>jhotdraw</name>.
            <name>draw</name>
        </name>
        .*;
    </import>
    <import>import
        <name><name>org</name>.<name>jhotdraw</name>.<name>draw</name>.
            <name>InputFormat</name>
        </name>
        ;
    </import>
    <import>import
        <name><name>org</name>.<name>jhotdraw</name>.<name>xml</name>.<name>css</name>.
            <name>StyleManager</name>
        </name>
        ;
    </import>
    <import>import
        <name><name>org</name>.<name>jhotdraw</name>.
            <name>xml</name>
        </name>
        .*;
    </import>
    <import>import
        <name><name>org</name>.<name>jhotdraw</name>.
            <name>geom</name>
        </name>
        .*;
    </import>
    <import>import
        <name><name>org</name>.<name>jhotdraw</name>.
            <name>io</name>
        </name>
        .*;
    </import>
    <import>import
        <name><name>org</name>.<name>jhotdraw</name>.<name>samples</name>.
            <name>svg</name>
        </name>
        .*;
    </import>
    <import>import
        <name><name>org</name>.<name>jhotdraw</name>.<name>samples</name>.<name>svg</name>.
            <name>figures</name>
        </name>
        .*;
    </import>
    <import>import static
        <name><name>org</name>.<name>jhotdraw</name>.<name>samples</name>.<name>svg</name>.
            <name>SVGConstants</name>
        </name>
        .*;
    </import>
    <import>import static
        <name><name>org</name>.<name>jhotdraw</name>.<name>samples</name>.<name>svg</name>.
            <name>SVGAttributeKeys</name>
        </name>
        .*;
    </import>
    <import>import
        <name><name>org</name>.<name>jhotdraw</name>.<name>xml</name>.<name>css</name>.
            <name>CSSParser</name>
        </name>
        ;
    </import>

    <comment type="javadoc">/**
        * SVGInputFormat.
        * This format is aimed to comply to the Scalable Vector Graphics (SVG) Tiny 1.2
        * Specification supporting the &lt;code&gt;SVG-static&lt;/code&gt; feature string.
        * &lt;a href="http://www.w3.org/TR/SVGMobile12/"&gt;http://www.w3.org/TR/SVGMobile12/&lt;/a&gt;
        *
        *
        * @author Werner Randelshofer
        * @version 1.2 2007-12-16 Adapted to changes in InputFormat.
        * &lt;br&gt;1.1.1 2007-04-23 Fixed reading of "transform" attribute, fixed reading
        * of "textArea" element.
        * &lt;br&gt;1.1 2007-04-22 Added support for "a" element.
        * &lt;br&gt;0.2 2007-04-10 Fixed default attribute values for RadialGradient element.
        * &lt;br&gt;0.1 November 25, 2006 Created (Experimental).
        */
    </comment>
    <class>
        <specifier>public</specifier>
        class <name>SVGInputFormat</name>
        <super>
            <implements>implements
                <name>InputFormat</name>
            </implements>
        </super>
        <block>{

            <comment type="javadoc">/**
                * Set this to true, to getChild debug output on if (DEBUG) System.out.
                */
            </comment>
            <decl_stmt>
                <decl>
                    <type>
                        <specifier>private</specifier>
                        <specifier>static</specifier>
                        <specifier>final</specifier>
                        <name>boolean</name>
                    </type>
                    <name>DEBUG</name> =
                    <init>
                        <expr>false</expr>
                    </init>
                </decl>
                ;
            </decl_stmt>
            <comment type="javadoc">/**
                * The SVGFigure factory is used to create Figure's for the drawing.
                */
            </comment>
            <decl_stmt>
                <decl>
                    <type>
                        <specifier>private</specifier>
                        <name>SVGFigureFactory</name>
                    </type>
                    <name>factory</name>
                </decl>
                ;
            </decl_stmt>
            <comment type="javadoc">/**
                * URL pointing to the SVG input file. This is used as a base URL for
                * resources that are referenced from the SVG file.
                */
            </comment>
            <decl_stmt>
                <decl>
                    <type>
                        <specifier>private</specifier>
                        <name>URL</name>
                    </type>
                    <name>url</name>
                </decl>
                ;
            </decl_stmt>
            <comment type="line">// FIXME - Move these maps to SVGConstants or to SVGAttributeKeys.</comment>
            <comment type="javadoc">/**
                * Maps to all XML elements that are identified by an xml:id.
                */
            </comment>
            <decl_stmt>
                <decl>
                    <type>
                        <specifier>private</specifier>
                        <name>
                            <name>HashMap</name>
                            <argument_list>&lt;
                                <argument>
                                    <name>String</name>
                                </argument>
                                ,
                                <argument>
                                    <name>IXMLElement</name>
                                </argument>
                                &gt;
                            </argument_list>
                        </name>
                    </type>
                    <name>identifiedElements</name>
                </decl>
                ;
            </decl_stmt>
            <comment type="javadoc">/**
                * Maps to all drawing objects from the XML elements they were created from.
                */
            </comment>
            <decl_stmt>
                <decl>
                    <type>
                        <specifier>private</specifier>
                        <name>
                            <name>HashMap</name>
                            <argument_list>&lt;
                                <argument>
                                    <name>IXMLElement</name>
                                </argument>
                                ,
                                <argument>
                                    <name>Object</name>
                                </argument>
                                &gt;
                            </argument_list>
                        </name>
                    </type>
                    <name>elementObjects</name>
                </decl>
                ;
            </decl_stmt>
            <comment type="javadoc">/**
                * Tokenizer for parsing SVG path expressions.
                *
                */
            </comment>
            <decl_stmt>
                <decl>
                    <type>
                        <specifier>private</specifier>
                        <name>StreamPosTokenizer</name>
                    </type>
                    <name>toPathTokenizer</name>
                </decl>
                ;
            </decl_stmt>
            <comment type="javadoc">/**
                * Each SVG element establishes a new Viewport.
                */
            </comment>
            <class>
                <specifier>private</specifier>
                <specifier>static</specifier> class <name>Viewport</name>
                <block>{

                    <comment type="javadoc">/**
                        * The width of the Viewport.
                        */
                    </comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <specifier>public</specifier>
                                <name>double</name>
                            </type>
                            <name>width</name> =
                            <init>
                                <expr>640d</expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <comment type="javadoc">/**
                        * The height of the Viewport.
                        */
                    </comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <specifier>public</specifier>
                                <name>double</name>
                            </type>
                            <name>height</name> =
                            <init>
                                <expr>480d</expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <comment type="javadoc">/**
                        * The viewBox specifies the coordinate system within the Viewport.
                        */
                    </comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <specifier>public</specifier>
                                <name><name>Rectangle2D</name>.
                                    <name>Double</name>
                                </name>
                            </type>
                            <name>viewBox</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name><name>Rectangle2D</name>.
                                            <name>Double</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>0d</expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>0d</expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>640d</expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>480d</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <comment type="javadoc">/**
                        * Factor for percent values relative to Viewport width.
                        */
                    </comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <specifier>public</specifier>
                                <name>double</name>
                            </type>
                            <name>widthPercentFactor</name> =
                            <init>
                                <expr>640d / 100d</expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <comment type="javadoc">/**
                        * Factor for percent values relative to Viewport height.
                        */
                    </comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <specifier>public</specifier>
                                <name>double</name>
                            </type>
                            <name>heightPercentFactor</name> =
                            <init>
                                <expr>480d / 100d</expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <comment type="javadoc">/**
                        * Factor for number values in the user coordinate system.
                        * This is the smaller value of width / viewBox.width and height / viewBox.height.
                        */
                    </comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <specifier>public</specifier>
                                <name>double</name>
                            </type>
                            <name>numberFactor</name>
                        </decl>
                        ;
                    </decl_stmt>
                    <comment type="javadoc">/**
                        * http://www.w3.org/TR/SVGMobile12/coords.html#PreserveAspectRatioAttribute
                        * XXX - use a more sophisticated variable here
                        */
                    </comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <specifier>public</specifier>
                                <name>boolean</name>
                            </type>
                            <name>isPreserveAspectRatio</name> =
                            <init>
                                <expr>true</expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <specifier>private</specifier>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>attributes</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>
                                            <name>HashMap</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>AttributeKey</name>
                                                </argument>
                                                ,
                                                <argument>
                                                    <name>Object</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <function>
                        <type>
                            <specifier>public</specifier>
                            <name>String</name>
                        </type>
                        <name>toString</name>
                        <parameter_list>()</parameter_list>
                        <block>{
                            <return>return
                                <expr>"widthPercentFactor:" + <name>widthPercentFactor</name> + ";" +
                                    "heightPercentFactor:" + <name>heightPercentFactor</name> + ";" +
                                    "numberFactor:" + <name>numberFactor</name> + ";" +
                                    <name>attributes</name>
                                </expr>
                                ;
                            </return>
                            }
                        </block>
                    </function>
                    }
                </block>
            </class>
            <comment type="javadoc">/**
                * Each SVG element creates a new Viewport that we store
                * here.
                */
            </comment>
            <decl_stmt>
                <decl>
                    <type>
                        <specifier>private</specifier>
                        <name>
                            <name>Stack</name>
                            <argument_list>&lt;
                                <argument>
                                    <name>Viewport</name>
                                </argument>
                                &gt;
                            </argument_list>
                        </name>
                    </type>
                    <name>viewportStack</name>
                </decl>
                ;
            </decl_stmt>
            <comment type="javadoc">/**
                * Holds the style manager used for applying cascading style sheet CSS rules
                * to the document.
                */
            </comment>
            <decl_stmt>
                <decl>
                    <type>
                        <specifier>private</specifier>
                        <name>StyleManager</name>
                    </type>
                    <name>styleManager</name>
                </decl>
                ;
            </decl_stmt>
            <comment type="javadoc">/**
                * Holds the figures that are currently being read.
                */
            </comment>
            <decl_stmt>
                <decl>
                    <type>
                        <specifier>private</specifier>
                        <name>
                            <name>LinkedList</name>
                            <argument_list>&lt;
                                <argument>
                                    <name>Figure</name>
                                </argument>
                                &gt;
                            </argument_list>
                        </name>
                    </type>
                    <name>figures</name>
                </decl>
                ;
            </decl_stmt>
            <comment type="javadoc">/**
                * Holds the document that is currently being read.
                */
            </comment>
            <decl_stmt>
                <decl>
                    <type>
                        <specifier>private</specifier>
                        <name>IXMLElement</name>
                    </type>
                    <name>document</name>
                </decl>
                ;
            </decl_stmt>

            <comment type="javadoc">/** Creates a new instance. */</comment>
            <constructor>
                <specifier>public</specifier>
                <name>SVGInputFormat</name>
                <parameter_list>()</parameter_list>
                <block>{
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>this</name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>DefaultSVGFigureFactory</name>
                                                <argument_list>()</argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    }
                </block>
            </constructor>

            <constructor>
                <specifier>public</specifier>
                <name>SVGInputFormat</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>SVGFigureFactory</name>
                            </type>
                            <name>factory</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <expr_stmt>
                        <expr>
                            <name><name>this</name>.
                                <name>factory</name>
                            </name>
                            =
                            <name>factory</name>
                        </expr>
                        ;
                    </expr_stmt>
                    }
                </block>
            </constructor>

            <comment type="javadoc">/**
                * This is the main reading method.
                */
            </comment>
            <function>
                <type>
                    <specifier>public</specifier>
                    <name>void</name>
                </type>
                <name>read</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>InputStream</name>
                            </type>
                            <name>in</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>Drawing</name>
                            </type>
                            <name>drawing</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>read</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>in</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>drawing</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>true</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    }
                </block>
            </function>
            <comment type="javadoc">/**
                * This is the main reading method.
                *
                * @param in The input stream.
                * @param drawing The drawing to which this method adds figures.
                * @param isSetAttributesOnDrawing Whether attributes on the drawing object
                * should by changed by this method. Set this to false, when reading individual
                * images from the clipboard.
                */
            </comment>
            <function>
                <type>
                    <specifier>public</specifier>
                    <name>void</name>
                </type>
                <name>read</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>InputStream</name>
                            </type>
                            <name>in</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>Drawing</name>
                            </type>
                            <name>drawing</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>boolean</name>
                            </type>
                            <name>isSetAttributesOnDrawing</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>long</name>
                            </type>
                            <name>start</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>System</name>.
                                            <name>currentTimeMillis</name>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <name><name>this</name>.
                                <name>figures</name>
                            </name>
                            = new
                            <call>
                                <name>
                                    <name>LinkedList</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>Figure</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>IXMLParser</name>
                            </type>
                            <name>parser</name>
                        </decl>
                        ;
                    </decl_stmt>
                    <try>try
                        <block>{
                            <expr_stmt>
                                <expr>
                                    <name>parser</name>
                                    =
                                    <call>
                                        <name><name>XMLParserFactory</name>.
                                            <name>createDefaultXMLParser</name>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                                ;
                            </expr_stmt>
                            }
                        </block>
                        <catch>catch (
                            <param>
                                <decl>
                                    <type>
                                        <name>Exception</name>
                                    </type>
                                    <name>ex</name>
                                </decl>
                            </param>
                            )
                            <block>{
                                <decl_stmt>
                                    <decl>
                                        <type>
                                            <name>InternalError</name>
                                        </type>
                                        <name>e</name> =
                                        <init>
                                            <expr>new
                                                <call>
                                                    <name>InternalError</name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>"Unable to instantiate NanoXML Parser"</expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                        </init>
                                    </decl>
                                    ;
                                </decl_stmt>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>e</name>.
                                                <name>initCause</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>ex</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <throw>throw
                                    <expr>
                                        <name>e</name>
                                    </expr>
                                    ;
                                </throw>
                                }
                            </block>
                        </catch>
                    </try>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>IXMLReader</name>
                            </type>
                            <name>reader</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>StdXMLReader</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>in</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>parser</name>.
                                    <name>setReader</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>reader</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <try>try
                        <block>{
                            <expr_stmt>
                                <expr>
                                    <name>document</name>
                                    = (<name>IXMLElement</name>)
                                    <call>
                                        <name><name>parser</name>.
                                            <name>parse</name>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                                ;
                            </expr_stmt>
                            }
                        </block>
                        <catch>catch (
                            <param>
                                <decl>
                                    <type>
                                        <name>XMLException</name>
                                    </type>
                                    <name>ex</name>
                                </decl>
                            </param>
                            )
                            <block>{
                                <decl_stmt>
                                    <decl>
                                        <type>
                                            <name>IOException</name>
                                        </type>
                                        <name>e</name> =
                                        <init>
                                            <expr>new
                                                <call>
                                                    <name>IOException</name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <call>
                                                                    <name><name>ex</name>.
                                                                        <name>getMessage</name>
                                                                    </name>
                                                                    <argument_list>()</argument_list>
                                                                </call>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                        </init>
                                    </decl>
                                    ;
                                </decl_stmt>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>e</name>.
                                                <name>initCause</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>ex</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <throw>throw
                                    <expr>
                                        <name>e</name>
                                    </expr>
                                    ;
                                </throw>
                                }
                            </block>
                        </catch>
                    </try>

                    <comment type="line">// Search for the first 'svg' element in the XML document</comment>
                    <comment type="line">// in preorder sequence</comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>svg</name> =
                            <init>
                                <expr>
                                    <name>document</name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>Stack</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>Iterator</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>stack</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>
                                            <name>Stack</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>Iterator</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>LinkedList</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>IXMLElement</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>ll</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>
                                            <name>LinkedList</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>IXMLElement</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>ll</name>.
                                    <name>add</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>document</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>stack</name>.
                                    <name>push</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <call>
                                                <name><name>ll</name>.
                                                    <name>iterator</name>
                                                </name>
                                                <argument_list>()</argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <while>while
                        <condition>(
                            <expr>!
                                <call>
                                    <name><name>stack</name>.
                                        <name>empty</name>
                                    </name>
                                    <argument_list>()</argument_list>
                                </call>
                                &amp;&amp;
                                <call>
                                    <name><name>stack</name>.
                                        <name>peek</name>
                                    </name>
                                    <argument_list>()</argument_list>
                                </call>
                                .
                                <call>
                                    <name>hasNext</name>
                                    <argument_list>()</argument_list>
                                </call>
                            </expr>
                            )
                        </condition>
                        <block>{
                            <decl_stmt>
                                <decl>
                                    <type>
                                        <name>
                                            <name>Iterator</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>IXMLElement</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                    </type>
                                    <name>iter</name> =
                                    <init>
                                        <expr>
                                            <call>
                                                <name><name>stack</name>.
                                                    <name>peek</name>
                                                </name>
                                                <argument_list>()</argument_list>
                                            </call>
                                        </expr>
                                    </init>
                                </decl>
                                ;
                            </decl_stmt>
                            <decl_stmt>
                                <decl>
                                    <type>
                                        <name>IXMLElement</name>
                                    </type>
                                    <name>node</name> =
                                    <init>
                                        <expr>
                                            <call>
                                                <name><name>iter</name>.
                                                    <name>next</name>
                                                </name>
                                                <argument_list>()</argument_list>
                                            </call>
                                        </expr>
                                    </init>
                                </decl>
                                ;
                            </decl_stmt>

                            <decl_stmt>
                                <decl>
                                    <type>
                                        <name>
                                            <name>Iterator</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>IXMLElement</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                    </type>
                                    <name>children</name> =
                                    <init>
                                        <expr>(
                                            <call>
                                                <name><name>node</name>.
                                                    <name>getChildren</name>
                                                </name>
                                                <argument_list>()</argument_list>
                                            </call>
                                            == <name>null</name>) ? <name>null</name> :
                                            <call>
                                                <name><name>node</name>.
                                                    <name>getChildren</name>
                                                </name>
                                                <argument_list>()</argument_list>
                                            </call>
                                            .
                                            <call>
                                                <name>iterator</name>
                                                <argument_list>()</argument_list>
                                            </call>
                                        </expr>
                                    </init>
                                </decl>
                                ;
                            </decl_stmt>

                            <if>if
                                <condition>(
                                    <expr>!
                                        <call>
                                            <name><name>iter</name>.
                                                <name>hasNext</name>
                                            </name>
                                            <argument_list>()</argument_list>
                                        </call>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>stack</name>.
                                                        <name>pop</name>
                                                    </name>
                                                    <argument_list>()</argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </then>
                            </if>
                            <if>if
                                <condition>(
                                    <expr>
                                        <name>children</name>
                                        != <name>null</name> &amp;&amp;
                                        <call>
                                            <name><name>children</name>.
                                                <name>hasNext</name>
                                            </name>
                                            <argument_list>()</argument_list>
                                        </call>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>stack</name>.
                                                        <name>push</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>children</name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </then>
                            </if>
                            <if>if
                                <condition>(
                                    <expr>
                                        <call>
                                            <name><name>node</name>.
                                                <name>getName</name>
                                            </name>
                                            <argument_list>()</argument_list>
                                        </call>
                                        != <name>null</name> &amp;&amp;
                                        <call>
                                            <name><name>node</name>.
                                                <name>getName</name>
                                            </name>
                                            <argument_list>()</argument_list>
                                        </call>
                                        .
                                        <call>
                                            <name>equals</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>"svg"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                        &amp;&amp;
                                        (
                                        <call>
                                            <name><name>node</name>.
                                                <name>getNamespace</name>
                                            </name>
                                            <argument_list>()</argument_list>
                                        </call>
                                        == <name>null</name> ||
                                        <call>
                                            <name><name>node</name>.
                                                <name>getNamespace</name>
                                            </name>
                                            <argument_list>()</argument_list>
                                        </call>
                                        .
                                        <call>
                                            <name>equals</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>SVG_NAMESPACE</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                        )
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name>svg</name>
                                                =
                                                <name>node</name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <break>break;</break>
                                        }
                                    </block>
                                </then>
                            </if>
                            }
                        </block>
                    </while>


                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>svg</name>.
                                        <name>getName</name>
                                    </name>
                                    <argument_list>()</argument_list>
                                </call>
                                == <name>null</name> ||
                                !
                                <call>
                                    <name><name>svg</name>.
                                        <name>getName</name>
                                    </name>
                                    <argument_list>()</argument_list>
                                </call>
                                .
                                <call>
                                    <name>equals</name>
                                    <argument_list>(
                                        <argument>
                                            <expr>"svg"</expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                                ||
                                (
                                <call>
                                    <name><name>svg</name>.
                                        <name>getNamespace</name>
                                    </name>
                                    <argument_list>()</argument_list>
                                </call>
                                != <name>null</name> &amp;&amp;
                                !
                                <call>
                                    <name><name>svg</name>.
                                        <name>getNamespace</name>
                                    </name>
                                    <argument_list>()</argument_list>
                                </call>
                                .
                                <call>
                                    <name>equals</name>
                                    <argument_list>(
                                        <argument>
                                            <expr>
                                                <name>SVG_NAMESPACE</name>
                                            </expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                                )
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <throw>throw
                                    <expr>new
                                        <call>
                                            <name>IOException</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>"'svg' element expected: " +
                                                        <call>
                                                            <name><name>svg</name>.
                                                                <name>getName</name>
                                                            </name>
                                                            <argument_list>()</argument_list>
                                                        </call>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </throw>
                                }
                            </block>
                        </then>
                    </if>
                    <comment type="line">//long end1 = System.currentTimeMillis();</comment>

                    <comment type="line">// Flatten CSS Styles</comment>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>initStorageContext</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>document</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>flattenStyles</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>svg</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <comment type="line">//long end2 = System.currentTimeMillis();</comment>

                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readElement</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>svg</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>long</name>
                            </type>
                            <name>end</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>System</name>.
                                            <name>currentTimeMillis</name>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <if>if
                        <condition>(<expr>true</expr>)
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>System</name>.<name>out</name>.
                                                <name>println</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>"SVGInputFormat elapsed:" + (<name>end</name> - <name>
                                                        start</name>)
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>
                    <comment type="block">/*if (DEBUG) System.out.println("SVGInputFormat read:"+(end1-start));
                        if (DEBUG) System.out.println("SVGInputFormat flatten:"+(end2-end1));
                        if (DEBUG) System.out.println("SVGInputFormat build:"+(end-end2));
                        */
                    </comment>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>drawing</name>.
                                    <name>addAll</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>figures</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>


                    <if>if
                        <condition>(
                            <expr>
                                <name>isSetAttributesOnDrawing</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <decl_stmt>
                                    <decl>
                                        <type>
                                            <name>Viewport</name>
                                        </type>
                                        <name>viewport</name> =
                                        <init>
                                            <expr>
                                                <call>
                                                    <name><name>viewportStack</name>.
                                                        <name>firstElement</name>
                                                    </name>
                                                    <argument_list>()</argument_list>
                                                </call>
                                            </expr>
                                        </init>
                                    </decl>
                                    ;
                                </decl_stmt>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>VIEWPORT_FILL</name>.
                                                <name>set</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>drawing</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <call>
                                                            <name><name>VIEWPORT_FILL</name>.
                                                                <name>get</name>
                                                            </name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name><name>viewport</name>.
                                                                            <name>attributes</name>
                                                                        </name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>VIEWPORT_FILL_OPACITY</name>.
                                                <name>set</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>drawing</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <call>
                                                            <name><name>VIEWPORT_FILL_OPACITY</name>.
                                                                <name>get</name>
                                                            </name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name><name>viewport</name>.
                                                                            <name>attributes</name>
                                                                        </name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>
                    }
                </block>
            </function>

            <function>
                <type>
                    <specifier>private</specifier>
                    <name>void</name>
                </type>
                <name>initStorageContext</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>root</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <expr_stmt>
                        <expr>
                            <name>identifiedElements</name>
                            = new
                            <call>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>String</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>IXMLElement</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>identifyElements</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>root</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <name>elementObjects</name>
                            = new
                            <call>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>IXMLElement</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <name>viewportStack</name>
                            = new
                            <call>
                                <name>
                                    <name>Stack</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>Viewport</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>viewportStack</name>.
                                    <name>push</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>Viewport</name>
                                                <argument_list>()</argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <name>styleManager</name>
                            = new
                            <call>
                                <name>StyleManager</name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Flattens all CSS styles.
                * Styles defined in a "style" attribute and in CSS rules are converted
                * into attributes with the same name.
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>void</name>
                </type>
                <name>flattenStyles</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>elem</name>.
                                        <name>getName</name>
                                    </name>
                                    <argument_list>()</argument_list>
                                </call>
                                != <name>null</name> &amp;&amp;
                                <call>
                                    <name><name>elem</name>.
                                        <name>getName</name>
                                    </name>
                                    <argument_list>()</argument_list>
                                </call>
                                .
                                <call>
                                    <name>equals</name>
                                    <argument_list>(
                                        <argument>
                                            <expr>"style"</expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                                &amp;&amp;
                                <call>
                                    <name>readAttribute</name>
                                    <argument_list>(
                                        <argument>
                                            <expr>
                                                <name>elem</name>
                                            </expr>
                                        </argument>
                                        ,
                                        <argument>
                                            <expr>"type"</expr>
                                        </argument>
                                        ,
                                        <argument>
                                            <expr>""</expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                                .
                                <call>
                                    <name>equals</name>
                                    <argument_list>(
                                        <argument>
                                            <expr>"text/css"</expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                                &amp;&amp;
                                <call>
                                    <name><name>elem</name>.
                                        <name>getContent</name>
                                    </name>
                                    <argument_list>()</argument_list>
                                </call>
                                !=
                                <name>null</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <decl_stmt>
                                    <decl>
                                        <type>
                                            <name>CSSParser</name>
                                        </type>
                                        <name>cssParser</name> =
                                        <init>
                                            <expr>new
                                                <call>
                                                    <name>CSSParser</name>
                                                    <argument_list>()</argument_list>
                                                </call>
                                            </expr>
                                        </init>
                                    </decl>
                                    ;
                                </decl_stmt>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>cssParser</name>.
                                                <name>parse</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <call>
                                                            <name><name>elem</name>.
                                                                <name>getContent</name>
                                                            </name>
                                                            <argument_list>()</argument_list>
                                                        </call>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name>styleManager</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                        <else>else
                            <block>{

                                <if>if
                                    <condition>(
                                        <expr>
                                            <call>
                                                <name><name>elem</name>.
                                                    <name>getNamespace</name>
                                                </name>
                                                <argument_list>()</argument_list>
                                            </call>
                                            == <name>null</name> ||
                                            <call>
                                                <name><name>elem</name>.
                                                    <name>getNamespace</name>
                                                </name>
                                                <argument_list>()</argument_list>
                                            </call>
                                            .
                                            <call>
                                                <name>equals</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>SVG_NAMESPACE</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                        )
                                    </condition>
                                    <then>
                                        <block>{

                                            <decl_stmt>
                                                <decl>
                                                    <type>
                                                        <name>String</name>
                                                    </type>
                                                    <name>style</name> =
                                                    <init>
                                                        <expr>
                                                            <call>
                                                                <name>readAttribute</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            <name>elem</name>
                                                                        </expr>
                                                                    </argument>
                                                                    ,
                                                                    <argument>
                                                                        <expr>"style"</expr>
                                                                    </argument>
                                                                    ,
                                                                    <argument>
                                                                        <expr>
                                                                            <name>null</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </init>
                                                </decl>
                                                ;
                                            </decl_stmt>
                                            <if>if
                                                <condition>(
                                                    <expr>
                                                        <name>style</name>
                                                        !=
                                                        <name>null</name>
                                                    </expr>
                                                    )
                                                </condition>
                                                <then>
                                                    <block>{
                                                        <for>for (
                                                            <init>
                                                                <decl>
                                                                    <type>
                                                                        <name>String</name>
                                                                    </type>
                                                                    <name>styleProperty</name> :
                                                                    <range>
                                                                        <expr>
                                                                            <call>
                                                                                <name><name>style</name>.
                                                                                    <name>split</name>
                                                                                </name>
                                                                                <argument_list>(
                                                                                    <argument>
                                                                                        <expr>";"</expr>
                                                                                    </argument>
                                                                                    )
                                                                                </argument_list>
                                                                            </call>
                                                                        </expr>
                                                                    </range>
                                                                </decl>
                                                            </init>
                                                            )
                                                            <block>{
                                                                <decl_stmt>
                                                                    <decl>
                                                                        <type>
                                                                            <name>String</name>
                                                                            <index>[]</index>
                                                                        </type>
                                                                        <name>stylePropertyElements</name> =
                                                                        <init>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>styleProperty</name>.
                                                                                        <name>split</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>":"</expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                        </init>
                                                                    </decl>
                                                                    ;
                                                                </decl_stmt>
                                                                <if>if
                                                                    <condition>(
                                                                        <expr>
                                                                            <name><name>stylePropertyElements</name>.
                                                                                <name>length</name>
                                                                            </name>
                                                                            == 2 &amp;&amp;
                                                                            !
                                                                            <call>
                                                                                <name><name>elem</name>.
                                                                                    <name>hasAttribute</name>
                                                                                </name>
                                                                                <argument_list>(
                                                                                    <argument>
                                                                                        <expr>
                                                                                            <name>
                                                                                                <name>
                                                                                                    stylePropertyElements
                                                                                                </name>
                                                                                                <index>[<expr>0</expr>]
                                                                                                </index>
                                                                                            </name>
                                                                                            .
                                                                                            <call>
                                                                                                <name>trim</name>
                                                                                                <argument_list>()
                                                                                                </argument_list>
                                                                                            </call>
                                                                                        </expr>
                                                                                    </argument>
                                                                                    ,
                                                                                    <argument>
                                                                                        <expr>
                                                                                            <name>SVG_NAMESPACE</name>
                                                                                        </expr>
                                                                                    </argument>
                                                                                    )
                                                                                </argument_list>
                                                                            </call>
                                                                        </expr>
                                                                        )
                                                                    </condition>
                                                                    <then>
                                                                        <block>{
                                                                            <comment type="line">//if (DEBUG)
                                                                                System.out.println("flatten:"+Arrays.toString(stylePropertyElements));
                                                                            </comment>
                                                                            <expr_stmt>
                                                                                <expr>
                                                                                    <call>
                                                                                        <name><name>elem</name>.
                                                                                            <name>setAttribute</name>
                                                                                        </name>
                                                                                        <argument_list>(
                                                                                            <argument>
                                                                                                <expr>
                                                                                                    <name>
                                                                                                        <name>
                                                                                                            stylePropertyElements
                                                                                                        </name>
                                                                                                        <index>[<expr>
                                                                                                            0</expr>]
                                                                                                        </index>
                                                                                                    </name>
                                                                                                    .
                                                                                                    <call>
                                                                                                        <name>trim
                                                                                                        </name>
                                                                                                        <argument_list>
                                                                                                            ()
                                                                                                        </argument_list>
                                                                                                    </call>
                                                                                                </expr>
                                                                                            </argument>
                                                                                            ,
                                                                                            <argument>
                                                                                                <expr>
                                                                                                    <name>
                                                                                                        SVG_NAMESPACE
                                                                                                    </name>
                                                                                                </expr>
                                                                                            </argument>
                                                                                            ,
                                                                                            <argument>
                                                                                                <expr>
                                                                                                    <name>
                                                                                                        <name>
                                                                                                            stylePropertyElements
                                                                                                        </name>
                                                                                                        <index>[<expr>
                                                                                                            1</expr>]
                                                                                                        </index>
                                                                                                    </name>
                                                                                                    .
                                                                                                    <call>
                                                                                                        <name>trim
                                                                                                        </name>
                                                                                                        <argument_list>
                                                                                                            ()
                                                                                                        </argument_list>
                                                                                                    </call>
                                                                                                </expr>
                                                                                            </argument>
                                                                                            )
                                                                                        </argument_list>
                                                                                    </call>
                                                                                </expr>
                                                                                ;
                                                                            </expr_stmt>
                                                                            }
                                                                        </block>
                                                                    </then>
                                                                </if>
                                                                }
                                                            </block>
                                                        </for>
                                                        }
                                                    </block>
                                                </then>
                                            </if>

                                            <expr_stmt>
                                                <expr>
                                                    <call>
                                                        <name><name>styleManager</name>.
                                                            <name>applyStylesTo</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                ;
                                            </expr_stmt>

                                            <for>for (
                                                <init>
                                                    <decl>
                                                        <type>
                                                            <name>IXMLElement</name>
                                                        </type>
                                                        <name>node</name> :
                                                        <range>
                                                            <expr>
                                                                <call>
                                                                    <name><name>elem</name>.
                                                                        <name>getChildren</name>
                                                                    </name>
                                                                    <argument_list>()</argument_list>
                                                                </call>
                                                            </expr>
                                                        </range>
                                                    </decl>
                                                </init>
                                                )
                                                <block>{
                                                    <if>if
                                                        <condition>(
                                                            <expr>
                                                                <name>node</name>
                                                                <name>instanceof</name>
                                                                <name>IXMLElement</name>
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <block>{
                                                                <decl_stmt>
                                                                    <decl>
                                                                        <type>
                                                                            <name>IXMLElement</name>
                                                                        </type>
                                                                        <name>child</name> =
                                                                        <init>
                                                                            <expr>(<name>IXMLElement</name>)
                                                                                <name>node</name>
                                                                            </expr>
                                                                        </init>
                                                                    </decl>
                                                                    ;
                                                                </decl_stmt>
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <call>
                                                                            <name>flattenStyles</name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>child</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                }
                                                            </block>
                                                        </then>
                                                    </if>
                                                    }
                                                </block>
                                            </for>
                                            }
                                        </block>
                                    </then>
                                </if>
                                }
                            </block>
                        </else>
                    </if>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Reads an SVG element of any kind.
                * @return Returns the Figure, if the SVG element represents a Figure.
                * Returns null in all other cases.
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>Figure</name>
                </type>
                <name>readElement</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <if>if
                        <condition>(
                            <expr>
                                <name>DEBUG</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>System</name>.<name>out</name>.
                                                <name>println</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>"SVGInputFormat.readElement " +
                                                        <call>
                                                            <name><name>elem</name>.
                                                                <name>getName</name>
                                                            </name>
                                                            <argument_list>()</argument_list>
                                                        </call>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>Figure</name>
                            </type>
                            <name>f</name> =
                            <init>
                                <expr>
                                    <name>null</name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>elem</name>.
                                        <name>getNamespace</name>
                                    </name>
                                    <argument_list>()</argument_list>
                                </call>
                                == <name>null</name> ||
                                <call>
                                    <name><name>elem</name>.
                                        <name>getNamespace</name>
                                    </name>
                                    <argument_list>()</argument_list>
                                </call>
                                .
                                <call>
                                    <name>equals</name>
                                    <argument_list>(
                                        <argument>
                                            <expr>
                                                <name>SVG_NAMESPACE</name>
                                            </expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <decl_stmt>
                                    <decl>
                                        <type>
                                            <name>String</name>
                                        </type>
                                        <name>name</name> =
                                        <init>
                                            <expr>
                                                <call>
                                                    <name><name>elem</name>.
                                                        <name>getName</name>
                                                    </name>
                                                    <argument_list>()</argument_list>
                                                </call>
                                            </expr>
                                        </init>
                                    </decl>
                                    ;
                                </decl_stmt>
                                <if>if
                                    <condition>(
                                        <expr>
                                            <call>
                                                <name><name>name</name>.
                                                    <name>equals</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"a"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                        )
                                    </condition>
                                    <then>
                                        <block>{
                                            <expr_stmt>
                                                <expr>
                                                    <name>f</name>
                                                    =
                                                    <call>
                                                        <name>readAElement</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                ;
                                            </expr_stmt>
                                            }
                                        </block>
                                    </then>
                                    <else>else
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>name</name>.
                                                            <name>equals</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>"circle"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <expr_stmt>
                                                        <expr>
                                                            <name>f</name>
                                                            =
                                                            <call>
                                                                <name>readCircleElement</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            <name>elem</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    }
                                                </block>
                                            </then>
                                            <else>else
                                                <if>if
                                                    <condition>(
                                                        <expr>
                                                            <call>
                                                                <name><name>name</name>.
                                                                    <name>equals</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"defs"</expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        )
                                                    </condition>
                                                    <then>
                                                        <block>{
                                                            <expr_stmt>
                                                                <expr>
                                                                    <call>
                                                                        <name>readDefsElement</name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>
                                                                                    <name>elem</name>
                                                                                </expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            <expr_stmt>
                                                                <expr>
                                                                    <name>f</name>
                                                                    =
                                                                    <name>null</name>
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            }
                                                        </block>
                                                    </then>
                                                    <else>else
                                                        <if>if
                                                            <condition>(
                                                                <expr>
                                                                    <call>
                                                                        <name><name>name</name>.
                                                                            <name>equals</name>
                                                                        </name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>"ellipse"</expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                                )
                                                            </condition>
                                                            <then>
                                                                <block>{
                                                                    <expr_stmt>
                                                                        <expr>
                                                                            <name>f</name>
                                                                            =
                                                                            <call>
                                                                                <name>readEllipseElement</name>
                                                                                <argument_list>(
                                                                                    <argument>
                                                                                        <expr>
                                                                                            <name>elem</name>
                                                                                        </expr>
                                                                                    </argument>
                                                                                    )
                                                                                </argument_list>
                                                                            </call>
                                                                        </expr>
                                                                        ;
                                                                    </expr_stmt>
                                                                    }
                                                                </block>
                                                            </then>
                                                            <else>else
                                                                <if>if
                                                                    <condition>(
                                                                        <expr>
                                                                            <call>
                                                                                <name><name>name</name>.
                                                                                    <name>equals</name>
                                                                                </name>
                                                                                <argument_list>(
                                                                                    <argument>
                                                                                        <expr>"g"</expr>
                                                                                    </argument>
                                                                                    )
                                                                                </argument_list>
                                                                            </call>
                                                                        </expr>
                                                                        )
                                                                    </condition>
                                                                    <then>
                                                                        <block>{
                                                                            <expr_stmt>
                                                                                <expr>
                                                                                    <name>f</name>
                                                                                    =
                                                                                    <call>
                                                                                        <name>readGElement</name>
                                                                                        <argument_list>(
                                                                                            <argument>
                                                                                                <expr>
                                                                                                    <name>elem</name>
                                                                                                </expr>
                                                                                            </argument>
                                                                                            )
                                                                                        </argument_list>
                                                                                    </call>
                                                                                </expr>
                                                                                ;
                                                                            </expr_stmt>
                                                                            }
                                                                        </block>
                                                                    </then>
                                                                    <else>else
                                                                        <if>if
                                                                            <condition>(
                                                                                <expr>
                                                                                    <call>
                                                                                        <name><name>name</name>.
                                                                                            <name>equals</name>
                                                                                        </name>
                                                                                        <argument_list>(
                                                                                            <argument>
                                                                                                <expr>"image"</expr>
                                                                                            </argument>
                                                                                            )
                                                                                        </argument_list>
                                                                                    </call>
                                                                                </expr>
                                                                                )
                                                                            </condition>
                                                                            <then>
                                                                                <block>{
                                                                                    <expr_stmt>
                                                                                        <expr>
                                                                                            <name>f</name>
                                                                                            =
                                                                                            <call>
                                                                                                <name>readImageElement
                                                                                                </name>
                                                                                                <argument_list>(
                                                                                                    <argument>
                                                                                                        <expr>
                                                                                                            <name>elem
                                                                                                            </name>
                                                                                                        </expr>
                                                                                                    </argument>
                                                                                                    )
                                                                                                </argument_list>
                                                                                            </call>
                                                                                        </expr>
                                                                                        ;
                                                                                    </expr_stmt>
                                                                                    }
                                                                                </block>
                                                                            </then>
                                                                            <else>else
                                                                                <if>if
                                                                                    <condition>(
                                                                                        <expr>
                                                                                            <call>
                                                                                                <name><name>name</name>.
                                                                                                    <name>equals</name>
                                                                                                </name>
                                                                                                <argument_list>(
                                                                                                    <argument>
                                                                                                        <expr>"line"
                                                                                                        </expr>
                                                                                                    </argument>
                                                                                                    )
                                                                                                </argument_list>
                                                                                            </call>
                                                                                        </expr>
                                                                                        )
                                                                                    </condition>
                                                                                    <then>
                                                                                        <block>{
                                                                                            <expr_stmt>
                                                                                                <expr>
                                                                                                    <name>f</name>
                                                                                                    =
                                                                                                    <call>
                                                                                                        <name>
                                                                                                            readLineElement
                                                                                                        </name>
                                                                                                        <argument_list>(
                                                                                                            <argument>
                                                                                                                <expr>
                                                                                                                    <name>
                                                                                                                        elem
                                                                                                                    </name>
                                                                                                                </expr>
                                                                                                            </argument>
                                                                                                            )
                                                                                                        </argument_list>
                                                                                                    </call>
                                                                                                </expr>
                                                                                                ;
                                                                                            </expr_stmt>
                                                                                            }
                                                                                        </block>
                                                                                    </then>
                                                                                    <else>else
                                                                                        <if>if
                                                                                            <condition>(
                                                                                                <expr>
                                                                                                    <call>
                                                                                                        <name><name>
                                                                                                            name</name>.
                                                                                                            <name>
                                                                                                                equals
                                                                                                            </name>
                                                                                                        </name>
                                                                                                        <argument_list>(
                                                                                                            <argument>
                                                                                                                <expr>
                                                                                                                    "linearGradient"
                                                                                                                </expr>
                                                                                                            </argument>
                                                                                                            )
                                                                                                        </argument_list>
                                                                                                    </call>
                                                                                                </expr>
                                                                                                )
                                                                                            </condition>
                                                                                            <then>
                                                                                                <block>{
                                                                                                    <expr_stmt>
                                                                                                        <expr>
                                                                                                            <call>
                                                                                                                <name>
                                                                                                                    readLinearGradientElement
                                                                                                                </name>
                                                                                                                <argument_list>
                                                                                                                    (
                                                                                                                    <argument>
                                                                                                                        <expr>
                                                                                                                            <name>
                                                                                                                                elem
                                                                                                                            </name>
                                                                                                                        </expr>
                                                                                                                    </argument>
                                                                                                                    )
                                                                                                                </argument_list>
                                                                                                            </call>
                                                                                                        </expr>
                                                                                                        ;
                                                                                                    </expr_stmt>
                                                                                                    <expr_stmt>
                                                                                                        <expr>
                                                                                                            <name>f
                                                                                                            </name>
                                                                                                            =
                                                                                                            <name>null
                                                                                                            </name>
                                                                                                        </expr>
                                                                                                        ;
                                                                                                    </expr_stmt>
                                                                                                    }
                                                                                                </block>
                                                                                            </then>
                                                                                            <else>else
                                                                                                <if>if
                                                                                                    <condition>(
                                                                                                        <expr>
                                                                                                            <call>
                                                                                                                <name>
                                                                                                                    <name>
                                                                                                                        name</name>
                                                                                                                    .
                                                                                                                    <name>
                                                                                                                        equals
                                                                                                                    </name>
                                                                                                                </name>
                                                                                                                <argument_list>
                                                                                                                    (
                                                                                                                    <argument>
                                                                                                                        <expr>
                                                                                                                            "path"
                                                                                                                        </expr>
                                                                                                                    </argument>
                                                                                                                    )
                                                                                                                </argument_list>
                                                                                                            </call>
                                                                                                        </expr>
                                                                                                        )
                                                                                                    </condition>
                                                                                                    <then>
                                                                                                        <block>{
                                                                                                            <expr_stmt>
                                                                                                                <expr>
                                                                                                                    <name>
                                                                                                                        f
                                                                                                                    </name>
                                                                                                                    =
                                                                                                                    <call>
                                                                                                                        <name>
                                                                                                                            readPathElement
                                                                                                                        </name>
                                                                                                                        <argument_list>
                                                                                                                            (
                                                                                                                            <argument>
                                                                                                                                <expr>
                                                                                                                                    <name>
                                                                                                                                        elem
                                                                                                                                    </name>
                                                                                                                                </expr>
                                                                                                                            </argument>
                                                                                                                            )
                                                                                                                        </argument_list>
                                                                                                                    </call>
                                                                                                                </expr>
                                                                                                                ;
                                                                                                            </expr_stmt>
                                                                                                            }
                                                                                                        </block>
                                                                                                    </then>
                                                                                                    <else>else
                                                                                                        <if>if
                                                                                                            <condition>(
                                                                                                                <expr>
                                                                                                                    <call>
                                                                                                                        <name>
                                                                                                                            <name>
                                                                                                                                name</name>
                                                                                                                            .
                                                                                                                            <name>
                                                                                                                                equals
                                                                                                                            </name>
                                                                                                                        </name>
                                                                                                                        <argument_list>
                                                                                                                            (
                                                                                                                            <argument>
                                                                                                                                <expr>
                                                                                                                                    "polygon"
                                                                                                                                </expr>
                                                                                                                            </argument>
                                                                                                                            )
                                                                                                                        </argument_list>
                                                                                                                    </call>
                                                                                                                </expr>
                                                                                                                )
                                                                                                            </condition>
                                                                                                            <then>
                                                                                                                <block>{
                                                                                                                    <expr_stmt>
                                                                                                                        <expr>
                                                                                                                            <name>
                                                                                                                                f
                                                                                                                            </name>
                                                                                                                            =
                                                                                                                            <call>
                                                                                                                                <name>
                                                                                                                                    readPolygonElement
                                                                                                                                </name>
                                                                                                                                <argument_list>
                                                                                                                                    (
                                                                                                                                    <argument>
                                                                                                                                        <expr>
                                                                                                                                            <name>
                                                                                                                                                elem
                                                                                                                                            </name>
                                                                                                                                        </expr>
                                                                                                                                    </argument>
                                                                                                                                    )
                                                                                                                                </argument_list>
                                                                                                                            </call>
                                                                                                                        </expr>
                                                                                                                        ;
                                                                                                                    </expr_stmt>
                                                                                                                    }
                                                                                                                </block>
                                                                                                            </then>
                                                                                                            <else>else
                                                                                                                <if>if
                                                                                                                    <condition>
                                                                                                                        (
                                                                                                                        <expr>
                                                                                                                            <call>
                                                                                                                                <name>
                                                                                                                                    <name>
                                                                                                                                        name</name>
                                                                                                                                    .
                                                                                                                                    <name>
                                                                                                                                        equals
                                                                                                                                    </name>
                                                                                                                                </name>
                                                                                                                                <argument_list>
                                                                                                                                    (
                                                                                                                                    <argument>
                                                                                                                                        <expr>
                                                                                                                                            "polyline"
                                                                                                                                        </expr>
                                                                                                                                    </argument>
                                                                                                                                    )
                                                                                                                                </argument_list>
                                                                                                                            </call>
                                                                                                                        </expr>
                                                                                                                        )
                                                                                                                    </condition>
                                                                                                                    <then>
                                                                                                                        <block>
                                                                                                                            {
                                                                                                                            <expr_stmt>
                                                                                                                                <expr>
                                                                                                                                    <name>
                                                                                                                                        f
                                                                                                                                    </name>
                                                                                                                                    =
                                                                                                                                    <call>
                                                                                                                                        <name>
                                                                                                                                            readPolylineElement
                                                                                                                                        </name>
                                                                                                                                        <argument_list>
                                                                                                                                            (
                                                                                                                                            <argument>
                                                                                                                                                <expr>
                                                                                                                                                    <name>
                                                                                                                                                        elem
                                                                                                                                                    </name>
                                                                                                                                                </expr>
                                                                                                                                            </argument>
                                                                                                                                            )
                                                                                                                                        </argument_list>
                                                                                                                                    </call>
                                                                                                                                </expr>
                                                                                                                                ;
                                                                                                                            </expr_stmt>
                                                                                                                            }
                                                                                                                        </block>
                                                                                                                    </then>
                                                                                                                    <else>
                                                                                                                        else
                                                                                                                        <if>
                                                                                                                            if
                                                                                                                            <condition>
                                                                                                                                (
                                                                                                                                <expr>
                                                                                                                                    <call>
                                                                                                                                        <name>
                                                                                                                                            <name>
                                                                                                                                                name</name>
                                                                                                                                            .
                                                                                                                                            <name>
                                                                                                                                                equals
                                                                                                                                            </name>
                                                                                                                                        </name>
                                                                                                                                        <argument_list>
                                                                                                                                            (
                                                                                                                                            <argument>
                                                                                                                                                <expr>
                                                                                                                                                    "radialGradient"
                                                                                                                                                </expr>
                                                                                                                                            </argument>
                                                                                                                                            )
                                                                                                                                        </argument_list>
                                                                                                                                    </call>
                                                                                                                                </expr>
                                                                                                                                )
                                                                                                                            </condition>
                                                                                                                            <then>
                                                                                                                                <block>
                                                                                                                                    {
                                                                                                                                    <expr_stmt>
                                                                                                                                        <expr>
                                                                                                                                            <call>
                                                                                                                                                <name>
                                                                                                                                                    readRadialGradientElement
                                                                                                                                                </name>
                                                                                                                                                <argument_list>
                                                                                                                                                    (
                                                                                                                                                    <argument>
                                                                                                                                                        <expr>
                                                                                                                                                            <name>
                                                                                                                                                                elem
                                                                                                                                                            </name>
                                                                                                                                                        </expr>
                                                                                                                                                    </argument>
                                                                                                                                                    )
                                                                                                                                                </argument_list>
                                                                                                                                            </call>
                                                                                                                                        </expr>
                                                                                                                                        ;
                                                                                                                                    </expr_stmt>
                                                                                                                                    <expr_stmt>
                                                                                                                                        <expr>
                                                                                                                                            <name>
                                                                                                                                                f
                                                                                                                                            </name>
                                                                                                                                            =
                                                                                                                                            <name>
                                                                                                                                                null
                                                                                                                                            </name>
                                                                                                                                        </expr>
                                                                                                                                        ;
                                                                                                                                    </expr_stmt>
                                                                                                                                    }
                                                                                                                                </block>
                                                                                                                            </then>
                                                                                                                            <else>
                                                                                                                                else
                                                                                                                                <if>
                                                                                                                                    if
                                                                                                                                    <condition>
                                                                                                                                        (
                                                                                                                                        <expr>
                                                                                                                                            <call>
                                                                                                                                                <name>
                                                                                                                                                    <name>
                                                                                                                                                        name</name>
                                                                                                                                                    .
                                                                                                                                                    <name>
                                                                                                                                                        equals
                                                                                                                                                    </name>
                                                                                                                                                </name>
                                                                                                                                                <argument_list>
                                                                                                                                                    (
                                                                                                                                                    <argument>
                                                                                                                                                        <expr>
                                                                                                                                                            "rect"
                                                                                                                                                        </expr>
                                                                                                                                                    </argument>
                                                                                                                                                    )
                                                                                                                                                </argument_list>
                                                                                                                                            </call>
                                                                                                                                        </expr>
                                                                                                                                        )
                                                                                                                                    </condition>
                                                                                                                                    <then>
                                                                                                                                        <block>
                                                                                                                                            {
                                                                                                                                            <expr_stmt>
                                                                                                                                                <expr>
                                                                                                                                                    <name>
                                                                                                                                                        f
                                                                                                                                                    </name>
                                                                                                                                                    =
                                                                                                                                                    <call>
                                                                                                                                                        <name>
                                                                                                                                                            readRectElement
                                                                                                                                                        </name>
                                                                                                                                                        <argument_list>
                                                                                                                                                            (
                                                                                                                                                            <argument>
                                                                                                                                                                <expr>
                                                                                                                                                                    <name>
                                                                                                                                                                        elem
                                                                                                                                                                    </name>
                                                                                                                                                                </expr>
                                                                                                                                                            </argument>
                                                                                                                                                            )
                                                                                                                                                        </argument_list>
                                                                                                                                                    </call>
                                                                                                                                                </expr>
                                                                                                                                                ;
                                                                                                                                            </expr_stmt>
                                                                                                                                            }
                                                                                                                                        </block>
                                                                                                                                    </then>
                                                                                                                                    <else>
                                                                                                                                        else
                                                                                                                                        <if>
                                                                                                                                            if
                                                                                                                                            <condition>
                                                                                                                                                (
                                                                                                                                                <expr>
                                                                                                                                                    <call>
                                                                                                                                                        <name>
                                                                                                                                                            <name>
                                                                                                                                                                name</name>
                                                                                                                                                            .
                                                                                                                                                            <name>
                                                                                                                                                                equals
                                                                                                                                                            </name>
                                                                                                                                                        </name>
                                                                                                                                                        <argument_list>
                                                                                                                                                            (
                                                                                                                                                            <argument>
                                                                                                                                                                <expr>
                                                                                                                                                                    "solidColor"
                                                                                                                                                                </expr>
                                                                                                                                                            </argument>
                                                                                                                                                            )
                                                                                                                                                        </argument_list>
                                                                                                                                                    </call>
                                                                                                                                                </expr>
                                                                                                                                                )
                                                                                                                                            </condition>
                                                                                                                                            <then>
                                                                                                                                                <block>
                                                                                                                                                    {
                                                                                                                                                    <expr_stmt>
                                                                                                                                                        <expr>
                                                                                                                                                            <call>
                                                                                                                                                                <name>
                                                                                                                                                                    readSolidColorElement
                                                                                                                                                                </name>
                                                                                                                                                                <argument_list>
                                                                                                                                                                    (
                                                                                                                                                                    <argument>
                                                                                                                                                                        <expr>
                                                                                                                                                                            <name>
                                                                                                                                                                                elem
                                                                                                                                                                            </name>
                                                                                                                                                                        </expr>
                                                                                                                                                                    </argument>
                                                                                                                                                                    )
                                                                                                                                                                </argument_list>
                                                                                                                                                            </call>
                                                                                                                                                        </expr>
                                                                                                                                                        ;
                                                                                                                                                    </expr_stmt>
                                                                                                                                                    <expr_stmt>
                                                                                                                                                        <expr>
                                                                                                                                                            <name>
                                                                                                                                                                f
                                                                                                                                                            </name>
                                                                                                                                                            =
                                                                                                                                                            <name>
                                                                                                                                                                null
                                                                                                                                                            </name>
                                                                                                                                                        </expr>
                                                                                                                                                        ;
                                                                                                                                                    </expr_stmt>
                                                                                                                                                    }
                                                                                                                                                </block>
                                                                                                                                            </then>
                                                                                                                                            <else>
                                                                                                                                                else
                                                                                                                                                <if>
                                                                                                                                                    if
                                                                                                                                                    <condition>
                                                                                                                                                        (
                                                                                                                                                        <expr>
                                                                                                                                                            <call>
                                                                                                                                                                <name>
                                                                                                                                                                    <name>
                                                                                                                                                                        name</name>
                                                                                                                                                                    .
                                                                                                                                                                    <name>
                                                                                                                                                                        equals
                                                                                                                                                                    </name>
                                                                                                                                                                </name>
                                                                                                                                                                <argument_list>
                                                                                                                                                                    (
                                                                                                                                                                    <argument>
                                                                                                                                                                        <expr>
                                                                                                                                                                            "svg"
                                                                                                                                                                        </expr>
                                                                                                                                                                    </argument>
                                                                                                                                                                    )
                                                                                                                                                                </argument_list>
                                                                                                                                                            </call>
                                                                                                                                                        </expr>
                                                                                                                                                        )
                                                                                                                                                    </condition>
                                                                                                                                                    <then>
                                                                                                                                                        <block>
                                                                                                                                                            {
                                                                                                                                                            <expr_stmt>
                                                                                                                                                                <expr>
                                                                                                                                                                    <name>
                                                                                                                                                                        f
                                                                                                                                                                    </name>
                                                                                                                                                                    =
                                                                                                                                                                    <call>
                                                                                                                                                                        <name>
                                                                                                                                                                            readSVGElement
                                                                                                                                                                        </name>
                                                                                                                                                                        <argument_list>
                                                                                                                                                                            (
                                                                                                                                                                            <argument>
                                                                                                                                                                                <expr>
                                                                                                                                                                                    <name>
                                                                                                                                                                                        elem
                                                                                                                                                                                    </name>
                                                                                                                                                                                </expr>
                                                                                                                                                                            </argument>
                                                                                                                                                                            )
                                                                                                                                                                        </argument_list>
                                                                                                                                                                    </call>
                                                                                                                                                                </expr>
                                                                                                                                                                ;
                                                                                                                                                            </expr_stmt>
                                                                                                                                                            <comment
                                                                                                                                                                    type="line">
                                                                                                                                                                //f
                                                                                                                                                                =
                                                                                                                                                                readGElement(elem);
                                                                                                                                                            </comment>
                                                                                                                                                            }
                                                                                                                                                        </block>
                                                                                                                                                    </then>
                                                                                                                                                    <else>
                                                                                                                                                        else
                                                                                                                                                        <if>
                                                                                                                                                            if
                                                                                                                                                            <condition>
                                                                                                                                                                (
                                                                                                                                                                <expr>
                                                                                                                                                                    <call>
                                                                                                                                                                        <name>
                                                                                                                                                                            <name>
                                                                                                                                                                                name</name>
                                                                                                                                                                            .
                                                                                                                                                                            <name>
                                                                                                                                                                                equals
                                                                                                                                                                            </name>
                                                                                                                                                                        </name>
                                                                                                                                                                        <argument_list>
                                                                                                                                                                            (
                                                                                                                                                                            <argument>
                                                                                                                                                                                <expr>
                                                                                                                                                                                    "switch"
                                                                                                                                                                                </expr>
                                                                                                                                                                            </argument>
                                                                                                                                                                            )
                                                                                                                                                                        </argument_list>
                                                                                                                                                                    </call>
                                                                                                                                                                </expr>
                                                                                                                                                                )
                                                                                                                                                            </condition>
                                                                                                                                                            <then>
                                                                                                                                                                <block>
                                                                                                                                                                    {
                                                                                                                                                                    <expr_stmt>
                                                                                                                                                                        <expr>
                                                                                                                                                                            <name>
                                                                                                                                                                                f
                                                                                                                                                                            </name>
                                                                                                                                                                            =
                                                                                                                                                                            <call>
                                                                                                                                                                                <name>
                                                                                                                                                                                    readSwitchElement
                                                                                                                                                                                </name>
                                                                                                                                                                                <argument_list>
                                                                                                                                                                                    (
                                                                                                                                                                                    <argument>
                                                                                                                                                                                        <expr>
                                                                                                                                                                                            <name>
                                                                                                                                                                                                elem
                                                                                                                                                                                            </name>
                                                                                                                                                                                        </expr>
                                                                                                                                                                                    </argument>
                                                                                                                                                                                    )
                                                                                                                                                                                </argument_list>
                                                                                                                                                                            </call>
                                                                                                                                                                        </expr>
                                                                                                                                                                        ;
                                                                                                                                                                    </expr_stmt>
                                                                                                                                                                    }
                                                                                                                                                                </block>
                                                                                                                                                            </then>
                                                                                                                                                            <else>
                                                                                                                                                                else
                                                                                                                                                                <if>
                                                                                                                                                                    if
                                                                                                                                                                    <condition>
                                                                                                                                                                        (
                                                                                                                                                                        <expr>
                                                                                                                                                                            <call>
                                                                                                                                                                                <name>
                                                                                                                                                                                    <name>
                                                                                                                                                                                        name</name>
                                                                                                                                                                                    .
                                                                                                                                                                                    <name>
                                                                                                                                                                                        equals
                                                                                                                                                                                    </name>
                                                                                                                                                                                </name>
                                                                                                                                                                                <argument_list>
                                                                                                                                                                                    (
                                                                                                                                                                                    <argument>
                                                                                                                                                                                        <expr>
                                                                                                                                                                                            "text"
                                                                                                                                                                                        </expr>
                                                                                                                                                                                    </argument>
                                                                                                                                                                                    )
                                                                                                                                                                                </argument_list>
                                                                                                                                                                            </call>
                                                                                                                                                                        </expr>
                                                                                                                                                                        )
                                                                                                                                                                    </condition>
                                                                                                                                                                    <then>
                                                                                                                                                                        <block>
                                                                                                                                                                            {
                                                                                                                                                                            <expr_stmt>
                                                                                                                                                                                <expr>
                                                                                                                                                                                    <name>
                                                                                                                                                                                        f
                                                                                                                                                                                    </name>
                                                                                                                                                                                    =
                                                                                                                                                                                    <call>
                                                                                                                                                                                        <name>
                                                                                                                                                                                            readTextElement
                                                                                                                                                                                        </name>
                                                                                                                                                                                        <argument_list>
                                                                                                                                                                                            (
                                                                                                                                                                                            <argument>
                                                                                                                                                                                                <expr>
                                                                                                                                                                                                    <name>
                                                                                                                                                                                                        elem
                                                                                                                                                                                                    </name>
                                                                                                                                                                                                </expr>
                                                                                                                                                                                            </argument>
                                                                                                                                                                                            )
                                                                                                                                                                                        </argument_list>
                                                                                                                                                                                    </call>
                                                                                                                                                                                </expr>
                                                                                                                                                                                ;
                                                                                                                                                                            </expr_stmt>
                                                                                                                                                                            }
                                                                                                                                                                        </block>
                                                                                                                                                                    </then>
                                                                                                                                                                    <else>
                                                                                                                                                                        else
                                                                                                                                                                        <if>
                                                                                                                                                                            if
                                                                                                                                                                            <condition>
                                                                                                                                                                                (
                                                                                                                                                                                <expr>
                                                                                                                                                                                    <call>
                                                                                                                                                                                        <name>
                                                                                                                                                                                            <name>
                                                                                                                                                                                                name</name>
                                                                                                                                                                                            .
                                                                                                                                                                                            <name>
                                                                                                                                                                                                equals
                                                                                                                                                                                            </name>
                                                                                                                                                                                        </name>
                                                                                                                                                                                        <argument_list>
                                                                                                                                                                                            (
                                                                                                                                                                                            <argument>
                                                                                                                                                                                                <expr>
                                                                                                                                                                                                    "textArea"
                                                                                                                                                                                                </expr>
                                                                                                                                                                                            </argument>
                                                                                                                                                                                            )
                                                                                                                                                                                        </argument_list>
                                                                                                                                                                                    </call>
                                                                                                                                                                                </expr>
                                                                                                                                                                                )
                                                                                                                                                                            </condition>
                                                                                                                                                                            <then>
                                                                                                                                                                                <block>
                                                                                                                                                                                    {
                                                                                                                                                                                    <expr_stmt>
                                                                                                                                                                                        <expr>
                                                                                                                                                                                            <name>
                                                                                                                                                                                                f
                                                                                                                                                                                            </name>
                                                                                                                                                                                            =
                                                                                                                                                                                            <call>
                                                                                                                                                                                                <name>
                                                                                                                                                                                                    readTextAreaElement
                                                                                                                                                                                                </name>
                                                                                                                                                                                                <argument_list>
                                                                                                                                                                                                    (
                                                                                                                                                                                                    <argument>
                                                                                                                                                                                                        <expr>
                                                                                                                                                                                                            <name>
                                                                                                                                                                                                                elem
                                                                                                                                                                                                            </name>
                                                                                                                                                                                                        </expr>
                                                                                                                                                                                                    </argument>
                                                                                                                                                                                                    )
                                                                                                                                                                                                </argument_list>
                                                                                                                                                                                            </call>
                                                                                                                                                                                        </expr>
                                                                                                                                                                                        ;
                                                                                                                                                                                    </expr_stmt>
                                                                                                                                                                                    }
                                                                                                                                                                                </block>
                                                                                                                                                                            </then>
                                                                                                                                                                            <else>
                                                                                                                                                                                else
                                                                                                                                                                                <if>
                                                                                                                                                                                    if
                                                                                                                                                                                    <condition>
                                                                                                                                                                                        (
                                                                                                                                                                                        <expr>
                                                                                                                                                                                            <call>
                                                                                                                                                                                                <name>
                                                                                                                                                                                                    <name>
                                                                                                                                                                                                        name</name>
                                                                                                                                                                                                    .
                                                                                                                                                                                                    <name>
                                                                                                                                                                                                        equals
                                                                                                                                                                                                    </name>
                                                                                                                                                                                                </name>
                                                                                                                                                                                                <argument_list>
                                                                                                                                                                                                    (
                                                                                                                                                                                                    <argument>
                                                                                                                                                                                                        <expr>
                                                                                                                                                                                                            "title"
                                                                                                                                                                                                        </expr>
                                                                                                                                                                                                    </argument>
                                                                                                                                                                                                    )
                                                                                                                                                                                                </argument_list>
                                                                                                                                                                                            </call>
                                                                                                                                                                                        </expr>
                                                                                                                                                                                        )
                                                                                                                                                                                    </condition>
                                                                                                                                                                                    <then>
                                                                                                                                                                                        <block>
                                                                                                                                                                                            {
                                                                                                                                                                                            <comment
                                                                                                                                                                                                    type="line">
                                                                                                                                                                                                //FIXME
                                                                                                                                                                                                -
                                                                                                                                                                                                Implement
                                                                                                                                                                                                reading
                                                                                                                                                                                                of
                                                                                                                                                                                                title
                                                                                                                                                                                                element
                                                                                                                                                                                            </comment>
                                                                                                                                                                                            <comment
                                                                                                                                                                                                    type="line">
                                                                                                                                                                                                //f
                                                                                                                                                                                                =
                                                                                                                                                                                                readTitleElement(elem);
                                                                                                                                                                                            </comment>
                                                                                                                                                                                            }
                                                                                                                                                                                        </block>
                                                                                                                                                                                    </then>
                                                                                                                                                                                    <else>
                                                                                                                                                                                        else
                                                                                                                                                                                        <if>
                                                                                                                                                                                            if
                                                                                                                                                                                            <condition>
                                                                                                                                                                                                (
                                                                                                                                                                                                <expr>
                                                                                                                                                                                                    <call>
                                                                                                                                                                                                        <name>
                                                                                                                                                                                                            <name>
                                                                                                                                                                                                                name</name>
                                                                                                                                                                                                            .
                                                                                                                                                                                                            <name>
                                                                                                                                                                                                                equals
                                                                                                                                                                                                            </name>
                                                                                                                                                                                                        </name>
                                                                                                                                                                                                        <argument_list>
                                                                                                                                                                                                            (
                                                                                                                                                                                                            <argument>
                                                                                                                                                                                                                <expr>
                                                                                                                                                                                                                    "use"
                                                                                                                                                                                                                </expr>
                                                                                                                                                                                                            </argument>
                                                                                                                                                                                                            )
                                                                                                                                                                                                        </argument_list>
                                                                                                                                                                                                    </call>
                                                                                                                                                                                                </expr>
                                                                                                                                                                                                )
                                                                                                                                                                                            </condition>
                                                                                                                                                                                            <then>
                                                                                                                                                                                                <block>
                                                                                                                                                                                                    {
                                                                                                                                                                                                    <expr_stmt>
                                                                                                                                                                                                        <expr>
                                                                                                                                                                                                            <name>
                                                                                                                                                                                                                f
                                                                                                                                                                                                            </name>
                                                                                                                                                                                                            =
                                                                                                                                                                                                            <call>
                                                                                                                                                                                                                <name>
                                                                                                                                                                                                                    readUseElement
                                                                                                                                                                                                                </name>
                                                                                                                                                                                                                <argument_list>
                                                                                                                                                                                                                    (
                                                                                                                                                                                                                    <argument>
                                                                                                                                                                                                                        <expr>
                                                                                                                                                                                                                            <name>
                                                                                                                                                                                                                                elem
                                                                                                                                                                                                                            </name>
                                                                                                                                                                                                                        </expr>
                                                                                                                                                                                                                    </argument>
                                                                                                                                                                                                                    )
                                                                                                                                                                                                                </argument_list>
                                                                                                                                                                                                            </call>
                                                                                                                                                                                                        </expr>
                                                                                                                                                                                                        ;
                                                                                                                                                                                                    </expr_stmt>
                                                                                                                                                                                                    }
                                                                                                                                                                                                </block>
                                                                                                                                                                                            </then>
                                                                                                                                                                                            <else>
                                                                                                                                                                                                else
                                                                                                                                                                                                <if>
                                                                                                                                                                                                    if
                                                                                                                                                                                                    <condition>
                                                                                                                                                                                                        (
                                                                                                                                                                                                        <expr>
                                                                                                                                                                                                            <call>
                                                                                                                                                                                                                <name>
                                                                                                                                                                                                                    <name>
                                                                                                                                                                                                                        name</name>
                                                                                                                                                                                                                    .
                                                                                                                                                                                                                    <name>
                                                                                                                                                                                                                        equals
                                                                                                                                                                                                                    </name>
                                                                                                                                                                                                                </name>
                                                                                                                                                                                                                <argument_list>
                                                                                                                                                                                                                    (
                                                                                                                                                                                                                    <argument>
                                                                                                                                                                                                                        <expr>
                                                                                                                                                                                                                            "style"
                                                                                                                                                                                                                        </expr>
                                                                                                                                                                                                                    </argument>
                                                                                                                                                                                                                    )
                                                                                                                                                                                                                </argument_list>
                                                                                                                                                                                                            </call>
                                                                                                                                                                                                        </expr>
                                                                                                                                                                                                        )
                                                                                                                                                                                                    </condition>
                                                                                                                                                                                                    <then>
                                                                                                                                                                                                        <block>
                                                                                                                                                                                                            {
                                                                                                                                                                                                            <comment
                                                                                                                                                                                                                    type="line">
                                                                                                                                                                                                                //
                                                                                                                                                                                                                Nothing
                                                                                                                                                                                                                to
                                                                                                                                                                                                                do,
                                                                                                                                                                                                                style
                                                                                                                                                                                                                elements
                                                                                                                                                                                                                have
                                                                                                                                                                                                                been
                                                                                                                                                                                                                already
                                                                                                                                                                                                            </comment>
                                                                                                                                                                                                            <comment
                                                                                                                                                                                                                    type="line">
                                                                                                                                                                                                                //
                                                                                                                                                                                                                processed
                                                                                                                                                                                                                in
                                                                                                                                                                                                                method
                                                                                                                                                                                                                flattenStyles
                                                                                                                                                                                                            </comment>
                                                                                                                                                                                                            }
                                                                                                                                                                                                        </block>
                                                                                                                                                                                                    </then>
                                                                                                                                                                                                    <else>
                                                                                                                                                                                                        else
                                                                                                                                                                                                        <block>
                                                                                                                                                                                                            {
                                                                                                                                                                                                            <if>
                                                                                                                                                                                                                if
                                                                                                                                                                                                                <condition>
                                                                                                                                                                                                                    (
                                                                                                                                                                                                                    <expr>
                                                                                                                                                                                                                        <name>
                                                                                                                                                                                                                            DEBUG
                                                                                                                                                                                                                        </name>
                                                                                                                                                                                                                    </expr>
                                                                                                                                                                                                                    )
                                                                                                                                                                                                                </condition>
                                                                                                                                                                                                                <then>
                                                                                                                                                                                                                    <block>
                                                                                                                                                                                                                        {
                                                                                                                                                                                                                        <expr_stmt>
                                                                                                                                                                                                                            <expr>
                                                                                                                                                                                                                                <call>
                                                                                                                                                                                                                                    <name>
                                                                                                                                                                                                                                        <name>
                                                                                                                                                                                                                                            System</name>
                                                                                                                                                                                                                                        .<name>
                                                                                                                                                                                                                                        out</name>.
                                                                                                                                                                                                                                        <name>
                                                                                                                                                                                                                                            println
                                                                                                                                                                                                                                        </name>
                                                                                                                                                                                                                                    </name>
                                                                                                                                                                                                                                    <argument_list>
                                                                                                                                                                                                                                        (
                                                                                                                                                                                                                                        <argument>
                                                                                                                                                                                                                                            <expr>
                                                                                                                                                                                                                                                "SVGInputFormat
                                                                                                                                                                                                                                                not
                                                                                                                                                                                                                                                implemented
                                                                                                                                                                                                                                                for
                                                                                                                                                                                                                                                &lt;"
                                                                                                                                                                                                                                                + <name>
                                                                                                                                                                                                                                                name
                                                                                                                                                                                                                                            </name> +
                                                                                                                                                                                                                                                "&gt;"
                                                                                                                                                                                                                                            </expr>
                                                                                                                                                                                                                                        </argument>
                                                                                                                                                                                                                                        )
                                                                                                                                                                                                                                    </argument_list>
                                                                                                                                                                                                                                </call>
                                                                                                                                                                                                                            </expr>
                                                                                                                                                                                                                            ;
                                                                                                                                                                                                                        </expr_stmt>
                                                                                                                                                                                                                        }
                                                                                                                                                                                                                    </block>
                                                                                                                                                                                                                </then>
                                                                                                                                                                                                            </if>
                                                                                                                                                                                                            }
                                                                                                                                                                                                        </block>
                                                                                                                                                                                                    </else>
                                                                                                                                                                                                </if>
                                                                                                                                                                                            </else>
                                                                                                                                                                                        </if>
                                                                                                                                                                                    </else>
                                                                                                                                                                                </if>
                                                                                                                                                                            </else>
                                                                                                                                                                        </if>
                                                                                                                                                                    </else>
                                                                                                                                                                </if>
                                                                                                                                                            </else>
                                                                                                                                                        </if>
                                                                                                                                                    </else>
                                                                                                                                                </if>
                                                                                                                                            </else>
                                                                                                                                        </if>
                                                                                                                                    </else>
                                                                                                                                </if>
                                                                                                                            </else>
                                                                                                                        </if>
                                                                                                                    </else>
                                                                                                                </if>
                                                                                                            </else>
                                                                                                        </if>
                                                                                                    </else>
                                                                                                </if>
                                                                                            </else>
                                                                                        </if>
                                                                                    </else>
                                                                                </if>
                                                                            </else>
                                                                        </if>
                                                                    </else>
                                                                </if>
                                                            </else>
                                                        </if>
                                                    </else>
                                                </if>
                                            </else>
                                        </if>
                                    </else>
                                </if>
                                }
                            </block>
                        </then>
                    </if>
                    <if>if
                        <condition>(
                            <expr>
                                <name>f</name>
                                <name>instanceof</name>
                                <name>SVGFigure</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <if>if
                                    <condition>(
                                        <expr>((<name>SVGFigure</name>) <name>f</name>).
                                            <call>
                                                <name>isEmpty</name>
                                                <argument_list>()</argument_list>
                                            </call>
                                        </expr>
                                        )
                                    </condition>
                                    <then>
                                        <block>{
                                            <comment type="line">// if (DEBUG) System.out.println("Empty figure "+f);
                                            </comment>
                                            <return>return
                                                <expr>
                                                    <name>null</name>
                                                </expr>
                                                ;
                                            </return>
                                            }
                                        </block>
                                    </then>
                                </if>
                                }
                            </block>
                        </then>
                        <else>else
                            <if>if
                                <condition>(
                                    <expr>
                                        <name>f</name>
                                        !=
                                        <name>null</name>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <name>DEBUG</name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <expr_stmt>
                                                        <expr>
                                                            <call>
                                                                <name><name>System</name>.<name>out</name>.
                                                                    <name>println</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"SVGInputFormat warning: not an SVGFigure
                                                                            " +
                                                                            <name>f</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        }
                                    </block>
                                </then>
                            </if>
                        </else>
                    </if>

                    <return>return
                        <expr>
                            <name>f</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Reads an SVG "defs" element.
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>void</name>
                </type>
                <name>readDefsElement</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <for>for (
                        <init>
                            <decl>
                                <type>
                                    <name>IXMLElement</name>
                                </type>
                                <name>node</name> :
                                <range>
                                    <expr>
                                        <call>
                                            <name><name>elem</name>.
                                                <name>getChildren</name>
                                            </name>
                                            <argument_list>()</argument_list>
                                        </call>
                                    </expr>
                                </range>
                            </decl>
                        </init>
                        )
                        <block>{
                            <if>if
                                <condition>(
                                    <expr>
                                        <name>node</name>
                                        <name>instanceof</name>
                                        <name>IXMLElement</name>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <decl_stmt>
                                            <decl>
                                                <type>
                                                    <name>IXMLElement</name>
                                                </type>
                                                <name>child</name> =
                                                <init>
                                                    <expr>(<name>IXMLElement</name>)
                                                        <name>node</name>
                                                    </expr>
                                                </init>
                                            </decl>
                                            ;
                                        </decl_stmt>
                                        <decl_stmt>
                                            <decl>
                                                <type>
                                                    <name>Figure</name>
                                                </type>
                                                <name>childFigure</name> =
                                                <init>
                                                    <expr>
                                                        <call>
                                                            <name>readElement</name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>child</name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                </init>
                                            </decl>
                                            ;
                                        </decl_stmt>
                                        }
                                    </block>
                                </then>
                            </if>
                            }
                        </block>
                    </for>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Reads an SVG "g" element.
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>Figure</name>
                </type>
                <name>readGElement</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>a</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>
                                            <name>HashMap</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>AttributeKey</name>
                                                </argument>
                                                ,
                                                <argument>
                                                    <name>Object</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readCoreAttributes</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readOpacityAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>CompositeFigure</name>
                            </type>
                            <name>g</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>factory</name>.
                                            <name>createG</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>a</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <for>for (
                        <init>
                            <decl>
                                <type>
                                    <name>IXMLElement</name>
                                </type>
                                <name>node</name> :
                                <range>
                                    <expr>
                                        <call>
                                            <name><name>elem</name>.
                                                <name>getChildren</name>
                                            </name>
                                            <argument_list>()</argument_list>
                                        </call>
                                    </expr>
                                </range>
                            </decl>
                        </init>
                        )
                        <block>{
                            <if>if
                                <condition>(
                                    <expr>
                                        <name>node</name>
                                        <name>instanceof</name>
                                        <name>IXMLElement</name>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <decl_stmt>
                                            <decl>
                                                <type>
                                                    <name>IXMLElement</name>
                                                </type>
                                                <name>child</name> =
                                                <init>
                                                    <expr>(<name>IXMLElement</name>)
                                                        <name>node</name>
                                                    </expr>
                                                </init>
                                            </decl>
                                            ;
                                        </decl_stmt>
                                        <decl_stmt>
                                            <decl>
                                                <type>
                                                    <name>Figure</name>
                                                </type>
                                                <name>childFigure</name> =
                                                <init>
                                                    <expr>
                                                        <call>
                                                            <name>readElement</name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>child</name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                </init>
                                            </decl>
                                            ;
                                        </decl_stmt>
                                        <comment type="line">// skip invisible elements</comment>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>child</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"visibility"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"visible"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                    .
                                                    <call>
                                                        <name>equals</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>"visible"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                    &amp;&amp;
                                                    !
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>child</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"display"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"inline"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                    .
                                                    <call>
                                                        <name>equals</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>"none"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <if>if
                                                        <condition>(
                                                            <expr>
                                                                <name>childFigure</name>
                                                                !=
                                                                <name>null</name>
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <block>{
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>g</name>.
                                                                                <name>basicAdd</name>
                                                                            </name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>childFigure</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                }
                                                            </block>
                                                        </then>
                                                    </if>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        }
                                    </block>
                                </then>
                            </if>
                            }
                        </block>
                    </for>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readTransformAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>TRANSFORM</name>.
                                        <name>get</name>
                                    </name>
                                    <argument_list>(
                                        <argument>
                                            <expr>
                                                <name>a</name>
                                            </expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                                !=
                                <name>null</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>g</name>.
                                                <name>transform</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <call>
                                                            <name><name>TRANSFORM</name>.
                                                                <name>get</name>
                                                            </name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>a</name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>
                    <return>return
                        <expr>
                            <name>g</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Reads an SVG "a" element.
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>Figure</name>
                </type>
                <name>readAElement</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>a</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>
                                            <name>HashMap</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>AttributeKey</name>
                                                </argument>
                                                ,
                                                <argument>
                                                    <name>Object</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readCoreAttributes</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>CompositeFigure</name>
                            </type>
                            <name>g</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>factory</name>.
                                            <name>createG</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>a</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>href</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>readAttribute</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>"xlink:href"</expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>null</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>href</name>
                                ==
                                <name>null</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name>href</name>
                                        =
                                        <call>
                                            <name>readAttribute</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>elem</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"href"</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name>null</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>
                    <if>if
                        <condition>(
                            <expr>
                                <name>DEBUG</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>System</name>.<name>out</name>.
                                                <name>println</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>"SVGInputFormat.readAElement href=" +
                                                        <name>href</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>

                    <for>for (
                        <init>
                            <decl>
                                <type>
                                    <name>IXMLElement</name>
                                </type>
                                <name>node</name> :
                                <range>
                                    <expr>
                                        <call>
                                            <name><name>elem</name>.
                                                <name>getChildren</name>
                                            </name>
                                            <argument_list>()</argument_list>
                                        </call>
                                    </expr>
                                </range>
                            </decl>
                        </init>
                        )
                        <block>{
                            <if>if
                                <condition>(
                                    <expr>
                                        <name>node</name>
                                        <name>instanceof</name>
                                        <name>IXMLElement</name>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <decl_stmt>
                                            <decl>
                                                <type>
                                                    <name>IXMLElement</name>
                                                </type>
                                                <name>child</name> =
                                                <init>
                                                    <expr>(<name>IXMLElement</name>)
                                                        <name>node</name>
                                                    </expr>
                                                </init>
                                            </decl>
                                            ;
                                        </decl_stmt>
                                        <decl_stmt>
                                            <decl>
                                                <type>
                                                    <name>Figure</name>
                                                </type>
                                                <name>childFigure</name> =
                                                <init>
                                                    <expr>
                                                        <call>
                                                            <name>readElement</name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>child</name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                </init>
                                            </decl>
                                            ;
                                        </decl_stmt>
                                        <comment type="line">// skip invisible elements</comment>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>child</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"visibility"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"visible"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                    .
                                                    <call>
                                                        <name>equals</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>"visible"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                    &amp;&amp;
                                                    !
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>child</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"display"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"inline"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                    .
                                                    <call>
                                                        <name>equals</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>"none"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <if>if
                                                        <condition>(
                                                            <expr>
                                                                <name>childFigure</name>
                                                                !=
                                                                <name>null</name>
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <block>{
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>g</name>.
                                                                                <name>basicAdd</name>
                                                                            </name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>childFigure</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                }
                                                            </block>
                                                        </then>
                                                    </if>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <name>childFigure</name>
                                                    !=
                                                    <name>null</name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <expr_stmt>
                                                        <expr>
                                                            <call>
                                                                <name><name>LINK</name>.
                                                                    <name>basicSet</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            <name>childFigure</name>
                                                                        </expr>
                                                                    </argument>
                                                                    ,
                                                                    <argument>
                                                                        <expr>
                                                                            <name>href</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    }
                                                </block>
                                            </then>
                                            <else>else
                                                <block>{
                                                    <if>if
                                                        <condition>(
                                                            <expr>
                                                                <name>DEBUG</name>
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <block>{
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>System</name>.<name>out</name>.
                                                                                <name>println</name>
                                                                            </name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>"SVGInputFormat &lt;a&gt; has
                                                                                        no child figure"
                                                                                    </expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                }
                                                            </block>
                                                        </then>
                                                    </if>
                                                    }
                                                </block>
                                            </else>
                                        </if>
                                        }
                                    </block>
                                </then>
                            </if>
                            }
                        </block>
                    </for>

                    <return>return
                        <expr>(
                            <call>
                                <name><name>g</name>.
                                    <name>getChildCount</name>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                            == 1) ?
                            <call>
                                <name><name>g</name>.
                                    <name>getChild</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>0</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                            :
                            <name>g</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Reads an SVG "svg" element.
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>Figure</name>
                </type>
                <name>readSVGElement</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <comment type="line">// Establish a new viewport</comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>Viewport</name>
                            </type>
                            <name>viewport</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>Viewport</name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <expr_stmt>
                        <expr>
                            <name><name>viewport</name>.
                                <name>width</name>
                            </name>
                            =
                            <call>
                                <name>toWidth</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>readAttribute</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>elem</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"width"</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"100%"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <name><name>viewport</name>.
                                <name>height</name>
                            </name>
                            =
                            <call>
                                <name>toHeight</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>readAttribute</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>elem</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"height"</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"100%"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name>readAttribute</name>
                                    <argument_list>(
                                        <argument>
                                            <expr>
                                                <name>elem</name>
                                            </expr>
                                        </argument>
                                        ,
                                        <argument>
                                            <expr>"viewBox"</expr>
                                        </argument>
                                        ,
                                        <argument>
                                            <expr>"none"</expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                                .
                                <call>
                                    <name>equals</name>
                                    <argument_list>(
                                        <argument>
                                            <expr>"none"</expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name><name>viewport</name>.<name>viewBox</name>.
                                            <name>width</name>
                                        </name>
                                        =
                                        <name><name>viewport</name>.
                                            <name>width</name>
                                        </name>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <expr_stmt>
                                    <expr>
                                        <name><name>viewport</name>.<name>viewBox</name>.
                                            <name>height</name>
                                        </name>
                                        =
                                        <name><name>viewport</name>.
                                            <name>height</name>
                                        </name>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                        <else>else
                            <block>{
                                <decl_stmt>
                                    <decl>
                                        <type>
                                            <name>String</name>
                                            <index>[]</index>
                                        </type>
                                        <name>viewBoxValues</name> =
                                        <init>
                                            <expr>
                                                <call>
                                                    <name>toWSOrCommaSeparatedArray</name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <call>
                                                                    <name>readAttribute</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>
                                                                                <name>elem</name>
                                                                            </expr>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <expr>"viewBox"</expr>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <expr>"none"</expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                        </init>
                                    </decl>
                                    ;
                                </decl_stmt>
                                <expr_stmt>
                                    <expr>
                                        <name><name>viewport</name>.<name>viewBox</name>.
                                            <name>x</name>
                                        </name>
                                        =
                                        <call>
                                            <name>toNumber</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>elem</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name>
                                                            <name>viewBoxValues</name>
                                                            <index>[<expr>0</expr>]
                                                            </index>
                                                        </name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <expr_stmt>
                                    <expr>
                                        <name><name>viewport</name>.<name>viewBox</name>.
                                            <name>y</name>
                                        </name>
                                        =
                                        <call>
                                            <name>toNumber</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>elem</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name>
                                                            <name>viewBoxValues</name>
                                                            <index>[<expr>1</expr>]
                                                            </index>
                                                        </name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <expr_stmt>
                                    <expr>
                                        <name><name>viewport</name>.<name>viewBox</name>.
                                            <name>width</name>
                                        </name>
                                        =
                                        <call>
                                            <name>toNumber</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>elem</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name>
                                                            <name>viewBoxValues</name>
                                                            <index>[<expr>2</expr>]
                                                            </index>
                                                        </name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <expr_stmt>
                                    <expr>
                                        <name><name>viewport</name>.<name>viewBox</name>.
                                            <name>height</name>
                                        </name>
                                        =
                                        <call>
                                            <name>toNumber</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>elem</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name>
                                                            <name>viewBoxValues</name>
                                                            <index>[<expr>3</expr>]
                                                            </index>
                                                        </name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </else>
                    </if>
                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>viewportStack</name>.
                                        <name>size</name>
                                    </name>
                                    <argument_list>()</argument_list>
                                </call>
                                == 1
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <comment type="line">// We always preserve the aspect ratio for to the topmost SVG
                                    element.
                                </comment>
                                <comment type="line">// This is not compliant, but looks much better.</comment>
                                <expr_stmt>
                                    <expr>
                                        <name><name>viewport</name>.
                                            <name>isPreserveAspectRatio</name>
                                        </name>
                                        = true
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                        <else>else
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name><name>viewport</name>.
                                            <name>isPreserveAspectRatio</name>
                                        </name>
                                        = !
                                        <call>
                                            <name>readAttribute</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>elem</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"preserveAspectRatio"</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"none"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                        .
                                        <call>
                                            <name>equals</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>"none"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </else>
                    </if>

                    <expr_stmt>
                        <expr>
                            <name><name>viewport</name>.
                                <name>widthPercentFactor</name>
                            </name>
                            =
                            <name><name>viewport</name>.<name>viewBox</name>.
                                <name>width</name>
                            </name>
                            / 100d
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <name><name>viewport</name>.
                                <name>heightPercentFactor</name>
                            </name>
                            =
                            <name><name>viewport</name>.<name>viewBox</name>.
                                <name>height</name>
                            </name>
                            / 100d
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <name><name>viewport</name>.
                                <name>numberFactor</name>
                            </name>
                            =
                            <call>
                                <name><name>Math</name>.
                                    <name>min</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name><name>viewport</name>.
                                                <name>width</name>
                                            </name>
                                            /
                                            <name><name>viewport</name>.<name>viewBox</name>.
                                                <name>width</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name><name>viewport</name>.
                                                <name>height</name>
                                            </name>
                                            /
                                            <name><name>viewport</name>.<name>viewBox</name>.
                                                <name>height</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>AffineTransform</name>
                            </type>
                            <name>viewBoxTransform</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>AffineTransform</name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>viewBoxTransform</name>.
                                    <name>translate</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>-
                                            <name><name>viewport</name>.<name>viewBox</name>.
                                                <name>x</name>
                                            </name>
                                            *
                                            <name><name>viewport</name>.
                                                <name>width</name>
                                            </name>
                                            /
                                            <name><name>viewport</name>.<name>viewBox</name>.
                                                <name>width</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>-
                                            <name><name>viewport</name>.<name>viewBox</name>.
                                                <name>y</name>
                                            </name>
                                            *
                                            <name><name>viewport</name>.
                                                <name>height</name>
                                            </name>
                                            /
                                            <name><name>viewport</name>.<name>viewBox</name>.
                                                <name>height</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name><name>viewport</name>.
                                    <name>isPreserveAspectRatio</name>
                                </name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <decl_stmt>
                                    <decl>
                                        <type>
                                            <name>double</name>
                                        </type>
                                        <name>factor</name> =
                                        <init>
                                            <expr>
                                                <call>
                                                    <name><name>Math</name>.
                                                        <name>min</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name><name>viewport</name>.
                                                                    <name>width</name>
                                                                </name>
                                                                /
                                                                <name><name>viewport</name>.<name>viewBox</name>.
                                                                    <name>width</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>viewport</name>.
                                                                    <name>height</name>
                                                                </name>
                                                                /
                                                                <name><name>viewport</name>.<name>viewBox</name>.
                                                                    <name>height</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                        </init>
                                    </decl>
                                    ;
                                </decl_stmt>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>viewBoxTransform</name>.
                                                <name>scale</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>factor</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name>factor</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                        <else>else
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>viewBoxTransform</name>.
                                                <name>scale</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name><name>viewport</name>.
                                                            <name>width</name>
                                                        </name>
                                                        /
                                                        <name><name>viewport</name>.<name>viewBox</name>.
                                                            <name>width</name>
                                                        </name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name><name>viewport</name>.
                                                            <name>height</name>
                                                        </name>
                                                        /
                                                        <name><name>viewport</name>.<name>viewBox</name>.
                                                            <name>height</name>
                                                        </name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </else>
                    </if>

                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readViewportAttributes</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name><name>viewportStack</name>.
                                                    <name>firstElement</name>
                                                </name>
                                                <argument_list>()</argument_list>
                                            </call>
                                            .
                                            <name>attributes</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>viewportStack</name>.
                                    <name>push</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>viewport</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>


                    <comment type="line">// Read the figures</comment>
                    <for>for (
                        <init>
                            <decl>
                                <type>
                                    <name>IXMLElement</name>
                                </type>
                                <name>node</name> :
                                <range>
                                    <expr>
                                        <call>
                                            <name><name>elem</name>.
                                                <name>getChildren</name>
                                            </name>
                                            <argument_list>()</argument_list>
                                        </call>
                                    </expr>
                                </range>
                            </decl>
                        </init>
                        )
                        <block>{
                            <if>if
                                <condition>(
                                    <expr>
                                        <name>node</name>
                                        <name>instanceof</name>
                                        <name>IXMLElement</name>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <decl_stmt>
                                            <decl>
                                                <type>
                                                    <name>IXMLElement</name>
                                                </type>
                                                <name>child</name> =
                                                <init>
                                                    <expr>(<name>IXMLElement</name>)
                                                        <name>node</name>
                                                    </expr>
                                                </init>
                                            </decl>
                                            ;
                                        </decl_stmt>
                                        <decl_stmt>
                                            <decl>
                                                <type>
                                                    <name>Figure</name>
                                                </type>
                                                <name>childFigure</name> =
                                                <init>
                                                    <expr>
                                                        <call>
                                                            <name>readElement</name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>child</name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                </init>
                                            </decl>
                                            ;
                                        </decl_stmt>
                                        <comment type="line">// skip invisible elements</comment>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>child</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"visibility"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"visible"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                    .
                                                    <call>
                                                        <name>equals</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>"visible"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                    &amp;&amp;
                                                    !
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>child</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"display"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"inline"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                    .
                                                    <call>
                                                        <name>equals</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>"none"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{

                                                    <if>if
                                                        <condition>(
                                                            <expr>
                                                                <name>childFigure</name>
                                                                !=
                                                                <name>null</name>
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <block>{
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>childFigure</name>.
                                                                                <name>transform</name>
                                                                            </name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>viewBoxTransform</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>figures</name>.
                                                                                <name>add</name>
                                                                            </name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>childFigure</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                }
                                                            </block>
                                                        </then>
                                                    </if>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        }
                                    </block>
                                </then>
                            </if>
                            }
                        </block>
                    </for>

                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>viewportStack</name>.
                                    <name>pop</name>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <return>return
                        <expr>
                            <name>null</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Reads an SVG "rect" element.
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>Figure</name>
                </type>
                <name>readRectElement</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>a</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>
                                            <name>HashMap</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>AttributeKey</name>
                                                </argument>
                                                ,
                                                <argument>
                                                    <name>Object</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readCoreAttributes</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readTransformAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readOpacityAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readShapeAttributes</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>x</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toNumber</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"x"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"0"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>y</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toNumber</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"y"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"0"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>w</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toWidth</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"width"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"0"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>h</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toHeight</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"height"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"0"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>rxValue</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>readAttribute</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>"rx"</expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>"none"</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>ryValue</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>readAttribute</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>"ry"</expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>"none"</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>rxValue</name>.
                                        <name>equals</name>
                                    </name>
                                    <argument_list>(
                                        <argument>
                                            <expr>"none"</expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name>rxValue</name>
                                        =
                                        <name>ryValue</name>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>
                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>ryValue</name>.
                                        <name>equals</name>
                                    </name>
                                    <argument_list>(
                                        <argument>
                                            <expr>"none"</expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name>ryValue</name>
                                        =
                                        <name>rxValue</name>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>rx</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toNumber</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name><name>rxValue</name>.
                                                            <name>equals</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>"none"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                    ? "0" :
                                                    <name>rxValue</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>ry</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toNumber</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name><name>ryValue</name>.
                                                            <name>equals</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>"none"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                    ? "0" :
                                                    <name>ryValue</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>Figure</name>
                            </type>
                            <name>figure</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>factory</name>.
                                            <name>createRect</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>x</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>y</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>w</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>h</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>rx</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>ry</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>a</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>elementObjects</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>figure</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <return>return
                        <expr>
                            <name>figure</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Reads an SVG "circle" element.
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>Figure</name>
                </type>
                <name>readCircleElement</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>a</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>
                                            <name>HashMap</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>AttributeKey</name>
                                                </argument>
                                                ,
                                                <argument>
                                                    <name>Object</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readCoreAttributes</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readTransformAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readOpacityAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readShapeAttributes</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>cx</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toWidth</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"cx"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"0"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>cy</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toHeight</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"cy"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"0"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>r</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toWidth</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"r"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"0"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>Figure</name>
                            </type>
                            <name>figure</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>factory</name>.
                                            <name>createCircle</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>cx</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>cy</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>r</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>a</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>elementObjects</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>figure</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <return>return
                        <expr>
                            <name>figure</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Reads an SVG "ellipse" element.
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>Figure</name>
                </type>
                <name>readEllipseElement</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>a</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>
                                            <name>HashMap</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>AttributeKey</name>
                                                </argument>
                                                ,
                                                <argument>
                                                    <name>Object</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readCoreAttributes</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readTransformAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readOpacityAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readShapeAttributes</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>cx</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toWidth</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"cx"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"0"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>cy</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toHeight</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"cy"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"0"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>rx</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toWidth</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"rx"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"0"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>ry</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toHeight</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"ry"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"0"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>Figure</name>
                            </type>
                            <name>figure</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>factory</name>.
                                            <name>createEllipse</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>cx</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>cy</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>rx</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>ry</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>a</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>elementObjects</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>figure</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <return>return
                        <expr>
                            <name>figure</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Reads an SVG "image" element.
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>Figure</name>
                </type>
                <name>readImageElement</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>a</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>
                                            <name>HashMap</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>AttributeKey</name>
                                                </argument>
                                                ,
                                                <argument>
                                                    <name>Object</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readCoreAttributes</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readTransformAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readOpacityAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>x</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toNumber</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"x"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"0"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>y</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toNumber</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"y"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"0"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>w</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toWidth</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"width"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"0"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>h</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toHeight</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"height"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"0"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>href</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>readAttribute</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>"xlink:href"</expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>null</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>href</name>
                                ==
                                <name>null</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name>href</name>
                                        =
                                        <call>
                                            <name>readAttribute</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>elem</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>"href"</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name>null</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>byte</name>
                                <index>[]</index>
                            </type>
                            <name>imageData</name> =
                            <init>
                                <expr>
                                    <name>null</name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>href</name>
                                !=
                                <name>null</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <if>if
                                    <condition>(
                                        <expr>
                                            <call>
                                                <name><name>href</name>.
                                                    <name>startsWith</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"data:"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                        )
                                    </condition>
                                    <then>
                                        <block>{
                                            <decl_stmt>
                                                <decl>
                                                    <type>
                                                        <name>int</name>
                                                    </type>
                                                    <name>semicolonPos</name> =
                                                    <init>
                                                        <expr>
                                                            <call>
                                                                <name><name>href</name>.
                                                                    <name>indexOf</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>';'</expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </init>
                                                </decl>
                                                ;
                                            </decl_stmt>
                                            <if>if
                                                <condition>(
                                                    <expr>
                                                        <name>semicolonPos</name>
                                                        != -1
                                                    </expr>
                                                    )
                                                </condition>
                                                <then>
                                                    <block>{
                                                        <if>if
                                                            <condition>(
                                                                <expr>
                                                                    <call>
                                                                        <name><name>href</name>.
                                                                            <name>indexOf</name>
                                                                        </name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>";base64,"</expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                    ==
                                                                    <name>semicolonPos</name>
                                                                </expr>
                                                                )
                                                            </condition>
                                                            <then>
                                                                <block>{
                                                                    <expr_stmt>
                                                                        <expr>
                                                                            <name>imageData</name>
                                                                            =
                                                                            <call>
                                                                                <name><name>Base64</name>.
                                                                                    <name>decode</name>
                                                                                </name>
                                                                                <argument_list>(
                                                                                    <argument>
                                                                                        <expr>
                                                                                            <call>
                                                                                                <name><name>href</name>.
                                                                                                    <name>substring
                                                                                                    </name>
                                                                                                </name>
                                                                                                <argument_list>(
                                                                                                    <argument>
                                                                                                        <expr>
                                                                                                            <name>
                                                                                                                semicolonPos
                                                                                                            </name>
                                                                                                            + 8
                                                                                                        </expr>
                                                                                                    </argument>
                                                                                                    )
                                                                                                </argument_list>
                                                                                            </call>
                                                                                        </expr>
                                                                                    </argument>
                                                                                    )
                                                                                </argument_list>
                                                                            </call>
                                                                        </expr>
                                                                        ;
                                                                    </expr_stmt>
                                                                    }
                                                                </block>
                                                            </then>
                                                            <else>else
                                                                <block>{
                                                                    <throw>throw
                                                                        <expr>new
                                                                            <call>
                                                                                <name>IOException</name>
                                                                                <argument_list>(
                                                                                    <argument>
                                                                                        <expr>"Unsupported encoding in
                                                                                            data href in image element:"
                                                                                            +
                                                                                            <name>href</name>
                                                                                        </expr>
                                                                                    </argument>
                                                                                    )
                                                                                </argument_list>
                                                                            </call>
                                                                        </expr>
                                                                        ;
                                                                    </throw>
                                                                    }
                                                                </block>
                                                            </else>
                                                        </if>
                                                        }
                                                    </block>
                                                </then>
                                                <else>else
                                                    <block>{
                                                        <throw>throw
                                                            <expr>new
                                                                <call>
                                                                    <name>IOException</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>"Unsupported data href in image
                                                                                element:" +
                                                                                <name>href</name>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            ;
                                                        </throw>
                                                        }
                                                    </block>
                                                </else>
                                            </if>
                                            }
                                        </block>
                                    </then>
                                    <else>else
                                        <block>{
                                            <decl_stmt>
                                                <decl>
                                                    <type>
                                                        <name>URL</name>
                                                    </type>
                                                    <name>imageUrl</name> =
                                                    <init>
                                                        <expr>new
                                                            <call>
                                                                <name>URL</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            <name>url</name>
                                                                        </expr>
                                                                    </argument>
                                                                    ,
                                                                    <argument>
                                                                        <expr>
                                                                            <name>href</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </init>
                                                </decl>
                                                ;
                                            </decl_stmt>

                                            <comment type="line">// Read the image data from the URL into a byte array
                                            </comment>
                                            <decl_stmt>
                                                <decl>
                                                    <type>
                                                        <name>ByteArrayOutputStream</name>
                                                    </type>
                                                    <name>bout</name> =
                                                    <init>
                                                        <expr>new
                                                            <call>
                                                                <name>ByteArrayOutputStream</name>
                                                                <argument_list>()</argument_list>
                                                            </call>
                                                        </expr>
                                                    </init>
                                                </decl>
                                                ;
                                            </decl_stmt>
                                            <decl_stmt>
                                                <decl>
                                                    <type>
                                                        <name>byte</name>
                                                        <index>[]</index>
                                                    </type>
                                                    <name>buf</name> =
                                                    <init>
                                                        <expr>new
                                                            <name>
                                                                <name>byte</name>
                                                                <index>[<expr>512</expr>]
                                                                </index>
                                                            </name>
                                                        </expr>
                                                    </init>
                                                </decl>
                                                ;
                                            </decl_stmt>
                                            <decl_stmt>
                                                <decl>
                                                    <type>
                                                        <name>int</name>
                                                    </type>
                                                    <name>len</name> =
                                                    <init>
                                                        <expr>0</expr>
                                                    </init>
                                                </decl>
                                                ;
                                            </decl_stmt>
                                            <decl_stmt>
                                                <decl>
                                                    <type>
                                                        <name>InputStream</name>
                                                    </type>
                                                    <name>in</name> =
                                                    <init>
                                                        <expr>
                                                            <name>null</name>
                                                        </expr>
                                                    </init>
                                                </decl>
                                                ;
                                            </decl_stmt>
                                            <try>try
                                                <block>{
                                                    <expr_stmt>
                                                        <expr>
                                                            <name>in</name>
                                                            =
                                                            <call>
                                                                <name><name>imageUrl</name>.
                                                                    <name>openStream</name>
                                                                </name>
                                                                <argument_list>()</argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <while>while
                                                        <condition>(
                                                            <expr>(<name>len</name> =
                                                                <call>
                                                                    <name><name>in</name>.
                                                                        <name>read</name>
                                                                    </name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>
                                                                                <name>buf</name>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                                ) &gt; 0
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <block>{
                                                            <expr_stmt>
                                                                <expr>
                                                                    <call>
                                                                        <name><name>bout</name>.
                                                                            <name>write</name>
                                                                        </name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>
                                                                                    <name>buf</name>
                                                                                </expr>
                                                                            </argument>
                                                                            ,
                                                                            <argument>
                                                                                <expr>0</expr>
                                                                            </argument>
                                                                            ,
                                                                            <argument>
                                                                                <expr>
                                                                                    <name>len</name>
                                                                                </expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            }
                                                        </block>
                                                    </while>
                                                    <expr_stmt>
                                                        <expr>
                                                            <name>imageData</name>
                                                            =
                                                            <call>
                                                                <name><name>bout</name>.
                                                                    <name>toByteArray</name>
                                                                </name>
                                                                <argument_list>()</argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    }
                                                </block>
                                                <catch>catch (
                                                    <param>
                                                        <decl>
                                                            <type>
                                                                <name>FileNotFoundException</name>
                                                            </type>
                                                            <name>e</name>
                                                        </decl>
                                                    </param>
                                                    )
                                                    <block>{
                                                        <comment type="line">// Use empty image</comment>
                                                        }
                                                    </block>
                                                </catch>
                                                <finally>finally
                                                    <block>{
                                                        <if>if
                                                            <condition>(
                                                                <expr>
                                                                    <name>in</name>
                                                                    !=
                                                                    <name>null</name>
                                                                </expr>
                                                                )
                                                            </condition>
                                                            <then>
                                                                <block>{
                                                                    <expr_stmt>
                                                                        <expr>
                                                                            <call>
                                                                                <name><name>in</name>.
                                                                                    <name>close</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                        </expr>
                                                                        ;
                                                                    </expr_stmt>
                                                                    }
                                                                </block>
                                                            </then>
                                                        </if>
                                                        }
                                                    </block>
                                                </finally>
                                            </try>
                                            }
                                        </block>
                                    </else>
                                </if>
                                }
                            </block>
                        </then>
                    </if>
                    <comment type="line">// Create a buffered image from the image data</comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>BufferedImage</name>
                            </type>
                            <name>bufferedImage</name> =
                            <init>
                                <expr>
                                    <name>null</name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>imageData</name>
                                !=
                                <name>null</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name>bufferedImage</name>
                                        =
                                        <call>
                                            <name><name>ImageIO</name>.
                                                <name>read</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>new
                                                        <call>
                                                            <name>ByteArrayInputStream</name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>imageData</name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>
                    <comment type="line">// Delete the image data in case of failure</comment>
                    <if>if
                        <condition>(
                            <expr>
                                <name>bufferedImage</name>
                                ==
                                <name>null</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name>imageData</name>
                                        =
                                        <name>null</name>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <comment type="line">//if (DEBUG) System.out.println("FAILED:"+imageUrl);</comment>
                                }
                            </block>
                        </then>
                    </if>

                    <comment type="line">// Create a figure from the image data and the buffered image.</comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>Figure</name>
                            </type>
                            <name>figure</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>factory</name>.
                                            <name>createImage</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>x</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>y</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>w</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>h</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>imageData</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>bufferedImage</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>a</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>elementObjects</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>figure</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <return>return
                        <expr>
                            <name>figure</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Reads an SVG "line" element.
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>Figure</name>
                </type>
                <name>readLineElement</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>a</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>
                                            <name>HashMap</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>AttributeKey</name>
                                                </argument>
                                                ,
                                                <argument>
                                                    <name>Object</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readCoreAttributes</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readTransformAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readOpacityAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readLineAttributes</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <comment type="line">// Because 'line' elements are single lines and thus are geometrically
                    </comment>
                    <comment type="line">// one-dimensional, they have no interior; thus, 'line' elements are</comment>
                    <comment type="line">// never filled (see the 'fill' property).</comment>
                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>FILL_COLOR</name>.
                                        <name>get</name>
                                    </name>
                                    <argument_list>(
                                        <argument>
                                            <expr>
                                                <name>a</name>
                                            </expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                                != <name>null</name> &amp;&amp;
                                <call>
                                    <name><name>STROKE_COLOR</name>.
                                        <name>get</name>
                                    </name>
                                    <argument_list>(
                                        <argument>
                                            <expr>
                                                <name>a</name>
                                            </expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                                ==
                                <name>null</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>STROKE_COLOR</name>.
                                                <name>set</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>a</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <call>
                                                            <name><name>FILL_COLOR</name>.
                                                                <name>get</name>
                                                            </name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>a</name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>
                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>FILL_GRADIENT</name>.
                                        <name>get</name>
                                    </name>
                                    <argument_list>(
                                        <argument>
                                            <expr>
                                                <name>a</name>
                                            </expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                                != <name>null</name> &amp;&amp;
                                <call>
                                    <name><name>STROKE_GRADIENT</name>.
                                        <name>get</name>
                                    </name>
                                    <argument_list>(
                                        <argument>
                                            <expr>
                                                <name>a</name>
                                            </expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                                ==
                                <name>null</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>STROKE_GRADIENT</name>.
                                                <name>set</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>a</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <call>
                                                            <name><name>FILL_GRADIENT</name>.
                                                                <name>get</name>
                                                            </name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>a</name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>FILL_COLOR</name>.
                                    <name>set</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>null</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>FILL_GRADIENT</name>.
                                    <name>set</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>null</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>x1</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toNumber</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"x1"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"0"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>y1</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toNumber</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"y1"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"0"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>x2</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toNumber</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"x2"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"0"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>y2</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toNumber</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"y2"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"0"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>Figure</name>
                            </type>
                            <name>figure</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>factory</name>.
                                            <name>createLine</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>x1</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>y1</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>x2</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>y2</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>a</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>elementObjects</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>figure</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <return>return
                        <expr>
                            <name>figure</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Reads an SVG "polyline" element.
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>Figure</name>
                </type>
                <name>readPolylineElement</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>a</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>
                                            <name>HashMap</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>AttributeKey</name>
                                                </argument>
                                                ,
                                                <argument>
                                                    <name>Object</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readCoreAttributes</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readTransformAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readOpacityAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readLineAttributes</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name><name>Point2D</name>.
                                    <name>Double</name>
                                </name>
                                <index>[]</index>
                            </type>
                            <name>points</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toPoints</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"points"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>""</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>Figure</name>
                            </type>
                            <name>figure</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>factory</name>.
                                            <name>createPolyline</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>points</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>a</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>elementObjects</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>figure</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <return>return
                        <expr>
                            <name>figure</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Reads an SVG "polygon" element.
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>Figure</name>
                </type>
                <name>readPolygonElement</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>a</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>
                                            <name>HashMap</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>AttributeKey</name>
                                                </argument>
                                                ,
                                                <argument>
                                                    <name>Object</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readCoreAttributes</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readTransformAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readOpacityAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readShapeAttributes</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name><name>Point2D</name>.
                                    <name>Double</name>
                                </name>
                                <index>[]</index>
                            </type>
                            <name>points</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toPoints</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"points"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>""</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>Figure</name>
                            </type>
                            <name>figure</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>factory</name>.
                                            <name>createPolygon</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>points</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>a</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>elementObjects</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>figure</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <return>return
                        <expr>
                            <name>figure</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Reads an SVG "path" element.
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>Figure</name>
                </type>
                <name>readPathElement</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>a</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>
                                            <name>HashMap</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>AttributeKey</name>
                                                </argument>
                                                ,
                                                <argument>
                                                    <name>Object</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readCoreAttributes</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readTransformAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readOpacityAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readShapeAttributes</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>BezierPath</name>
                                <index>[]</index>
                            </type>
                            <name>beziers</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toPath</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"d"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>""</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>Figure</name>
                            </type>
                            <name>figure</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>factory</name>.
                                            <name>createPath</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>beziers</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>a</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>elementObjects</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>figure</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <return>return
                        <expr>
                            <name>figure</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Reads an SVG "text" element.
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>Figure</name>
                </type>
                <name>readTextElement</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>a</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>
                                            <name>HashMap</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>AttributeKey</name>
                                                </argument>
                                                ,
                                                <argument>
                                                    <name>Object</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readCoreAttributes</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readTransformAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readOpacityAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readShapeAttributes</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readFontAttributes</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readTextAttributes</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>String</name>
                                <index>[]</index>
                            </type>
                            <name>xStr</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toCommaSeparatedArray</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"x"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"0"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>String</name>
                                <index>[]</index>
                            </type>
                            <name>yStr</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toCommaSeparatedArray</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"y"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"0"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name><name>Point2D</name>.
                                    <name>Double</name>
                                </name>
                                <index>[]</index>
                            </type>
                            <name>coordinates</name> =
                            <init>
                                <expr>new
                                    <name><name>Point2D</name>.
                                        <name>Double</name>
                                        <index>[
                                            <expr>
                                                <call>
                                                    <name><name>Math</name>.
                                                        <name>max</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name><name>xStr</name>.
                                                                    <name>length</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>yStr</name>.
                                                                    <name>length</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ]
                                        </index>
                                    </name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>lastX</name> =
                            <init>
                                <expr>0</expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>lastY</name> =
                            <init>
                                <expr>0</expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <for>for (
                        <init>
                            <decl>
                                <type>
                                    <name>int</name>
                                </type>
                                <name>i</name> =
                                <init>
                                    <expr>0</expr>
                                </init>
                            </decl>
                            ;
                        </init>
                        <condition>
                            <expr>
                                <name>i</name>
                                &lt;
                                <name><name>coordinates</name>.
                                    <name>length</name>
                                </name>
                            </expr>
                            ;
                        </condition>
                        <incr>
                            <expr><name>i</name>++
                            </expr>
                        </incr>
                        )
                        <block>{
                            <if>if
                                <condition>(
                                    <expr>
                                        <name><name>xStr</name>.
                                            <name>length</name>
                                        </name>
                                        &gt;
                                        <name>i</name>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <try>try
                                            <block>{
                                                <expr_stmt>
                                                    <expr>
                                                        <name>lastX</name>
                                                        =
                                                        <call>
                                                            <name>toNumber</name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>elem</name>
                                                                    </expr>
                                                                </argument>
                                                                ,
                                                                <argument>
                                                                    <expr>
                                                                        <name>
                                                                            <name>xStr</name>
                                                                            <index>[
                                                                                <expr>
                                                                                    <name>i</name>
                                                                                </expr>
                                                                                ]
                                                                            </index>
                                                                        </name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                    ;
                                                </expr_stmt>
                                                }
                                            </block>
                                            <catch>catch (
                                                <param>
                                                    <decl>
                                                        <type>
                                                            <name>NumberFormatException</name>
                                                        </type>
                                                        <name>ex</name>
                                                    </decl>
                                                </param>
                                                )
                                                <block>{
                                                    }
                                                </block>
                                            </catch>
                                        </try>
                                        }
                                    </block>
                                </then>
                            </if>
                            <if>if
                                <condition>(
                                    <expr>
                                        <name><name>yStr</name>.
                                            <name>length</name>
                                        </name>
                                        &gt;
                                        <name>i</name>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <try>try
                                            <block>{
                                                <expr_stmt>
                                                    <expr>
                                                        <name>lastY</name>
                                                        =
                                                        <call>
                                                            <name>toNumber</name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>elem</name>
                                                                    </expr>
                                                                </argument>
                                                                ,
                                                                <argument>
                                                                    <expr>
                                                                        <name>
                                                                            <name>yStr</name>
                                                                            <index>[
                                                                                <expr>
                                                                                    <name>i</name>
                                                                                </expr>
                                                                                ]
                                                                            </index>
                                                                        </name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                    ;
                                                </expr_stmt>
                                                }
                                            </block>
                                            <catch>catch (
                                                <param>
                                                    <decl>
                                                        <type>
                                                            <name>NumberFormatException</name>
                                                        </type>
                                                        <name>ex</name>
                                                    </decl>
                                                </param>
                                                )
                                                <block>{
                                                    }
                                                </block>
                                            </catch>
                                        </try>
                                        }
                                    </block>
                                </then>
                            </if>
                            <expr_stmt>
                                <expr>
                                    <name>
                                        <name>coordinates</name>
                                        <index>[
                                            <expr>
                                                <name>i</name>
                                            </expr>
                                            ]
                                        </index>
                                    </name>
                                    = new
                                    <call>
                                        <name><name>Point2D</name>.
                                            <name>Double</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>lastX</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>lastY</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                                ;
                            </expr_stmt>
                            }
                        </block>
                    </for>


                    <decl_stmt>
                        <decl>
                            <type>
                                <name>String</name>
                                <index>[]</index>
                            </type>
                            <name>rotateStr</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toCommaSeparatedArray</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"rotate"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>""</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                                <index>[]</index>
                            </type>
                            <name>rotate</name> =
                            <init>
                                <expr>new
                                    <name>
                                        <name>double</name>
                                        <index>[
                                            <expr>
                                                <name><name>rotateStr</name>.
                                                    <name>length</name>
                                                </name>
                                            </expr>
                                            ]
                                        </index>
                                    </name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <for>for (
                        <init>
                            <decl>
                                <type>
                                    <name>int</name>
                                </type>
                                <name>i</name> =
                                <init>
                                    <expr>0</expr>
                                </init>
                            </decl>
                            ;
                        </init>
                        <condition>
                            <expr>
                                <name>i</name>
                                &lt;
                                <name><name>rotateStr</name>.
                                    <name>length</name>
                                </name>
                            </expr>
                            ;
                        </condition>
                        <incr>
                            <expr><name>i</name>++
                            </expr>
                        </incr>
                        )
                        <block>{
                            <try>try
                                <block>{
                                    <expr_stmt>
                                        <expr>
                                            <name>
                                                <name>rotate</name>
                                                <index>[
                                                    <expr>
                                                        <name>i</name>
                                                    </expr>
                                                    ]
                                                </index>
                                            </name>
                                            =
                                            <call>
                                                <name>toDouble</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>elem</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>
                                                                <name>rotateStr</name>
                                                                <index>[
                                                                    <expr>
                                                                        <name>i</name>
                                                                    </expr>
                                                                    ]
                                                                </index>
                                                            </name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                        ;
                                    </expr_stmt>
                                    }
                                </block>
                                <catch>catch (
                                    <param>
                                        <decl>
                                            <type>
                                                <name>NumberFormatException</name>
                                            </type>
                                            <name>ex</name>
                                        </decl>
                                    </param>
                                    )
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name>
                                                    <name>rotate</name>
                                                    <index>[
                                                        <expr>
                                                            <name>i</name>
                                                        </expr>
                                                        ]
                                                    </index>
                                                </name>
                                                = 0
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </catch>
                            </try>
                            }
                        </block>
                    </for>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>DefaultStyledDocument</name>
                            </type>
                            <name>doc</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>DefaultStyledDocument</name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <try>try
                        <block>{
                            <if>if
                                <condition>(
                                    <expr>
                                        <call>
                                            <name><name>elem</name>.
                                                <name>getContent</name>
                                            </name>
                                            <argument_list>()</argument_list>
                                        </call>
                                        !=
                                        <name>null</name>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>doc</name>.
                                                        <name>insertString</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>0</expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <call>
                                                                    <name>toText</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>
                                                                                <name>elem</name>
                                                                            </expr>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>elem</name>.
                                                                                        <name>getContent</name>
                                                                                    </name>
                                                                                    <argument_list>()</argument_list>
                                                                                </call>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name>null</name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </then>
                                <else>else
                                    <block>{
                                        <for>for (
                                            <init>
                                                <decl>
                                                    <type>
                                                        <name>IXMLElement</name>
                                                    </type>
                                                    <name>node</name> :
                                                    <range>
                                                        <expr>
                                                            <call>
                                                                <name><name>elem</name>.
                                                                    <name>getChildren</name>
                                                                </name>
                                                                <argument_list>()</argument_list>
                                                            </call>
                                                        </expr>
                                                    </range>
                                                </decl>
                                            </init>
                                            )
                                            <block>{
                                                <if>if
                                                    <condition>(
                                                        <expr>
                                                            <call>
                                                                <name><name>node</name>.
                                                                    <name>getName</name>
                                                                </name>
                                                                <argument_list>()</argument_list>
                                                            </call>
                                                            ==
                                                            <name>null</name>
                                                        </expr>
                                                        )
                                                    </condition>
                                                    <then>
                                                        <block>{
                                                            <expr_stmt>
                                                                <expr>
                                                                    <call>
                                                                        <name><name>doc</name>.
                                                                            <name>insertString</name>
                                                                        </name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>0</expr>
                                                                            </argument>
                                                                            ,
                                                                            <argument>
                                                                                <expr>
                                                                                    <call>
                                                                                        <name>toText</name>
                                                                                        <argument_list>(
                                                                                            <argument>
                                                                                                <expr>
                                                                                                    <name>elem</name>
                                                                                                </expr>
                                                                                            </argument>
                                                                                            ,
                                                                                            <argument>
                                                                                                <expr>
                                                                                                    <call>
                                                                                                        <name><name>
                                                                                                            node</name>.
                                                                                                            <name>
                                                                                                                getContent
                                                                                                            </name>
                                                                                                        </name>
                                                                                                        <argument_list>
                                                                                                            ()
                                                                                                        </argument_list>
                                                                                                    </call>
                                                                                                </expr>
                                                                                            </argument>
                                                                                            )
                                                                                        </argument_list>
                                                                                    </call>
                                                                                </expr>
                                                                            </argument>
                                                                            ,
                                                                            <argument>
                                                                                <expr>
                                                                                    <name>null</name>
                                                                                </expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            }
                                                        </block>
                                                    </then>
                                                    <else>else
                                                        <if>if
                                                            <condition>(
                                                                <expr>
                                                                    <call>
                                                                        <name><name>node</name>.
                                                                            <name>getName</name>
                                                                        </name>
                                                                        <argument_list>()</argument_list>
                                                                    </call>
                                                                    .
                                                                    <call>
                                                                        <name>equals</name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>"tspan"</expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                                )
                                                            </condition>
                                                            <then>
                                                                <block>{
                                                                    <expr_stmt>
                                                                        <expr>
                                                                            <call>
                                                                                <name>readTSpanElement</name>
                                                                                <argument_list>(
                                                                                    <argument>
                                                                                        <expr>(<name>IXMLElement</name>)
                                                                                            <name>node</name>
                                                                                        </expr>
                                                                                    </argument>
                                                                                    ,
                                                                                    <argument>
                                                                                        <expr>
                                                                                            <name>doc</name>
                                                                                        </expr>
                                                                                    </argument>
                                                                                    )
                                                                                </argument_list>
                                                                            </call>
                                                                        </expr>
                                                                        ;
                                                                    </expr_stmt>
                                                                    }
                                                                </block>
                                                            </then>
                                                            <else>else
                                                                <block>{
                                                                    <if>if
                                                                        <condition>(
                                                                            <expr>
                                                                                <name>DEBUG</name>
                                                                            </expr>
                                                                            )
                                                                        </condition>
                                                                        <then>
                                                                            <block>{
                                                                                <expr_stmt>
                                                                                    <expr>
                                                                                        <call>
                                                                                            <name><name>System</name>
                                                                                                .<name>out</name>.
                                                                                                <name>println</name>
                                                                                            </name>
                                                                                            <argument_list>(
                                                                                                <argument>
                                                                                                    <expr>
                                                                                                        "SVGInputFormat
                                                                                                        unsupported text
                                                                                                        node &lt;" +
                                                                                                        <call>
                                                                                                            <name><name>
                                                                                                                node</name>
                                                                                                                .
                                                                                                                <name>
                                                                                                                    getName
                                                                                                                </name>
                                                                                                            </name>
                                                                                                            <argument_list>
                                                                                                                ()
                                                                                                            </argument_list>
                                                                                                        </call>
                                                                                                        + "&gt;"
                                                                                                    </expr>
                                                                                                </argument>
                                                                                                )
                                                                                            </argument_list>
                                                                                        </call>
                                                                                    </expr>
                                                                                    ;
                                                                                </expr_stmt>
                                                                                }
                                                                            </block>
                                                                        </then>
                                                                    </if>
                                                                    }
                                                                </block>
                                                            </else>
                                                        </if>
                                                    </else>
                                                </if>
                                                }
                                            </block>
                                        </for>
                                        }
                                    </block>
                                </else>
                            </if>
                            }
                        </block>
                        <catch>catch (
                            <param>
                                <decl>
                                    <type>
                                        <name>BadLocationException</name>
                                    </type>
                                    <name>e</name>
                                </decl>
                            </param>
                            )
                            <block>{
                                <decl_stmt>
                                    <decl>
                                        <type>
                                            <name>InternalError</name>
                                        </type>
                                        <name>ex</name> =
                                        <init>
                                            <expr>new
                                                <call>
                                                    <name>InternalError</name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <call>
                                                                    <name><name>e</name>.
                                                                        <name>getMessage</name>
                                                                    </name>
                                                                    <argument_list>()</argument_list>
                                                                </call>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                        </init>
                                    </decl>
                                    ;
                                </decl_stmt>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>ex</name>.
                                                <name>initCause</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>e</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <throw>throw
                                    <expr>
                                        <name>ex</name>
                                    </expr>
                                    ;
                                </throw>
                                }
                            </block>
                        </catch>
                    </try>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>Figure</name>
                            </type>
                            <name>figure</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>factory</name>.
                                            <name>createText</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>coordinates</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>rotate</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>doc</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>a</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>elementObjects</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>figure</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <return>return
                        <expr>
                            <name>figure</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Reads an SVG "textArea" element.
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>Figure</name>
                </type>
                <name>readTextAreaElement</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>a</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>
                                            <name>HashMap</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>AttributeKey</name>
                                                </argument>
                                                ,
                                                <argument>
                                                    <name>Object</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readCoreAttributes</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readTransformAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readOpacityAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readShapeAttributes</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readFontAttributes</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readTextAttributes</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readTextFlowAttributes</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>x</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toNumber</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"x"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"0"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>y</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toNumber</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"y"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"0"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <comment type="line">// XXX - Handle "auto" width and height</comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>w</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toWidth</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"width"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"0"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>h</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toHeight</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"height"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"0"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>DefaultStyledDocument</name>
                            </type>
                            <name>doc</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>DefaultStyledDocument</name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <try>try
                        <block>{
                            <if>if
                                <condition>(
                                    <expr>
                                        <call>
                                            <name><name>elem</name>.
                                                <name>getContent</name>
                                            </name>
                                            <argument_list>()</argument_list>
                                        </call>
                                        !=
                                        <name>null</name>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>doc</name>.
                                                        <name>insertString</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>0</expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <call>
                                                                    <name>toText</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>
                                                                                <name>elem</name>
                                                                            </expr>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>elem</name>.
                                                                                        <name>getContent</name>
                                                                                    </name>
                                                                                    <argument_list>()</argument_list>
                                                                                </call>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name>null</name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </then>
                                <else>else
                                    <block>{
                                        <for>for (
                                            <init>
                                                <decl>
                                                    <type>
                                                        <name>IXMLElement</name>
                                                    </type>
                                                    <name>node</name> :
                                                    <range>
                                                        <expr>
                                                            <call>
                                                                <name><name>elem</name>.
                                                                    <name>getChildren</name>
                                                                </name>
                                                                <argument_list>()</argument_list>
                                                            </call>
                                                        </expr>
                                                    </range>
                                                </decl>
                                            </init>
                                            )
                                            <block>{
                                                <if>if
                                                    <condition>(
                                                        <expr>
                                                            <call>
                                                                <name><name>node</name>.
                                                                    <name>getName</name>
                                                                </name>
                                                                <argument_list>()</argument_list>
                                                            </call>
                                                            ==
                                                            <name>null</name>
                                                        </expr>
                                                        )
                                                    </condition>
                                                    <then>
                                                        <block>{
                                                            <expr_stmt>
                                                                <expr>
                                                                    <call>
                                                                        <name><name>doc</name>.
                                                                            <name>insertString</name>
                                                                        </name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>0</expr>
                                                                            </argument>
                                                                            ,
                                                                            <argument>
                                                                                <expr>
                                                                                    <call>
                                                                                        <name>toText</name>
                                                                                        <argument_list>(
                                                                                            <argument>
                                                                                                <expr>
                                                                                                    <name>elem</name>
                                                                                                </expr>
                                                                                            </argument>
                                                                                            ,
                                                                                            <argument>
                                                                                                <expr>
                                                                                                    <call>
                                                                                                        <name><name>
                                                                                                            node</name>.
                                                                                                            <name>
                                                                                                                getContent
                                                                                                            </name>
                                                                                                        </name>
                                                                                                        <argument_list>
                                                                                                            ()
                                                                                                        </argument_list>
                                                                                                    </call>
                                                                                                </expr>
                                                                                            </argument>
                                                                                            )
                                                                                        </argument_list>
                                                                                    </call>
                                                                                </expr>
                                                                            </argument>
                                                                            ,
                                                                            <argument>
                                                                                <expr>
                                                                                    <name>null</name>
                                                                                </expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            }
                                                        </block>
                                                    </then>
                                                    <else>else
                                                        <if>if
                                                            <condition>(
                                                                <expr>
                                                                    <call>
                                                                        <name><name>node</name>.
                                                                            <name>getName</name>
                                                                        </name>
                                                                        <argument_list>()</argument_list>
                                                                    </call>
                                                                    .
                                                                    <call>
                                                                        <name>equals</name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>"tspan"</expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                                )
                                                            </condition>
                                                            <then>
                                                                <block>{
                                                                    <expr_stmt>
                                                                        <expr>
                                                                            <call>
                                                                                <name>readTSpanElement</name>
                                                                                <argument_list>(
                                                                                    <argument>
                                                                                        <expr>(<name>IXMLElement</name>)
                                                                                            <name>node</name>
                                                                                        </expr>
                                                                                    </argument>
                                                                                    ,
                                                                                    <argument>
                                                                                        <expr>
                                                                                            <name>doc</name>
                                                                                        </expr>
                                                                                    </argument>
                                                                                    )
                                                                                </argument_list>
                                                                            </call>
                                                                        </expr>
                                                                        ;
                                                                    </expr_stmt>
                                                                    }
                                                                </block>
                                                            </then>
                                                            <else>else
                                                                <block>{
                                                                    <if>if
                                                                        <condition>(
                                                                            <expr>
                                                                                <name>DEBUG</name>
                                                                            </expr>
                                                                            )
                                                                        </condition>
                                                                        <then>
                                                                            <block>{
                                                                                <expr_stmt>
                                                                                    <expr>
                                                                                        <call>
                                                                                            <name><name>System</name>
                                                                                                .<name>out</name>.
                                                                                                <name>println</name>
                                                                                            </name>
                                                                                            <argument_list>(
                                                                                                <argument>
                                                                                                    <expr>
                                                                                                        "SVGInputFormat
                                                                                                        unknown text
                                                                                                        node " +
                                                                                                        <call>
                                                                                                            <name><name>
                                                                                                                node</name>
                                                                                                                .
                                                                                                                <name>
                                                                                                                    getName
                                                                                                                </name>
                                                                                                            </name>
                                                                                                            <argument_list>
                                                                                                                ()
                                                                                                            </argument_list>
                                                                                                        </call>
                                                                                                    </expr>
                                                                                                </argument>
                                                                                                )
                                                                                            </argument_list>
                                                                                        </call>
                                                                                    </expr>
                                                                                    ;
                                                                                </expr_stmt>
                                                                                }
                                                                            </block>
                                                                        </then>
                                                                    </if>
                                                                    }
                                                                </block>
                                                            </else>
                                                        </if>
                                                    </else>
                                                </if>
                                                }
                                            </block>
                                        </for>
                                        }
                                    </block>
                                </else>
                            </if>
                            }
                        </block>
                        <catch>catch (
                            <param>
                                <decl>
                                    <type>
                                        <name>BadLocationException</name>
                                    </type>
                                    <name>e</name>
                                </decl>
                            </param>
                            )
                            <block>{
                                <decl_stmt>
                                    <decl>
                                        <type>
                                            <name>InternalError</name>
                                        </type>
                                        <name>ex</name> =
                                        <init>
                                            <expr>new
                                                <call>
                                                    <name>InternalError</name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <call>
                                                                    <name><name>e</name>.
                                                                        <name>getMessage</name>
                                                                    </name>
                                                                    <argument_list>()</argument_list>
                                                                </call>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                        </init>
                                    </decl>
                                    ;
                                </decl_stmt>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>ex</name>.
                                                <name>initCause</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>e</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <throw>throw
                                    <expr>
                                        <name>ex</name>
                                    </expr>
                                    ;
                                </throw>
                                }
                            </block>
                        </catch>
                    </try>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>Figure</name>
                            </type>
                            <name>figure</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>factory</name>.
                                            <name>createTextArea</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>x</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>y</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>w</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>h</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>doc</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>a</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>elementObjects</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>figure</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <return>return
                        <expr>
                            <name>figure</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Reads an SVG "tspan" element.
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>void</name>
                </type>
                <name>readTSpanElement</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>DefaultStyledDocument</name>
                            </type>
                            <name>doc</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <try>try
                        <block>{
                            <if>if
                                <condition>(
                                    <expr>
                                        <call>
                                            <name><name>elem</name>.
                                                <name>getContent</name>
                                            </name>
                                            <argument_list>()</argument_list>
                                        </call>
                                        !=
                                        <name>null</name>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>doc</name>.
                                                        <name>insertString</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <call>
                                                                    <name><name>doc</name>.
                                                                        <name>getLength</name>
                                                                    </name>
                                                                    <argument_list>()</argument_list>
                                                                </call>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <call>
                                                                    <name>toText</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>
                                                                                <name>elem</name>
                                                                            </expr>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>elem</name>.
                                                                                        <name>getContent</name>
                                                                                    </name>
                                                                                    <argument_list>()</argument_list>
                                                                                </call>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name>null</name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </then>
                                <else>else
                                    <block>{
                                        <for>for (
                                            <init>
                                                <decl>
                                                    <type>
                                                        <name>IXMLElement</name>
                                                    </type>
                                                    <name>node</name> :
                                                    <range>
                                                        <expr>
                                                            <call>
                                                                <name><name>elem</name>.
                                                                    <name>getChildren</name>
                                                                </name>
                                                                <argument_list>()</argument_list>
                                                            </call>
                                                        </expr>
                                                    </range>
                                                </decl>
                                            </init>
                                            )
                                            <block>{
                                                <if>if
                                                    <condition>(
                                                        <expr>
                                                            <name>node</name>
                                                            <name>instanceof</name>
                                                            <name>IXMLElement</name>
                                                        </expr>
                                                        )
                                                    </condition>
                                                    <then>
                                                        <block>{
                                                            <decl_stmt>
                                                                <decl>
                                                                    <type>
                                                                        <name>IXMLElement</name>
                                                                    </type>
                                                                    <name>child</name> =
                                                                    <init>
                                                                        <expr>(<name>IXMLElement</name>)
                                                                            <name>node</name>
                                                                        </expr>
                                                                    </init>
                                                                </decl>
                                                                ;
                                                            </decl_stmt>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>node</name>.
                                                                                <name>getName</name>
                                                                            </name>
                                                                            <argument_list>()</argument_list>
                                                                        </call>
                                                                        != <name>null</name> &amp;&amp;
                                                                        <call>
                                                                            <name><name>node</name>.
                                                                                <name>getName</name>
                                                                            </name>
                                                                            <argument_list>()</argument_list>
                                                                        </call>
                                                                        .
                                                                        <call>
                                                                            <name>equals</name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>"tspan"</expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <call>
                                                                                    <name>readTSpanElement</name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>(<name>
                                                                                                IXMLElement</name>)
                                                                                                <name>node</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>doc</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        }
                                                                    </block>
                                                                </then>
                                                                <else>else
                                                                    <block>{
                                                                        <if>if
                                                                            <condition>(
                                                                                <expr>
                                                                                    <name>DEBUG</name>
                                                                                </expr>
                                                                                )
                                                                            </condition>
                                                                            <then>
                                                                                <block>{
                                                                                    <expr_stmt>
                                                                                        <expr>
                                                                                            <call>
                                                                                                <name><name>
                                                                                                    System</name>.<name>
                                                                                                    out</name>.
                                                                                                    <name>println</name>
                                                                                                </name>
                                                                                                <argument_list>(
                                                                                                    <argument>
                                                                                                        <expr>
                                                                                                            "SVGInputFormat
                                                                                                            unknown text
                                                                                                            node " +
                                                                                                            <call>
                                                                                                                <name>
                                                                                                                    <name>
                                                                                                                        node</name>
                                                                                                                    .
                                                                                                                    <name>
                                                                                                                        getName
                                                                                                                    </name>
                                                                                                                </name>
                                                                                                                <argument_list>
                                                                                                                    ()
                                                                                                                </argument_list>
                                                                                                            </call>
                                                                                                        </expr>
                                                                                                    </argument>
                                                                                                    )
                                                                                                </argument_list>
                                                                                            </call>
                                                                                        </expr>
                                                                                        ;
                                                                                    </expr_stmt>
                                                                                    }
                                                                                </block>
                                                                            </then>
                                                                        </if>
                                                                        }
                                                                    </block>
                                                                </else>
                                                            </if>
                                                            }
                                                        </block>
                                                    </then>
                                                    <else>else
                                                        <block>{
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>node</name>.
                                                                                <name>getName</name>
                                                                            </name>
                                                                            <argument_list>()</argument_list>
                                                                        </call>
                                                                        ==
                                                                        <name>null</name>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>doc</name>.
                                                                                        <name>insertString</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <call>
                                                                                                    <name><name>
                                                                                                        doc</name>.
                                                                                                        <name>
                                                                                                            getLength
                                                                                                        </name>
                                                                                                    </name>
                                                                                                    <argument_list>()
                                                                                                    </argument_list>
                                                                                                </call>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <call>
                                                                                                    <name>toText</name>
                                                                                                    <argument_list>(
                                                                                                        <argument>
                                                                                                            <expr>
                                                                                                                <name>
                                                                                                                    elem
                                                                                                                </name>
                                                                                                            </expr>
                                                                                                        </argument>
                                                                                                        ,
                                                                                                        <argument>
                                                                                                            <expr>
                                                                                                                <call>
                                                                                                                    <name>
                                                                                                                        <name>
                                                                                                                            node</name>
                                                                                                                        .
                                                                                                                        <name>
                                                                                                                            getContent
                                                                                                                        </name>
                                                                                                                    </name>
                                                                                                                    <argument_list>
                                                                                                                        ()
                                                                                                                    </argument_list>
                                                                                                                </call>
                                                                                                            </expr>
                                                                                                        </argument>
                                                                                                        )
                                                                                                    </argument_list>
                                                                                                </call>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>null</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        }
                                                                    </block>
                                                                </then>
                                                            </if>
                                                            }
                                                        </block>
                                                    </else>
                                                </if>
                                                }
                                            </block>
                                        </for>
                                        }
                                    </block>
                                </else>
                            </if>
                            }
                        </block>
                        <catch>catch (
                            <param>
                                <decl>
                                    <type>
                                        <name>BadLocationException</name>
                                    </type>
                                    <name>e</name>
                                </decl>
                            </param>
                            )
                            <block>{
                                <decl_stmt>
                                    <decl>
                                        <type>
                                            <name>InternalError</name>
                                        </type>
                                        <name>ex</name> =
                                        <init>
                                            <expr>new
                                                <call>
                                                    <name>InternalError</name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <call>
                                                                    <name><name>e</name>.
                                                                        <name>getMessage</name>
                                                                    </name>
                                                                    <argument_list>()</argument_list>
                                                                </call>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                        </init>
                                    </decl>
                                    ;
                                </decl_stmt>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>ex</name>.
                                                <name>initCause</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>e</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <throw>throw
                                    <expr>
                                        <name>ex</name>
                                    </expr>
                                    ;
                                </throw>
                                }
                            </block>
                        </catch>
                    </try>
                    }
                </block>
            </function>
            <decl_stmt>
                <decl>
                    <type>
                        <specifier>private</specifier>
                        <specifier>final</specifier>
                        <specifier>static</specifier>
                        <name>
                            <name>HashSet</name>
                            <argument_list>&lt;
                                <argument>
                                    <name>String</name>
                                </argument>
                                &gt;
                            </argument_list>
                        </name>
                    </type>
                    <name>supportedFeatures</name> =
                    <init>
                        <expr>new
                            <call>
                                <name>
                                    <name>HashSet</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>String</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <call>
                                                <name><name>Arrays</name>.
                                                    <name>asList</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>new
                                                            <name>
                                                                <name>String</name>
                                                                <index>[]</index>
                                                            </name>
                                                            <block>{
                                                                <expr>
                                                                    "http://www.w3.org/Graphics/SVG/feature/1.2/#SVG-static"</expr>
                                                                ,
                                                                <comment type="line">
                                                                    //"http://www.w3.org/Graphics/SVG/feature/1.2/#SVG-static-DOM",
                                                                </comment>
                                                                <comment type="line">
                                                                    //"http://www.w3.org/Graphics/SVG/feature/1.2/#SVG-animated",
                                                                </comment>
                                                                <comment type="line">
                                                                    //"http://www.w3.org/Graphics/SVG/feature/1.2/#SVG-all",
                                                                </comment>
                                                                <expr>
                                                                    "http://www.w3.org/Graphics/SVG/feature/1.2/#CoreAttribute"</expr>
                                                                ,
                                                                <comment type="line">
                                                                    //"http://www.w3.org/Graphics/SVG/feature/1.2/#NavigationAttribute",
                                                                </comment>
                                                                <expr>
                                                                    "http://www.w3.org/Graphics/SVG/feature/1.2/#Structure"</expr>
                                                                ,
                                                                <expr>
                                                                    "http://www.w3.org/Graphics/SVG/feature/1.2/#ConditionalProcessing"</expr>
                                                                ,
                                                                <expr>
                                                                    "http://www.w3.org/Graphics/SVG/feature/1.2/#ConditionalProcessingAttribute"</expr>
                                                                ,
                                                                <expr>
                                                                    "http://www.w3.org/Graphics/SVG/feature/1.2/#Image"</expr>
                                                                ,
                                                                <comment type="line">
                                                                    //"http://www.w3.org/Graphics/SVG/feature/1.2/#Prefetch",
                                                                </comment>
                                                                <comment type="line">
                                                                    //"http://www.w3.org/Graphics/SVG/feature/1.2/#Discard",
                                                                </comment>
                                                                <expr>
                                                                    "http://www.w3.org/Graphics/SVG/feature/1.2/#Shape"</expr>
                                                                ,
                                                                <expr>
                                                                    "http://www.w3.org/Graphics/SVG/feature/1.2/#Text"</expr>
                                                                ,
                                                                <expr>
                                                                    "http://www.w3.org/Graphics/SVG/feature/1.2/#PaintAttribute"</expr>
                                                                ,
                                                                <expr>
                                                                    "http://www.w3.org/Graphics/SVG/feature/1.2/#OpacityAttribute"</expr>
                                                                ,
                                                                <expr>
                                                                    "http://www.w3.org/Graphics/SVG/feature/1.2/#GraphicsAttribute"</expr>
                                                                ,
                                                                <expr>
                                                                    "http://www.w3.org/Graphics/SVG/feature/1.2/#Gradient"</expr>
                                                                ,
                                                                <expr>
                                                                    "http://www.w3.org/Graphics/SVG/feature/1.2/#SolidColor"</expr>
                                                                ,
                                                                <comment type="line">
                                                                    //"http://www.w3.org/Graphics/SVG/feature/1.2/#Hyperlinking",
                                                                </comment>
                                                                <comment type="line">
                                                                    //"http://www.w3.org/Graphics/SVG/feature/1.2/#XlinkAttribute",
                                                                </comment>
                                                                <comment type="line">
                                                                    //"http://www.w3.org/Graphics/SVG/feature/1.2/#ExternalResourcesRequired",
                                                                </comment>
                                                                <comment type="line">
                                                                    //"http://www.w3.org/Graphics/SVG/feature/1.2/#Scripting",
                                                                </comment>
                                                                <comment type="line">
                                                                    //"http://www.w3.org/Graphics/SVG/feature/1.2/#Handler",
                                                                </comment>
                                                                <comment type="line">
                                                                    //"http://www.w3.org/Graphics/SVG/feature/1.2/#Listener",
                                                                </comment>
                                                                <comment type="line">
                                                                    //"http://www.w3.org/Graphics/SVG/feature/1.2/#TimedAnimation",
                                                                </comment>
                                                                <comment type="line">
                                                                    //"http://www.w3.org/Graphics/SVG/feature/1.2/#Animation",
                                                                </comment>
                                                                <comment type="line">
                                                                    //"http://www.w3.org/Graphics/SVG/feature/1.2/#Audio",
                                                                </comment>
                                                                <comment type="line">
                                                                    //"http://www.w3.org/Graphics/SVG/feature/1.2/#Video",
                                                                </comment>
                                                                <expr>
                                                                    "http://www.w3.org/Graphics/SVG/feature/1.2/#Font"
                                                                </expr>
                                                                ,
                                                                <comment type="line">
                                                                    //"http://www.w3.org/Graphics/SVG/feature/1.2/#Extensibility",
                                                                </comment>
                                                                <comment type="line">
                                                                    //"http://www.w3.org/Graphics/SVG/feature/1.2/#MediaAttribute",
                                                                </comment>
                                                                <comment type="line">
                                                                    //"http://www.w3.org/Graphics/SVG/feature/1.2/#TextFlow",
                                                                </comment>
                                                                <comment type="line">
                                                                    //"http://www.w3.org/Graphics/SVG/feature/1.2/#TransformedVideo",
                                                                </comment>
                                                                <comment type="line">
                                                                    //"http://www.w3.org/Graphics/SVG/feature/1.2/#ComposedVideo",
                                                                </comment>


                                                                }
                                                            </block>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                    </init>
                </decl>
                ;
            </decl_stmt>

            <comment type="javadoc">/**
                * Evaluates an SVG "switch" element.
                *
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>Figure</name>
                </type>
                <name>readSwitchElement</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <for>for (
                        <init>
                            <decl>
                                <type>
                                    <name>IXMLElement</name>
                                </type>
                                <name>node</name> :
                                <range>
                                    <expr>
                                        <call>
                                            <name><name>elem</name>.
                                                <name>getChildren</name>
                                            </name>
                                            <argument_list>()</argument_list>
                                        </call>
                                    </expr>
                                </range>
                            </decl>
                        </init>
                        )
                        <block>{
                            <if>if
                                <condition>(
                                    <expr>
                                        <name>node</name>
                                        <name>instanceof</name>
                                        <name>IXMLElement</name>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <decl_stmt>
                                            <decl>
                                                <type>
                                                    <name>IXMLElement</name>
                                                </type>
                                                <name>child</name> =
                                                <init>
                                                    <expr>(<name>IXMLElement</name>)
                                                        <name>node</name>
                                                    </expr>
                                                </init>
                                            </decl>
                                            ;
                                        </decl_stmt>
                                        <decl_stmt>
                                            <decl>
                                                <type>
                                                    <name>String</name>
                                                    <index>[]</index>
                                                </type>
                                                <name>requiredFeatures</name> =
                                                <init>
                                                    <expr>
                                                        <call>
                                                            <name>toWSOrCommaSeparatedArray</name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <call>
                                                                            <name>readAttribute</name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>child</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>"requiredFeatures"</expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>""</expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                </init>
                                            </decl>
                                            ;
                                        </decl_stmt>
                                        <decl_stmt>
                                            <decl>
                                                <type>
                                                    <name>String</name>
                                                    <index>[]</index>
                                                </type>
                                                <name>requiredExtensions</name> =
                                                <init>
                                                    <expr>
                                                        <call>
                                                            <name>toWSOrCommaSeparatedArray</name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <call>
                                                                            <name>readAttribute</name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>child</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>"requiredExtensions"</expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>""</expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                </init>
                                            </decl>
                                            ;
                                        </decl_stmt>
                                        <decl_stmt>
                                            <decl>
                                                <type>
                                                    <name>String</name>
                                                    <index>[]</index>
                                                </type>
                                                <name>systemLanguage</name> =
                                                <init>
                                                    <expr>
                                                        <call>
                                                            <name>toWSOrCommaSeparatedArray</name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <call>
                                                                            <name>readAttribute</name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>child</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>"systemLanguage"</expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>""</expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                </init>
                                            </decl>
                                            ;
                                        </decl_stmt>
                                        <decl_stmt>
                                            <decl>
                                                <type>
                                                    <name>String</name>
                                                    <index>[]</index>
                                                </type>
                                                <name>requiredFormats</name> =
                                                <init>
                                                    <expr>
                                                        <call>
                                                            <name>toWSOrCommaSeparatedArray</name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <call>
                                                                            <name>readAttribute</name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>child</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>"requiredFormats"</expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>""</expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                </init>
                                            </decl>
                                            ;
                                        </decl_stmt>
                                        <decl_stmt>
                                            <decl>
                                                <type>
                                                    <name>String</name>
                                                    <index>[]</index>
                                                </type>
                                                <name>requiredFonts</name> =
                                                <init>
                                                    <expr>
                                                        <call>
                                                            <name>toWSOrCommaSeparatedArray</name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <call>
                                                                            <name>readAttribute</name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>child</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>"requiredFonts"</expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>""</expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                </init>
                                            </decl>
                                            ;
                                        </decl_stmt>

                                        <decl_stmt>
                                            <decl>
                                                <type>
                                                    <name>boolean</name>
                                                </type>
                                                <name>isMatch</name>
                                            </decl>
                                            ;
                                        </decl_stmt>

                                        <expr_stmt>
                                            <expr>
                                                <name>isMatch</name>
                                                =
                                                <call>
                                                    <name><name>supportedFeatures</name>.
                                                        <name>containsAll</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <call>
                                                                    <name><name>Arrays</name>.
                                                                        <name>asList</name>
                                                                    </name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>
                                                                                <name>requiredFeatures</name>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                                &amp;&amp;
                                                <name><name>requiredExtensions</name>.
                                                    <name>length</name>
                                                </name>
                                                == 0 &amp;&amp;
                                                <name><name>requiredFormats</name>.
                                                    <name>length</name>
                                                </name>
                                                == 0 &amp;&amp;
                                                <name><name>requiredFonts</name>.
                                                    <name>length</name>
                                                </name>
                                                == 0
                                            </expr>
                                            ;
                                        </expr_stmt>

                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <name>isMatch</name>
                                                    &amp;&amp;
                                                    <name><name>systemLanguage</name>.
                                                        <name>length</name>
                                                    </name>
                                                    &gt; 0
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <expr_stmt>
                                                        <expr>
                                                            <name>isMatch</name>
                                                            = false
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <decl_stmt>
                                                        <decl>
                                                            <type>
                                                                <name>Locale</name>
                                                            </type>
                                                            <name>locale</name> =
                                                            <init>
                                                                <expr>
                                                                    <call>
                                                                        <name><name>Locale</name>.
                                                                            <name>getDefault</name>
                                                                        </name>
                                                                        <argument_list>()</argument_list>
                                                                    </call>
                                                                </expr>
                                                            </init>
                                                        </decl>
                                                        ;
                                                    </decl_stmt>
                                                    <for>for (
                                                        <init>
                                                            <decl>
                                                                <type>
                                                                    <name>String</name>
                                                                </type>
                                                                <name>lng</name> :
                                                                <range>
                                                                    <expr>
                                                                        <name>systemLanguage</name>
                                                                    </expr>
                                                                </range>
                                                            </decl>
                                                        </init>
                                                        )
                                                        <block>{
                                                            <decl_stmt>
                                                                <decl>
                                                                    <type>
                                                                        <name>int</name>
                                                                    </type>
                                                                    <name>p</name> =
                                                                    <init>
                                                                        <expr>
                                                                            <call>
                                                                                <name><name>lng</name>.
                                                                                    <name>indexOf</name>
                                                                                </name>
                                                                                <argument_list>(
                                                                                    <argument>
                                                                                        <expr>'-'</expr>
                                                                                    </argument>
                                                                                    )
                                                                                </argument_list>
                                                                            </call>
                                                                        </expr>
                                                                    </init>
                                                                </decl>
                                                                ;
                                                            </decl_stmt>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <name>p</name>
                                                                        == -1
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <if>if
                                                                            <condition>(
                                                                                <expr>
                                                                                    <call>
                                                                                        <name><name>locale</name>.
                                                                                            <name>getLanguage</name>
                                                                                        </name>
                                                                                        <argument_list>()
                                                                                        </argument_list>
                                                                                    </call>
                                                                                    .
                                                                                    <call>
                                                                                        <name>equals</name>
                                                                                        <argument_list>(
                                                                                            <argument>
                                                                                                <expr>
                                                                                                    <name>lng</name>
                                                                                                </expr>
                                                                                            </argument>
                                                                                            )
                                                                                        </argument_list>
                                                                                    </call>
                                                                                </expr>
                                                                                )
                                                                            </condition>
                                                                            <then>
                                                                                <block>{
                                                                                    <expr_stmt>
                                                                                        <expr>
                                                                                            <name>isMatch</name>
                                                                                            = true
                                                                                        </expr>
                                                                                        ;
                                                                                    </expr_stmt>
                                                                                    <break>break;</break>
                                                                                    }
                                                                                </block>
                                                                            </then>
                                                                        </if>
                                                                        }
                                                                    </block>
                                                                </then>
                                                                <else>else
                                                                    <block>{
                                                                        <if>if
                                                                            <condition>(
                                                                                <expr>
                                                                                    <call>
                                                                                        <name><name>locale</name>.
                                                                                            <name>getLanguage</name>
                                                                                        </name>
                                                                                        <argument_list>()
                                                                                        </argument_list>
                                                                                    </call>
                                                                                    .
                                                                                    <call>
                                                                                        <name>equals</name>
                                                                                        <argument_list>(
                                                                                            <argument>
                                                                                                <expr>
                                                                                                    <call>
                                                                                                        <name><name>
                                                                                                            lng</name>.
                                                                                                            <name>
                                                                                                                substring
                                                                                                            </name>
                                                                                                        </name>
                                                                                                        <argument_list>(
                                                                                                            <argument>
                                                                                                                <expr>
                                                                                                                    0
                                                                                                                </expr>
                                                                                                            </argument>
                                                                                                            ,
                                                                                                            <argument>
                                                                                                                <expr>
                                                                                                                    <name>
                                                                                                                        p
                                                                                                                    </name>
                                                                                                                </expr>
                                                                                                            </argument>
                                                                                                            )
                                                                                                        </argument_list>
                                                                                                    </call>
                                                                                                </expr>
                                                                                            </argument>
                                                                                            )
                                                                                        </argument_list>
                                                                                    </call>
                                                                                    &amp;&amp;
                                                                                    <call>
                                                                                        <name><name>locale</name>.
                                                                                            <name>getCountry</name>
                                                                                        </name>
                                                                                        <argument_list>()
                                                                                        </argument_list>
                                                                                    </call>
                                                                                    .
                                                                                    <call>
                                                                                        <name>toLowerCase</name>
                                                                                        <argument_list>()
                                                                                        </argument_list>
                                                                                    </call>
                                                                                    .
                                                                                    <call>
                                                                                        <name>equals</name>
                                                                                        <argument_list>(
                                                                                            <argument>
                                                                                                <expr>
                                                                                                    <call>
                                                                                                        <name><name>
                                                                                                            lng</name>.
                                                                                                            <name>
                                                                                                                substring
                                                                                                            </name>
                                                                                                        </name>
                                                                                                        <argument_list>(
                                                                                                            <argument>
                                                                                                                <expr>
                                                                                                                    <name>
                                                                                                                        p
                                                                                                                    </name>
                                                                                                                    + 1
                                                                                                                </expr>
                                                                                                            </argument>
                                                                                                            )
                                                                                                        </argument_list>
                                                                                                    </call>
                                                                                                </expr>
                                                                                            </argument>
                                                                                            )
                                                                                        </argument_list>
                                                                                    </call>
                                                                                </expr>
                                                                                )
                                                                            </condition>
                                                                            <then>
                                                                                <block>{
                                                                                    <expr_stmt>
                                                                                        <expr>
                                                                                            <name>isMatch</name>
                                                                                            = true
                                                                                        </expr>
                                                                                        ;
                                                                                    </expr_stmt>
                                                                                    <break>break;</break>
                                                                                    }
                                                                                </block>
                                                                            </then>
                                                                        </if>
                                                                        }
                                                                    </block>
                                                                </else>
                                                            </if>
                                                            }
                                                        </block>
                                                    </for>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <name>isMatch</name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <decl_stmt>
                                                        <decl>
                                                            <type>
                                                                <name>Figure</name>
                                                            </type>
                                                            <name>figure</name> =
                                                            <init>
                                                                <expr>
                                                                    <call>
                                                                        <name>readElement</name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>
                                                                                    <name>child</name>
                                                                                </expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                            </init>
                                                        </decl>
                                                        ;
                                                    </decl_stmt>
                                                    <if>if
                                                        <condition>(
                                                            <expr>
                                                                <call>
                                                                    <name>readAttribute</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>
                                                                                <name>child</name>
                                                                            </expr>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <expr>"visibility"</expr>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <expr>"visible"</expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                                .
                                                                <call>
                                                                    <name>equals</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>"visible"</expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                                &amp;&amp;
                                                                !
                                                                <call>
                                                                    <name>readAttribute</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>
                                                                                <name>child</name>
                                                                            </expr>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <expr>"display"</expr>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <expr>"inline"</expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                                .
                                                                <call>
                                                                    <name>equals</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>"none"</expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <block>{
                                                                <return>return
                                                                    <expr>
                                                                        <name>figure</name>
                                                                    </expr>
                                                                    ;
                                                                </return>
                                                                }
                                                            </block>
                                                        </then>
                                                        <else>else
                                                            <block>{
                                                                <return>return
                                                                    <expr>
                                                                        <name>null</name>
                                                                    </expr>
                                                                    ;
                                                                </return>
                                                                }
                                                            </block>
                                                        </else>
                                                    </if>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        }
                                    </block>
                                </then>
                            </if>
                            }
                        </block>
                    </for>
                    <return>return
                        <expr>
                            <name>null</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Reads an SVG "use" element.
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>Figure</name>
                </type>
                <name>readUseElement</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>a</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>
                                            <name>HashMap</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>AttributeKey</name>
                                                </argument>
                                                ,
                                                <argument>
                                                    <name>Object</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readCoreAttributes</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>a2</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>
                                            <name>HashMap</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>AttributeKey</name>
                                                </argument>
                                                ,
                                                <argument>
                                                    <name>Object</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readTransformAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readOpacityAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a2</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readUseShapeAttributes</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a2</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>href</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>readAttribute</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>"xlink:href"</expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>null</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>href</name>
                                != <name>null</name> &amp;&amp;
                                <call>
                                    <name><name>href</name>.
                                        <name>startsWith</name>
                                    </name>
                                    <argument_list>(
                                        <argument>
                                            <expr>"#"</expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <decl_stmt>
                                    <decl>
                                        <type>
                                            <name>IXMLElement</name>
                                        </type>
                                        <name>refElem</name> =
                                        <init>
                                            <expr>
                                                <call>
                                                    <name><name>identifiedElements</name>.
                                                        <name>get</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <call>
                                                                    <name><name>href</name>.
                                                                        <name>substring</name>
                                                                    </name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>1</expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                        </init>
                                    </decl>
                                    ;
                                </decl_stmt>
                                <if>if
                                    <condition>(
                                        <expr>
                                            <name>refElem</name>
                                            ==
                                            <name>null</name>
                                        </expr>
                                        )
                                    </condition>
                                    <then>
                                        <block>{
                                            <if>if
                                                <condition>(
                                                    <expr>
                                                        <name>DEBUG</name>
                                                    </expr>
                                                    )
                                                </condition>
                                                <then>
                                                    <block>{
                                                        <expr_stmt>
                                                            <expr>
                                                                <call>
                                                                    <name><name>System</name>.<name>out</name>.
                                                                        <name>println</name>
                                                                    </name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>"SVGInputFormat couldn't find href for
                                                                                &lt;use&gt; element:" +
                                                                                <name>href</name>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            ;
                                                        </expr_stmt>
                                                        }
                                                    </block>
                                                </then>
                                            </if>
                                            }
                                        </block>
                                    </then>
                                    <else>else
                                        <block>{
                                            <decl_stmt>
                                                <decl>
                                                    <type>
                                                        <name>Object</name>
                                                    </type>
                                                    <name>obj</name> =
                                                    <init>
                                                        <expr>
                                                            <call>
                                                                <name>readElement</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            <name>refElem</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </init>
                                                </decl>
                                                ;
                                            </decl_stmt>
                                            <if>if
                                                <condition>(
                                                    <expr>
                                                        <name>obj</name>
                                                        <name>instanceof</name>
                                                        <name>Figure</name>
                                                    </expr>
                                                    )
                                                </condition>
                                                <then>
                                                    <block>{
                                                        <decl_stmt>
                                                            <decl>
                                                                <type>
                                                                    <name>Figure</name>
                                                                </type>
                                                                <name>figure</name> =
                                                                <init>
                                                                    <expr>
                                                                        <call>(<name>Figure</name>)
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>(<name>Figure</name>)
                                                                                        <name>obj</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                        .
                                                                        <call>
                                                                            <name>clone</name>
                                                                            <argument_list>()</argument_list>
                                                                        </call>
                                                                    </expr>
                                                                </init>
                                                            </decl>
                                                            ;
                                                        </decl_stmt>
                                                        <for>for (
                                                            <init>
                                                                <decl>
                                                                    <type>
                                                                        <name><name>Map</name>.
                                                                            <name>
                                                                                <name>Entry</name>
                                                                                <argument_list>&lt;
                                                                                    <argument>
                                                                                        <name>AttributeKey</name>
                                                                                    </argument>
                                                                                    ,
                                                                                    <argument>
                                                                                        <name>Object</name>
                                                                                    </argument>
                                                                                    &gt;
                                                                                </argument_list>
                                                                            </name>
                                                                        </name>
                                                                    </type>
                                                                    <name>entry</name> :
                                                                    <range>
                                                                        <expr>
                                                                            <call>
                                                                                <name><name>a2</name>.
                                                                                    <name>entrySet</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                        </expr>
                                                                    </range>
                                                                </decl>
                                                            </init>
                                                            )
                                                            <block>{
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>figure</name>.
                                                                                <name>setAttribute</name>
                                                                            </name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <call>
                                                                                            <name><name>entry</name>.
                                                                                                <name>getKey</name>
                                                                                            </name>
                                                                                            <argument_list>()
                                                                                            </argument_list>
                                                                                        </call>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>
                                                                                        <call>
                                                                                            <name><name>entry</name>.
                                                                                                <name>getValue</name>
                                                                                            </name>
                                                                                            <argument_list>()
                                                                                            </argument_list>
                                                                                        </call>
                                                                                    </expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                }
                                                            </block>
                                                        </for>

                                                        <decl_stmt>
                                                            <decl>
                                                                <type>
                                                                    <name>AffineTransform</name>
                                                                </type>
                                                                <name>tx</name> =
                                                                <init>
                                                                    <expr>(
                                                                        <call>
                                                                            <name><name>TRANSFORM</name>.
                                                                                <name>get</name>
                                                                            </name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>a</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                        == <name>null</name>) ? new
                                                                        <call>
                                                                            <name>AffineTransform</name>
                                                                            <argument_list>()</argument_list>
                                                                        </call>
                                                                        :
                                                                        <call>
                                                                            <name><name>TRANSFORM</name>.
                                                                                <name>get</name>
                                                                            </name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>a</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                </init>
                                                            </decl>
                                                            ;
                                                        </decl_stmt>
                                                        <decl_stmt>
                                                            <decl>
                                                                <type>
                                                                    <name>double</name>
                                                                </type>
                                                                <name>x</name> =
                                                                <init>
                                                                    <expr>
                                                                        <call>
                                                                            <name>toNumber</name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>elem</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>
                                                                                        <call>
                                                                                            <name>readAttribute</name>
                                                                                            <argument_list>(
                                                                                                <argument>
                                                                                                    <expr>
                                                                                                        <name>elem
                                                                                                        </name>
                                                                                                    </expr>
                                                                                                </argument>
                                                                                                ,
                                                                                                <argument>
                                                                                                    <expr>"x"</expr>
                                                                                                </argument>
                                                                                                ,
                                                                                                <argument>
                                                                                                    <expr>"0"</expr>
                                                                                                </argument>
                                                                                                )
                                                                                            </argument_list>
                                                                                        </call>
                                                                                    </expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                </init>
                                                            </decl>
                                                            ;
                                                        </decl_stmt>
                                                        <decl_stmt>
                                                            <decl>
                                                                <type>
                                                                    <name>double</name>
                                                                </type>
                                                                <name>y</name> =
                                                                <init>
                                                                    <expr>
                                                                        <call>
                                                                            <name>toNumber</name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>elem</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>
                                                                                        <call>
                                                                                            <name>readAttribute</name>
                                                                                            <argument_list>(
                                                                                                <argument>
                                                                                                    <expr>
                                                                                                        <name>elem
                                                                                                        </name>
                                                                                                    </expr>
                                                                                                </argument>
                                                                                                ,
                                                                                                <argument>
                                                                                                    <expr>"y"</expr>
                                                                                                </argument>
                                                                                                ,
                                                                                                <argument>
                                                                                                    <expr>"0"</expr>
                                                                                                </argument>
                                                                                                )
                                                                                            </argument_list>
                                                                                        </call>
                                                                                    </expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                </init>
                                                            </decl>
                                                            ;
                                                        </decl_stmt>
                                                        <expr_stmt>
                                                            <expr>
                                                                <call>
                                                                    <name><name>tx</name>.
                                                                        <name>translate</name>
                                                                    </name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>
                                                                                <name>x</name>
                                                                            </expr>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <expr>
                                                                                <name>y</name>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            ;
                                                        </expr_stmt>
                                                        <expr_stmt>
                                                            <expr>
                                                                <call>
                                                                    <name><name>figure</name>.
                                                                        <name>transform</name>
                                                                    </name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>
                                                                                <name>tx</name>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            ;
                                                        </expr_stmt>

                                                        <return>return
                                                            <expr>
                                                                <name>figure</name>
                                                            </expr>
                                                            ;
                                                        </return>
                                                        }
                                                    </block>
                                                </then>
                                            </if>
                                            }
                                        </block>
                                    </else>
                                </if>
                                }
                            </block>
                        </then>
                    </if>
                    <return>return
                        <expr>
                            <name>null</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Reads an attribute that is inherited.
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>String</name>
                </type>
                <name>readInheritAttribute</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>attributeName</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>defaultValue</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>elem</name>.
                                        <name>hasAttribute</name>
                                    </name>
                                    <argument_list>(
                                        <argument>
                                            <expr>
                                                <name>attributeName</name>
                                            </expr>
                                        </argument>
                                        ,
                                        <argument>
                                            <expr>
                                                <name>SVG_NAMESPACE</name>
                                            </expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <decl_stmt>
                                    <decl>
                                        <type>
                                            <name>String</name>
                                        </type>
                                        <name>value</name> =
                                        <init>
                                            <expr>
                                                <call>
                                                    <name><name>elem</name>.
                                                        <name>getAttribute</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>attributeName</name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name>SVG_NAMESPACE</name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name>null</name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                        </init>
                                    </decl>
                                    ;
                                </decl_stmt>
                                <if>if
                                    <condition>(
                                        <expr>
                                            <call>
                                                <name><name>value</name>.
                                                    <name>equals</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"inherit"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                        )
                                    </condition>
                                    <then>
                                        <block>{
                                            <return>return
                                                <expr>
                                                    <call>
                                                        <name>readInheritAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <call>
                                                                        <name><name>elem</name>.
                                                                            <name>getParent</name>
                                                                        </name>
                                                                        <argument_list>()</argument_list>
                                                                    </call>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>attributeName</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>defaultValue</name>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                ;
                                            </return>
                                            }
                                        </block>
                                    </then>
                                    <else>else
                                        <block>{
                                            <return>return
                                                <expr>
                                                    <name>value</name>
                                                </expr>
                                                ;
                                            </return>
                                            }
                                        </block>
                                    </else>
                                </if>
                                }
                            </block>
                        </then>
                        <else>else
                            <if>if
                                <condition>(
                                    <expr>
                                        <call>
                                            <name><name>elem</name>.
                                                <name>hasAttribute</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>attributeName</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <decl_stmt>
                                            <decl>
                                                <type>
                                                    <name>String</name>
                                                </type>
                                                <name>value</name> =
                                                <init>
                                                    <expr>
                                                        <call>
                                                            <name><name>elem</name>.
                                                                <name>getAttribute</name>
                                                            </name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>attributeName</name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                </init>
                                            </decl>
                                            ;
                                        </decl_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>value</name>.
                                                            <name>equals</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>"inherit"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <return>return
                                                        <expr>
                                                            <call>
                                                                <name>readInheritAttribute</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            <call>
                                                                                <name><name>elem</name>.
                                                                                    <name>getParent</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                        </expr>
                                                                    </argument>
                                                                    ,
                                                                    <argument>
                                                                        <expr>
                                                                            <name>attributeName</name>
                                                                        </expr>
                                                                    </argument>
                                                                    ,
                                                                    <argument>
                                                                        <expr>
                                                                            <name>defaultValue</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </return>
                                                    }
                                                </block>
                                            </then>
                                            <else>else
                                                <block>{
                                                    <return>return
                                                        <expr>
                                                            <name>value</name>
                                                        </expr>
                                                        ;
                                                    </return>
                                                    }
                                                </block>
                                            </else>
                                        </if>
                                        }
                                    </block>
                                </then>
                                <else>else
                                    <if>if
                                        <condition>(
                                            <expr>
                                                <call>
                                                    <name><name>elem</name>.
                                                        <name>getParent</name>
                                                    </name>
                                                    <argument_list>()</argument_list>
                                                </call>
                                                != <name>null</name> &amp;&amp;
                                                (
                                                <call>
                                                    <name><name>elem</name>.
                                                        <name>getParent</name>
                                                    </name>
                                                    <argument_list>()</argument_list>
                                                </call>
                                                .
                                                <call>
                                                    <name>getNamespace</name>
                                                    <argument_list>()</argument_list>
                                                </call>
                                                == <name>null</name> ||
                                                <call>
                                                    <name><name>elem</name>.
                                                        <name>getParent</name>
                                                    </name>
                                                    <argument_list>()</argument_list>
                                                </call>
                                                .
                                                <call>
                                                    <name>getNamespace</name>
                                                    <argument_list>()</argument_list>
                                                </call>
                                                .
                                                <call>
                                                    <name>equals</name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>SVG_NAMESPACE</name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                                )
                                            </expr>
                                            )
                                        </condition>
                                        <then>
                                            <block>{
                                                <return>return
                                                    <expr>
                                                        <call>
                                                            <name>readInheritAttribute</name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>elem</name>.
                                                                                <name>getParent</name>
                                                                            </name>
                                                                            <argument_list>()</argument_list>
                                                                        </call>
                                                                    </expr>
                                                                </argument>
                                                                ,
                                                                <argument>
                                                                    <expr>
                                                                        <name>attributeName</name>
                                                                    </expr>
                                                                </argument>
                                                                ,
                                                                <argument>
                                                                    <expr>
                                                                        <name>defaultValue</name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                    ;
                                                </return>
                                                }
                                            </block>
                                        </then>
                                        <else>else
                                            <block>{
                                                <return>return
                                                    <expr>
                                                        <name>defaultValue</name>
                                                    </expr>
                                                    ;
                                                </return>
                                                }
                                            </block>
                                        </else>
                                    </if>
                                </else>
                            </if>
                        </else>
                    </if>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Reads a font getChildCount attribute that is inherited.
                * As specified by
                * http://www.w3.org/TR/SVGMobile12/text.html#FontPropertiesUsedBySVG
                * http://www.w3.org/TR/2006/CR-xsl11-20060220/#font-getChildCount
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>double</name>
                </type>
                <name>readInheritFontSizeAttribute</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>attributeName</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>defaultValue</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>value</name> =
                            <init>
                                <expr>
                                    <name>null</name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>elem</name>.
                                        <name>hasAttribute</name>
                                    </name>
                                    <argument_list>(
                                        <argument>
                                            <expr>
                                                <name>attributeName</name>
                                            </expr>
                                        </argument>
                                        ,
                                        <argument>
                                            <expr>
                                                <name>SVG_NAMESPACE</name>
                                            </expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name>value</name>
                                        =
                                        <call>
                                            <name><name>elem</name>.
                                                <name>getAttribute</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>attributeName</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name>SVG_NAMESPACE</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name>null</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                        <else>else
                            <if>if
                                <condition>(
                                    <expr>
                                        <call>
                                            <name><name>elem</name>.
                                                <name>hasAttribute</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>attributeName</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name>value</name>
                                                =
                                                <call>
                                                    <name><name>elem</name>.
                                                        <name>getAttribute</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>attributeName</name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name>null</name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </then>
                                <else>else
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name>value</name>
                                                =
                                                <name>defaultValue</name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </else>
                            </if>
                        </else>
                    </if>

                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>value</name>.
                                        <name>equals</name>
                                    </name>
                                    <argument_list>(
                                        <argument>
                                            <expr>"inherit"</expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <return>return
                                    <expr>
                                        <call>
                                            <name>readInheritFontSizeAttribute</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <call>
                                                            <name><name>elem</name>.
                                                                <name>getParent</name>
                                                            </name>
                                                            <argument_list>()</argument_list>
                                                        </call>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name>attributeName</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name>defaultValue</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </return>
                                }
                            </block>
                        </then>
                        <else>else
                            <if>if
                                <condition>(
                                    <expr>
                                        <call>
                                            <name><name>SVG_ABSOLUTE_FONT_SIZES</name>.
                                                <name>containsKey</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>value</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <return>return
                                            <expr>
                                                <call>
                                                    <name><name>SVG_ABSOLUTE_FONT_SIZES</name>.
                                                        <name>get</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>value</name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </return>
                                        }
                                    </block>
                                </then>
                                <else>else
                                    <if>if
                                        <condition>(
                                            <expr>
                                                <call>
                                                    <name><name>SVG_RELATIVE_FONT_SIZES</name>.
                                                        <name>containsKey</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>value</name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            )
                                        </condition>
                                        <then>
                                            <block>{
                                                <return>return
                                                    <expr>
                                                        <call>
                                                            <name><name>SVG_RELATIVE_FONT_SIZES</name>.
                                                                <name>get</name>
                                                            </name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>value</name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                        *
                                                        <call>
                                                            <name>readInheritFontSizeAttribute</name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>elem</name>.
                                                                                <name>getParent</name>
                                                                            </name>
                                                                            <argument_list>()</argument_list>
                                                                        </call>
                                                                    </expr>
                                                                </argument>
                                                                ,
                                                                <argument>
                                                                    <expr>
                                                                        <name>attributeName</name>
                                                                    </expr>
                                                                </argument>
                                                                ,
                                                                <argument>
                                                                    <expr>
                                                                        <name>defaultValue</name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                    ;
                                                </return>
                                                }
                                            </block>
                                        </then>
                                        <else>else
                                            <if>if
                                                <condition>(
                                                    <expr>
                                                        <call>
                                                            <name><name>value</name>.
                                                                <name>endsWith</name>
                                                            </name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>"%"</expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                    )
                                                </condition>
                                                <then>
                                                    <block>{
                                                        <decl_stmt>
                                                            <decl>
                                                                <type>
                                                                    <name>double</name>
                                                                </type>
                                                                <name>factor</name> =
                                                                <init>
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>Double</name>.
                                                                                <name>valueOf</name>
                                                                            </name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <call>
                                                                                            <name><name>value</name>.
                                                                                                <name>substring</name>
                                                                                            </name>
                                                                                            <argument_list>(
                                                                                                <argument>
                                                                                                    <expr>0</expr>
                                                                                                </argument>
                                                                                                ,
                                                                                                <argument>
                                                                                                    <expr>
                                                                                                        <call>
                                                                                                            <name><name>
                                                                                                                value</name>
                                                                                                                .
                                                                                                                <name>
                                                                                                                    length
                                                                                                                </name>
                                                                                                            </name>
                                                                                                            <argument_list>
                                                                                                                ()
                                                                                                            </argument_list>
                                                                                                        </call>
                                                                                                        - 1
                                                                                                    </expr>
                                                                                                </argument>
                                                                                                )
                                                                                            </argument_list>
                                                                                        </call>
                                                                                    </expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                </init>
                                                            </decl>
                                                            ;
                                                        </decl_stmt>
                                                        <return>return
                                                            <expr>
                                                                <name>factor</name>
                                                                *
                                                                <call>
                                                                    <name>readInheritFontSizeAttribute</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>elem</name>.
                                                                                        <name>getParent</name>
                                                                                    </name>
                                                                                    <argument_list>()</argument_list>
                                                                                </call>
                                                                            </expr>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <expr>
                                                                                <name>attributeName</name>
                                                                            </expr>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <expr>
                                                                                <name>defaultValue</name>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            ;
                                                        </return>
                                                        }
                                                    </block>
                                                </then>
                                                <else>else
                                                    <block>{
                                                        <comment type="line">//return toScaledNumber(elem, value);
                                                        </comment>
                                                        <return>return
                                                            <expr>
                                                                <call>
                                                                    <name>toNumber</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>
                                                                                <name>elem</name>
                                                                            </expr>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <expr>
                                                                                <name>value</name>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            ;
                                                        </return>
                                                        }
                                                    </block>
                                                </else>
                                            </if>
                                        </else>
                                    </if>
                                </else>
                            </if>
                        </else>
                    </if>

                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Reads an attribute that is not inherited, unless its value is "inherit".
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>String</name>
                </type>
                <name>readAttribute</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>attributeName</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>defaultValue</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>elem</name>.
                                        <name>hasAttribute</name>
                                    </name>
                                    <argument_list>(
                                        <argument>
                                            <expr>
                                                <name>attributeName</name>
                                            </expr>
                                        </argument>
                                        ,
                                        <argument>
                                            <expr>
                                                <name>SVG_NAMESPACE</name>
                                            </expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <decl_stmt>
                                    <decl>
                                        <type>
                                            <name>String</name>
                                        </type>
                                        <name>value</name> =
                                        <init>
                                            <expr>
                                                <call>
                                                    <name><name>elem</name>.
                                                        <name>getAttribute</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>attributeName</name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name>SVG_NAMESPACE</name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name>null</name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                        </init>
                                    </decl>
                                    ;
                                </decl_stmt>
                                <if>if
                                    <condition>(
                                        <expr>
                                            <call>
                                                <name><name>value</name>.
                                                    <name>equals</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"inherit"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                        )
                                    </condition>
                                    <then>
                                        <block>{
                                            <return>return
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <call>
                                                                        <name><name>elem</name>.
                                                                            <name>getParent</name>
                                                                        </name>
                                                                        <argument_list>()</argument_list>
                                                                    </call>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>attributeName</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>defaultValue</name>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                ;
                                            </return>
                                            }
                                        </block>
                                    </then>
                                    <else>else
                                        <block>{
                                            <return>return
                                                <expr>
                                                    <name>value</name>
                                                </expr>
                                                ;
                                            </return>
                                            }
                                        </block>
                                    </else>
                                </if>
                                }
                            </block>
                        </then>
                        <else>else
                            <if>if
                                <condition>(
                                    <expr>
                                        <call>
                                            <name><name>elem</name>.
                                                <name>hasAttribute</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>attributeName</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <decl_stmt>
                                            <decl>
                                                <type>
                                                    <name>String</name>
                                                </type>
                                                <name>value</name> =
                                                <init>
                                                    <expr>
                                                        <call>
                                                            <name><name>elem</name>.
                                                                <name>getAttribute</name>
                                                            </name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>attributeName</name>
                                                                    </expr>
                                                                </argument>
                                                                ,
                                                                <argument>
                                                                    <expr>
                                                                        <name>null</name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                </init>
                                            </decl>
                                            ;
                                        </decl_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>value</name>.
                                                            <name>equals</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>"inherit"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <return>return
                                                        <expr>
                                                            <call>
                                                                <name>readAttribute</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            <call>
                                                                                <name><name>elem</name>.
                                                                                    <name>getParent</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                        </expr>
                                                                    </argument>
                                                                    ,
                                                                    <argument>
                                                                        <expr>
                                                                            <name>attributeName</name>
                                                                        </expr>
                                                                    </argument>
                                                                    ,
                                                                    <argument>
                                                                        <expr>
                                                                            <name>defaultValue</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </return>
                                                    }
                                                </block>
                                            </then>
                                            <else>else
                                                <block>{
                                                    <return>return
                                                        <expr>
                                                            <name>value</name>
                                                        </expr>
                                                        ;
                                                    </return>
                                                    }
                                                </block>
                                            </else>
                                        </if>
                                        }
                                    </block>
                                </then>
                                <else>else
                                    <block>{
                                        <return>return
                                            <expr>
                                                <name>defaultValue</name>
                                            </expr>
                                            ;
                                        </return>
                                        }
                                    </block>
                                </else>
                            </if>
                        </else>
                    </if>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Returns a value as a width.
                * http://www.w3.org/TR/SVGMobile12/types.html#DataTypeLength
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>double</name>
                </type>
                <name>toWidth</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>str</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <comment type="line">// XXX - Compute xPercentFactor from viewport</comment>
                    <return>return
                        <expr>
                            <call>
                                <name>toLength</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>str</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name><name>viewportStack</name>.
                                                    <name>peek</name>
                                                </name>
                                                <argument_list>()</argument_list>
                                            </call>
                                            .
                                            <name>widthPercentFactor</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Returns a value as a height.
                * http://www.w3.org/TR/SVGMobile12/types.html#DataTypeLength
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>double</name>
                </type>
                <name>toHeight</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>str</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <comment type="line">// XXX - Compute yPercentFactor from viewport</comment>
                    <return>return
                        <expr>
                            <call>
                                <name>toLength</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>str</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name><name>viewportStack</name>.
                                                    <name>peek</name>
                                                </name>
                                                <argument_list>()</argument_list>
                                            </call>
                                            .
                                            <name>heightPercentFactor</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Returns a value as a number.
                * http://www.w3.org/TR/SVGMobile12/types.html#DataTypeNumber
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>double</name>
                </type>
                <name>toNumber</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>str</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <return>return
                        <expr>
                            <call>
                                <name>toLength</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>str</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name><name>viewportStack</name>.
                                                    <name>peek</name>
                                                </name>
                                                <argument_list>()</argument_list>
                                            </call>
                                            .
                                            <name>numberFactor</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Returns a value as a length.
                * http://www.w3.org/TR/SVGMobile12/types.html#DataTypeLength
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>double</name>
                </type>
                <name>toLength</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>str</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>percentFactor</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>scaleFactor</name> =
                            <init>
                                <expr>1d</expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>str</name>
                                == <name>null</name> ||
                                <call>
                                    <name><name>str</name>.
                                        <name>length</name>
                                    </name>
                                    <argument_list>()</argument_list>
                                </call>
                                == 0
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <return>return <expr>0d</expr>;
                                </return>
                                }
                            </block>
                        </then>
                    </if>

                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>str</name>.
                                        <name>endsWith</name>
                                    </name>
                                    <argument_list>(
                                        <argument>
                                            <expr>"%"</expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name>str</name>
                                        =
                                        <call>
                                            <name><name>str</name>.
                                                <name>substring</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <call>
                                                            <name><name>str</name>.
                                                                <name>length</name>
                                                            </name>
                                                            <argument_list>()</argument_list>
                                                        </call>
                                                        - 1
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <expr_stmt>
                                    <expr>
                                        <name>scaleFactor</name>
                                        =
                                        <name>percentFactor</name>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                        <else>else
                            <if>if
                                <condition>(
                                    <expr>
                                        <call>
                                            <name><name>str</name>.
                                                <name>endsWith</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>"px"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name>str</name>
                                                =
                                                <call>
                                                    <name><name>str</name>.
                                                        <name>substring</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>0</expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <call>
                                                                    <name><name>str</name>.
                                                                        <name>length</name>
                                                                    </name>
                                                                    <argument_list>()</argument_list>
                                                                </call>
                                                                - 2
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </then>
                                <else>else
                                    <if>if
                                        <condition>(
                                            <expr>
                                                <call>
                                                    <name><name>str</name>.
                                                        <name>endsWith</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>"pt"</expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            )
                                        </condition>
                                        <then>
                                            <block>{
                                                <expr_stmt>
                                                    <expr>
                                                        <name>str</name>
                                                        =
                                                        <call>
                                                            <name><name>str</name>.
                                                                <name>substring</name>
                                                            </name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>0</expr>
                                                                </argument>
                                                                ,
                                                                <argument>
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>str</name>.
                                                                                <name>length</name>
                                                                            </name>
                                                                            <argument_list>()</argument_list>
                                                                        </call>
                                                                        - 2
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                    ;
                                                </expr_stmt>
                                                <expr_stmt>
                                                    <expr>
                                                        <name>scaleFactor</name>
                                                        = 1.25
                                                    </expr>
                                                    ;
                                                </expr_stmt>
                                                }
                                            </block>
                                        </then>
                                        <else>else
                                            <if>if
                                                <condition>(
                                                    <expr>
                                                        <call>
                                                            <name><name>str</name>.
                                                                <name>endsWith</name>
                                                            </name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>"pc"</expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                    )
                                                </condition>
                                                <then>
                                                    <block>{
                                                        <expr_stmt>
                                                            <expr>
                                                                <name>str</name>
                                                                =
                                                                <call>
                                                                    <name><name>str</name>.
                                                                        <name>substring</name>
                                                                    </name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>0</expr>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>str</name>.
                                                                                        <name>length</name>
                                                                                    </name>
                                                                                    <argument_list>()</argument_list>
                                                                                </call>
                                                                                - 2
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            ;
                                                        </expr_stmt>
                                                        <expr_stmt>
                                                            <expr>
                                                                <name>scaleFactor</name>
                                                                = 15
                                                            </expr>
                                                            ;
                                                        </expr_stmt>
                                                        }
                                                    </block>
                                                </then>
                                                <else>else
                                                    <if>if
                                                        <condition>(
                                                            <expr>
                                                                <call>
                                                                    <name><name>str</name>.
                                                                        <name>endsWith</name>
                                                                    </name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>"mm"</expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <block>{
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <name>str</name>
                                                                        =
                                                                        <call>
                                                                            <name><name>str</name>.
                                                                                <name>substring</name>
                                                                            </name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>0</expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>
                                                                                        <call>
                                                                                            <name><name>str</name>.
                                                                                                <name>length</name>
                                                                                            </name>
                                                                                            <argument_list>()
                                                                                            </argument_list>
                                                                                        </call>
                                                                                        - 2
                                                                                    </expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <name>scaleFactor</name>
                                                                        = 3.543307
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                }
                                                            </block>
                                                        </then>
                                                        <else>else
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>str</name>.
                                                                                <name>endsWith</name>
                                                                            </name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>"cm"</expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name>str</name>
                                                                                =
                                                                                <call>
                                                                                    <name><name>str</name>.
                                                                                        <name>substring</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>0</expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <call>
                                                                                                    <name><name>
                                                                                                        str</name>.
                                                                                                        <name>length
                                                                                                        </name>
                                                                                                    </name>
                                                                                                    <argument_list>()
                                                                                                    </argument_list>
                                                                                                </call>
                                                                                                - 2
                                                                                            </expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name>scaleFactor</name>
                                                                                = 35.43307
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        }
                                                                    </block>
                                                                </then>
                                                                <else>else
                                                                    <if>if
                                                                        <condition>(
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>str</name>.
                                                                                        <name>endsWith</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>"in"</expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                            )
                                                                        </condition>
                                                                        <then>
                                                                            <block>{
                                                                                <expr_stmt>
                                                                                    <expr>
                                                                                        <name>str</name>
                                                                                        =
                                                                                        <call>
                                                                                            <name><name>str</name>.
                                                                                                <name>substring</name>
                                                                                            </name>
                                                                                            <argument_list>(
                                                                                                <argument>
                                                                                                    <expr>0</expr>
                                                                                                </argument>
                                                                                                ,
                                                                                                <argument>
                                                                                                    <expr>
                                                                                                        <call>
                                                                                                            <name><name>
                                                                                                                str</name>
                                                                                                                .
                                                                                                                <name>
                                                                                                                    length
                                                                                                                </name>
                                                                                                            </name>
                                                                                                            <argument_list>
                                                                                                                ()
                                                                                                            </argument_list>
                                                                                                        </call>
                                                                                                        - 2
                                                                                                    </expr>
                                                                                                </argument>
                                                                                                )
                                                                                            </argument_list>
                                                                                        </call>
                                                                                    </expr>
                                                                                    ;
                                                                                </expr_stmt>
                                                                                <expr_stmt>
                                                                                    <expr>
                                                                                        <name>scaleFactor</name>
                                                                                        = 90
                                                                                    </expr>
                                                                                    ;
                                                                                </expr_stmt>
                                                                                }
                                                                            </block>
                                                                        </then>
                                                                        <else>else
                                                                            <if>if
                                                                                <condition>(
                                                                                    <expr>
                                                                                        <call>
                                                                                            <name><name>str</name>.
                                                                                                <name>endsWith</name>
                                                                                            </name>
                                                                                            <argument_list>(
                                                                                                <argument>
                                                                                                    <expr>"em"</expr>
                                                                                                </argument>
                                                                                                )
                                                                                            </argument_list>
                                                                                        </call>
                                                                                    </expr>
                                                                                    )
                                                                                </condition>
                                                                                <then>
                                                                                    <block>{
                                                                                        <expr_stmt>
                                                                                            <expr>
                                                                                                <name>str</name>
                                                                                                =
                                                                                                <call>
                                                                                                    <name><name>
                                                                                                        str</name>.
                                                                                                        <name>
                                                                                                            substring
                                                                                                        </name>
                                                                                                    </name>
                                                                                                    <argument_list>(
                                                                                                        <argument>
                                                                                                            <expr>0
                                                                                                            </expr>
                                                                                                        </argument>
                                                                                                        ,
                                                                                                        <argument>
                                                                                                            <expr>
                                                                                                                <call>
                                                                                                                    <name>
                                                                                                                        <name>
                                                                                                                            str</name>
                                                                                                                        .
                                                                                                                        <name>
                                                                                                                            length
                                                                                                                        </name>
                                                                                                                    </name>
                                                                                                                    <argument_list>
                                                                                                                        ()
                                                                                                                    </argument_list>
                                                                                                                </call>
                                                                                                                - 2
                                                                                                            </expr>
                                                                                                        </argument>
                                                                                                        )
                                                                                                    </argument_list>
                                                                                                </call>
                                                                                            </expr>
                                                                                            ;
                                                                                        </expr_stmt>
                                                                                        <comment type="line">// XXX -
                                                                                            This doesn't work
                                                                                        </comment>
                                                                                        <expr_stmt>
                                                                                            <expr>
                                                                                                <name>scaleFactor</name>
                                                                                                =
                                                                                                <call>
                                                                                                    <name>toLength
                                                                                                    </name>
                                                                                                    <argument_list>(
                                                                                                        <argument>
                                                                                                            <expr>
                                                                                                                <name>
                                                                                                                    elem
                                                                                                                </name>
                                                                                                            </expr>
                                                                                                        </argument>
                                                                                                        ,
                                                                                                        <argument>
                                                                                                            <expr>
                                                                                                                <call>
                                                                                                                    <name>
                                                                                                                        readAttribute
                                                                                                                    </name>
                                                                                                                    <argument_list>
                                                                                                                        (
                                                                                                                        <argument>
                                                                                                                            <expr>
                                                                                                                                <name>
                                                                                                                                    elem
                                                                                                                                </name>
                                                                                                                            </expr>
                                                                                                                        </argument>
                                                                                                                        ,
                                                                                                                        <argument>
                                                                                                                            <expr>
                                                                                                                                "font-size"
                                                                                                                            </expr>
                                                                                                                        </argument>
                                                                                                                        ,
                                                                                                                        <argument>
                                                                                                                            <expr>
                                                                                                                                "0"
                                                                                                                            </expr>
                                                                                                                        </argument>
                                                                                                                        )
                                                                                                                    </argument_list>
                                                                                                                </call>
                                                                                                            </expr>
                                                                                                        </argument>
                                                                                                        ,
                                                                                                        <argument>
                                                                                                            <expr>
                                                                                                                <name>
                                                                                                                    percentFactor
                                                                                                                </name>
                                                                                                            </expr>
                                                                                                        </argument>
                                                                                                        )
                                                                                                    </argument_list>
                                                                                                </call>
                                                                                            </expr>
                                                                                            ;
                                                                                        </expr_stmt>
                                                                                        }
                                                                                    </block>
                                                                                </then>
                                                                                <else>else
                                                                                    <block>{
                                                                                        <expr_stmt>
                                                                                            <expr>
                                                                                                <name>scaleFactor</name>
                                                                                                = 1d
                                                                                            </expr>
                                                                                            ;
                                                                                        </expr_stmt>
                                                                                        }
                                                                                    </block>
                                                                                </else>
                                                                            </if>
                                                                        </else>
                                                                    </if>
                                                                </else>
                                                            </if>
                                                        </else>
                                                    </if>
                                                </else>
                                            </if>
                                        </else>
                                    </if>
                                </else>
                            </if>
                        </else>
                    </if>

                    <return>return
                        <expr>
                            <call>
                                <name><name>Double</name>.
                                    <name>parseDouble</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>str</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                            *
                            <name>scaleFactor</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Returns a value as a String array.
                * The values are separated by commas with optional white space.
                */
            </comment>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>String</name>
                    <index>[]</index>
                </type>
                <name>toCommaSeparatedArray</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>str</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <return>return
                        <expr>
                            <call>
                                <name><name>str</name>.
                                    <name>split</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>"\\s*,\\s*"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Returns a value as a String array.
                * The values are separated by whitespace or by commas with optional white
                * space.
                */
            </comment>
            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>String</name>
                    <index>[]</index>
                </type>
                <name>toWSOrCommaSeparatedArray</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>str</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>String</name>
                                <index>[]</index>
                            </type>
                            <name>result</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>str</name>.
                                            <name>split</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>"(\\s*,\\s*|\\s+)"</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name><name>result</name>.
                                    <name>length</name>
                                </name>
                                == 1 &amp;&amp;
                                <name>
                                    <name>result</name>
                                    <index>[<expr>0</expr>]
                                    </index>
                                </name>
                                .
                                <call>
                                    <name>equals</name>
                                    <argument_list>(
                                        <argument>
                                            <expr>""</expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <return>return
                                    <expr>new
                                        <name>
                                            <name>String</name>
                                            <index>[<expr>0</expr>]
                                            </index>
                                        </name>
                                    </expr>
                                    ;
                                </return>
                                }
                            </block>
                        </then>
                        <else>else
                            <block>{
                                <return>return
                                    <expr>
                                        <name>result</name>
                                    </expr>
                                    ;
                                </return>
                                }
                            </block>
                        </else>
                    </if>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Returns a value as a Point2D.Double array.
                * as specified in http://www.w3.org/TR/SVGMobile12/shapes.html#PointsBNF
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name><name>Point2D</name>.
                        <name>Double</name>
                    </name>
                    <index>[]</index>
                </type>
                <name>toPoints</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>str</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>StringTokenizer</name>
                            </type>
                            <name>tt</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>StringTokenizer</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>str</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>" ,"</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name><name>Point2D</name>.
                                    <name>Double</name>
                                </name>
                                <index>[]</index>
                            </type>
                            <name>points</name> =
                            <init>
                                <expr>new
                                    <name><name>Point2D</name>.
                                        <name>Double</name>
                                        <index>[
                                            <expr>
                                                <call>
                                                    <name><name>tt</name>.
                                                        <name>countTokens</name>
                                                    </name>
                                                    <argument_list>()</argument_list>
                                                </call>
                                                / 2
                                            </expr>
                                            ]
                                        </index>
                                    </name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <for>for (
                        <init>
                            <decl>
                                <type>
                                    <name>int</name>
                                </type>
                                <name>i</name> =
                                <init>
                                    <expr>0</expr>
                                </init>
                            </decl>
                            ;
                        </init>
                        <condition>
                            <expr>
                                <name>i</name>
                                &lt;
                                <name><name>points</name>.
                                    <name>length</name>
                                </name>
                            </expr>
                            ;
                        </condition>
                        <incr>
                            <expr><name>i</name>++
                            </expr>
                        </incr>
                        )
                        <block>{

                            <expr_stmt>
                                <expr>
                                    <name>
                                        <name>points</name>
                                        <index>[
                                            <expr>
                                                <name>i</name>
                                            </expr>
                                            ]
                                        </index>
                                    </name>
                                    = new
                                    <call>
                                        <name><name>Point2D</name>.
                                            <name>Double</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>toNumber</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <call>
                                                                        <name><name>tt</name>.
                                                                            <name>nextToken</name>
                                                                        </name>
                                                                        <argument_list>()</argument_list>
                                                                    </call>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>toNumber</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <call>
                                                                        <name><name>tt</name>.
                                                                            <name>nextToken</name>
                                                                        </name>
                                                                        <argument_list>()</argument_list>
                                                                    </call>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                                ;
                            </expr_stmt>
                            }
                        </block>
                    </for>
                    <return>return
                        <expr>
                            <name>points</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Returns a value as a BezierPath array.
                * as specified in http://www.w3.org/TR/SVGMobile12/paths.html#PathDataBNF
                *
                * Also supports elliptical arc commands 'a' and 'A' as specified in
                * http://www.w3.org/TR/SVG/paths.html#PathDataEllipticalArcCommands
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>BezierPath</name>
                    <index>[]</index>
                </type>
                <name>toPath</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>str</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>LinkedList</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>BezierPath</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>paths</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>
                                            <name>LinkedList</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>BezierPath</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>BezierPath</name>
                            </type>
                            <name>path</name> =
                            <init>
                                <expr>
                                    <name>null</name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name><name>Point2D</name>.
                                    <name>Double</name>
                                </name>
                            </type>
                            <name>p</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name><name>Point2D</name>.
                                            <name>Double</name>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name><name>Point2D</name>.
                                    <name>Double</name>
                                </name>
                            </type>
                            <name>c1</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name><name>Point2D</name>.
                                            <name>Double</name>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name><name>Point2D</name>.
                                    <name>Double</name>
                                </name>
                            </type>
                            <name>c2</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name><name>Point2D</name>.
                                            <name>Double</name>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>StreamPosTokenizer</name>
                            </type>
                            <name>tt</name>
                        </decl>
                        ;
                    </decl_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>toPathTokenizer</name>
                                ==
                                <name>null</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name>tt</name>
                                        = new
                                        <call>
                                            <name>StreamPosTokenizer</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>new
                                                        <call>
                                                            <name>StringReader</name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>str</name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>tt</name>.
                                                <name>resetSyntax</name>
                                            </name>
                                            <argument_list>()</argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>tt</name>.
                                                <name>parseNumbers</name>
                                            </name>
                                            <argument_list>()</argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>tt</name>.
                                                <name>parseExponents</name>
                                            </name>
                                            <argument_list>()</argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>tt</name>.
                                                <name>parsePlusAsNumber</name>
                                            </name>
                                            <argument_list>()</argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>tt</name>.
                                                <name>whitespaceChars</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>' '</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>tt</name>.
                                                <name>whitespaceChars</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>','</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>','</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <expr_stmt>
                                    <expr>
                                        <name>toPathTokenizer</name>
                                        =
                                        <name>tt</name>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                        <else>else
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name>tt</name>
                                        =
                                        <name>toPathTokenizer</name>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>tt</name>.
                                                <name>setReader</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>new
                                                        <call>
                                                            <name>StringReader</name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>str</name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </else>
                    </if>


                    <decl_stmt>
                        <decl>
                            <type>
                                <name>char</name>
                            </type>
                            <name>nextCommand</name> =
                            <init>
                                <expr>'M'</expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>char</name>
                            </type>
                            <name>command</name> =
                            <init>
                                <expr>'M'</expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <label><name>Commands</name>:
                    </label>
                    <while>while
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>tt</name>.
                                        <name>nextToken</name>
                                    </name>
                                    <argument_list>()</argument_list>
                                </call>
                                !=
                                <name><name>StreamPosTokenizer</name>.
                                    <name>TT_EOF</name>
                                </name>
                            </expr>
                            )
                        </condition>
                        <block>{
                            <if>if
                                <condition>(
                                    <expr>
                                        <name><name>tt</name>.
                                            <name>ttype</name>
                                        </name>
                                        &gt; 0
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name>command</name>
                                                = (<name>char</name>)
                                                <name><name>tt</name>.
                                                    <name>ttype</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </then>
                                <else>else
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name>command</name>
                                                =
                                                <name>nextCommand</name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>tt</name>.
                                                        <name>pushBack</name>
                                                    </name>
                                                    <argument_list>()</argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </else>
                            </if>

                            <decl_stmt>
                                <decl>
                                    <type>
                                        <name><name>BezierPath</name>.
                                            <name>Node</name>
                                        </name>
                                    </type>
                                    <name>node</name>
                                </decl>
                                ;
                            </decl_stmt>

                            <switch>switch
                                <condition>(
                                    <expr>
                                        <name>command</name>
                                    </expr>
                                    )
                                </condition>
                                <block>{
                                    <case>case <expr>'M'</expr>:
                                        <comment type="line">// absolute-moveto x y</comment>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <name>path</name>
                                                    !=
                                                    <name>null</name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <expr_stmt>
                                                        <expr>
                                                            <call>
                                                                <name><name>paths</name>.
                                                                    <name>add</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            <name>path</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name>path</name>
                                                = new
                                                <call>
                                                    <name>BezierPath</name>
                                                    <argument_list>()</argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>

                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"x coordinate missing for 'M' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>p</name>.
                                                    <name>x</name>
                                                </name>
                                                =
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"y coordinate missing for 'M' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>p</name>.
                                                    <name>y</name>
                                                </name>
                                                =
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>path</name>.
                                                        <name>moveTo</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name><name>p</name>.
                                                                    <name>x</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>p</name>.
                                                                    <name>y</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name>nextCommand</name>
                                                = 'L'
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <break>break;</break>
                                    </case>
                                    <case>case <expr>'m'</expr>:
                                        <comment type="line">// relative-moveto dx dy</comment>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <name>path</name>
                                                    !=
                                                    <name>null</name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <expr_stmt>
                                                        <expr>
                                                            <call>
                                                                <name><name>paths</name>.
                                                                    <name>add</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            <name>path</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name>path</name>
                                                = new
                                                <call>
                                                    <name>BezierPath</name>
                                                    <argument_list>()</argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>

                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"dx coordinate missing for 'm' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>p</name>.
                                                    <name>x</name>
                                                </name>
                                                +=
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"dy coordinate missing for 'm' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>p</name>.
                                                    <name>y</name>
                                                </name>
                                                +=
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>path</name>.
                                                        <name>moveTo</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name><name>p</name>.
                                                                    <name>x</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>p</name>.
                                                                    <name>y</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name>nextCommand</name>
                                                = 'l'
                                            </expr>
                                            ;
                                        </expr_stmt>

                                        <break>break;</break>
                                    </case>
                                    <case>case <expr>'Z'</expr>:
                                    </case>
                                    <case>case <expr>'z'</expr>:
                                        <comment type="line">// close path</comment>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>p</name>.
                                                    <name>x</name>
                                                </name>
                                                =
                                                <call>
                                                    <name><name>path</name>.
                                                        <name>get</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>0</expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                                .
                                                <name>
                                                    <name>x</name>
                                                    <index>[<expr>0</expr>]
                                                    </index>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>p</name>.
                                                    <name>y</name>
                                                </name>
                                                =
                                                <call>
                                                    <name><name>path</name>.
                                                        <name>get</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>0</expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                                .
                                                <name>
                                                    <name>y</name>
                                                    <index>[<expr>0</expr>]
                                                    </index>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>

                                        <comment type="line">// If the last point and the first point are the same, we
                                        </comment>
                                        <comment type="line">// can merge them</comment>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>path</name>.
                                                            <name>size</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    &gt; 1
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <decl_stmt>
                                                        <decl>
                                                            <type>
                                                                <name><name>BezierPath</name>.
                                                                    <name>Node</name>
                                                                </name>
                                                            </type>
                                                            <name>first</name> =
                                                            <init>
                                                                <expr>
                                                                    <call>
                                                                        <name><name>path</name>.
                                                                            <name>get</name>
                                                                        </name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>0</expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                            </init>
                                                        </decl>
                                                        ;
                                                    </decl_stmt>
                                                    <decl_stmt>
                                                        <decl>
                                                            <type>
                                                                <name><name>BezierPath</name>.
                                                                    <name>Node</name>
                                                                </name>
                                                            </type>
                                                            <name>last</name> =
                                                            <init>
                                                                <expr>
                                                                    <call>
                                                                        <name><name>path</name>.
                                                                            <name>get</name>
                                                                        </name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>
                                                                                    <call>
                                                                                        <name><name>path</name>.
                                                                                            <name>size</name>
                                                                                        </name>
                                                                                        <argument_list>()
                                                                                        </argument_list>
                                                                                    </call>
                                                                                    - 1
                                                                                </expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                            </init>
                                                        </decl>
                                                        ;
                                                    </decl_stmt>
                                                    <if>if
                                                        <condition>(
                                                            <expr>
                                                                <name><name>first</name>.
                                                                    <name>x</name>
                                                                    <index>[<expr>0</expr>]
                                                                    </index>
                                                                </name>
                                                                ==
                                                                <name><name>last</name>.
                                                                    <name>x</name>
                                                                    <index>[<expr>0</expr>]
                                                                    </index>
                                                                </name>
                                                                &amp;&amp;
                                                                <name><name>first</name>.
                                                                    <name>y</name>
                                                                    <index>[<expr>0</expr>]
                                                                    </index>
                                                                </name>
                                                                ==
                                                                <name><name>last</name>.
                                                                    <name>y</name>
                                                                    <index>[<expr>0</expr>]
                                                                    </index>
                                                                </name>
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <block>{
                                                                <if>if
                                                                    <condition>(
                                                                        <expr>(
                                                                            <name><name>last</name>.
                                                                                <name>mask</name>
                                                                            </name>
                                                                            &amp;
                                                                            <name><name>BezierPath</name>.
                                                                                <name>C1_MASK</name>
                                                                            </name>
                                                                            ) != 0
                                                                        </expr>
                                                                        )
                                                                    </condition>
                                                                    <then>
                                                                        <block>{
                                                                            <expr_stmt>
                                                                                <expr>
                                                                                    <name><name>first</name>.
                                                                                        <name>mask</name>
                                                                                    </name>
                                                                                    |=
                                                                                    <name><name>BezierPath</name>.
                                                                                        <name>C1_MASK</name>
                                                                                    </name>
                                                                                </expr>
                                                                                ;
                                                                            </expr_stmt>
                                                                            <expr_stmt>
                                                                                <expr>
                                                                                    <name><name>first</name>.
                                                                                        <name>x</name>
                                                                                        <index>[<expr>1</expr>]
                                                                                        </index>
                                                                                    </name>
                                                                                    =
                                                                                    <name><name>last</name>.
                                                                                        <name>x</name>
                                                                                        <index>[<expr>1</expr>]
                                                                                        </index>
                                                                                    </name>
                                                                                </expr>
                                                                                ;
                                                                            </expr_stmt>
                                                                            <expr_stmt>
                                                                                <expr>
                                                                                    <name><name>first</name>.
                                                                                        <name>y</name>
                                                                                        <index>[<expr>1</expr>]
                                                                                        </index>
                                                                                    </name>
                                                                                    =
                                                                                    <name><name>last</name>.
                                                                                        <name>y</name>
                                                                                        <index>[<expr>1</expr>]
                                                                                        </index>
                                                                                    </name>
                                                                                </expr>
                                                                                ;
                                                                            </expr_stmt>
                                                                            }
                                                                        </block>
                                                                    </then>
                                                                </if>
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>path</name>.
                                                                                <name>remove</name>
                                                                            </name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <call>
                                                                                            <name><name>path</name>.
                                                                                                <name>size</name>
                                                                                            </name>
                                                                                            <argument_list>()
                                                                                            </argument_list>
                                                                                        </call>
                                                                                        - 1
                                                                                    </expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                }
                                                            </block>
                                                        </then>
                                                    </if>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>path</name>.
                                                        <name>setClosed</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>true</expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>

                                        <break>break;</break>
                                    </case>
                                    <case>case <expr>'L'</expr>:
                                        <comment type="line">// absolute-lineto x y</comment>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"x coordinate missing for 'L' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>p</name>.
                                                    <name>x</name>
                                                </name>
                                                =
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"y coordinate missing for 'L' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>p</name>.
                                                    <name>y</name>
                                                </name>
                                                =
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>path</name>.
                                                        <name>lineTo</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name><name>p</name>.
                                                                    <name>x</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>p</name>.
                                                                    <name>y</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name>nextCommand</name>
                                                = 'L'
                                            </expr>
                                            ;
                                        </expr_stmt>

                                        <break>break;</break>
                                    </case>
                                    <case>case <expr>'l'</expr>:
                                        <comment type="line">// relative-lineto dx dy</comment>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"dx coordinate missing for 'l' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>p</name>.
                                                    <name>x</name>
                                                </name>
                                                +=
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"dy coordinate missing for 'l' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>p</name>.
                                                    <name>y</name>
                                                </name>
                                                +=
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>path</name>.
                                                        <name>lineTo</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name><name>p</name>.
                                                                    <name>x</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>p</name>.
                                                                    <name>y</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name>nextCommand</name>
                                                = 'l'
                                            </expr>
                                            ;
                                        </expr_stmt>

                                        <break>break;</break>
                                    </case>
                                    <case>case <expr>'H'</expr>:
                                        <comment type="line">// absolute-horizontal-lineto x</comment>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"x coordinate missing for 'H' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>p</name>.
                                                    <name>x</name>
                                                </name>
                                                =
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>path</name>.
                                                        <name>lineTo</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name><name>p</name>.
                                                                    <name>x</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>p</name>.
                                                                    <name>y</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name>nextCommand</name>
                                                = 'H'
                                            </expr>
                                            ;
                                        </expr_stmt>

                                        <break>break;</break>
                                    </case>
                                    <case>case <expr>'h'</expr>:
                                        <comment type="line">// relative-horizontal-lineto dx</comment>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"dx coordinate missing for 'h' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>p</name>.
                                                    <name>x</name>
                                                </name>
                                                +=
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>path</name>.
                                                        <name>lineTo</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name><name>p</name>.
                                                                    <name>x</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>p</name>.
                                                                    <name>y</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name>nextCommand</name>
                                                = 'h'
                                            </expr>
                                            ;
                                        </expr_stmt>

                                        <break>break;</break>
                                    </case>
                                    <case>case <expr>'V'</expr>:
                                        <comment type="line">// absolute-vertical-lineto y</comment>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"y coordinate missing for 'V' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>p</name>.
                                                    <name>y</name>
                                                </name>
                                                =
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>path</name>.
                                                        <name>lineTo</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name><name>p</name>.
                                                                    <name>x</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>p</name>.
                                                                    <name>y</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name>nextCommand</name>
                                                = 'V'
                                            </expr>
                                            ;
                                        </expr_stmt>

                                        <break>break;</break>
                                    </case>
                                    <case>case <expr>'v'</expr>:
                                        <comment type="line">// relative-vertical-lineto dy</comment>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"dy coordinate missing for 'v' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>p</name>.
                                                    <name>y</name>
                                                </name>
                                                +=
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>path</name>.
                                                        <name>lineTo</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name><name>p</name>.
                                                                    <name>x</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>p</name>.
                                                                    <name>y</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name>nextCommand</name>
                                                = 'v'
                                            </expr>
                                            ;
                                        </expr_stmt>

                                        <break>break;</break>
                                    </case>
                                    <case>case <expr>'C'</expr>:
                                        <comment type="line">// absolute-curveto x1 y1 x2 y2 x y</comment>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"x1 coordinate missing for 'C' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>c1</name>.
                                                    <name>x</name>
                                                </name>
                                                =
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"y1 coordinate missing for 'C' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>c1</name>.
                                                    <name>y</name>
                                                </name>
                                                =
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"x2 coordinate missing for 'C' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>c2</name>.
                                                    <name>x</name>
                                                </name>
                                                =
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"y2 coordinate missing for 'C' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>c2</name>.
                                                    <name>y</name>
                                                </name>
                                                =
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"x coordinate missing for 'C' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>p</name>.
                                                    <name>x</name>
                                                </name>
                                                =
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"y coordinate missing for 'C' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>p</name>.
                                                    <name>y</name>
                                                </name>
                                                =
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>path</name>.
                                                        <name>curveTo</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name><name>c1</name>.
                                                                    <name>x</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>c1</name>.
                                                                    <name>y</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>c2</name>.
                                                                    <name>x</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>c2</name>.
                                                                    <name>y</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>p</name>.
                                                                    <name>x</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>p</name>.
                                                                    <name>y</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name>nextCommand</name>
                                                = 'C'
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <break>break;</break>

                                    </case>
                                    <case>case <expr>'c'</expr>:
                                        <comment type="line">// relative-curveto dx1 dy1 dx2 dy2 dx dy</comment>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"dx1 coordinate missing for 'c' at
                                                                            position " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>c1</name>.
                                                    <name>x</name>
                                                </name>
                                                =
                                                <name><name>p</name>.
                                                    <name>x</name>
                                                </name>
                                                +
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"dy1 coordinate missing for 'c' at
                                                                            position " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>c1</name>.
                                                    <name>y</name>
                                                </name>
                                                =
                                                <name><name>p</name>.
                                                    <name>y</name>
                                                </name>
                                                +
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"dx2 coordinate missing for 'c' at
                                                                            position " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>c2</name>.
                                                    <name>x</name>
                                                </name>
                                                =
                                                <name><name>p</name>.
                                                    <name>x</name>
                                                </name>
                                                +
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"dy2 coordinate missing for 'c' at
                                                                            position " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>c2</name>.
                                                    <name>y</name>
                                                </name>
                                                =
                                                <name><name>p</name>.
                                                    <name>y</name>
                                                </name>
                                                +
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"dx coordinate missing for 'c' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>p</name>.
                                                    <name>x</name>
                                                </name>
                                                +=
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"dy coordinate missing for 'c' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>p</name>.
                                                    <name>y</name>
                                                </name>
                                                +=
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>path</name>.
                                                        <name>curveTo</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name><name>c1</name>.
                                                                    <name>x</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>c1</name>.
                                                                    <name>y</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>c2</name>.
                                                                    <name>x</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>c2</name>.
                                                                    <name>y</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>p</name>.
                                                                    <name>x</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>p</name>.
                                                                    <name>y</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name>nextCommand</name>
                                                = 'c'
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <break>break;</break>

                                    </case>
                                    <case>case <expr>'S'</expr>:
                                        <comment type="line">// absolute-shorthand-curveto x2 y2 x y</comment>
                                        <expr_stmt>
                                            <expr>
                                                <name>node</name>
                                                =
                                                <call>
                                                    <name><name>path</name>.
                                                        <name>get</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <call>
                                                                    <name><name>path</name>.
                                                                        <name>size</name>
                                                                    </name>
                                                                    <argument_list>()</argument_list>
                                                                </call>
                                                                - 1
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>c1</name>.
                                                    <name>x</name>
                                                </name>
                                                =
                                                <name><name>node</name>.
                                                    <name>x</name>
                                                    <index>[<expr>0</expr>]
                                                    </index>
                                                </name>
                                                * 2d -
                                                <name><name>node</name>.
                                                    <name>x</name>
                                                    <index>[<expr>1</expr>]
                                                    </index>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>c1</name>.
                                                    <name>y</name>
                                                </name>
                                                =
                                                <name><name>node</name>.
                                                    <name>y</name>
                                                    <index>[<expr>0</expr>]
                                                    </index>
                                                </name>
                                                * 2d -
                                                <name><name>node</name>.
                                                    <name>y</name>
                                                    <index>[<expr>1</expr>]
                                                    </index>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"x2 coordinate missing for 'S' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>c2</name>.
                                                    <name>x</name>
                                                </name>
                                                =
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"y2 coordinate missing for 'S' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>c2</name>.
                                                    <name>y</name>
                                                </name>
                                                =
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"x coordinate missing for 'S' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>p</name>.
                                                    <name>x</name>
                                                </name>
                                                =
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"y coordinate missing for 'S' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>p</name>.
                                                    <name>y</name>
                                                </name>
                                                =
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>path</name>.
                                                        <name>curveTo</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name><name>c1</name>.
                                                                    <name>x</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>c1</name>.
                                                                    <name>y</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>c2</name>.
                                                                    <name>x</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>c2</name>.
                                                                    <name>y</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>p</name>.
                                                                    <name>x</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>p</name>.
                                                                    <name>y</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name>nextCommand</name>
                                                = 'S'
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <break>break;</break>

                                    </case>
                                    <case>case <expr>'s'</expr>:
                                        <comment type="line">// relative-shorthand-curveto dx2 dy2 dx dy</comment>
                                        <expr_stmt>
                                            <expr>
                                                <name>node</name>
                                                =
                                                <call>
                                                    <name><name>path</name>.
                                                        <name>get</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <call>
                                                                    <name><name>path</name>.
                                                                        <name>size</name>
                                                                    </name>
                                                                    <argument_list>()</argument_list>
                                                                </call>
                                                                - 1
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>c1</name>.
                                                    <name>x</name>
                                                </name>
                                                =
                                                <name><name>node</name>.
                                                    <name>x</name>
                                                    <index>[<expr>0</expr>]
                                                    </index>
                                                </name>
                                                * 2d -
                                                <name><name>node</name>.
                                                    <name>x</name>
                                                    <index>[<expr>1</expr>]
                                                    </index>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>c1</name>.
                                                    <name>y</name>
                                                </name>
                                                =
                                                <name><name>node</name>.
                                                    <name>y</name>
                                                    <index>[<expr>0</expr>]
                                                    </index>
                                                </name>
                                                * 2d -
                                                <name><name>node</name>.
                                                    <name>y</name>
                                                    <index>[<expr>1</expr>]
                                                    </index>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"dx2 coordinate missing for 's' at
                                                                            position " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>c2</name>.
                                                    <name>x</name>
                                                </name>
                                                =
                                                <name><name>p</name>.
                                                    <name>x</name>
                                                </name>
                                                +
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"dy2 coordinate missing for 's' at
                                                                            position " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>c2</name>.
                                                    <name>y</name>
                                                </name>
                                                =
                                                <name><name>p</name>.
                                                    <name>y</name>
                                                </name>
                                                +
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"dx coordinate missing for 's' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>p</name>.
                                                    <name>x</name>
                                                </name>
                                                +=
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"dy coordinate missing for 's' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>p</name>.
                                                    <name>y</name>
                                                </name>
                                                +=
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>path</name>.
                                                        <name>curveTo</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name><name>c1</name>.
                                                                    <name>x</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>c1</name>.
                                                                    <name>y</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>c2</name>.
                                                                    <name>x</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>c2</name>.
                                                                    <name>y</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>p</name>.
                                                                    <name>x</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>p</name>.
                                                                    <name>y</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name>nextCommand</name>
                                                = 's'
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <break>break;</break>

                                    </case>
                                    <case>case <expr>'Q'</expr>:
                                        <comment type="line">// absolute-quadto x1 y1 x y</comment>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"x1 coordinate missing for 'Q' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>c1</name>.
                                                    <name>x</name>
                                                </name>
                                                =
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"y1 coordinate missing for 'Q' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>c1</name>.
                                                    <name>y</name>
                                                </name>
                                                =
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"x coordinate missing for 'Q' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>p</name>.
                                                    <name>x</name>
                                                </name>
                                                =
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"y coordinate missing for 'Q' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>p</name>.
                                                    <name>y</name>
                                                </name>
                                                =
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>path</name>.
                                                        <name>quadTo</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name><name>c1</name>.
                                                                    <name>x</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>c1</name>.
                                                                    <name>y</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>p</name>.
                                                                    <name>x</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>p</name>.
                                                                    <name>y</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name>nextCommand</name>
                                                = 'Q'
                                            </expr>
                                            ;
                                        </expr_stmt>

                                        <break>break;</break>

                                    </case>
                                    <case>case <expr>'q'</expr>:
                                        <comment type="line">// relative-quadto dx1 dy1 dx dy</comment>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"dx1 coordinate missing for 'q' at
                                                                            position " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>c1</name>.
                                                    <name>x</name>
                                                </name>
                                                =
                                                <name><name>p</name>.
                                                    <name>x</name>
                                                </name>
                                                +
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"dy1 coordinate missing for 'q' at
                                                                            position " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>c1</name>.
                                                    <name>y</name>
                                                </name>
                                                =
                                                <name><name>p</name>.
                                                    <name>y</name>
                                                </name>
                                                +
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"dx coordinate missing for 'q' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>p</name>.
                                                    <name>x</name>
                                                </name>
                                                +=
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"dy coordinate missing for 'q' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>p</name>.
                                                    <name>y</name>
                                                </name>
                                                +=
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>path</name>.
                                                        <name>quadTo</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name><name>c1</name>.
                                                                    <name>x</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>c1</name>.
                                                                    <name>y</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>p</name>.
                                                                    <name>x</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>p</name>.
                                                                    <name>y</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name>nextCommand</name>
                                                = 'q'
                                            </expr>
                                            ;
                                        </expr_stmt>

                                        <break>break;</break>
                                    </case>
                                    <case>case <expr>'T'</expr>:
                                        <comment type="line">// absolute-shorthand-quadto x y</comment>
                                        <expr_stmt>
                                            <expr>
                                                <name>node</name>
                                                =
                                                <call>
                                                    <name><name>path</name>.
                                                        <name>get</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <call>
                                                                    <name><name>path</name>.
                                                                        <name>size</name>
                                                                    </name>
                                                                    <argument_list>()</argument_list>
                                                                </call>
                                                                - 1
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>c1</name>.
                                                    <name>x</name>
                                                </name>
                                                =
                                                <name><name>node</name>.
                                                    <name>x</name>
                                                    <index>[<expr>0</expr>]
                                                    </index>
                                                </name>
                                                * 2d -
                                                <name><name>node</name>.
                                                    <name>x</name>
                                                    <index>[<expr>1</expr>]
                                                    </index>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>c1</name>.
                                                    <name>y</name>
                                                </name>
                                                =
                                                <name><name>node</name>.
                                                    <name>y</name>
                                                    <index>[<expr>0</expr>]
                                                    </index>
                                                </name>
                                                * 2d -
                                                <name><name>node</name>.
                                                    <name>y</name>
                                                    <index>[<expr>1</expr>]
                                                    </index>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"x coordinate missing for 'T' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>p</name>.
                                                    <name>x</name>
                                                </name>
                                                =
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"y coordinate missing for 'T' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>p</name>.
                                                    <name>y</name>
                                                </name>
                                                =
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>path</name>.
                                                        <name>quadTo</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name><name>c1</name>.
                                                                    <name>x</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>c1</name>.
                                                                    <name>y</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>p</name>.
                                                                    <name>x</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>p</name>.
                                                                    <name>y</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name>nextCommand</name>
                                                = 'T'
                                            </expr>
                                            ;
                                        </expr_stmt>

                                        <break>break;</break>

                                    </case>
                                    <case>case <expr>'t'</expr>:
                                        <comment type="line">// relative-shorthand-quadto dx dy</comment>
                                        <expr_stmt>
                                            <expr>
                                                <name>node</name>
                                                =
                                                <call>
                                                    <name><name>path</name>.
                                                        <name>get</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <call>
                                                                    <name><name>path</name>.
                                                                        <name>size</name>
                                                                    </name>
                                                                    <argument_list>()</argument_list>
                                                                </call>
                                                                - 1
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>c1</name>.
                                                    <name>x</name>
                                                </name>
                                                =
                                                <name><name>node</name>.
                                                    <name>x</name>
                                                    <index>[<expr>0</expr>]
                                                    </index>
                                                </name>
                                                * 2d -
                                                <name><name>node</name>.
                                                    <name>x</name>
                                                    <index>[<expr>1</expr>]
                                                    </index>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>c1</name>.
                                                    <name>y</name>
                                                </name>
                                                =
                                                <name><name>node</name>.
                                                    <name>y</name>
                                                    <index>[<expr>0</expr>]
                                                    </index>
                                                </name>
                                                * 2d -
                                                <name><name>node</name>.
                                                    <name>y</name>
                                                    <index>[<expr>1</expr>]
                                                    </index>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"dx coordinate missing for 't' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>p</name>.
                                                    <name>x</name>
                                                </name>
                                                +=
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_NUMBER</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"dy coordinate missing for 't' at position
                                                                            " +
                                                                            <call>
                                                                                <name><name>tt</name>.
                                                                                    <name>getStartPosition</name>
                                                                                </name>
                                                                                <argument_list>()</argument_list>
                                                                            </call>
                                                                            + " in " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>p</name>.
                                                    <name>y</name>
                                                </name>
                                                +=
                                                <name><name>tt</name>.
                                                    <name>nval</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>path</name>.
                                                        <name>quadTo</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name><name>c1</name>.
                                                                    <name>x</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>c1</name>.
                                                                    <name>y</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>p</name>.
                                                                    <name>x</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>p</name>.
                                                                    <name>y</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name>nextCommand</name>
                                                = 's'
                                            </expr>
                                            ;
                                        </expr_stmt>

                                        <break>break;</break>


                                    </case>
                                    <case>case <expr>'A'</expr>:
                                        <block>{
                                            <comment type="line">// absolute-elliptical-arc rx ry x-axis-rotation
                                                large-arc-flag sweep-flag x y
                                            </comment>
                                            <if>if
                                                <condition>(
                                                    <expr>
                                                        <call>
                                                            <name><name>tt</name>.
                                                                <name>nextToken</name>
                                                            </name>
                                                            <argument_list>()</argument_list>
                                                        </call>
                                                        !=
                                                        <name><name>StreamPosTokenizer</name>.
                                                            <name>TT_NUMBER</name>
                                                        </name>
                                                    </expr>
                                                    )
                                                </condition>
                                                <then>
                                                    <block>{
                                                        <throw>throw
                                                            <expr>new
                                                                <call>
                                                                    <name>IOException</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>"rx coordinate missing for 'A' at
                                                                                position " +
                                                                                <call>
                                                                                    <name><name>tt</name>.
                                                                                        <name>getStartPosition</name>
                                                                                    </name>
                                                                                    <argument_list>()</argument_list>
                                                                                </call>
                                                                                + " in " +
                                                                                <name>str</name>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            ;
                                                        </throw>
                                                        }
                                                    </block>
                                                </then>
                                            </if>
                                            <comment type="line">// If rX or rY have negative signs, these are
                                                dropped;
                                            </comment>
                                            <comment type="line">// the absolute value is used instead.</comment>
                                            <decl_stmt>
                                                <decl>
                                                    <type>
                                                        <name>double</name>
                                                    </type>
                                                    <name>rx</name> =
                                                    <init>
                                                        <expr>
                                                            <name><name>tt</name>.
                                                                <name>nval</name>
                                                            </name>
                                                        </expr>
                                                    </init>
                                                </decl>
                                                ;
                                            </decl_stmt>
                                            <if>if
                                                <condition>(
                                                    <expr>
                                                        <call>
                                                            <name><name>tt</name>.
                                                                <name>nextToken</name>
                                                            </name>
                                                            <argument_list>()</argument_list>
                                                        </call>
                                                        !=
                                                        <name><name>StreamPosTokenizer</name>.
                                                            <name>TT_NUMBER</name>
                                                        </name>
                                                    </expr>
                                                    )
                                                </condition>
                                                <then>
                                                    <block>{
                                                        <throw>throw
                                                            <expr>new
                                                                <call>
                                                                    <name>IOException</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>"ry coordinate missing for 'A' at
                                                                                position " +
                                                                                <call>
                                                                                    <name><name>tt</name>.
                                                                                        <name>getStartPosition</name>
                                                                                    </name>
                                                                                    <argument_list>()</argument_list>
                                                                                </call>
                                                                                + " in " +
                                                                                <name>str</name>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            ;
                                                        </throw>
                                                        }
                                                    </block>
                                                </then>
                                            </if>
                                            <decl_stmt>
                                                <decl>
                                                    <type>
                                                        <name>double</name>
                                                    </type>
                                                    <name>ry</name> =
                                                    <init>
                                                        <expr>
                                                            <name><name>tt</name>.
                                                                <name>nval</name>
                                                            </name>
                                                        </expr>
                                                    </init>
                                                </decl>
                                                ;
                                            </decl_stmt>
                                            <if>if
                                                <condition>(
                                                    <expr>
                                                        <call>
                                                            <name><name>tt</name>.
                                                                <name>nextToken</name>
                                                            </name>
                                                            <argument_list>()</argument_list>
                                                        </call>
                                                        !=
                                                        <name><name>StreamPosTokenizer</name>.
                                                            <name>TT_NUMBER</name>
                                                        </name>
                                                    </expr>
                                                    )
                                                </condition>
                                                <then>
                                                    <block>{
                                                        <throw>throw
                                                            <expr>new
                                                                <call>
                                                                    <name>IOException</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>"x-axis-rotation missing for 'A' at
                                                                                position " +
                                                                                <call>
                                                                                    <name><name>tt</name>.
                                                                                        <name>getStartPosition</name>
                                                                                    </name>
                                                                                    <argument_list>()</argument_list>
                                                                                </call>
                                                                                + " in " +
                                                                                <name>str</name>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            ;
                                                        </throw>
                                                        }
                                                    </block>
                                                </then>
                                            </if>
                                            <decl_stmt>
                                                <decl>
                                                    <type>
                                                        <name>double</name>
                                                    </type>
                                                    <name>xAxisRotation</name> =
                                                    <init>
                                                        <expr>
                                                            <name><name>tt</name>.
                                                                <name>nval</name>
                                                            </name>
                                                        </expr>
                                                    </init>
                                                </decl>
                                                ;
                                            </decl_stmt>
                                            <if>if
                                                <condition>(
                                                    <expr>
                                                        <call>
                                                            <name><name>tt</name>.
                                                                <name>nextToken</name>
                                                            </name>
                                                            <argument_list>()</argument_list>
                                                        </call>
                                                        !=
                                                        <name><name>StreamPosTokenizer</name>.
                                                            <name>TT_NUMBER</name>
                                                        </name>
                                                    </expr>
                                                    )
                                                </condition>
                                                <then>
                                                    <block>{
                                                        <throw>throw
                                                            <expr>new
                                                                <call>
                                                                    <name>IOException</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>"large-arc-flag missing for 'A' at
                                                                                position " +
                                                                                <call>
                                                                                    <name><name>tt</name>.
                                                                                        <name>getStartPosition</name>
                                                                                    </name>
                                                                                    <argument_list>()</argument_list>
                                                                                </call>
                                                                                + " in " +
                                                                                <name>str</name>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            ;
                                                        </throw>
                                                        }
                                                    </block>
                                                </then>
                                            </if>
                                            <decl_stmt>
                                                <decl>
                                                    <type>
                                                        <name>boolean</name>
                                                    </type>
                                                    <name>largeArcFlag</name> =
                                                    <init>
                                                        <expr>
                                                            <name><name>tt</name>.
                                                                <name>nval</name>
                                                            </name>
                                                            != 0
                                                        </expr>
                                                    </init>
                                                </decl>
                                                ;
                                            </decl_stmt>
                                            <if>if
                                                <condition>(
                                                    <expr>
                                                        <call>
                                                            <name><name>tt</name>.
                                                                <name>nextToken</name>
                                                            </name>
                                                            <argument_list>()</argument_list>
                                                        </call>
                                                        !=
                                                        <name><name>StreamPosTokenizer</name>.
                                                            <name>TT_NUMBER</name>
                                                        </name>
                                                    </expr>
                                                    )
                                                </condition>
                                                <then>
                                                    <block>{
                                                        <throw>throw
                                                            <expr>new
                                                                <call>
                                                                    <name>IOException</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>"sweep-flag missing for 'A' at
                                                                                position " +
                                                                                <call>
                                                                                    <name><name>tt</name>.
                                                                                        <name>getStartPosition</name>
                                                                                    </name>
                                                                                    <argument_list>()</argument_list>
                                                                                </call>
                                                                                + " in " +
                                                                                <name>str</name>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            ;
                                                        </throw>
                                                        }
                                                    </block>
                                                </then>
                                            </if>
                                            <decl_stmt>
                                                <decl>
                                                    <type>
                                                        <name>boolean</name>
                                                    </type>
                                                    <name>sweepFlag</name> =
                                                    <init>
                                                        <expr>
                                                            <name><name>tt</name>.
                                                                <name>nval</name>
                                                            </name>
                                                            != 0
                                                        </expr>
                                                    </init>
                                                </decl>
                                                ;
                                            </decl_stmt>
                                            <if>if
                                                <condition>(
                                                    <expr>
                                                        <call>
                                                            <name><name>tt</name>.
                                                                <name>nextToken</name>
                                                            </name>
                                                            <argument_list>()</argument_list>
                                                        </call>
                                                        !=
                                                        <name><name>StreamPosTokenizer</name>.
                                                            <name>TT_NUMBER</name>
                                                        </name>
                                                    </expr>
                                                    )
                                                </condition>
                                                <then>
                                                    <block>{
                                                        <throw>throw
                                                            <expr>new
                                                                <call>
                                                                    <name>IOException</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>"x coordinate missing for 'A' at
                                                                                position " +
                                                                                <call>
                                                                                    <name><name>tt</name>.
                                                                                        <name>getStartPosition</name>
                                                                                    </name>
                                                                                    <argument_list>()</argument_list>
                                                                                </call>
                                                                                + " in " +
                                                                                <name>str</name>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            ;
                                                        </throw>
                                                        }
                                                    </block>
                                                </then>
                                            </if>
                                            <expr_stmt>
                                                <expr>
                                                    <name><name>p</name>.
                                                        <name>x</name>
                                                    </name>
                                                    =
                                                    <name><name>tt</name>.
                                                        <name>nval</name>
                                                    </name>
                                                </expr>
                                                ;
                                            </expr_stmt>
                                            <if>if
                                                <condition>(
                                                    <expr>
                                                        <call>
                                                            <name><name>tt</name>.
                                                                <name>nextToken</name>
                                                            </name>
                                                            <argument_list>()</argument_list>
                                                        </call>
                                                        !=
                                                        <name><name>StreamPosTokenizer</name>.
                                                            <name>TT_NUMBER</name>
                                                        </name>
                                                    </expr>
                                                    )
                                                </condition>
                                                <then>
                                                    <block>{
                                                        <throw>throw
                                                            <expr>new
                                                                <call>
                                                                    <name>IOException</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>"y coordinate missing for 'A' at
                                                                                position " +
                                                                                <call>
                                                                                    <name><name>tt</name>.
                                                                                        <name>getStartPosition</name>
                                                                                    </name>
                                                                                    <argument_list>()</argument_list>
                                                                                </call>
                                                                                + " in " +
                                                                                <name>str</name>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            ;
                                                        </throw>
                                                        }
                                                    </block>
                                                </then>
                                            </if>
                                            <expr_stmt>
                                                <expr>
                                                    <name><name>p</name>.
                                                        <name>y</name>
                                                    </name>
                                                    =
                                                    <name><name>tt</name>.
                                                        <name>nval</name>
                                                    </name>
                                                </expr>
                                                ;
                                            </expr_stmt>

                                            <expr_stmt>
                                                <expr>
                                                    <call>
                                                        <name><name>path</name>.
                                                            <name>arcTo</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>rx</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>ry</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>xAxisRotation</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>largeArcFlag</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>sweepFlag</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name><name>p</name>.
                                                                        <name>x</name>
                                                                    </name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name><name>p</name>.
                                                                        <name>y</name>
                                                                    </name>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                ;
                                            </expr_stmt>

                                            <expr_stmt>
                                                <expr>
                                                    <name>nextCommand</name>
                                                    = 'A'
                                                </expr>
                                                ;
                                            </expr_stmt>
                                            <break>break;</break>
                                            }
                                        </block>
                                    </case>
                                    <case>case <expr>'a'</expr>:
                                        <block>{
                                            <comment type="line">// absolute-elliptical-arc rx ry x-axis-rotation
                                                large-arc-flag sweep-flag x y
                                            </comment>
                                            <if>if
                                                <condition>(
                                                    <expr>
                                                        <call>
                                                            <name><name>tt</name>.
                                                                <name>nextToken</name>
                                                            </name>
                                                            <argument_list>()</argument_list>
                                                        </call>
                                                        !=
                                                        <name><name>StreamPosTokenizer</name>.
                                                            <name>TT_NUMBER</name>
                                                        </name>
                                                    </expr>
                                                    )
                                                </condition>
                                                <then>
                                                    <block>{
                                                        <throw>throw
                                                            <expr>new
                                                                <call>
                                                                    <name>IOException</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>"rx coordinate missing for 'A' at
                                                                                position " +
                                                                                <call>
                                                                                    <name><name>tt</name>.
                                                                                        <name>getStartPosition</name>
                                                                                    </name>
                                                                                    <argument_list>()</argument_list>
                                                                                </call>
                                                                                + " in " +
                                                                                <name>str</name>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            ;
                                                        </throw>
                                                        }
                                                    </block>
                                                </then>
                                            </if>
                                            <comment type="line">// If rX or rY have negative signs, these are
                                                dropped;
                                            </comment>
                                            <comment type="line">// the absolute value is used instead.</comment>
                                            <decl_stmt>
                                                <decl>
                                                    <type>
                                                        <name>double</name>
                                                    </type>
                                                    <name>rx</name> =
                                                    <init>
                                                        <expr>
                                                            <name><name>tt</name>.
                                                                <name>nval</name>
                                                            </name>
                                                        </expr>
                                                    </init>
                                                </decl>
                                                ;
                                            </decl_stmt>
                                            <if>if
                                                <condition>(
                                                    <expr>
                                                        <call>
                                                            <name><name>tt</name>.
                                                                <name>nextToken</name>
                                                            </name>
                                                            <argument_list>()</argument_list>
                                                        </call>
                                                        !=
                                                        <name><name>StreamPosTokenizer</name>.
                                                            <name>TT_NUMBER</name>
                                                        </name>
                                                    </expr>
                                                    )
                                                </condition>
                                                <then>
                                                    <block>{
                                                        <throw>throw
                                                            <expr>new
                                                                <call>
                                                                    <name>IOException</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>"ry coordinate missing for 'A' at
                                                                                position " +
                                                                                <call>
                                                                                    <name><name>tt</name>.
                                                                                        <name>getStartPosition</name>
                                                                                    </name>
                                                                                    <argument_list>()</argument_list>
                                                                                </call>
                                                                                + " in " +
                                                                                <name>str</name>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            ;
                                                        </throw>
                                                        }
                                                    </block>
                                                </then>
                                            </if>
                                            <decl_stmt>
                                                <decl>
                                                    <type>
                                                        <name>double</name>
                                                    </type>
                                                    <name>ry</name> =
                                                    <init>
                                                        <expr>
                                                            <name><name>tt</name>.
                                                                <name>nval</name>
                                                            </name>
                                                        </expr>
                                                    </init>
                                                </decl>
                                                ;
                                            </decl_stmt>
                                            <if>if
                                                <condition>(
                                                    <expr>
                                                        <call>
                                                            <name><name>tt</name>.
                                                                <name>nextToken</name>
                                                            </name>
                                                            <argument_list>()</argument_list>
                                                        </call>
                                                        !=
                                                        <name><name>StreamPosTokenizer</name>.
                                                            <name>TT_NUMBER</name>
                                                        </name>
                                                    </expr>
                                                    )
                                                </condition>
                                                <then>
                                                    <block>{
                                                        <throw>throw
                                                            <expr>new
                                                                <call>
                                                                    <name>IOException</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>"x-axis-rotation missing for 'A' at
                                                                                position " +
                                                                                <call>
                                                                                    <name><name>tt</name>.
                                                                                        <name>getStartPosition</name>
                                                                                    </name>
                                                                                    <argument_list>()</argument_list>
                                                                                </call>
                                                                                + " in " +
                                                                                <name>str</name>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            ;
                                                        </throw>
                                                        }
                                                    </block>
                                                </then>
                                            </if>
                                            <decl_stmt>
                                                <decl>
                                                    <type>
                                                        <name>double</name>
                                                    </type>
                                                    <name>xAxisRotation</name> =
                                                    <init>
                                                        <expr>
                                                            <name><name>tt</name>.
                                                                <name>nval</name>
                                                            </name>
                                                        </expr>
                                                    </init>
                                                </decl>
                                                ;
                                            </decl_stmt>
                                            <if>if
                                                <condition>(
                                                    <expr>
                                                        <call>
                                                            <name><name>tt</name>.
                                                                <name>nextToken</name>
                                                            </name>
                                                            <argument_list>()</argument_list>
                                                        </call>
                                                        !=
                                                        <name><name>StreamPosTokenizer</name>.
                                                            <name>TT_NUMBER</name>
                                                        </name>
                                                    </expr>
                                                    )
                                                </condition>
                                                <then>
                                                    <block>{
                                                        <throw>throw
                                                            <expr>new
                                                                <call>
                                                                    <name>IOException</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>"large-arc-flag missing for 'A' at
                                                                                position " +
                                                                                <call>
                                                                                    <name><name>tt</name>.
                                                                                        <name>getStartPosition</name>
                                                                                    </name>
                                                                                    <argument_list>()</argument_list>
                                                                                </call>
                                                                                + " in " +
                                                                                <name>str</name>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            ;
                                                        </throw>
                                                        }
                                                    </block>
                                                </then>
                                            </if>
                                            <decl_stmt>
                                                <decl>
                                                    <type>
                                                        <name>boolean</name>
                                                    </type>
                                                    <name>largeArcFlag</name> =
                                                    <init>
                                                        <expr>
                                                            <name><name>tt</name>.
                                                                <name>nval</name>
                                                            </name>
                                                            != 0
                                                        </expr>
                                                    </init>
                                                </decl>
                                                ;
                                            </decl_stmt>
                                            <if>if
                                                <condition>(
                                                    <expr>
                                                        <call>
                                                            <name><name>tt</name>.
                                                                <name>nextToken</name>
                                                            </name>
                                                            <argument_list>()</argument_list>
                                                        </call>
                                                        !=
                                                        <name><name>StreamPosTokenizer</name>.
                                                            <name>TT_NUMBER</name>
                                                        </name>
                                                    </expr>
                                                    )
                                                </condition>
                                                <then>
                                                    <block>{
                                                        <throw>throw
                                                            <expr>new
                                                                <call>
                                                                    <name>IOException</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>"sweep-flag missing for 'A' at
                                                                                position " +
                                                                                <call>
                                                                                    <name><name>tt</name>.
                                                                                        <name>getStartPosition</name>
                                                                                    </name>
                                                                                    <argument_list>()</argument_list>
                                                                                </call>
                                                                                + " in " +
                                                                                <name>str</name>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            ;
                                                        </throw>
                                                        }
                                                    </block>
                                                </then>
                                            </if>
                                            <decl_stmt>
                                                <decl>
                                                    <type>
                                                        <name>boolean</name>
                                                    </type>
                                                    <name>sweepFlag</name> =
                                                    <init>
                                                        <expr>
                                                            <name><name>tt</name>.
                                                                <name>nval</name>
                                                            </name>
                                                            != 0
                                                        </expr>
                                                    </init>
                                                </decl>
                                                ;
                                            </decl_stmt>
                                            <if>if
                                                <condition>(
                                                    <expr>
                                                        <call>
                                                            <name><name>tt</name>.
                                                                <name>nextToken</name>
                                                            </name>
                                                            <argument_list>()</argument_list>
                                                        </call>
                                                        !=
                                                        <name><name>StreamPosTokenizer</name>.
                                                            <name>TT_NUMBER</name>
                                                        </name>
                                                    </expr>
                                                    )
                                                </condition>
                                                <then>
                                                    <block>{
                                                        <throw>throw
                                                            <expr>new
                                                                <call>
                                                                    <name>IOException</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>"x coordinate missing for 'A' at
                                                                                position " +
                                                                                <call>
                                                                                    <name><name>tt</name>.
                                                                                        <name>getStartPosition</name>
                                                                                    </name>
                                                                                    <argument_list>()</argument_list>
                                                                                </call>
                                                                                + " in " +
                                                                                <name>str</name>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            ;
                                                        </throw>
                                                        }
                                                    </block>
                                                </then>
                                            </if>
                                            <expr_stmt>
                                                <expr>
                                                    <name><name>p</name>.
                                                        <name>x</name>
                                                    </name>
                                                    +=
                                                    <name><name>tt</name>.
                                                        <name>nval</name>
                                                    </name>
                                                </expr>
                                                ;
                                            </expr_stmt>
                                            <if>if
                                                <condition>(
                                                    <expr>
                                                        <call>
                                                            <name><name>tt</name>.
                                                                <name>nextToken</name>
                                                            </name>
                                                            <argument_list>()</argument_list>
                                                        </call>
                                                        !=
                                                        <name><name>StreamPosTokenizer</name>.
                                                            <name>TT_NUMBER</name>
                                                        </name>
                                                    </expr>
                                                    )
                                                </condition>
                                                <then>
                                                    <block>{
                                                        <throw>throw
                                                            <expr>new
                                                                <call>
                                                                    <name>IOException</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>"y coordinate missing for 'A' at
                                                                                position " +
                                                                                <call>
                                                                                    <name><name>tt</name>.
                                                                                        <name>getStartPosition</name>
                                                                                    </name>
                                                                                    <argument_list>()</argument_list>
                                                                                </call>
                                                                                + " in " +
                                                                                <name>str</name>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            ;
                                                        </throw>
                                                        }
                                                    </block>
                                                </then>
                                            </if>
                                            <expr_stmt>
                                                <expr>
                                                    <name><name>p</name>.
                                                        <name>y</name>
                                                    </name>
                                                    +=
                                                    <name><name>tt</name>.
                                                        <name>nval</name>
                                                    </name>
                                                </expr>
                                                ;
                                            </expr_stmt>

                                            <expr_stmt>
                                                <expr>
                                                    <call>
                                                        <name><name>path</name>.
                                                            <name>arcTo</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>rx</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>ry</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>xAxisRotation</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>largeArcFlag</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>sweepFlag</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name><name>p</name>.
                                                                        <name>x</name>
                                                                    </name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name><name>p</name>.
                                                                        <name>y</name>
                                                                    </name>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                ;
                                            </expr_stmt>

                                            <expr_stmt>
                                                <expr>
                                                    <name>nextCommand</name>
                                                    = 'a'
                                                </expr>
                                                ;
                                            </expr_stmt>
                                            <break>break;</break>
                                            }
                                        </block>
                                    </case>
                                    <default>default:
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <name>DEBUG</name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <expr_stmt>
                                                        <expr>
                                                            <call>
                                                                <name><name>System</name>.<name>out</name>.
                                                                    <name>println</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"SVGInputFormat.toPath aborting after
                                                                            illegal path command: " + <name>command
                                                                            </name> + " found in path " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <break>break Commands;</break>
                                        <comment type="line">//throw new IOException("Illegal command: "+command);
                                        </comment>
                                    </default>
                                    }
                                </block>
                            </switch>
                            }
                        </block>
                    </while>
                    <if>if
                        <condition>(
                            <expr>
                                <name>path</name>
                                !=
                                <name>null</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>paths</name>.
                                                <name>add</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>path</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>
                    <return>return
                        <expr>
                            <call>
                                <name><name>paths</name>.
                                    <name>toArray</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>new
                                            <name>
                                                <name>BezierPath</name>
                                                <index>[
                                                    <expr>
                                                        <call>
                                                            <name><name>paths</name>.
                                                                <name>size</name>
                                                            </name>
                                                            <argument_list>()</argument_list>
                                                        </call>
                                                    </expr>
                                                    ]
                                                </index>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>
            <comment type="block">/* Reads core attributes as listed in
                * http://www.w3.org/TR/SVGMobile12/feature.html#CoreAttribute
                */
            </comment>

            <function>
                <type>
                    <specifier>private</specifier>
                    <name>void</name>
                </type>
                <name>readCoreAttributes</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>a</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <comment type="line">// read "id" or "xml:id"</comment>
                    <comment type="line">//identifiedElements.put(elem.getAttribute("id"), elem);</comment>
                    <comment type="line">//identifiedElements.put(elem.getAttribute("xml:id"), elem);</comment>

                    <comment type="line">// XXX - Add</comment>
                    <comment type="line">// xml:base</comment>
                    <comment type="line">// xml:lang</comment>
                    <comment type="line">// xml:space</comment>
                    <comment type="line">// class</comment>

                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Puts all elments with an "id" or an "xml:id" attribute into the
                * hashtable {@code identifiedElements}.
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>void</name>
                </type>
                <name>identifyElements</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>identifiedElements</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <call>
                                                <name><name>elem</name>.
                                                    <name>getAttribute</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"id"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>identifiedElements</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <call>
                                                <name><name>elem</name>.
                                                    <name>getAttribute</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"xml:id"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <for>for (
                        <init>
                            <decl>
                                <type>
                                    <name>IXMLElement</name>
                                </type>
                                <name>child</name> :
                                <range>
                                    <expr>
                                        <call>
                                            <name><name>elem</name>.
                                                <name>getChildren</name>
                                            </name>
                                            <argument_list>()</argument_list>
                                        </call>
                                    </expr>
                                </range>
                            </decl>
                        </init>
                        )
                        <block>{
                            <expr_stmt>
                                <expr>
                                    <call>
                                        <name>identifyElements</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>child</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                                ;
                            </expr_stmt>
                            }
                        </block>
                    </for>
                    }
                </block>
            </function>

            <comment type="block">/* Reads object/group opacity as described in
                * http://www.w3.org/TR/SVGMobile12/painting.html#groupOpacity
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>void</name>
                </type>
                <name>readOpacityAttribute</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>
                                    <name>Map</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>a</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <comment type="line">//'opacity'</comment>
                    <comment type="line">//Value: &lt;opacity-value&gt; | inherit</comment>
                    <comment type="line">//Initial: 1</comment>
                    <comment type="line">//Applies to: 'image' element</comment>
                    <comment type="line">//Inherited: no</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <comment type="line">//&lt;opacity-value&gt;</comment>
                    <comment type="line">//The uniform opacity setting must be applied across an entire object.
                    </comment>
                    <comment type="line">//Any values outside the range 0.0 (fully transparent) to 1.0</comment>
                    <comment type="line">//(fully opaque) shall be clamped to this range.</comment>
                    <comment type="line">//(See Clamping values which are restricted to a particular range.)</comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>value</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toDouble</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"opacity"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"1"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>1</expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>0</expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>1</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>OPACITY</name>.
                                    <name>set</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>value</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    }
                </block>
            </function>
            <comment type="block">/* Reads text attributes as listed in
                * http://www.w3.org/TR/SVGMobile12/feature.html#Text
                */
            </comment>

            <function>
                <type>
                    <specifier>private</specifier>
                    <name>void</name>
                </type>
                <name>readTextAttributes</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>
                                    <name>Map</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>a</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>Object</name>
                            </type>
                            <name>value</name>
                        </decl>
                        ;
                    </decl_stmt>

                    <comment type="line">//'text-anchor'</comment>
                    <comment type="line">//Value: start | middle | end | inherit</comment>
                    <comment type="line">//Initial: start</comment>
                    <comment type="line">//Applies to: 'text' IXMLElement</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>value</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"text-anchor"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"start"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>SVG_TEXT_ANCHORS</name>.
                                        <name>get</name>
                                    </name>
                                    <argument_list>(
                                        <argument>
                                            <expr>
                                                <name>value</name>
                                            </expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                                !=
                                <name>null</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>TEXT_ANCHOR</name>.
                                                <name>set</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>a</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <call>
                                                            <name><name>SVG_TEXT_ANCHORS</name>.
                                                                <name>get</name>
                                                            </name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>value</name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>

                    <comment type="line">//'display-align'</comment>
                    <comment type="line">//Value: auto | before | center | after | inherit</comment>
                    <comment type="line">//Initial: auto</comment>
                    <comment type="line">//Applies to: 'textArea'</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>value</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"display-align"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"auto"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <comment type="line">// XXX - Implement me properly</comment>
                    <if>if
                        <condition>(
                            <expr>!
                                <call>
                                    <name><name>value</name>.
                                        <name>equals</name>
                                    </name>
                                    <argument_list>(
                                        <argument>
                                            <expr>"auto"</expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <if>if
                                    <condition>(
                                        <expr>
                                            <call>
                                                <name><name>value</name>.
                                                    <name>equals</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"center"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                        )
                                    </condition>
                                    <then>
                                        <block>{
                                            <expr_stmt>
                                                <expr>
                                                    <call>
                                                        <name><name>TEXT_ANCHOR</name>.
                                                            <name>set</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>a</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name><name>TextAnchor</name>.
                                                                        <name>MIDDLE</name>
                                                                    </name>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                ;
                                            </expr_stmt>
                                            }
                                        </block>
                                    </then>
                                    <else>else
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>value</name>.
                                                            <name>equals</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>"before"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <expr_stmt>
                                                        <expr>
                                                            <call>
                                                                <name><name>TEXT_ANCHOR</name>.
                                                                    <name>set</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            <name>a</name>
                                                                        </expr>
                                                                    </argument>
                                                                    ,
                                                                    <argument>
                                                                        <expr>
                                                                            <name><name>TextAnchor</name>.
                                                                                <name>END</name>
                                                                            </name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                    </else>
                                </if>
                                }
                            </block>
                        </then>
                    </if>

                    <comment type="line">//text-align</comment>
                    <comment type="line">//Value: start | end | center | inherit</comment>
                    <comment type="line">//Initial: start</comment>
                    <comment type="line">//Applies to: textArea elements</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <expr_stmt>
                        <expr>
                            <name>value</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"text-align"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"start"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <comment type="line">// XXX - Implement me properly</comment>
                    <if>if
                        <condition>(
                            <expr>!
                                <call>
                                    <name><name>value</name>.
                                        <name>equals</name>
                                    </name>
                                    <argument_list>(
                                        <argument>
                                            <expr>"start"</expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>TEXT_ALIGN</name>.
                                                <name>set</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>a</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <call>
                                                            <name><name>SVG_TEXT_ALIGNS</name>.
                                                                <name>get</name>
                                                            </name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>value</name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>
                    }
                </block>
            </function>
            <comment type="block">/* Reads text flow attributes as listed in
                * http://www.w3.org/TR/SVGMobile12/feature.html#TextFlow
                */
            </comment>

            <function>
                <type>
                    <specifier>private</specifier>
                    <name>void</name>
                </type>
                <name>readTextFlowAttributes</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>a</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>Object</name>
                            </type>
                            <name>value</name>
                        </decl>
                        ;
                    </decl_stmt>

                    <comment type="line">//'line-increment'</comment>
                    <comment type="line">//Value: auto | &lt;number&gt; | inherit</comment>
                    <comment type="line">//Initial: auto</comment>
                    <comment type="line">//Applies to: 'textArea'</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>value</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"line-increment"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"auto"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>DEBUG</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>System</name>.<name>out</name>.
                                                <name>println</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>"SVGInputFormat not implemented line-increment=" +
                                                        <name>value</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>

                    }
                </block>
            </function>
            <comment type="block">/* Reads the transform attribute as specified in
                * http://www.w3.org/TR/SVGMobile12/coords.html#TransformAttribute
                */
            </comment>

            <function>
                <type>
                    <specifier>private</specifier>
                    <name>void</name>
                </type>
                <name>readTransformAttribute</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>a</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>value</name>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <name>value</name>
                            =
                            <call>
                                <name>readAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"transform"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"none"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>!
                                <call>
                                    <name><name>value</name>.
                                        <name>equals</name>
                                    </name>
                                    <argument_list>(
                                        <argument>
                                            <expr>"none"</expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>TRANSFORM</name>.
                                                <name>set</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>a</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <call>
                                                            <name>toTransform</name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>elem</name>
                                                                    </expr>
                                                                </argument>
                                                                ,
                                                                <argument>
                                                                    <expr>
                                                                        <name>value</name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>
                    }
                </block>
            </function>
            <comment type="block">/* Reads solid color attributes.
                */
            </comment>

            <function>
                <type>
                    <specifier>private</specifier>
                    <name>void</name>
                </type>
                <name>readSolidColorElement</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>a</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>
                                            <name>HashMap</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>AttributeKey</name>
                                                </argument>
                                                ,
                                                <argument>
                                                    <name>Object</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readCoreAttributes</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <comment type="line">// 'solid-color'</comment>
                    <comment type="line">//Value: currentColor | &lt;color&gt; | inherit</comment>
                    <comment type="line">//Initial: black</comment>
                    <comment type="line">//Applies to: 'solidColor' elements</comment>
                    <comment type="line">//Inherited: no</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified &lt;color&gt; value, except inherit</comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>Color</name>
                            </type>
                            <name>color</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toColor</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"solid-color"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"black"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <comment type="line">//'solid-opacity'</comment>
                    <comment type="line">//Value: &lt;opacity-value&gt; | inherit</comment>
                    <comment type="line">//Initial: 1</comment>
                    <comment type="line">//Applies to: 'solidColor' elements</comment>
                    <comment type="line">//Inherited: no</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>opacity</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toDouble</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"solid-opacity"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"1"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>1</expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>0</expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>1</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>opacity</name>
                                != 1
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name>color</name>
                                        = new
                                        <call>
                                            <name>Color</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>(
                                                        <call>(<name>int</name>)
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>255 *
                                                                        <name>opacity</name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                        &lt;&lt; 24) | (0xffffff &amp;
                                                        <call>
                                                            <name><name>color</name>.
                                                                <name>getRGB</name>
                                                            </name>
                                                            <argument_list>()</argument_list>
                                                        </call>
                                                        )
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>true</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>

                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>elementObjects</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>color</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>


                    }
                </block>
            </function>

            <comment type="javadoc">/** Reads shape attributes.
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>void</name>
                </type>
                <name>readShapeAttributes</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>a</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>Object</name>
                            </type>
                            <name>objectValue</name>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>value</name>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>doubleValue</name>
                        </decl>
                        ;
                    </decl_stmt>

                    <comment type="line">//'color'</comment>
                    <comment type="line">// Value: &lt;color&gt; | inherit</comment>
                    <comment type="line">// Initial: depends on user agent</comment>
                    <comment type="line">// Applies to: None. Indirectly affects other properties via currentColor
                    </comment>
                    <comment type="line">// Inherited: yes</comment>
                    <comment type="line">// Percentages: N/A</comment>
                    <comment type="line">// Media: visual</comment>
                    <comment type="line">// Animatable: yes</comment>
                    <comment type="line">// Computed value: Specified &lt;color&gt; value, except inherit</comment>
                    <comment type="line">//</comment>
                    <comment type="line">// value = readInheritAttribute(elem, "color", "black");</comment>
                    <comment type="line">// if (DEBUG) System.out.println("color="+value);</comment>

                    <comment type="line">//'color-rendering'</comment>
                    <comment type="line">// Value: auto | optimizeSpeed | optimizeQuality | inherit</comment>
                    <comment type="line">// Initial: auto</comment>
                    <comment type="line">// Applies to: container elements , graphics elements and 'animateColor'
                    </comment>
                    <comment type="line">// Inherited: yes</comment>
                    <comment type="line">// Percentages: N/A</comment>
                    <comment type="line">// Media: visual</comment>
                    <comment type="line">// Animatable: yes</comment>
                    <comment type="line">// Computed value: Specified value, except inherit</comment>
                    <comment type="line">//</comment>
                    <comment type="line">// value = readInheritAttribute(elem, "color-rendering", "auto");</comment>
                    <comment type="line">// if (DEBUG) System.out.println("color-rendering="+value);</comment>

                    <comment type="line">// 'fill'</comment>
                    <comment type="line">// Value: &lt;paint&gt; | inherit (See Specifying paint)</comment>
                    <comment type="line">// Initial: black</comment>
                    <comment type="line">// Applies to: shapes and text content elements</comment>
                    <comment type="line">// Inherited: yes</comment>
                    <comment type="line">// Percentages: N/A</comment>
                    <comment type="line">// Media: visual</comment>
                    <comment type="line">// Animatable: yes</comment>
                    <comment type="line">// Computed value: "none", system paint, specified &lt;color&gt; value or
                        absolute IRI
                    </comment>
                    <expr_stmt>
                        <expr>
                            <name>objectValue</name>
                            =
                            <call>
                                <name>toPaint</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>readInheritAttribute</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>elem</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"fill"</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"black"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>objectValue</name>
                                <name>instanceof</name>
                                <name>Color</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>FILL_COLOR</name>.
                                                <name>set</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>a</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>(<name>Color</name>)
                                                        <name>objectValue</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                        <else>else
                            <if>if
                                <condition>(
                                    <expr>
                                        <name>objectValue</name>
                                        <name>instanceof</name>
                                        <name>Gradient</name>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>FILL_GRADIENT</name>.
                                                        <name>setClone</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>a</name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>(<name>Gradient</name>)
                                                                <name>objectValue</name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </then>
                                <else>else
                                    <if>if
                                        <condition>(
                                            <expr>
                                                <name>objectValue</name>
                                                ==
                                                <name>null</name>
                                            </expr>
                                            )
                                        </condition>
                                        <then>
                                            <block>{
                                                <expr_stmt>
                                                    <expr>
                                                        <call>
                                                            <name><name>FILL_COLOR</name>.
                                                                <name>set</name>
                                                            </name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>a</name>
                                                                    </expr>
                                                                </argument>
                                                                ,
                                                                <argument>
                                                                    <expr>
                                                                        <name>null</name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                    ;
                                                </expr_stmt>
                                                }
                                            </block>
                                        </then>
                                        <else>else
                                            <block>{
                                                <expr_stmt>
                                                    <expr>
                                                        <call>
                                                            <name><name>FILL_COLOR</name>.
                                                                <name>set</name>
                                                            </name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>a</name>
                                                                    </expr>
                                                                </argument>
                                                                ,
                                                                <argument>
                                                                    <expr>
                                                                        <name>null</name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                    ;
                                                </expr_stmt>
                                                <if>if
                                                    <condition>(
                                                        <expr>
                                                            <name>DEBUG</name>
                                                        </expr>
                                                        )
                                                    </condition>
                                                    <then>
                                                        <block>{
                                                            <expr_stmt>
                                                                <expr>
                                                                    <call>
                                                                        <name><name>System</name>.<name>out</name>.
                                                                            <name>println</name>
                                                                        </name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>"SVGInputFormat not implemented
                                                                                    fill=" +
                                                                                    <name>objectValue</name>
                                                                                </expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            }
                                                        </block>
                                                    </then>
                                                </if>
                                                }
                                            </block>
                                        </else>
                                    </if>
                                </else>
                            </if>
                        </else>
                    </if>

                    <comment type="line">//'fill-opacity'</comment>
                    <comment type="line">//Value: &lt;opacity-value&gt; | inherit</comment>
                    <comment type="line">//Initial: 1</comment>
                    <comment type="line">//Applies to: shapes and text content elements</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>objectValue</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"fill-opacity"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"1"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>FILL_OPACITY</name>.
                                    <name>set</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>toDouble</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>elem</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>(<name>String</name>)
                                                            <name>objectValue</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>1d</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>0d</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>1d</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <comment type="line">// 'fill-rule'</comment>
                    <comment type="line">// Value: nonzero | evenodd | inherit</comment>
                    <comment type="line">// Initial: nonzero</comment>
                    <comment type="line">// Applies to: shapes and text content elements</comment>
                    <comment type="line">// Inherited: yes</comment>
                    <comment type="line">// Percentages: N/A</comment>
                    <comment type="line">// Media: visual</comment>
                    <comment type="line">// Animatable: yes</comment>
                    <comment type="line">// Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>value</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"fill-rule"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"nonzero"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>WINDING_RULE</name>.
                                    <name>set</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name><name>SVG_FILL_RULES</name>.
                                                    <name>get</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>value</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <comment type="line">//'stroke'</comment>
                    <comment type="line">//Value: &lt;paint&gt; | inherit (See Specifying paint)</comment>
                    <comment type="line">//Initial: none</comment>
                    <comment type="line">//Applies to: shapes and text content elements</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: "none", system paint, specified &lt;color&gt; value</comment>
                    <comment type="line">// or absolute IRI</comment>
                    <expr_stmt>
                        <expr>
                            <name>objectValue</name>
                            =
                            <call>
                                <name>toPaint</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>readInheritAttribute</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>elem</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"stroke"</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"none"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>objectValue</name>
                                <name>instanceof</name>
                                <name>Color</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>STROKE_COLOR</name>.
                                                <name>set</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>a</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>(<name>Color</name>)
                                                        <name>objectValue</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                        <else>else
                            <if>if
                                <condition>(
                                    <expr>
                                        <name>objectValue</name>
                                        <name>instanceof</name>
                                        <name>Gradient</name>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>STROKE_GRADIENT</name>.
                                                        <name>setClone</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>a</name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>(<name>Gradient</name>)
                                                                <name>objectValue</name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </then>
                                <else>else
                                    <if>if
                                        <condition>(
                                            <expr>
                                                <name>objectValue</name>
                                                ==
                                                <name>null</name>
                                            </expr>
                                            )
                                        </condition>
                                        <then>
                                            <block>{
                                                <expr_stmt>
                                                    <expr>
                                                        <call>
                                                            <name><name>STROKE_COLOR</name>.
                                                                <name>set</name>
                                                            </name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>a</name>
                                                                    </expr>
                                                                </argument>
                                                                ,
                                                                <argument>
                                                                    <expr>
                                                                        <name>null</name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                    ;
                                                </expr_stmt>
                                                }
                                            </block>
                                        </then>
                                        <else>else
                                            <block>{
                                                <expr_stmt>
                                                    <expr>
                                                        <call>
                                                            <name><name>STROKE_COLOR</name>.
                                                                <name>set</name>
                                                            </name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>a</name>
                                                                    </expr>
                                                                </argument>
                                                                ,
                                                                <argument>
                                                                    <expr>
                                                                        <name>null</name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                    ;
                                                </expr_stmt>
                                                <if>if
                                                    <condition>(
                                                        <expr>
                                                            <name>DEBUG</name>
                                                        </expr>
                                                        )
                                                    </condition>
                                                    <then>
                                                        <block>{
                                                            <expr_stmt>
                                                                <expr>
                                                                    <call>
                                                                        <name><name>System</name>.<name>out</name>.
                                                                            <name>println</name>
                                                                        </name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>"SVGInputFormat not implemented
                                                                                    stroke=" +
                                                                                    <name>objectValue</name>
                                                                                </expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            }
                                                        </block>
                                                    </then>
                                                </if>
                                                }
                                            </block>
                                        </else>
                                    </if>
                                </else>
                            </if>
                        </else>
                    </if>

                    <comment type="line">//'stroke-dasharray'</comment>
                    <comment type="line">//Value: none | &lt;dasharray&gt; | inherit</comment>
                    <comment type="line">//Initial: none</comment>
                    <comment type="line">//Applies to: shapes and text content elements</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes (non-additive)</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>value</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"stroke-dasharray"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"none"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>!
                                <call>
                                    <name><name>value</name>.
                                        <name>equals</name>
                                    </name>
                                    <argument_list>(
                                        <argument>
                                            <expr>"none"</expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <decl_stmt>
                                    <decl>
                                        <type>
                                            <name>String</name>
                                            <index>[]</index>
                                        </type>
                                        <name>values</name> =
                                        <init>
                                            <expr>
                                                <call>
                                                    <name>toWSOrCommaSeparatedArray</name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>value</name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                        </init>
                                    </decl>
                                    ;
                                </decl_stmt>
                                <decl_stmt>
                                    <decl>
                                        <type>
                                            <name>double</name>
                                            <index>[]</index>
                                        </type>
                                        <name>dashes</name> =
                                        <init>
                                            <expr>new
                                                <name>
                                                    <name>double</name>
                                                    <index>[
                                                        <expr>
                                                            <name><name>values</name>.
                                                                <name>length</name>
                                                            </name>
                                                        </expr>
                                                        ]
                                                    </index>
                                                </name>
                                            </expr>
                                        </init>
                                    </decl>
                                    ;
                                </decl_stmt>
                                <for>for (
                                    <init>
                                        <decl>
                                            <type>
                                                <name>int</name>
                                            </type>
                                            <name>i</name> =
                                            <init>
                                                <expr>0</expr>
                                            </init>
                                        </decl>
                                        ;
                                    </init>
                                    <condition>
                                        <expr>
                                            <name>i</name>
                                            &lt;
                                            <name><name>values</name>.
                                                <name>length</name>
                                            </name>
                                        </expr>
                                        ;
                                    </condition>
                                    <incr>
                                        <expr><name>i</name>++
                                        </expr>
                                    </incr>
                                    )
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name>
                                                    <name>dashes</name>
                                                    <index>[
                                                        <expr>
                                                            <name>i</name>
                                                        </expr>
                                                        ]
                                                    </index>
                                                </name>
                                                =
                                                <call>
                                                    <name>toNumber</name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>elem</name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name>
                                                                    <name>values</name>
                                                                    <index>[
                                                                        <expr>
                                                                            <name>i</name>
                                                                        </expr>
                                                                        ]
                                                                    </index>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </for>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>STROKE_DASHES</name>.
                                                <name>set</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>a</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name>dashes</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>

                    <comment type="line">//'stroke-dashoffset'</comment>
                    <comment type="line">//Value: &lt;length&gt; | inherit</comment>
                    <comment type="line">//Initial: 0</comment>
                    <comment type="line">//Applies to: shapes and text content elements</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>doubleValue</name>
                            =
                            <call>
                                <name>toNumber</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>readInheritAttribute</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>elem</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"stroke-dashoffset"</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"0"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>STROKE_DASH_PHASE</name>.
                                    <name>set</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>doubleValue</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>IS_STROKE_DASH_FACTOR</name>.
                                    <name>set</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <comment type="line">//'stroke-linecap'</comment>
                    <comment type="line">//Value: butt | round | square | inherit</comment>
                    <comment type="line">//Initial: butt</comment>
                    <comment type="line">//Applies to: shapes and text content elements</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>value</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"stroke-linecap"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"butt"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>STROKE_CAP</name>.
                                    <name>set</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name><name>SVG_STROKE_LINECAPS</name>.
                                                    <name>get</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>value</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>


                    <comment type="line">//'stroke-linejoin'</comment>
                    <comment type="line">//Value: miter | round | bevel | inherit</comment>
                    <comment type="line">//Initial: miter</comment>
                    <comment type="line">//Applies to: shapes and text content elements</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>value</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"stroke-linejoin"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"miter"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>STROKE_JOIN</name>.
                                    <name>set</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name><name>SVG_STROKE_LINEJOINS</name>.
                                                    <name>get</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>value</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <comment type="line">//'stroke-miterlimit'</comment>
                    <comment type="line">//Value: &lt;miterlimit&gt; | inherit</comment>
                    <comment type="line">//Initial: 4</comment>
                    <comment type="line">//Applies to: shapes and text content elements</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>doubleValue</name>
                            =
                            <call>
                                <name>toDouble</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>readInheritAttribute</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>elem</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"stroke-miterlimit"</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"4"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>4d</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>1d</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name><name>Double</name>.
                                                <name>MAX_VALUE</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>STROKE_MITER_LIMIT</name>.
                                    <name>set</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>doubleValue</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>IS_STROKE_MITER_LIMIT_FACTOR</name>.
                                    <name>set</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <comment type="line">//'stroke-opacity'</comment>
                    <comment type="line">//Value: &lt;opacity-value&gt; | inherit</comment>
                    <comment type="line">//Initial: 1</comment>
                    <comment type="line">//Applies to: shapes and text content elements</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>objectValue</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"stroke-opacity"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"1"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>STROKE_OPACITY</name>.
                                    <name>set</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>toDouble</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>elem</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>(<name>String</name>)
                                                            <name>objectValue</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>1d</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>0d</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>1d</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <comment type="line">//'stroke-width'</comment>
                    <comment type="line">//Value: &lt;length&gt; | inherit</comment>
                    <comment type="line">//Initial: 1</comment>
                    <comment type="line">//Applies to: shapes and text content elements</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>doubleValue</name>
                            =
                            <call>
                                <name>toNumber</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>readInheritAttribute</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>elem</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"stroke-width"</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"1"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>STROKE_WIDTH</name>.
                                    <name>set</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>doubleValue</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    }
                </block>
            </function>
            <comment type="block">/* Reads shape attributes for the SVG "use" element.
                */
            </comment>

            <function>
                <type>
                    <specifier>private</specifier>
                    <name>void</name>
                </type>
                <name>readUseShapeAttributes</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>a</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>Object</name>
                            </type>
                            <name>objectValue</name>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>value</name>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>doubleValue</name>
                        </decl>
                        ;
                    </decl_stmt>

                    <comment type="line">//'color'</comment>
                    <comment type="line">// Value: &lt;color&gt; | inherit</comment>
                    <comment type="line">// Initial: depends on user agent</comment>
                    <comment type="line">// Applies to: None. Indirectly affects other properties via currentColor
                    </comment>
                    <comment type="line">// Inherited: yes</comment>
                    <comment type="line">// Percentages: N/A</comment>
                    <comment type="line">// Media: visual</comment>
                    <comment type="line">// Animatable: yes</comment>
                    <comment type="line">// Computed value: Specified &lt;color&gt; value, except inherit</comment>
                    <comment type="line">//</comment>
                    <comment type="line">// value = readInheritAttribute(elem, "color", "black");</comment>
                    <comment type="line">// if (DEBUG) System.out.println("color="+value);</comment>

                    <comment type="line">//'color-rendering'</comment>
                    <comment type="line">// Value: auto | optimizeSpeed | optimizeQuality | inherit</comment>
                    <comment type="line">// Initial: auto</comment>
                    <comment type="line">// Applies to: container elements , graphics elements and 'animateColor'
                    </comment>
                    <comment type="line">// Inherited: yes</comment>
                    <comment type="line">// Percentages: N/A</comment>
                    <comment type="line">// Media: visual</comment>
                    <comment type="line">// Animatable: yes</comment>
                    <comment type="line">// Computed value: Specified value, except inherit</comment>
                    <comment type="line">//</comment>
                    <comment type="line">// value = readInheritAttribute(elem, "color-rendering", "auto");</comment>
                    <comment type="line">// if (DEBUG) System.out.println("color-rendering="+value);</comment>

                    <comment type="line">// 'fill'</comment>
                    <comment type="line">// Value: &lt;paint&gt; | inherit (See Specifying paint)</comment>
                    <comment type="line">// Initial: black</comment>
                    <comment type="line">// Applies to: shapes and text content elements</comment>
                    <comment type="line">// Inherited: yes</comment>
                    <comment type="line">// Percentages: N/A</comment>
                    <comment type="line">// Media: visual</comment>
                    <comment type="line">// Animatable: yes</comment>
                    <comment type="line">// Computed value: "none", system paint, specified &lt;color&gt; value or
                        absolute IRI
                    </comment>
                    <expr_stmt>
                        <expr>
                            <name>objectValue</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"fill"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>null</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>objectValue</name>
                                !=
                                <name>null</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name>objectValue</name>
                                        =
                                        <call>
                                            <name>toPaint</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>elem</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>(<name>String</name>)
                                                        <name>objectValue</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <if>if
                                    <condition>(
                                        <expr>
                                            <name>objectValue</name>
                                            <name>instanceof</name>
                                            <name>Color</name>
                                        </expr>
                                        )
                                    </condition>
                                    <then>
                                        <block>{
                                            <expr_stmt>
                                                <expr>
                                                    <call>
                                                        <name><name>FILL_COLOR</name>.
                                                            <name>set</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>a</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>(<name>Color</name>)
                                                                    <name>objectValue</name>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                ;
                                            </expr_stmt>
                                            }
                                        </block>
                                    </then>
                                    <else>else
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <name>objectValue</name>
                                                    <name>instanceof</name>
                                                    <name>Gradient</name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <expr_stmt>
                                                        <expr>
                                                            <call>
                                                                <name><name>FILL_GRADIENT</name>.
                                                                    <name>set</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            <name>a</name>
                                                                        </expr>
                                                                    </argument>
                                                                    ,
                                                                    <argument>
                                                                        <expr>(<name>Gradient</name>)
                                                                            <name>objectValue</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    }
                                                </block>
                                            </then>
                                            <else>else
                                                <if>if
                                                    <condition>(
                                                        <expr>
                                                            <name>objectValue</name>
                                                            ==
                                                            <name>null</name>
                                                        </expr>
                                                        )
                                                    </condition>
                                                    <then>
                                                        <block>{
                                                            <expr_stmt>
                                                                <expr>
                                                                    <call>
                                                                        <name><name>FILL_COLOR</name>.
                                                                            <name>set</name>
                                                                        </name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>
                                                                                    <name>a</name>
                                                                                </expr>
                                                                            </argument>
                                                                            ,
                                                                            <argument>
                                                                                <expr>
                                                                                    <name>null</name>
                                                                                </expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            }
                                                        </block>
                                                    </then>
                                                    <else>else
                                                        <block>{
                                                            <expr_stmt>
                                                                <expr>
                                                                    <call>
                                                                        <name><name>FILL_COLOR</name>.
                                                                            <name>set</name>
                                                                        </name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>
                                                                                    <name>a</name>
                                                                                </expr>
                                                                            </argument>
                                                                            ,
                                                                            <argument>
                                                                                <expr>
                                                                                    <name>null</name>
                                                                                </expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <name>DEBUG</name>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>System</name>.<name>
                                                                                        out</name>.
                                                                                        <name>println</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>"SVGInputFormat not
                                                                                                implemented fill=" +
                                                                                                <name>objectValue</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        }
                                                                    </block>
                                                                </then>
                                                            </if>
                                                            }
                                                        </block>
                                                    </else>
                                                </if>
                                            </else>
                                        </if>
                                    </else>
                                </if>
                                }
                            </block>
                        </then>
                    </if>

                    <comment type="line">//'fill-opacity'</comment>
                    <comment type="line">//Value: &lt;opacity-value&gt; | inherit</comment>
                    <comment type="line">//Initial: 1</comment>
                    <comment type="line">//Applies to: shapes and text content elements</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>objectValue</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"fill-opacity"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>null</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>objectValue</name>
                                !=
                                <name>null</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>FILL_OPACITY</name>.
                                                <name>set</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>a</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <call>
                                                            <name>toDouble</name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>elem</name>
                                                                    </expr>
                                                                </argument>
                                                                ,
                                                                <argument>
                                                                    <expr>(<name>String</name>)
                                                                        <name>objectValue</name>
                                                                    </expr>
                                                                </argument>
                                                                ,
                                                                <argument>
                                                                    <expr>1d</expr>
                                                                </argument>
                                                                ,
                                                                <argument>
                                                                    <expr>0d</expr>
                                                                </argument>
                                                                ,
                                                                <argument>
                                                                    <expr>1d</expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>

                    <comment type="line">// 'fill-rule'</comment>
                    <comment type="line">// Value: nonzero | evenodd | inherit</comment>
                    <comment type="line">// Initial: nonzero</comment>
                    <comment type="line">// Applies to: shapes and text content elements</comment>
                    <comment type="line">// Inherited: yes</comment>
                    <comment type="line">// Percentages: N/A</comment>
                    <comment type="line">// Media: visual</comment>
                    <comment type="line">// Animatable: yes</comment>
                    <comment type="line">// Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>value</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"fill-rule"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>null</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>value</name>
                                !=
                                <name>null</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>WINDING_RULE</name>.
                                                <name>set</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>a</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <call>
                                                            <name><name>SVG_FILL_RULES</name>.
                                                                <name>get</name>
                                                            </name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>value</name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>

                    <comment type="line">//'stroke'</comment>
                    <comment type="line">//Value: &lt;paint&gt; | inherit (See Specifying paint)</comment>
                    <comment type="line">//Initial: none</comment>
                    <comment type="line">//Applies to: shapes and text content elements</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: "none", system paint, specified &lt;color&gt; value</comment>
                    <comment type="line">// or absolute IRI</comment>
                    <expr_stmt>
                        <expr>
                            <name>objectValue</name>
                            =
                            <call>
                                <name>toPaint</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>readInheritAttribute</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>elem</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"stroke"</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name>null</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>objectValue</name>
                                !=
                                <name>null</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <if>if
                                    <condition>(
                                        <expr>
                                            <name>objectValue</name>
                                            <name>instanceof</name>
                                            <name>Color</name>
                                        </expr>
                                        )
                                    </condition>
                                    <then>
                                        <block>{
                                            <expr_stmt>
                                                <expr>
                                                    <call>
                                                        <name><name>STROKE_COLOR</name>.
                                                            <name>set</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>a</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>(<name>Color</name>)
                                                                    <name>objectValue</name>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                ;
                                            </expr_stmt>
                                            }
                                        </block>
                                    </then>
                                    <else>else
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <name>objectValue</name>
                                                    <name>instanceof</name>
                                                    <name>Gradient</name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <expr_stmt>
                                                        <expr>
                                                            <call>
                                                                <name><name>STROKE_GRADIENT</name>.
                                                                    <name>set</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            <name>a</name>
                                                                        </expr>
                                                                    </argument>
                                                                    ,
                                                                    <argument>
                                                                        <expr>(<name>Gradient</name>)
                                                                            <name>objectValue</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                    </else>
                                </if>
                                }
                            </block>
                        </then>
                    </if>

                    <comment type="line">//'stroke-dasharray'</comment>
                    <comment type="line">//Value: none | &lt;dasharray&gt; | inherit</comment>
                    <comment type="line">//Initial: none</comment>
                    <comment type="line">//Applies to: shapes and text content elements</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes (non-additive)</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>value</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"stroke-dasharray"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>null</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>value</name>
                                != <name>null</name> &amp;&amp; !
                                <call>
                                    <name><name>value</name>.
                                        <name>equals</name>
                                    </name>
                                    <argument_list>(
                                        <argument>
                                            <expr>"none"</expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <decl_stmt>
                                    <decl>
                                        <type>
                                            <name>String</name>
                                            <index>[]</index>
                                        </type>
                                        <name>values</name> =
                                        <init>
                                            <expr>
                                                <call>
                                                    <name>toCommaSeparatedArray</name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>value</name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                        </init>
                                    </decl>
                                    ;
                                </decl_stmt>
                                <decl_stmt>
                                    <decl>
                                        <type>
                                            <name>double</name>
                                            <index>[]</index>
                                        </type>
                                        <name>dashes</name> =
                                        <init>
                                            <expr>new
                                                <name>
                                                    <name>double</name>
                                                    <index>[
                                                        <expr>
                                                            <name><name>values</name>.
                                                                <name>length</name>
                                                            </name>
                                                        </expr>
                                                        ]
                                                    </index>
                                                </name>
                                            </expr>
                                        </init>
                                    </decl>
                                    ;
                                </decl_stmt>
                                <for>for (
                                    <init>
                                        <decl>
                                            <type>
                                                <name>int</name>
                                            </type>
                                            <name>i</name> =
                                            <init>
                                                <expr>0</expr>
                                            </init>
                                        </decl>
                                        ;
                                    </init>
                                    <condition>
                                        <expr>
                                            <name>i</name>
                                            &lt;
                                            <name><name>values</name>.
                                                <name>length</name>
                                            </name>
                                        </expr>
                                        ;
                                    </condition>
                                    <incr>
                                        <expr><name>i</name>++
                                        </expr>
                                    </incr>
                                    )
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name>
                                                    <name>dashes</name>
                                                    <index>[
                                                        <expr>
                                                            <name>i</name>
                                                        </expr>
                                                        ]
                                                    </index>
                                                </name>
                                                =
                                                <call>
                                                    <name>toNumber</name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>elem</name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name>
                                                                    <name>values</name>
                                                                    <index>[
                                                                        <expr>
                                                                            <name>i</name>
                                                                        </expr>
                                                                        ]
                                                                    </index>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </for>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>STROKE_DASHES</name>.
                                                <name>set</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>a</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name>dashes</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>

                    <comment type="line">//'stroke-dashoffset'</comment>
                    <comment type="line">//Value: &lt;length&gt; | inherit</comment>
                    <comment type="line">//Initial: 0</comment>
                    <comment type="line">//Applies to: shapes and text content elements</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>objectValue</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"stroke-dashoffset"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>null</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>objectValue</name>
                                !=
                                <name>null</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name>doubleValue</name>
                                        =
                                        <call>
                                            <name>toNumber</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>elem</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>(<name>String</name>)
                                                        <name>objectValue</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>STROKE_DASH_PHASE</name>.
                                                <name>set</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>a</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name>doubleValue</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>IS_STROKE_DASH_FACTOR</name>.
                                                <name>set</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>a</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>false</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>

                    <comment type="line">//'stroke-linecap'</comment>
                    <comment type="line">//Value: butt | round | square | inherit</comment>
                    <comment type="line">//Initial: butt</comment>
                    <comment type="line">//Applies to: shapes and text content elements</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>value</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"stroke-linecap"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>null</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>value</name>
                                !=
                                <name>null</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>STROKE_CAP</name>.
                                                <name>set</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>a</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <call>
                                                            <name><name>SVG_STROKE_LINECAPS</name>.
                                                                <name>get</name>
                                                            </name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>value</name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>

                    <comment type="line">//'stroke-linejoin'</comment>
                    <comment type="line">//Value: miter | round | bevel | inherit</comment>
                    <comment type="line">//Initial: miter</comment>
                    <comment type="line">//Applies to: shapes and text content elements</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>value</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"stroke-linejoin"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>null</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>value</name>
                                !=
                                <name>null</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>STROKE_JOIN</name>.
                                                <name>set</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>a</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <call>
                                                            <name><name>SVG_STROKE_LINEJOINS</name>.
                                                                <name>get</name>
                                                            </name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>value</name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>
                    <comment type="line">//'stroke-miterlimit'</comment>
                    <comment type="line">//Value: &lt;miterlimit&gt; | inherit</comment>
                    <comment type="line">//Initial: 4</comment>
                    <comment type="line">//Applies to: shapes and text content elements</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>objectValue</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"stroke-miterlimit"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>null</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>objectValue</name>
                                !=
                                <name>null</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name>doubleValue</name>
                                        =
                                        <call>
                                            <name>toDouble</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>elem</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>(<name>String</name>)
                                                        <name>objectValue</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>4d</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>1d</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name><name>Double</name>.
                                                            <name>MAX_VALUE</name>
                                                        </name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>STROKE_MITER_LIMIT</name>.
                                                <name>set</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>a</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name>doubleValue</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>IS_STROKE_MITER_LIMIT_FACTOR</name>.
                                                <name>set</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>a</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>false</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>

                    <comment type="line">//'stroke-opacity'</comment>
                    <comment type="line">//Value: &lt;opacity-value&gt; | inherit</comment>
                    <comment type="line">//Initial: 1</comment>
                    <comment type="line">//Applies to: shapes and text content elements</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>objectValue</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"stroke-opacity"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>null</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>objectValue</name>
                                !=
                                <name>null</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>STROKE_OPACITY</name>.
                                                <name>set</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>a</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <call>
                                                            <name>toDouble</name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>elem</name>
                                                                    </expr>
                                                                </argument>
                                                                ,
                                                                <argument>
                                                                    <expr>(<name>String</name>)
                                                                        <name>objectValue</name>
                                                                    </expr>
                                                                </argument>
                                                                ,
                                                                <argument>
                                                                    <expr>1d</expr>
                                                                </argument>
                                                                ,
                                                                <argument>
                                                                    <expr>0d</expr>
                                                                </argument>
                                                                ,
                                                                <argument>
                                                                    <expr>1d</expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>

                    <comment type="line">//'stroke-width'</comment>
                    <comment type="line">//Value: &lt;length&gt; | inherit</comment>
                    <comment type="line">//Initial: 1</comment>
                    <comment type="line">//Applies to: shapes and text content elements</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>objectValue</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"stroke-width"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>null</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>objectValue</name>
                                !=
                                <name>null</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name>doubleValue</name>
                                        =
                                        <call>
                                            <name>toNumber</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>elem</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>(<name>String</name>)
                                                        <name>objectValue</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>STROKE_WIDTH</name>.
                                                <name>set</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>a</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name>doubleValue</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>
                    }
                </block>
            </function>

            <comment type="javadoc">/** Reads line and polyline attributes.
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>void</name>
                </type>
                <name>readLineAttributes</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>a</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>Object</name>
                            </type>
                            <name>objectValue</name>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>value</name>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>doubleValue</name>
                        </decl>
                        ;
                    </decl_stmt>

                    <comment type="line">//'color'</comment>
                    <comment type="line">// Value: &lt;color&gt; | inherit</comment>
                    <comment type="line">// Initial: depends on user agent</comment>
                    <comment type="line">// Applies to: None. Indirectly affects other properties via currentColor
                    </comment>
                    <comment type="line">// Inherited: yes</comment>
                    <comment type="line">// Percentages: N/A</comment>
                    <comment type="line">// Media: visual</comment>
                    <comment type="line">// Animatable: yes</comment>
                    <comment type="line">// Computed value: Specified &lt;color&gt; value, except inherit</comment>
                    <comment type="line">//</comment>
                    <comment type="line">// value = readInheritAttribute(elem, "color", "black");</comment>
                    <comment type="line">// if (DEBUG) System.out.println("color="+value);</comment>

                    <comment type="line">//'color-rendering'</comment>
                    <comment type="line">// Value: auto | optimizeSpeed | optimizeQuality | inherit</comment>
                    <comment type="line">// Initial: auto</comment>
                    <comment type="line">// Applies to: container elements , graphics elements and 'animateColor'
                    </comment>
                    <comment type="line">// Inherited: yes</comment>
                    <comment type="line">// Percentages: N/A</comment>
                    <comment type="line">// Media: visual</comment>
                    <comment type="line">// Animatable: yes</comment>
                    <comment type="line">// Computed value: Specified value, except inherit</comment>
                    <comment type="line">//</comment>
                    <comment type="line">// value = readInheritAttribute(elem, "color-rendering", "auto");</comment>
                    <comment type="line">// if (DEBUG) System.out.println("color-rendering="+value);</comment>

                    <comment type="line">// 'fill'</comment>
                    <comment type="line">// Value: &lt;paint&gt; | inherit (See Specifying paint)</comment>
                    <comment type="line">// Initial: black</comment>
                    <comment type="line">// Applies to: shapes and text content elements</comment>
                    <comment type="line">// Inherited: yes</comment>
                    <comment type="line">// Percentages: N/A</comment>
                    <comment type="line">// Media: visual</comment>
                    <comment type="line">// Animatable: yes</comment>
                    <comment type="line">// Computed value: "none", system paint, specified &lt;color&gt; value or
                        absolute IRI
                    </comment>
                    <expr_stmt>
                        <expr>
                            <name>objectValue</name>
                            =
                            <call>
                                <name>toPaint</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>readInheritAttribute</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>elem</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"fill"</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"none"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>objectValue</name>
                                <name>instanceof</name>
                                <name>Color</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>FILL_COLOR</name>.
                                                <name>set</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>a</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>(<name>Color</name>)
                                                        <name>objectValue</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                        <else>else
                            <if>if
                                <condition>(
                                    <expr>
                                        <name>objectValue</name>
                                        <name>instanceof</name>
                                        <name>Gradient</name>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>FILL_GRADIENT</name>.
                                                        <name>setClone</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>a</name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>(<name>Gradient</name>)
                                                                <name>objectValue</name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </then>
                                <else>else
                                    <if>if
                                        <condition>(
                                            <expr>
                                                <name>objectValue</name>
                                                ==
                                                <name>null</name>
                                            </expr>
                                            )
                                        </condition>
                                        <then>
                                            <block>{
                                                <expr_stmt>
                                                    <expr>
                                                        <call>
                                                            <name><name>FILL_COLOR</name>.
                                                                <name>set</name>
                                                            </name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>a</name>
                                                                    </expr>
                                                                </argument>
                                                                ,
                                                                <argument>
                                                                    <expr>
                                                                        <name>null</name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                    ;
                                                </expr_stmt>
                                                }
                                            </block>
                                        </then>
                                        <else>else
                                            <block>{
                                                <expr_stmt>
                                                    <expr>
                                                        <call>
                                                            <name><name>FILL_COLOR</name>.
                                                                <name>set</name>
                                                            </name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>a</name>
                                                                    </expr>
                                                                </argument>
                                                                ,
                                                                <argument>
                                                                    <expr>
                                                                        <name>null</name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                    ;
                                                </expr_stmt>
                                                <if>if
                                                    <condition>(
                                                        <expr>
                                                            <name>DEBUG</name>
                                                        </expr>
                                                        )
                                                    </condition>
                                                    <then>
                                                        <block>{
                                                            <expr_stmt>
                                                                <expr>
                                                                    <call>
                                                                        <name><name>System</name>.<name>out</name>.
                                                                            <name>println</name>
                                                                        </name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>"SVGInputFormat not implemented
                                                                                    fill=" +
                                                                                    <name>objectValue</name>
                                                                                </expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            }
                                                        </block>
                                                    </then>
                                                </if>
                                                }
                                            </block>
                                        </else>
                                    </if>
                                </else>
                            </if>
                        </else>
                    </if>

                    <comment type="line">//'fill-opacity'</comment>
                    <comment type="line">//Value: &lt;opacity-value&gt; | inherit</comment>
                    <comment type="line">//Initial: 1</comment>
                    <comment type="line">//Applies to: shapes and text content elements</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>objectValue</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"fill-opacity"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"1"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>FILL_OPACITY</name>.
                                    <name>set</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>toDouble</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>elem</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>(<name>String</name>)
                                                            <name>objectValue</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>1d</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>0d</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>1d</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <comment type="line">// 'fill-rule'</comment>
                    <comment type="line">// Value: nonzero | evenodd | inherit</comment>
                    <comment type="line">// Initial: nonzero</comment>
                    <comment type="line">// Applies to: shapes and text content elements</comment>
                    <comment type="line">// Inherited: yes</comment>
                    <comment type="line">// Percentages: N/A</comment>
                    <comment type="line">// Media: visual</comment>
                    <comment type="line">// Animatable: yes</comment>
                    <comment type="line">// Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>value</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"fill-rule"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"nonzero"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>WINDING_RULE</name>.
                                    <name>set</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name><name>SVG_FILL_RULES</name>.
                                                    <name>get</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>value</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <comment type="line">//'stroke'</comment>
                    <comment type="line">//Value: &lt;paint&gt; | inherit (See Specifying paint)</comment>
                    <comment type="line">//Initial: none</comment>
                    <comment type="line">//Applies to: shapes and text content elements</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: "none", system paint, specified &lt;color&gt; value</comment>
                    <comment type="line">// or absolute IRI</comment>
                    <expr_stmt>
                        <expr>
                            <name>objectValue</name>
                            =
                            <call>
                                <name>toPaint</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>readInheritAttribute</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>elem</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"stroke"</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"black"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>objectValue</name>
                                <name>instanceof</name>
                                <name>Color</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>STROKE_COLOR</name>.
                                                <name>set</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>a</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>(<name>Color</name>)
                                                        <name>objectValue</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                        <else>else
                            <if>if
                                <condition>(
                                    <expr>
                                        <name>objectValue</name>
                                        <name>instanceof</name>
                                        <name>Gradient</name>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>STROKE_GRADIENT</name>.
                                                        <name>setClone</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>a</name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>(<name>Gradient</name>)
                                                                <name>objectValue</name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </then>
                                <else>else
                                    <if>if
                                        <condition>(
                                            <expr>
                                                <name>objectValue</name>
                                                ==
                                                <name>null</name>
                                            </expr>
                                            )
                                        </condition>
                                        <then>
                                            <block>{
                                                <expr_stmt>
                                                    <expr>
                                                        <call>
                                                            <name><name>STROKE_COLOR</name>.
                                                                <name>set</name>
                                                            </name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>a</name>
                                                                    </expr>
                                                                </argument>
                                                                ,
                                                                <argument>
                                                                    <expr>
                                                                        <name>null</name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                    ;
                                                </expr_stmt>
                                                }
                                            </block>
                                        </then>
                                        <else>else
                                            <block>{
                                                <expr_stmt>
                                                    <expr>
                                                        <call>
                                                            <name><name>STROKE_COLOR</name>.
                                                                <name>set</name>
                                                            </name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>a</name>
                                                                    </expr>
                                                                </argument>
                                                                ,
                                                                <argument>
                                                                    <expr>
                                                                        <name>null</name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                    ;
                                                </expr_stmt>
                                                <if>if
                                                    <condition>(
                                                        <expr>
                                                            <name>DEBUG</name>
                                                        </expr>
                                                        )
                                                    </condition>
                                                    <then>
                                                        <block>{
                                                            <expr_stmt>
                                                                <expr>
                                                                    <call>
                                                                        <name><name>System</name>.<name>out</name>.
                                                                            <name>println</name>
                                                                        </name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>"SVGInputFormat not implemented
                                                                                    stroke=" +
                                                                                    <name>objectValue</name>
                                                                                </expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            }
                                                        </block>
                                                    </then>
                                                </if>
                                                }
                                            </block>
                                        </else>
                                    </if>
                                </else>
                            </if>
                        </else>
                    </if>

                    <comment type="line">//'stroke-dasharray'</comment>
                    <comment type="line">//Value: none | &lt;dasharray&gt; | inherit</comment>
                    <comment type="line">//Initial: none</comment>
                    <comment type="line">//Applies to: shapes and text content elements</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes (non-additive)</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>value</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"stroke-dasharray"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"none"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>!
                                <call>
                                    <name><name>value</name>.
                                        <name>equals</name>
                                    </name>
                                    <argument_list>(
                                        <argument>
                                            <expr>"none"</expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <decl_stmt>
                                    <decl>
                                        <type>
                                            <name>String</name>
                                            <index>[]</index>
                                        </type>
                                        <name>values</name> =
                                        <init>
                                            <expr>
                                                <call>
                                                    <name>toWSOrCommaSeparatedArray</name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>value</name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                        </init>
                                    </decl>
                                    ;
                                </decl_stmt>
                                <decl_stmt>
                                    <decl>
                                        <type>
                                            <name>double</name>
                                            <index>[]</index>
                                        </type>
                                        <name>dashes</name> =
                                        <init>
                                            <expr>new
                                                <name>
                                                    <name>double</name>
                                                    <index>[
                                                        <expr>
                                                            <name><name>values</name>.
                                                                <name>length</name>
                                                            </name>
                                                        </expr>
                                                        ]
                                                    </index>
                                                </name>
                                            </expr>
                                        </init>
                                    </decl>
                                    ;
                                </decl_stmt>
                                <for>for (
                                    <init>
                                        <decl>
                                            <type>
                                                <name>int</name>
                                            </type>
                                            <name>i</name> =
                                            <init>
                                                <expr>0</expr>
                                            </init>
                                        </decl>
                                        ;
                                    </init>
                                    <condition>
                                        <expr>
                                            <name>i</name>
                                            &lt;
                                            <name><name>values</name>.
                                                <name>length</name>
                                            </name>
                                        </expr>
                                        ;
                                    </condition>
                                    <incr>
                                        <expr><name>i</name>++
                                        </expr>
                                    </incr>
                                    )
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name>
                                                    <name>dashes</name>
                                                    <index>[
                                                        <expr>
                                                            <name>i</name>
                                                        </expr>
                                                        ]
                                                    </index>
                                                </name>
                                                =
                                                <call>
                                                    <name>toNumber</name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>elem</name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name>
                                                                    <name>values</name>
                                                                    <index>[
                                                                        <expr>
                                                                            <name>i</name>
                                                                        </expr>
                                                                        ]
                                                                    </index>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </for>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>STROKE_DASHES</name>.
                                                <name>set</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>a</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name>dashes</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>

                    <comment type="line">//'stroke-dashoffset'</comment>
                    <comment type="line">//Value: &lt;length&gt; | inherit</comment>
                    <comment type="line">//Initial: 0</comment>
                    <comment type="line">//Applies to: shapes and text content elements</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>doubleValue</name>
                            =
                            <call>
                                <name>toNumber</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>readInheritAttribute</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>elem</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"stroke-dashoffset"</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"0"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>STROKE_DASH_PHASE</name>.
                                    <name>set</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>doubleValue</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>IS_STROKE_DASH_FACTOR</name>.
                                    <name>set</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <comment type="line">//'stroke-linecap'</comment>
                    <comment type="line">//Value: butt | round | square | inherit</comment>
                    <comment type="line">//Initial: butt</comment>
                    <comment type="line">//Applies to: shapes and text content elements</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>value</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"stroke-linecap"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"butt"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>STROKE_CAP</name>.
                                    <name>set</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name><name>SVG_STROKE_LINECAPS</name>.
                                                    <name>get</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>value</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>


                    <comment type="line">//'stroke-linejoin'</comment>
                    <comment type="line">//Value: miter | round | bevel | inherit</comment>
                    <comment type="line">//Initial: miter</comment>
                    <comment type="line">//Applies to: shapes and text content elements</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>value</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"stroke-linejoin"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"miter"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>STROKE_JOIN</name>.
                                    <name>set</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name><name>SVG_STROKE_LINEJOINS</name>.
                                                    <name>get</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>value</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <comment type="line">//'stroke-miterlimit'</comment>
                    <comment type="line">//Value: &lt;miterlimit&gt; | inherit</comment>
                    <comment type="line">//Initial: 4</comment>
                    <comment type="line">//Applies to: shapes and text content elements</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>doubleValue</name>
                            =
                            <call>
                                <name>toDouble</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>readInheritAttribute</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>elem</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"stroke-miterlimit"</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"4"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>4d</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>1d</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name><name>Double</name>.
                                                <name>MAX_VALUE</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>STROKE_MITER_LIMIT</name>.
                                    <name>set</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>doubleValue</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>IS_STROKE_MITER_LIMIT_FACTOR</name>.
                                    <name>set</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>false</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <comment type="line">//'stroke-opacity'</comment>
                    <comment type="line">//Value: &lt;opacity-value&gt; | inherit</comment>
                    <comment type="line">//Initial: 1</comment>
                    <comment type="line">//Applies to: shapes and text content elements</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>objectValue</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"stroke-opacity"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"1"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>STROKE_OPACITY</name>.
                                    <name>set</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>toDouble</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>elem</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>(<name>String</name>)
                                                            <name>objectValue</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>1d</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>0d</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>1d</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <comment type="line">//'stroke-width'</comment>
                    <comment type="line">//Value: &lt;length&gt; | inherit</comment>
                    <comment type="line">//Initial: 1</comment>
                    <comment type="line">//Applies to: shapes and text content elements</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>doubleValue</name>
                            =
                            <call>
                                <name>toNumber</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>readInheritAttribute</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>elem</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"stroke-width"</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"1"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>STROKE_WIDTH</name>.
                                    <name>set</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>doubleValue</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    }
                </block>
            </function>
            <comment type="block">/* Reads viewport attributes.
                */
            </comment>

            <function>
                <type>
                    <specifier>private</specifier>
                    <name>void</name>
                </type>
                <name>readViewportAttributes</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>a</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>Object</name>
                            </type>
                            <name>value</name>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>Double</name>
                            </type>
                            <name>doubleValue</name>
                        </decl>
                        ;
                    </decl_stmt>

                    <comment type="line">//'viewport-fill'</comment>
                    <comment type="line">//Value: "none" | &lt;color&gt; | inherit</comment>
                    <comment type="line">//Initial: none</comment>
                    <comment type="line">//Applies to: viewport-creating elements</comment>
                    <comment type="line">//Inherited: no</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: "none" or specified &lt;color&gt; value, except inherit
                    </comment>
                    <expr_stmt>
                        <expr>
                            <name>value</name>
                            =
                            <call>
                                <name>toPaint</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>readInheritAttribute</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>elem</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"viewport-fill"</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"none"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>value</name>
                                == <name>null</name> || (<name>value</name>
                                <name>instanceof</name>
                                <name>Color</name>)
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>VIEWPORT_FILL</name>.
                                                <name>set</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>a</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>(<name>Color</name>)
                                                        <name>value</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>

                    <comment type="line">//'viewport-fill-opacity'</comment>
                    <comment type="line">//Value: &lt;opacity-value&gt; | inherit</comment>
                    <comment type="line">//Initial: 1.0</comment>
                    <comment type="line">//Applies to: viewport-creating elements</comment>
                    <comment type="line">//Inherited: no</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>doubleValue</name>
                            =
                            <call>
                                <name>toDouble</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name>readAttribute</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>elem</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"viewport-fill-opacity"</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"1.0"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>VIEWPORT_FILL_OPACITY</name>.
                                    <name>set</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>doubleValue</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    }
                </block>
            </function>
            <comment type="block">/* Reads graphics attributes as listed in
                * http://www.w3.org/TR/SVGMobile12/feature.html#GraphicsAttribute
                */
            </comment>

            <function>
                <type>
                    <specifier>private</specifier>
                    <name>void</name>
                </type>
                <name>readGraphicsAttributes</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>Figure</name>
                            </type>
                            <name>f</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>Object</name>
                            </type>
                            <name>value</name>
                        </decl>
                        ;
                    </decl_stmt>
                    <comment type="line">// 'display'</comment>
                    <comment type="line">// Value: inline | block | list-item |</comment>
                    <comment type="line">// run-in | compact | marker |</comment>
                    <comment type="line">// table | inline-table | table-row-group | table-header-group |</comment>
                    <comment type="line">// table-footer-group | table-row | table-column-group | table-column |
                    </comment>
                    <comment type="line">// table-cell | table-caption | none | inherit</comment>
                    <comment type="line">// Initial: inline</comment>
                    <comment type="line">// Applies to: 'svg' , 'g' , 'switch' , 'a' , 'foreignObject' ,</comment>
                    <comment type="line">// graphics elements (including the text content block elements) and text
                    </comment>
                    <comment type="line">// sub-elements (for example, 'tspan' and 'a' )</comment>
                    <comment type="line">// Inherited: no</comment>
                    <comment type="line">// Percentages: N/A</comment>
                    <comment type="line">// Media: all</comment>
                    <comment type="line">// Animatable: yes</comment>
                    <comment type="line">// Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>value</name>
                            =
                            <call>
                                <name>readAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"display"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"inline"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>DEBUG</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>System</name>.<name>out</name>.
                                                <name>println</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>"SVGInputFormat not implemented display=" +
                                                        <name>value</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>


                    <comment type="line">//'image-rendering'</comment>
                    <comment type="line">//Value: auto | optimizeSpeed | optimizeQuality | inherit</comment>
                    <comment type="line">//Initial: auto</comment>
                    <comment type="line">//Applies to: images</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>value</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"image-rendering"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"auto"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>DEBUG</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>System</name>.<name>out</name>.
                                                <name>println</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>"SVGInputFormat not implemented image-rendering=" +
                                                        <name>value</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>

                    <comment type="line">//'pointer-events'</comment>
                    <comment type="line">//Value: boundingBox | visiblePainted | visibleFill | visibleStroke | visible
                        |
                    </comment>
                    <comment type="line">//painted | fill | stroke | all | none | inherit</comment>
                    <comment type="line">//Initial: visiblePainted</comment>
                    <comment type="line">//Applies to: graphics elements</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>value</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"pointer-events"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"visiblePainted"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>DEBUG</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>System</name>.<name>out</name>.
                                                <name>println</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>"SVGInputFormat not implemented pointer-events=" +
                                                        <name>value</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>

                    <comment type="line">// 'shape-rendering'</comment>
                    <comment type="line">//Value: auto | optimizeSpeed | crispEdges |</comment>
                    <comment type="line">//geometricPrecision | inherit</comment>
                    <comment type="line">//Initial: auto</comment>
                    <comment type="line">//Applies to: shapes</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>value</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"shape-rendering"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"auto"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>DEBUG</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>System</name>.<name>out</name>.
                                                <name>println</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>"SVGInputFormat not implemented shape-rendering=" +
                                                        <name>value</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>

                    <comment type="line">//'text-rendering'</comment>
                    <comment type="line">//Value: auto | optimizeSpeed | optimizeLegibility |</comment>
                    <comment type="line">//geometricPrecision | inherit</comment>
                    <comment type="line">//Initial: auto</comment>
                    <comment type="line">//Applies to: text content block elements</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>value</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"text-rendering"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"auto"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>DEBUG</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>System</name>.<name>out</name>.
                                                <name>println</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>"SVGInputFormat not implemented text-rendering=" +
                                                        <name>value</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>

                    <comment type="line">//'vector-effect'</comment>
                    <comment type="line">//Value: non-scaling-stroke | none | inherit</comment>
                    <comment type="line">//Initial: none</comment>
                    <comment type="line">//Applies to: graphics elements</comment>
                    <comment type="line">//Inherited: no</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>value</name>
                            =
                            <call>
                                <name>readAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"vector-effect"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"none"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>DEBUG</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>System</name>.<name>out</name>.
                                                <name>println</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>"SVGInputFormat not implemented vector-effect=" +
                                                        <name>value</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>

                    <comment type="line">//'visibility'</comment>
                    <comment type="line">//Value: visible | hidden | collapse | inherit</comment>
                    <comment type="line">//Initial: visible</comment>
                    <comment type="line">//Applies to: graphics elements (including the text content block</comment>
                    <comment type="line">// elements) and text sub-elements (for example, 'tspan' and 'a' )</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>value</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"visibility"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>null</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>DEBUG</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>System</name>.<name>out</name>.
                                                <name>println</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>"SVGInputFormat not implemented visibility=" +
                                                        <name>value</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Reads an SVG "linearGradient" element.
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>void</name>
                </type>
                <name>readLinearGradientElement</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>a</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>
                                            <name>HashMap</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>AttributeKey</name>
                                                </argument>
                                                ,
                                                <argument>
                                                    <name>Object</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readCoreAttributes</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>x1</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toLength</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"x1"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"0"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>0.01</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>y1</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toLength</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"y1"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"0"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>0.01</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>x2</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toLength</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"x2"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"1"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>0.01</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>y2</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toLength</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"y2"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"0"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>0.01</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>boolean</name>
                            </type>
                            <name>isRelativeToFigureBounds</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>readAttribute</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>"gradientUnits"</expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>"objectBoundingBox"</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                    .
                                    <call>
                                        <name>equals</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>"objectBoundingBox"</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>ArrayList</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>IXMLElement</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>stops</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>elem</name>.
                                            <name>getChildrenNamed</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>"stop"</expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>SVG_NAMESPACE</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>stops</name>.
                                        <name>size</name>
                                    </name>
                                    <argument_list>()</argument_list>
                                </call>
                                == 0
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name>stops</name>
                                        =
                                        <call>
                                            <name><name>elem</name>.
                                                <name>getChildrenNamed</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>"stop"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>
                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>stops</name>.
                                        <name>size</name>
                                    </name>
                                    <argument_list>()</argument_list>
                                </call>
                                == 0
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <comment type="line">// FIXME - Implement xlink support throughouth SVGInputFormat
                                </comment>
                                <decl_stmt>
                                    <decl>
                                        <type>
                                            <name>String</name>
                                        </type>
                                        <name>xlink</name> =
                                        <init>
                                            <expr>
                                                <call>
                                                    <name>readAttribute</name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>elem</name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>"xlink:href"</expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>""</expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                        </init>
                                    </decl>
                                    ;
                                </decl_stmt>
                                <if>if
                                    <condition>(
                                        <expr>
                                            <call>
                                                <name><name>xlink</name>.
                                                    <name>startsWith</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"#"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                            &amp;&amp;
                                            <call>
                                                <name><name>identifiedElements</name>.
                                                    <name>get</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <call>
                                                                <name><name>xlink</name>.
                                                                    <name>substring</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>1</expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                            !=
                                            <name>null</name>
                                        </expr>
                                        )
                                    </condition>
                                    <then>
                                        <block>{

                                            <expr_stmt>
                                                <expr>
                                                    <name>stops</name>
                                                    =
                                                    <call>
                                                        <name><name>identifiedElements</name>.
                                                            <name>get</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <call>
                                                                        <name><name>xlink</name>.
                                                                            <name>substring</name>
                                                                        </name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>1</expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                    .
                                                    <call>
                                                        <name>getChildrenNamed</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>"stop"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>SVG_NAMESPACE</name>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                ;
                                            </expr_stmt>
                                            <if>if
                                                <condition>(
                                                    <expr>
                                                        <call>
                                                            <name><name>stops</name>.
                                                                <name>size</name>
                                                            </name>
                                                            <argument_list>()</argument_list>
                                                        </call>
                                                        == 0
                                                    </expr>
                                                    )
                                                </condition>
                                                <then>
                                                    <block>{
                                                        <expr_stmt>
                                                            <expr>
                                                                <name>stops</name>
                                                                =
                                                                <call>
                                                                    <name><name>identifiedElements</name>.
                                                                        <name>get</name>
                                                                    </name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>xlink</name>.
                                                                                        <name>substring</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>1</expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                                .
                                                                <call>
                                                                    <name>getChildrenNamed</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>"stop"</expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            ;
                                                        </expr_stmt>
                                                        }
                                                    </block>
                                                </then>
                                            </if>
                                            }
                                        </block>
                                    </then>
                                </if>
                                }
                            </block>
                        </then>
                    </if>
                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>stops</name>.
                                        <name>size</name>
                                    </name>
                                    <argument_list>()</argument_list>
                                </call>
                                == 0
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <if>if
                                    <condition>(
                                        <expr>
                                            <name>DEBUG</name>
                                        </expr>
                                        )
                                    </condition>
                                    <then>
                                        <block>{
                                            <expr_stmt>
                                                <expr>
                                                    <call>
                                                        <name><name>System</name>.<name>out</name>.
                                                            <name>println</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>"SVGInpuFormat: Warning no stops in linearGradient
                                                                    " +
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                ;
                                            </expr_stmt>
                                            }
                                        </block>
                                    </then>
                                </if>
                                }
                            </block>
                        </then>
                    </if>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                                <index>[]</index>
                            </type>
                            <name>stopOffsets</name> =
                            <init>
                                <expr>new
                                    <name>
                                        <name>double</name>
                                        <index>[
                                            <expr>
                                                <call>
                                                    <name><name>stops</name>.
                                                        <name>size</name>
                                                    </name>
                                                    <argument_list>()</argument_list>
                                                </call>
                                            </expr>
                                            ]
                                        </index>
                                    </name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>Color</name>
                                <index>[]</index>
                            </type>
                            <name>stopColors</name> =
                            <init>
                                <expr>new
                                    <name>
                                        <name>Color</name>
                                        <index>[
                                            <expr>
                                                <call>
                                                    <name><name>stops</name>.
                                                        <name>size</name>
                                                    </name>
                                                    <argument_list>()</argument_list>
                                                </call>
                                            </expr>
                                            ]
                                        </index>
                                    </name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                                <index>[]</index>
                            </type>
                            <name>stopOpacities</name> =
                            <init>
                                <expr>new
                                    <name>
                                        <name>double</name>
                                        <index>[
                                            <expr>
                                                <call>
                                                    <name><name>stops</name>.
                                                        <name>size</name>
                                                    </name>
                                                    <argument_list>()</argument_list>
                                                </call>
                                            </expr>
                                            ]
                                        </index>
                                    </name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <for>for (
                        <init>
                            <decl>
                                <type>
                                    <name>int</name>
                                </type>
                                <name>i</name> =
                                <init>
                                    <expr>0</expr>
                                </init>
                            </decl>
                            ;
                        </init>
                        <condition>
                            <expr>
                                <name>i</name>
                                &lt;
                                <call>
                                    <name><name>stops</name>.
                                        <name>size</name>
                                    </name>
                                    <argument_list>()</argument_list>
                                </call>
                            </expr>
                            ;
                        </condition>
                        <incr>
                            <expr><name>i</name>++
                            </expr>
                        </incr>
                        )
                        <block>{
                            <decl_stmt>
                                <decl>
                                    <type>
                                        <name>IXMLElement</name>
                                    </type>
                                    <name>stopElem</name> =
                                    <init>
                                        <expr>
                                            <call>
                                                <name><name>stops</name>.
                                                    <name>get</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>i</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </init>
                                </decl>
                                ;
                            </decl_stmt>
                            <decl_stmt>
                                <decl>
                                    <type>
                                        <name>String</name>
                                    </type>
                                    <name>offsetStr</name> =
                                    <init>
                                        <expr>
                                            <call>
                                                <name>readAttribute</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>stopElem</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"offset"</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"0"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </init>
                                </decl>
                                ;
                            </decl_stmt>
                            <if>if
                                <condition>(
                                    <expr>
                                        <call>
                                            <name><name>offsetStr</name>.
                                                <name>endsWith</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>"%"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name>
                                                    <name>stopOffsets</name>
                                                    <index>[
                                                        <expr>
                                                            <name>i</name>
                                                        </expr>
                                                        ]
                                                    </index>
                                                </name>
                                                =
                                                <call>
                                                    <name>toDouble</name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>stopElem</name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <call>
                                                                    <name><name>offsetStr</name>.
                                                                        <name>substring</name>
                                                                    </name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>0</expr>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>offsetStr</name>.
                                                                                        <name>length</name>
                                                                                    </name>
                                                                                    <argument_list>()</argument_list>
                                                                                </call>
                                                                                - 1
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>0</expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>0</expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>100</expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                                / 100d
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </then>
                                <else>else
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name>
                                                    <name>stopOffsets</name>
                                                    <index>[
                                                        <expr>
                                                            <name>i</name>
                                                        </expr>
                                                        ]
                                                    </index>
                                                </name>
                                                =
                                                <call>
                                                    <name>toDouble</name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>stopElem</name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name>offsetStr</name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>0</expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>0</expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>1</expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </else>
                            </if>
                            <comment type="line">// 'stop-color'</comment>
                            <comment type="line">// Value: currentColor | &lt;color&gt; | inherit</comment>
                            <comment type="line">// Initial: black</comment>
                            <comment type="line">// Applies to: 'stop' elements</comment>
                            <comment type="line">// Inherited: no</comment>
                            <comment type="line">// Percentages: N/A</comment>
                            <comment type="line">// Media: visual</comment>
                            <comment type="line">// Animatable: yes</comment>
                            <comment type="line">// Computed value: Specified &lt;color&gt; value, except i</comment>
                            <expr_stmt>
                                <expr>
                                    <name>
                                        <name>stopColors</name>
                                        <index>[
                                            <expr>
                                                <name>i</name>
                                            </expr>
                                            ]
                                        </index>
                                    </name>
                                    =
                                    <call>
                                        <name>toColor</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>stopElem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>stopElem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"stop-color"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"black"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                                ;
                            </expr_stmt>
                            <if>if
                                <condition>(
                                    <expr>
                                        <name>
                                            <name>stopColors</name>
                                            <index>[
                                                <expr>
                                                    <name>i</name>
                                                </expr>
                                                ]
                                            </index>
                                        </name>
                                        ==
                                        <name>null</name>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name>
                                                    <name>stopColors</name>
                                                    <index>[
                                                        <expr>
                                                            <name>i</name>
                                                        </expr>
                                                        ]
                                                    </index>
                                                </name>
                                                = new
                                                <call>
                                                    <name>Color</name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>0x0</expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>true</expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <comment type="line">//throw new IOException("stop color missing in
                                            "+stopElem);
                                        </comment>
                                        }
                                    </block>
                                </then>
                            </if>

                            <comment type="line">//'stop-opacity'</comment>
                            <comment type="line">//Value: &lt;opacity-value&gt; | inherit</comment>
                            <comment type="line">//Initial: 1</comment>
                            <comment type="line">//Applies to: 'stop' elements</comment>
                            <comment type="line">//Inherited: no</comment>
                            <comment type="line">//Percentages: N/A</comment>
                            <comment type="line">//Media: visual</comment>
                            <comment type="line">//Animatable: yes</comment>
                            <comment type="line">//Computed value: Specified value, except inherit</comment>
                            <expr_stmt>
                                <expr>
                                    <name>
                                        <name>stopOpacities</name>
                                        <index>[
                                            <expr>
                                                <name>i</name>
                                            </expr>
                                            ]
                                        </index>
                                    </name>
                                    =
                                    <call>
                                        <name>toDouble</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>stopElem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>stopElem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"stop-opacity"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"1"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>1</expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>0</expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>1</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                                ;
                            </expr_stmt>
                            }
                        </block>
                    </for>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>AffineTransform</name>
                            </type>
                            <name>tx</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toTransform</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"gradientTransform"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"none"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>Gradient</name>
                            </type>
                            <name>gradient</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>factory</name>.
                                            <name>createLinearGradient</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>x1</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>y1</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>x2</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>y2</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>stopOffsets</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>stopColors</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>stopOpacities</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>isRelativeToFigureBounds</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>tx</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>elementObjects</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>gradient</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Reads an SVG "radialGradient" element.
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>void</name>
                </type>
                <name>readRadialGradientElement</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>HashMap</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>a</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>
                                            <name>HashMap</name>
                                            <argument_list>&lt;
                                                <argument>
                                                    <name>AttributeKey</name>
                                                </argument>
                                                ,
                                                <argument>
                                                    <name>Object</name>
                                                </argument>
                                                &gt;
                                            </argument_list>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>readCoreAttributes</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>cx</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toLength</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"cx"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"0.5"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>0.01</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>cy</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toLength</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"cy"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"0.5"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>0.01</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>fx</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toLength</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"fx"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <call>
                                                                        <name>readAttribute</name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>
                                                                                    <name>elem</name>
                                                                                </expr>
                                                                            </argument>
                                                                            ,
                                                                            <argument>
                                                                                <expr>"cx"</expr>
                                                                            </argument>
                                                                            ,
                                                                            <argument>
                                                                                <expr>"0.5"</expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>0.01</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>fy</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toLength</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"fy"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <call>
                                                                        <name>readAttribute</name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>
                                                                                    <name>elem</name>
                                                                                </expr>
                                                                            </argument>
                                                                            ,
                                                                            <argument>
                                                                                <expr>"cy"</expr>
                                                                            </argument>
                                                                            ,
                                                                            <argument>
                                                                                <expr>"0.5"</expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>0.01</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>r</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toLength</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"r"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"0.5"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>0.01</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>boolean</name>
                            </type>
                            <name>isRelativeToFigureBounds</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>readAttribute</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>"gradientUnits"</expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>"objectBoundingBox"</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                    .
                                    <call>
                                        <name>equals</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>"objectBoundingBox"</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>
                                    <name>ArrayList</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>IXMLElement</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>stops</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>elem</name>.
                                            <name>getChildrenNamed</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>"stop"</expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>SVG_NAMESPACE</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>stops</name>.
                                        <name>size</name>
                                    </name>
                                    <argument_list>()</argument_list>
                                </call>
                                == 0
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name>stops</name>
                                        =
                                        <call>
                                            <name><name>elem</name>.
                                                <name>getChildrenNamed</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>"stop"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>
                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>stops</name>.
                                        <name>size</name>
                                    </name>
                                    <argument_list>()</argument_list>
                                </call>
                                == 0
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <comment type="line">// FIXME - Implement xlink support throughout SVGInputFormat
                                </comment>
                                <decl_stmt>
                                    <decl>
                                        <type>
                                            <name>String</name>
                                        </type>
                                        <name>xlink</name> =
                                        <init>
                                            <expr>
                                                <call>
                                                    <name>readAttribute</name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>elem</name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>"xlink:href"</expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>""</expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                        </init>
                                    </decl>
                                    ;
                                </decl_stmt>
                                <if>if
                                    <condition>(
                                        <expr>
                                            <call>
                                                <name><name>xlink</name>.
                                                    <name>startsWith</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"#"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                            &amp;&amp;
                                            <call>
                                                <name><name>identifiedElements</name>.
                                                    <name>get</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <call>
                                                                <name><name>xlink</name>.
                                                                    <name>substring</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>1</expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                            !=
                                            <name>null</name>
                                        </expr>
                                        )
                                    </condition>
                                    <then>
                                        <block>{
                                            <expr_stmt>
                                                <expr>
                                                    <name>stops</name>
                                                    =
                                                    <call>
                                                        <name><name>identifiedElements</name>.
                                                            <name>get</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <call>
                                                                        <name><name>xlink</name>.
                                                                            <name>substring</name>
                                                                        </name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>1</expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                    .
                                                    <call>
                                                        <name>getChildrenNamed</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>"stop"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>SVG_NAMESPACE</name>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                ;
                                            </expr_stmt>
                                            <if>if
                                                <condition>(
                                                    <expr>
                                                        <call>
                                                            <name><name>stops</name>.
                                                                <name>size</name>
                                                            </name>
                                                            <argument_list>()</argument_list>
                                                        </call>
                                                        == 0
                                                    </expr>
                                                    )
                                                </condition>
                                                <then>
                                                    <block>{
                                                        <expr_stmt>
                                                            <expr>
                                                                <name>stops</name>
                                                                =
                                                                <call>
                                                                    <name><name>identifiedElements</name>.
                                                                        <name>get</name>
                                                                    </name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>xlink</name>.
                                                                                        <name>substring</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>1</expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                                .
                                                                <call>
                                                                    <name>getChildrenNamed</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>"stop"</expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            ;
                                                        </expr_stmt>
                                                        }
                                                    </block>
                                                </then>
                                            </if>
                                            }
                                        </block>
                                    </then>
                                </if>
                                }
                            </block>
                        </then>
                    </if>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                                <index>[]</index>
                            </type>
                            <name>stopOffsets</name> =
                            <init>
                                <expr>new
                                    <name>
                                        <name>double</name>
                                        <index>[
                                            <expr>
                                                <call>
                                                    <name><name>stops</name>.
                                                        <name>size</name>
                                                    </name>
                                                    <argument_list>()</argument_list>
                                                </call>
                                            </expr>
                                            ]
                                        </index>
                                    </name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>Color</name>
                                <index>[]</index>
                            </type>
                            <name>stopColors</name> =
                            <init>
                                <expr>new
                                    <name>
                                        <name>Color</name>
                                        <index>[
                                            <expr>
                                                <call>
                                                    <name><name>stops</name>.
                                                        <name>size</name>
                                                    </name>
                                                    <argument_list>()</argument_list>
                                                </call>
                                            </expr>
                                            ]
                                        </index>
                                    </name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                                <index>[]</index>
                            </type>
                            <name>stopOpacities</name> =
                            <init>
                                <expr>new
                                    <name>
                                        <name>double</name>
                                        <index>[
                                            <expr>
                                                <call>
                                                    <name><name>stops</name>.
                                                        <name>size</name>
                                                    </name>
                                                    <argument_list>()</argument_list>
                                                </call>
                                            </expr>
                                            ]
                                        </index>
                                    </name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <for>for (
                        <init>
                            <decl>
                                <type>
                                    <name>int</name>
                                </type>
                                <name>i</name> =
                                <init>
                                    <expr>0</expr>
                                </init>
                            </decl>
                            ;
                        </init>
                        <condition>
                            <expr>
                                <name>i</name>
                                &lt;
                                <call>
                                    <name><name>stops</name>.
                                        <name>size</name>
                                    </name>
                                    <argument_list>()</argument_list>
                                </call>
                            </expr>
                            ;
                        </condition>
                        <incr>
                            <expr><name>i</name>++
                            </expr>
                        </incr>
                        )
                        <block>{
                            <decl_stmt>
                                <decl>
                                    <type>
                                        <name>IXMLElement</name>
                                    </type>
                                    <name>stopElem</name> =
                                    <init>
                                        <expr>
                                            <call>
                                                <name><name>stops</name>.
                                                    <name>get</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>i</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </init>
                                </decl>
                                ;
                            </decl_stmt>
                            <decl_stmt>
                                <decl>
                                    <type>
                                        <name>String</name>
                                    </type>
                                    <name>offsetStr</name> =
                                    <init>
                                        <expr>
                                            <call>
                                                <name>readAttribute</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>stopElem</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"offset"</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>"0"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </init>
                                </decl>
                                ;
                            </decl_stmt>
                            <if>if
                                <condition>(
                                    <expr>
                                        <call>
                                            <name><name>offsetStr</name>.
                                                <name>endsWith</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>"%"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name>
                                                    <name>stopOffsets</name>
                                                    <index>[
                                                        <expr>
                                                            <name>i</name>
                                                        </expr>
                                                        ]
                                                    </index>
                                                </name>
                                                =
                                                <call>
                                                    <name>toDouble</name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>stopElem</name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <call>
                                                                    <name><name>offsetStr</name>.
                                                                        <name>substring</name>
                                                                    </name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>0</expr>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>offsetStr</name>.
                                                                                        <name>length</name>
                                                                                    </name>
                                                                                    <argument_list>()</argument_list>
                                                                                </call>
                                                                                - 1
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>0</expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>0</expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>100</expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                                / 100d
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </then>
                                <else>else
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name>
                                                    <name>stopOffsets</name>
                                                    <index>[
                                                        <expr>
                                                            <name>i</name>
                                                        </expr>
                                                        ]
                                                    </index>
                                                </name>
                                                =
                                                <call>
                                                    <name>toDouble</name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>stopElem</name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name>offsetStr</name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>0</expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>0</expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>1</expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </else>
                            </if>
                            <comment type="line">// 'stop-color'</comment>
                            <comment type="line">// Value: currentColor | &lt;color&gt; | inherit</comment>
                            <comment type="line">// Initial: black</comment>
                            <comment type="line">// Applies to: 'stop' elements</comment>
                            <comment type="line">// Inherited: no</comment>
                            <comment type="line">// Percentages: N/A</comment>
                            <comment type="line">// Media: visual</comment>
                            <comment type="line">// Animatable: yes</comment>
                            <comment type="line">// Computed value: Specified &lt;color&gt; value, except i</comment>
                            <expr_stmt>
                                <expr>
                                    <name>
                                        <name>stopColors</name>
                                        <index>[
                                            <expr>
                                                <name>i</name>
                                            </expr>
                                            ]
                                        </index>
                                    </name>
                                    =
                                    <call>
                                        <name>toColor</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>stopElem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>stopElem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"stop-color"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"black"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                                ;
                            </expr_stmt>
                            <if>if
                                <condition>(
                                    <expr>
                                        <name>
                                            <name>stopColors</name>
                                            <index>[
                                                <expr>
                                                    <name>i</name>
                                                </expr>
                                                ]
                                            </index>
                                        </name>
                                        ==
                                        <name>null</name>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name>
                                                    <name>stopColors</name>
                                                    <index>[
                                                        <expr>
                                                            <name>i</name>
                                                        </expr>
                                                        ]
                                                    </index>
                                                </name>
                                                = new
                                                <call>
                                                    <name>Color</name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>0x0</expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>true</expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <comment type="line">//throw new IOException("stop color missing in
                                            "+stopElem);
                                        </comment>
                                        }
                                    </block>
                                </then>
                            </if>
                            <comment type="line">//'stop-opacity'</comment>
                            <comment type="line">//Value: &lt;opacity-value&gt; | inherit</comment>
                            <comment type="line">//Initial: 1</comment>
                            <comment type="line">//Applies to: 'stop' elements</comment>
                            <comment type="line">//Inherited: no</comment>
                            <comment type="line">//Percentages: N/A</comment>
                            <comment type="line">//Media: visual</comment>
                            <comment type="line">//Animatable: yes</comment>
                            <comment type="line">//Computed value: Specified value, except inherit</comment>
                            <expr_stmt>
                                <expr>
                                    <name>
                                        <name>stopOpacities</name>
                                        <index>[
                                            <expr>
                                                <name>i</name>
                                            </expr>
                                            ]
                                        </index>
                                    </name>
                                    =
                                    <call>
                                        <name>toDouble</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>stopElem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>stopElem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"stop-opacity"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"1"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>1</expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>0</expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>1</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                                ;
                            </expr_stmt>
                            }
                        </block>
                    </for>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>AffineTransform</name>
                            </type>
                            <name>tx</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>toTransform</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name>readAttribute</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"gradientTransform"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"none"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>Gradient</name>
                            </type>
                            <name>gradient</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>factory</name>.
                                            <name>createRadialGradient</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>cx</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>cy</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>fx</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>fy</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>r</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>stopOffsets</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>stopColors</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>stopOpacities</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>isRelativeToFigureBounds</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>tx</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>elementObjects</name>.
                                    <name>put</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>gradient</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    }
                </block>
            </function>
            <comment type="block">/* Reads font attributes as listed in
                * http://www.w3.org/TR/SVGMobile12/feature.html#Font
                */
            </comment>

            <function>
                <type>
                    <specifier>private</specifier>
                    <name>void</name>
                </type>
                <name>readFontAttributes</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>
                                    <name>Map</name>
                                    <argument_list>&lt;
                                        <argument>
                                            <name>AttributeKey</name>
                                        </argument>
                                        ,
                                        <argument>
                                            <name>Object</name>
                                        </argument>
                                        &gt;
                                    </argument_list>
                                </name>
                            </type>
                            <name>a</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>value</name>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>doubleValue</name>
                        </decl>
                        ;
                    </decl_stmt>

                    <comment type="line">// 'font-family'</comment>
                    <comment type="line">// Value: [[ &lt;family-name&gt; |</comment>
                    <comment type="line">// &lt;generic-family&gt; ],]* [&lt;family-name&gt; |</comment>
                    <comment type="line">// &lt;generic-family&gt;] | inherit</comment>
                    <comment type="line">// Initial: depends on user agent</comment>
                    <comment type="line">// Applies to: text content elements</comment>
                    <comment type="line">// Inherited: yes</comment>
                    <comment type="line">// Percentages: N/A</comment>
                    <comment type="line">// Media: visual</comment>
                    <comment type="line">// Animatable: yes</comment>
                    <comment type="line">// Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>value</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"font-family"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"Dialog"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>FONT_FACE</name>.
                                    <name>set</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>new
                                            <call>
                                                <name>Font</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>value</name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name><name>Font</name>.
                                                                <name>PLAIN</name>
                                                            </name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>12</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <comment type="line">// 'font-getChildCount'</comment>
                    <comment type="line">// Value: &lt;absolute-getChildCount&gt; | &lt;relative-getChildCount&gt; |
                    </comment>
                    <comment type="line">// &lt;length&gt; | inherit</comment>
                    <comment type="line">// Initial: medium</comment>
                    <comment type="line">// Applies to: text content elements</comment>
                    <comment type="line">// Inherited: yes, the computed value is inherited</comment>
                    <comment type="line">// Percentages: N/A</comment>
                    <comment type="line">// Media: visual</comment>
                    <comment type="line">// Animatable: yes</comment>
                    <comment type="line">// Computed value: Absolute length</comment>
                    <expr_stmt>
                        <expr>
                            <name>doubleValue</name>
                            =
                            <call>
                                <name>readInheritFontSizeAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"font-size"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"medium"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>FONT_SIZE</name>.
                                    <name>set</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>doubleValue</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <comment type="line">// 'font-style'</comment>
                    <comment type="line">// Value: normal | italic | oblique | inherit</comment>
                    <comment type="line">// Initial: normal</comment>
                    <comment type="line">// Applies to: text content elements</comment>
                    <comment type="line">// Inherited: yes</comment>
                    <comment type="line">// Percentages: N/A</comment>
                    <comment type="line">// Media: visual</comment>
                    <comment type="line">// Animatable: yes</comment>
                    <comment type="line">// Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>value</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"font-style"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"normal"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>FONT_ITALIC</name>.
                                    <name>set</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name><name>value</name>.
                                                    <name>equals</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"italic"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>


                    <comment type="line">//'font-variant'</comment>
                    <comment type="line">//Value: normal | small-caps | inherit</comment>
                    <comment type="line">//Initial: normal</comment>
                    <comment type="line">//Applies to: text content elements</comment>
                    <comment type="line">//Inherited: yes</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: no</comment>
                    <comment type="line">//Computed value: Specified value, except inherit</comment>
                    <expr_stmt>
                        <expr>
                            <name>value</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"font-variant"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"normal"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <comment type="line">// if (DEBUG) System.out.println("font-variant="+value);</comment>

                    <comment type="line">// 'font-weight'</comment>
                    <comment type="line">// Value: normal | bold | bolder | lighter | 100 | 200 | 300</comment>
                    <comment type="line">// | 400 | 500 | 600 | 700 | 800 | 900 | inherit</comment>
                    <comment type="line">// Initial: normal</comment>
                    <comment type="line">// Applies to: text content elements</comment>
                    <comment type="line">// Inherited: yes</comment>
                    <comment type="line">// Percentages: N/A</comment>
                    <comment type="line">// Media: visual</comment>
                    <comment type="line">// Animatable: yes</comment>
                    <comment type="line">// Computed value: one of the legal numeric values, non-numeric</comment>
                    <comment type="line">// values shall be converted to numeric values according to the rules</comment>
                    <comment type="line">// defined below.</comment>
                    <expr_stmt>
                        <expr>
                            <name>value</name>
                            =
                            <call>
                                <name>readInheritAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"font-weight"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"normal"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>FONT_BOLD</name>.
                                    <name>set</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name><name>value</name>.
                                                    <name>equals</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"bold"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                            ||
                                            <call>
                                                <name><name>value</name>.
                                                    <name>equals</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"bolder"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                            ||
                                            <call>
                                                <name><name>value</name>.
                                                    <name>equals</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"400"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                            ||
                                            <call>
                                                <name><name>value</name>.
                                                    <name>equals</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"500"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                            ||
                                            <call>
                                                <name><name>value</name>.
                                                    <name>equals</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"600"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                            ||
                                            <call>
                                                <name><name>value</name>.
                                                    <name>equals</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"700"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                            ||
                                            <call>
                                                <name><name>value</name>.
                                                    <name>equals</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"800"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                            ||
                                            <call>
                                                <name><name>value</name>.
                                                    <name>equals</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"900"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <comment type="line">// Note: text-decoration is an SVG 1.1 feature</comment>
                    <comment type="line">//'text-decoration'</comment>
                    <comment type="line">//Value: none | [ underline || overline || line-through || blink ] | inherit
                    </comment>
                    <comment type="line">//Initial: none</comment>
                    <comment type="line">//Applies to: text content elements</comment>
                    <comment type="line">//Inherited: no (see prose)</comment>
                    <comment type="line">//Percentages: N/A</comment>
                    <comment type="line">//Media: visual</comment>
                    <comment type="line">//Animatable: yes</comment>
                    <expr_stmt>
                        <expr>
                            <name>value</name>
                            =
                            <call>
                                <name>readAttribute</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"text-decoration"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"none"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>FONT_UNDERLINE</name>.
                                    <name>set</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>a</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <call>
                                                <name><name>value</name>.
                                                    <name>equals</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"underline"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Reads a paint style attribute. This can be a Color or a Gradient or null.
                * XXX - Doesn't support url(...) colors yet.
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>Object</name>
                </type>
                <name>toPaint</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>value</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>str</name> =
                            <init>
                                <expr>
                                    <name>value</name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>str</name>
                                ==
                                <name>null</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <return>return
                                    <expr>
                                        <name>null</name>
                                    </expr>
                                    ;
                                </return>
                                }
                            </block>
                        </then>
                    </if>

                    <expr_stmt>
                        <expr>
                            <name>str</name>
                            =
                            <call>
                                <name><name>str</name>.
                                    <name>trim</name>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                            .
                            <call>
                                <name>toLowerCase</name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>str</name>.
                                        <name>equals</name>
                                    </name>
                                    <argument_list>(
                                        <argument>
                                            <expr>"none"</expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <return>return
                                    <expr>
                                        <name>null</name>
                                    </expr>
                                    ;
                                </return>
                                }
                            </block>
                        </then>
                        <else>else
                            <if>if
                                <condition>(
                                    <expr>
                                        <call>
                                            <name><name>str</name>.
                                                <name>equals</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>"currentcolor"</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <decl_stmt>
                                            <decl>
                                                <type>
                                                    <name>String</name>
                                                </type>
                                                <name>currentColor</name> =
                                                <init>
                                                    <expr>
                                                        <call>
                                                            <name>readInheritAttribute</name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>elem</name>
                                                                    </expr>
                                                                </argument>
                                                                ,
                                                                <argument>
                                                                    <expr>"color"</expr>
                                                                </argument>
                                                                ,
                                                                <argument>
                                                                    <expr>"black"</expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                </init>
                                            </decl>
                                            ;
                                        </decl_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <name>currentColor</name>
                                                    == <name>null</name> ||
                                                    <call>
                                                        <name><name>currentColor</name>.
                                                            <name>trim</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    .
                                                    <call>
                                                        <name>toLowerCase</name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    .
                                                    <call>
                                                        <name>equals</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>"currentColor"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <return>return
                                                        <expr>
                                                            <name>null</name>
                                                        </expr>
                                                        ;
                                                    </return>
                                                    }
                                                </block>
                                            </then>
                                            <else>else
                                                <block>{
                                                    <return>return
                                                        <expr>
                                                            <call>
                                                                <name>toPaint</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            <name>elem</name>
                                                                        </expr>
                                                                    </argument>
                                                                    ,
                                                                    <argument>
                                                                        <expr>
                                                                            <name>currentColor</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </return>
                                                    }
                                                </block>
                                            </else>
                                        </if>
                                        }
                                    </block>
                                </then>
                                <else>else
                                    <if>if
                                        <condition>(
                                            <expr>
                                                <call>
                                                    <name><name>SVG_COLORS</name>.
                                                        <name>containsKey</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>str</name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            )
                                        </condition>
                                        <then>
                                            <block>{
                                                <return>return
                                                    <expr>
                                                        <call>
                                                            <name><name>SVG_COLORS</name>.
                                                                <name>get</name>
                                                            </name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>str</name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                    ;
                                                </return>
                                                }
                                            </block>
                                        </then>
                                        <else>else
                                            <if>if
                                                <condition>(
                                                    <expr>
                                                        <call>
                                                            <name><name>str</name>.
                                                                <name>startsWith</name>
                                                            </name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>"#"</expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                        &amp;&amp;
                                                        <call>
                                                            <name><name>str</name>.
                                                                <name>length</name>
                                                            </name>
                                                            <argument_list>()</argument_list>
                                                        </call>
                                                        == 7
                                                    </expr>
                                                    )
                                                </condition>
                                                <then>
                                                    <block>{
                                                        <return>return
                                                            <expr>new
                                                                <call>
                                                                    <name>Color</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>Integer</name>.
                                                                                        <name>decode</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>str</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            ;
                                                        </return>
                                                        }
                                                    </block>
                                                </then>
                                                <else>else
                                                    <if>if
                                                        <condition>(
                                                            <expr>
                                                                <call>
                                                                    <name><name>str</name>.
                                                                        <name>startsWith</name>
                                                                    </name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>"#"</expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                                &amp;&amp;
                                                                <call>
                                                                    <name><name>str</name>.
                                                                        <name>length</name>
                                                                    </name>
                                                                    <argument_list>()</argument_list>
                                                                </call>
                                                                == 4
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <block>{
                                                                <comment type="line">// Three digits hex value</comment>
                                                                <decl_stmt>
                                                                    <decl>
                                                                        <type>
                                                                            <name>int</name>
                                                                        </type>
                                                                        <name>th</name> =
                                                                        <init>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>Integer</name>.
                                                                                        <name>decode</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>str</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                        </init>
                                                                    </decl>
                                                                    ;
                                                                </decl_stmt>
                                                                <return>return
                                                                    <expr>new
                                                                        <call>
                                                                            <name>Color</name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>(<name>th</name> &amp; 0xf) |
                                                                                        ((<name>th</name> &amp; 0xf)
                                                                                        &lt;&lt; 4) |
                                                                                        ((<name>th</name> &amp; 0xf0)
                                                                                        &lt;&lt; 4) | ((<name>th</name> &amp;
                                                                                        0xf0) &lt;&lt; 8) |
                                                                                        ((<name>th</name> &amp; 0xf00)
                                                                                        &lt;&lt; 8) | ((<name>th</name> &amp;
                                                                                        0xf00) &lt;&lt; 12)
                                                                                    </expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                    ;
                                                                </return>
                                                                }
                                                            </block>
                                                        </then>
                                                        <else>else
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>str</name>.
                                                                                <name>startsWith</name>
                                                                            </name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>"rgb"</expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <try>try
                                                                            <block>{
                                                                                <decl_stmt>
                                                                                    <decl>
                                                                                        <type>
                                                                                            <name>StringTokenizer</name>
                                                                                        </type>
                                                                                        <name>tt</name> =
                                                                                        <init>
                                                                                            <expr>new
                                                                                                <call>
                                                                                                    <name>
                                                                                                        StringTokenizer
                                                                                                    </name>
                                                                                                    <argument_list>(
                                                                                                        <argument>
                                                                                                            <expr>
                                                                                                                <name>
                                                                                                                    str
                                                                                                                </name>
                                                                                                            </expr>
                                                                                                        </argument>
                                                                                                        ,
                                                                                                        <argument>
                                                                                                            <expr>"()
                                                                                                                ,"
                                                                                                            </expr>
                                                                                                        </argument>
                                                                                                        )
                                                                                                    </argument_list>
                                                                                                </call>
                                                                                            </expr>
                                                                                        </init>
                                                                                    </decl>
                                                                                    ;
                                                                                </decl_stmt>
                                                                                <expr_stmt>
                                                                                    <expr>
                                                                                        <call>
                                                                                            <name><name>tt</name>.
                                                                                                <name>nextToken</name>
                                                                                            </name>
                                                                                            <argument_list>()
                                                                                            </argument_list>
                                                                                        </call>
                                                                                    </expr>
                                                                                    ;
                                                                                </expr_stmt>
                                                                                <decl_stmt>
                                                                                    <decl>
                                                                                        <type>
                                                                                            <name>String</name>
                                                                                        </type>
                                                                                        <name>r</name> =
                                                                                        <init>
                                                                                            <expr>
                                                                                                <call>
                                                                                                    <name><name>
                                                                                                        tt</name>.
                                                                                                        <name>
                                                                                                            nextToken
                                                                                                        </name>
                                                                                                    </name>
                                                                                                    <argument_list>()
                                                                                                    </argument_list>
                                                                                                </call>
                                                                                            </expr>
                                                                                        </init>
                                                                                    </decl>
                                                                                    ;
                                                                                </decl_stmt>
                                                                                <decl_stmt>
                                                                                    <decl>
                                                                                        <type>
                                                                                            <name>String</name>
                                                                                        </type>
                                                                                        <name>g</name> =
                                                                                        <init>
                                                                                            <expr>
                                                                                                <call>
                                                                                                    <name><name>
                                                                                                        tt</name>.
                                                                                                        <name>
                                                                                                            nextToken
                                                                                                        </name>
                                                                                                    </name>
                                                                                                    <argument_list>()
                                                                                                    </argument_list>
                                                                                                </call>
                                                                                            </expr>
                                                                                        </init>
                                                                                    </decl>
                                                                                    ;
                                                                                </decl_stmt>
                                                                                <decl_stmt>
                                                                                    <decl>
                                                                                        <type>
                                                                                            <name>String</name>
                                                                                        </type>
                                                                                        <name>b</name> =
                                                                                        <init>
                                                                                            <expr>
                                                                                                <call>
                                                                                                    <name><name>
                                                                                                        tt</name>.
                                                                                                        <name>
                                                                                                            nextToken
                                                                                                        </name>
                                                                                                    </name>
                                                                                                    <argument_list>()
                                                                                                    </argument_list>
                                                                                                </call>
                                                                                            </expr>
                                                                                        </init>
                                                                                    </decl>
                                                                                    ;
                                                                                </decl_stmt>
                                                                                <decl_stmt>
                                                                                    <decl>
                                                                                        <type>
                                                                                            <name>Color</name>
                                                                                        </type>
                                                                                        <name>c</name> =
                                                                                        <init>
                                                                                            <expr>new
                                                                                                <call>
                                                                                                    <name>Color</name>
                                                                                                    <argument_list>(
                                                                                                        <argument>
                                                                                                            <expr>
                                                                                                                <call>
                                                                                                                    <name>
                                                                                                                        <name>
                                                                                                                            r</name>
                                                                                                                        .
                                                                                                                        <name>
                                                                                                                            endsWith
                                                                                                                        </name>
                                                                                                                    </name>
                                                                                                                    <argument_list>
                                                                                                                        (
                                                                                                                        <argument>
                                                                                                                            <expr>
                                                                                                                                "%"
                                                                                                                            </expr>
                                                                                                                        </argument>
                                                                                                                        )
                                                                                                                    </argument_list>
                                                                                                                </call>
                                                                                                                ?
                                                                                                                <call>
                                                                                                                    (<name>
                                                                                                                    int</name>)
                                                                                                                    <argument_list>
                                                                                                                        (
                                                                                                                        <argument>
                                                                                                                            <expr>
                                                                                                                                <call>
                                                                                                                                    <name>
                                                                                                                                        <name>
                                                                                                                                            Integer</name>
                                                                                                                                        .
                                                                                                                                        <name>
                                                                                                                                            decode
                                                                                                                                        </name>
                                                                                                                                    </name>
                                                                                                                                    <argument_list>
                                                                                                                                        (
                                                                                                                                        <argument>
                                                                                                                                            <expr>
                                                                                                                                                <call>
                                                                                                                                                    <name>
                                                                                                                                                        <name>
                                                                                                                                                            r</name>
                                                                                                                                                        .
                                                                                                                                                        <name>
                                                                                                                                                            substring
                                                                                                                                                        </name>
                                                                                                                                                    </name>
                                                                                                                                                    <argument_list>
                                                                                                                                                        (
                                                                                                                                                        <argument>
                                                                                                                                                            <expr>
                                                                                                                                                                0
                                                                                                                                                            </expr>
                                                                                                                                                        </argument>
                                                                                                                                                        ,
                                                                                                                                                        <argument>
                                                                                                                                                            <expr>
                                                                                                                                                                <call>
                                                                                                                                                                    <name>
                                                                                                                                                                        <name>
                                                                                                                                                                            r</name>
                                                                                                                                                                        .
                                                                                                                                                                        <name>
                                                                                                                                                                            length
                                                                                                                                                                        </name>
                                                                                                                                                                    </name>
                                                                                                                                                                    <argument_list>
                                                                                                                                                                        ()
                                                                                                                                                                    </argument_list>
                                                                                                                                                                </call>
                                                                                                                                                                -
                                                                                                                                                                1
                                                                                                                                                            </expr>
                                                                                                                                                        </argument>
                                                                                                                                                        )
                                                                                                                                                    </argument_list>
                                                                                                                                                </call>
                                                                                                                                            </expr>
                                                                                                                                        </argument>
                                                                                                                                        )
                                                                                                                                    </argument_list>
                                                                                                                                </call>
                                                                                                                                *
                                                                                                                                2.55
                                                                                                                            </expr>
                                                                                                                        </argument>
                                                                                                                        )
                                                                                                                    </argument_list>
                                                                                                                </call>
                                                                                                                :
                                                                                                                <call>
                                                                                                                    <name>
                                                                                                                        <name>
                                                                                                                            Integer</name>
                                                                                                                        .
                                                                                                                        <name>
                                                                                                                            decode
                                                                                                                        </name>
                                                                                                                    </name>
                                                                                                                    <argument_list>
                                                                                                                        (
                                                                                                                        <argument>
                                                                                                                            <expr>
                                                                                                                                <name>
                                                                                                                                    r
                                                                                                                                </name>
                                                                                                                            </expr>
                                                                                                                        </argument>
                                                                                                                        )
                                                                                                                    </argument_list>
                                                                                                                </call>
                                                                                                            </expr>
                                                                                                        </argument>
                                                                                                        ,
                                                                                                        <argument>
                                                                                                            <expr>
                                                                                                                <call>
                                                                                                                    <name>
                                                                                                                        <name>
                                                                                                                            g</name>
                                                                                                                        .
                                                                                                                        <name>
                                                                                                                            endsWith
                                                                                                                        </name>
                                                                                                                    </name>
                                                                                                                    <argument_list>
                                                                                                                        (
                                                                                                                        <argument>
                                                                                                                            <expr>
                                                                                                                                "%"
                                                                                                                            </expr>
                                                                                                                        </argument>
                                                                                                                        )
                                                                                                                    </argument_list>
                                                                                                                </call>
                                                                                                                ?
                                                                                                                <call>
                                                                                                                    (<name>
                                                                                                                    int</name>)
                                                                                                                    <argument_list>
                                                                                                                        (
                                                                                                                        <argument>
                                                                                                                            <expr>
                                                                                                                                <call>
                                                                                                                                    <name>
                                                                                                                                        <name>
                                                                                                                                            Integer</name>
                                                                                                                                        .
                                                                                                                                        <name>
                                                                                                                                            decode
                                                                                                                                        </name>
                                                                                                                                    </name>
                                                                                                                                    <argument_list>
                                                                                                                                        (
                                                                                                                                        <argument>
                                                                                                                                            <expr>
                                                                                                                                                <call>
                                                                                                                                                    <name>
                                                                                                                                                        <name>
                                                                                                                                                            g</name>
                                                                                                                                                        .
                                                                                                                                                        <name>
                                                                                                                                                            substring
                                                                                                                                                        </name>
                                                                                                                                                    </name>
                                                                                                                                                    <argument_list>
                                                                                                                                                        (
                                                                                                                                                        <argument>
                                                                                                                                                            <expr>
                                                                                                                                                                0
                                                                                                                                                            </expr>
                                                                                                                                                        </argument>
                                                                                                                                                        ,
                                                                                                                                                        <argument>
                                                                                                                                                            <expr>
                                                                                                                                                                <call>
                                                                                                                                                                    <name>
                                                                                                                                                                        <name>
                                                                                                                                                                            g</name>
                                                                                                                                                                        .
                                                                                                                                                                        <name>
                                                                                                                                                                            length
                                                                                                                                                                        </name>
                                                                                                                                                                    </name>
                                                                                                                                                                    <argument_list>
                                                                                                                                                                        ()
                                                                                                                                                                    </argument_list>
                                                                                                                                                                </call>
                                                                                                                                                                -
                                                                                                                                                                1
                                                                                                                                                            </expr>
                                                                                                                                                        </argument>
                                                                                                                                                        )
                                                                                                                                                    </argument_list>
                                                                                                                                                </call>
                                                                                                                                            </expr>
                                                                                                                                        </argument>
                                                                                                                                        )
                                                                                                                                    </argument_list>
                                                                                                                                </call>
                                                                                                                                *
                                                                                                                                2.55
                                                                                                                            </expr>
                                                                                                                        </argument>
                                                                                                                        )
                                                                                                                    </argument_list>
                                                                                                                </call>
                                                                                                                :
                                                                                                                <call>
                                                                                                                    <name>
                                                                                                                        <name>
                                                                                                                            Integer</name>
                                                                                                                        .
                                                                                                                        <name>
                                                                                                                            decode
                                                                                                                        </name>
                                                                                                                    </name>
                                                                                                                    <argument_list>
                                                                                                                        (
                                                                                                                        <argument>
                                                                                                                            <expr>
                                                                                                                                <name>
                                                                                                                                    g
                                                                                                                                </name>
                                                                                                                            </expr>
                                                                                                                        </argument>
                                                                                                                        )
                                                                                                                    </argument_list>
                                                                                                                </call>
                                                                                                            </expr>
                                                                                                        </argument>
                                                                                                        ,
                                                                                                        <argument>
                                                                                                            <expr>
                                                                                                                <call>
                                                                                                                    <name>
                                                                                                                        <name>
                                                                                                                            b</name>
                                                                                                                        .
                                                                                                                        <name>
                                                                                                                            endsWith
                                                                                                                        </name>
                                                                                                                    </name>
                                                                                                                    <argument_list>
                                                                                                                        (
                                                                                                                        <argument>
                                                                                                                            <expr>
                                                                                                                                "%"
                                                                                                                            </expr>
                                                                                                                        </argument>
                                                                                                                        )
                                                                                                                    </argument_list>
                                                                                                                </call>
                                                                                                                ?
                                                                                                                <call>
                                                                                                                    (<name>
                                                                                                                    int</name>)
                                                                                                                    <argument_list>
                                                                                                                        (
                                                                                                                        <argument>
                                                                                                                            <expr>
                                                                                                                                <call>
                                                                                                                                    <name>
                                                                                                                                        <name>
                                                                                                                                            Integer</name>
                                                                                                                                        .
                                                                                                                                        <name>
                                                                                                                                            decode
                                                                                                                                        </name>
                                                                                                                                    </name>
                                                                                                                                    <argument_list>
                                                                                                                                        (
                                                                                                                                        <argument>
                                                                                                                                            <expr>
                                                                                                                                                <call>
                                                                                                                                                    <name>
                                                                                                                                                        <name>
                                                                                                                                                            b</name>
                                                                                                                                                        .
                                                                                                                                                        <name>
                                                                                                                                                            substring
                                                                                                                                                        </name>
                                                                                                                                                    </name>
                                                                                                                                                    <argument_list>
                                                                                                                                                        (
                                                                                                                                                        <argument>
                                                                                                                                                            <expr>
                                                                                                                                                                0
                                                                                                                                                            </expr>
                                                                                                                                                        </argument>
                                                                                                                                                        ,
                                                                                                                                                        <argument>
                                                                                                                                                            <expr>
                                                                                                                                                                <call>
                                                                                                                                                                    <name>
                                                                                                                                                                        <name>
                                                                                                                                                                            b</name>
                                                                                                                                                                        .
                                                                                                                                                                        <name>
                                                                                                                                                                            length
                                                                                                                                                                        </name>
                                                                                                                                                                    </name>
                                                                                                                                                                    <argument_list>
                                                                                                                                                                        ()
                                                                                                                                                                    </argument_list>
                                                                                                                                                                </call>
                                                                                                                                                                -
                                                                                                                                                                1
                                                                                                                                                            </expr>
                                                                                                                                                        </argument>
                                                                                                                                                        )
                                                                                                                                                    </argument_list>
                                                                                                                                                </call>
                                                                                                                                            </expr>
                                                                                                                                        </argument>
                                                                                                                                        )
                                                                                                                                    </argument_list>
                                                                                                                                </call>
                                                                                                                                *
                                                                                                                                2.55
                                                                                                                            </expr>
                                                                                                                        </argument>
                                                                                                                        )
                                                                                                                    </argument_list>
                                                                                                                </call>
                                                                                                                :
                                                                                                                <call>
                                                                                                                    <name>
                                                                                                                        <name>
                                                                                                                            Integer</name>
                                                                                                                        .
                                                                                                                        <name>
                                                                                                                            decode
                                                                                                                        </name>
                                                                                                                    </name>
                                                                                                                    <argument_list>
                                                                                                                        (
                                                                                                                        <argument>
                                                                                                                            <expr>
                                                                                                                                <name>
                                                                                                                                    b
                                                                                                                                </name>
                                                                                                                            </expr>
                                                                                                                        </argument>
                                                                                                                        )
                                                                                                                    </argument_list>
                                                                                                                </call>
                                                                                                            </expr>
                                                                                                        </argument>
                                                                                                        )
                                                                                                    </argument_list>
                                                                                                </call>
                                                                                            </expr>
                                                                                        </init>
                                                                                    </decl>
                                                                                    ;
                                                                                </decl_stmt>
                                                                                <return>return
                                                                                    <expr>
                                                                                        <name>c</name>
                                                                                    </expr>
                                                                                    ;
                                                                                </return>
                                                                                }
                                                                            </block>
                                                                            <catch>catch (
                                                                                <param>
                                                                                    <decl>
                                                                                        <type>
                                                                                            <name>Exception</name>
                                                                                        </type>
                                                                                        <name>e</name>
                                                                                    </decl>
                                                                                </param>
                                                                                )
                                                                                <block>{
                                                                                    <comment type="block">/*if
                                                                                        (DEBUG)*/
                                                                                    </comment>
                                                                                    <expr_stmt>
                                                                                        <expr>
                                                                                            <call>
                                                                                                <name><name>
                                                                                                    System</name>.<name>
                                                                                                    out</name>.
                                                                                                    <name>println</name>
                                                                                                </name>
                                                                                                <argument_list>(
                                                                                                    <argument>
                                                                                                        <expr>
                                                                                                            "SVGInputFormat.toPaint
                                                                                                            illegal RGB
                                                                                                            value " +
                                                                                                            <name>str
                                                                                                            </name>
                                                                                                        </expr>
                                                                                                    </argument>
                                                                                                    )
                                                                                                </argument_list>
                                                                                            </call>
                                                                                        </expr>
                                                                                        ;
                                                                                    </expr_stmt>
                                                                                    <expr_stmt>
                                                                                        <expr>
                                                                                            <call>
                                                                                                <name><name>e</name>.
                                                                                                    <name>
                                                                                                        printStackTrace
                                                                                                    </name>
                                                                                                </name>
                                                                                                <argument_list>()
                                                                                                </argument_list>
                                                                                            </call>
                                                                                        </expr>
                                                                                        ;
                                                                                    </expr_stmt>
                                                                                    <return>return
                                                                                        <expr>
                                                                                            <name>null</name>
                                                                                        </expr>
                                                                                        ;
                                                                                    </return>
                                                                                    }
                                                                                </block>
                                                                            </catch>
                                                                        </try>
                                                                        }
                                                                    </block>
                                                                </then>
                                                                <else>else
                                                                    <if>if
                                                                        <condition>(
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>str</name>.
                                                                                        <name>startsWith</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>"url("</expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                            )
                                                                        </condition>
                                                                        <then>
                                                                            <block>{
                                                                                <decl_stmt>
                                                                                    <decl>
                                                                                        <type>
                                                                                            <name>String</name>
                                                                                        </type>
                                                                                        <name>href</name> =
                                                                                        <init>
                                                                                            <expr>
                                                                                                <call>
                                                                                                    <name><name>
                                                                                                        value</name>.
                                                                                                        <name>
                                                                                                            substring
                                                                                                        </name>
                                                                                                    </name>
                                                                                                    <argument_list>(
                                                                                                        <argument>
                                                                                                            <expr>4
                                                                                                            </expr>
                                                                                                        </argument>
                                                                                                        ,
                                                                                                        <argument>
                                                                                                            <expr>
                                                                                                                <call>
                                                                                                                    <name>
                                                                                                                        <name>
                                                                                                                            value</name>
                                                                                                                        .
                                                                                                                        <name>
                                                                                                                            length
                                                                                                                        </name>
                                                                                                                    </name>
                                                                                                                    <argument_list>
                                                                                                                        ()
                                                                                                                    </argument_list>
                                                                                                                </call>
                                                                                                                - 1
                                                                                                            </expr>
                                                                                                        </argument>
                                                                                                        )
                                                                                                    </argument_list>
                                                                                                </call>
                                                                                            </expr>
                                                                                        </init>
                                                                                    </decl>
                                                                                    ;
                                                                                </decl_stmt>
                                                                                <if>if
                                                                                    <condition>(
                                                                                        <expr>
                                                                                            <call>
                                                                                                <name><name>
                                                                                                    identifiedElements</name>
                                                                                                    .
                                                                                                    <name>containsKey
                                                                                                    </name>
                                                                                                </name>
                                                                                                <argument_list>(
                                                                                                    <argument>
                                                                                                        <expr>
                                                                                                            <call>
                                                                                                                <name>
                                                                                                                    <name>
                                                                                                                        href</name>
                                                                                                                    .
                                                                                                                    <name>
                                                                                                                        substring
                                                                                                                    </name>
                                                                                                                </name>
                                                                                                                <argument_list>
                                                                                                                    (
                                                                                                                    <argument>
                                                                                                                        <expr>
                                                                                                                            1
                                                                                                                        </expr>
                                                                                                                    </argument>
                                                                                                                    )
                                                                                                                </argument_list>
                                                                                                            </call>
                                                                                                        </expr>
                                                                                                    </argument>
                                                                                                    )
                                                                                                </argument_list>
                                                                                            </call>
                                                                                            &amp;&amp;
                                                                                            <call>
                                                                                                <name><name>
                                                                                                    elementObjects</name>
                                                                                                    .
                                                                                                    <name>containsKey
                                                                                                    </name>
                                                                                                </name>
                                                                                                <argument_list>(
                                                                                                    <argument>
                                                                                                        <expr>
                                                                                                            <call>
                                                                                                                <name>
                                                                                                                    <name>
                                                                                                                        identifiedElements</name>
                                                                                                                    .
                                                                                                                    <name>
                                                                                                                        get
                                                                                                                    </name>
                                                                                                                </name>
                                                                                                                <argument_list>
                                                                                                                    (
                                                                                                                    <argument>
                                                                                                                        <expr>
                                                                                                                            <call>
                                                                                                                                <name>
                                                                                                                                    <name>
                                                                                                                                        href</name>
                                                                                                                                    .
                                                                                                                                    <name>
                                                                                                                                        substring
                                                                                                                                    </name>
                                                                                                                                </name>
                                                                                                                                <argument_list>
                                                                                                                                    (
                                                                                                                                    <argument>
                                                                                                                                        <expr>
                                                                                                                                            1
                                                                                                                                        </expr>
                                                                                                                                    </argument>
                                                                                                                                    )
                                                                                                                                </argument_list>
                                                                                                                            </call>
                                                                                                                        </expr>
                                                                                                                    </argument>
                                                                                                                    )
                                                                                                                </argument_list>
                                                                                                            </call>
                                                                                                        </expr>
                                                                                                    </argument>
                                                                                                    )
                                                                                                </argument_list>
                                                                                            </call>
                                                                                        </expr>
                                                                                        )
                                                                                    </condition>
                                                                                    <then>
                                                                                        <block>{
                                                                                            <decl_stmt>
                                                                                                <decl>
                                                                                                    <type>
                                                                                                        <name>Object
                                                                                                        </name>
                                                                                                    </type>
                                                                                                    <name>obj</name> =
                                                                                                    <init>
                                                                                                        <expr>
                                                                                                            <call>
                                                                                                                <name>
                                                                                                                    <name>
                                                                                                                        elementObjects</name>
                                                                                                                    .
                                                                                                                    <name>
                                                                                                                        get
                                                                                                                    </name>
                                                                                                                </name>
                                                                                                                <argument_list>
                                                                                                                    (
                                                                                                                    <argument>
                                                                                                                        <expr>
                                                                                                                            <call>
                                                                                                                                <name>
                                                                                                                                    <name>
                                                                                                                                        identifiedElements</name>
                                                                                                                                    .
                                                                                                                                    <name>
                                                                                                                                        get
                                                                                                                                    </name>
                                                                                                                                </name>
                                                                                                                                <argument_list>
                                                                                                                                    (
                                                                                                                                    <argument>
                                                                                                                                        <expr>
                                                                                                                                            <call>
                                                                                                                                                <name>
                                                                                                                                                    <name>
                                                                                                                                                        href</name>
                                                                                                                                                    .
                                                                                                                                                    <name>
                                                                                                                                                        substring
                                                                                                                                                    </name>
                                                                                                                                                </name>
                                                                                                                                                <argument_list>
                                                                                                                                                    (
                                                                                                                                                    <argument>
                                                                                                                                                        <expr>
                                                                                                                                                            1
                                                                                                                                                        </expr>
                                                                                                                                                    </argument>
                                                                                                                                                    )
                                                                                                                                                </argument_list>
                                                                                                                                            </call>
                                                                                                                                        </expr>
                                                                                                                                    </argument>
                                                                                                                                    )
                                                                                                                                </argument_list>
                                                                                                                            </call>
                                                                                                                        </expr>
                                                                                                                    </argument>
                                                                                                                    )
                                                                                                                </argument_list>
                                                                                                            </call>
                                                                                                        </expr>
                                                                                                    </init>
                                                                                                </decl>
                                                                                                ;
                                                                                            </decl_stmt>
                                                                                            <return>return
                                                                                                <expr>
                                                                                                    <name>obj</name>
                                                                                                </expr>
                                                                                                ;
                                                                                            </return>
                                                                                            }
                                                                                        </block>
                                                                                    </then>
                                                                                </if>
                                                                                <comment type="line">// XXX - Implement
                                                                                    me
                                                                                </comment>
                                                                                <if>if
                                                                                    <condition>(
                                                                                        <expr>
                                                                                            <name>DEBUG</name>
                                                                                        </expr>
                                                                                        )
                                                                                    </condition>
                                                                                    <then>
                                                                                        <block>{
                                                                                            <expr_stmt>
                                                                                                <expr>
                                                                                                    <call>
                                                                                                        <name><name>
                                                                                                            System</name>
                                                                                                            .<name>
                                                                                                                out</name>.
                                                                                                            <name>
                                                                                                                println
                                                                                                            </name>
                                                                                                        </name>
                                                                                                        <argument_list>(
                                                                                                            <argument>
                                                                                                                <expr>
                                                                                                                    "SVGInputFormat.toPaint
                                                                                                                    not
                                                                                                                    implemented
                                                                                                                    for
                                                                                                                    " +
                                                                                                                    <name>
                                                                                                                        href
                                                                                                                    </name>
                                                                                                                </expr>
                                                                                                            </argument>
                                                                                                            )
                                                                                                        </argument_list>
                                                                                                    </call>
                                                                                                </expr>
                                                                                                ;
                                                                                            </expr_stmt>
                                                                                            }
                                                                                        </block>
                                                                                    </then>
                                                                                </if>
                                                                                <return>return
                                                                                    <expr>
                                                                                        <name>null</name>
                                                                                    </expr>
                                                                                    ;
                                                                                </return>
                                                                                }
                                                                            </block>
                                                                        </then>
                                                                        <else>else
                                                                            <block>{
                                                                                <return>return
                                                                                    <expr>
                                                                                        <name>null</name>
                                                                                    </expr>
                                                                                    ;
                                                                                </return>
                                                                                }
                                                                            </block>
                                                                        </else>
                                                                    </if>
                                                                </else>
                                                            </if>
                                                        </else>
                                                    </if>
                                                </else>
                                            </if>
                                        </else>
                                    </if>
                                </else>
                            </if>
                        </else>
                    </if>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Reads a color style attribute. This can be a Color or null.
                * FIXME - Doesn't support url(...) colors yet.
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>Color</name>
                </type>
                <name>toColor</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>value</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>str</name> =
                            <init>
                                <expr>
                                    <name>value</name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>str</name>
                                ==
                                <name>null</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <return>return
                                    <expr>
                                        <name>null</name>
                                    </expr>
                                    ;
                                </return>
                                }
                            </block>
                        </then>
                    </if>

                    <expr_stmt>
                        <expr>
                            <name>str</name>
                            =
                            <call>
                                <name><name>str</name>.
                                    <name>trim</name>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                            .
                            <call>
                                <name>toLowerCase</name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>str</name>.
                                        <name>equals</name>
                                    </name>
                                    <argument_list>(
                                        <argument>
                                            <expr>"currentcolor"</expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <decl_stmt>
                                    <decl>
                                        <type>
                                            <name>String</name>
                                        </type>
                                        <name>currentColor</name> =
                                        <init>
                                            <expr>
                                                <call>
                                                    <name>readInheritAttribute</name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>elem</name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>"color"</expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>"black"</expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                        </init>
                                    </decl>
                                    ;
                                </decl_stmt>
                                <if>if
                                    <condition>(
                                        <expr>
                                            <name>currentColor</name>
                                            == <name>null</name> ||
                                            <call>
                                                <name><name>currentColor</name>.
                                                    <name>trim</name>
                                                </name>
                                                <argument_list>()</argument_list>
                                            </call>
                                            .
                                            <call>
                                                <name>toLowerCase</name>
                                                <argument_list>()</argument_list>
                                            </call>
                                            .
                                            <call>
                                                <name>equals</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>"currentColor"</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                        )
                                    </condition>
                                    <then>
                                        <block>{
                                            <return>return
                                                <expr>
                                                    <name>null</name>
                                                </expr>
                                                ;
                                            </return>
                                            }
                                        </block>
                                    </then>
                                    <else>else
                                        <block>{
                                            <return>return
                                                <expr>
                                                    <call>
                                                        <name>toColor</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>elem</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>currentColor</name>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                ;
                                            </return>
                                            }
                                        </block>
                                    </else>
                                </if>
                                }
                            </block>
                        </then>
                        <else>else
                            <if>if
                                <condition>(
                                    <expr>
                                        <call>
                                            <name><name>SVG_COLORS</name>.
                                                <name>containsKey</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>str</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <return>return
                                            <expr>
                                                <call>
                                                    <name><name>SVG_COLORS</name>.
                                                        <name>get</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>str</name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </return>
                                        }
                                    </block>
                                </then>
                                <else>else
                                    <if>if
                                        <condition>(
                                            <expr>
                                                <call>
                                                    <name><name>str</name>.
                                                        <name>startsWith</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>"#"</expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                                &amp;&amp;
                                                <call>
                                                    <name><name>str</name>.
                                                        <name>length</name>
                                                    </name>
                                                    <argument_list>()</argument_list>
                                                </call>
                                                == 7
                                            </expr>
                                            )
                                        </condition>
                                        <then>
                                            <block>{
                                                <return>return
                                                    <expr>new
                                                        <call>
                                                            <name>Color</name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>Integer</name>.
                                                                                <name>decode</name>
                                                                            </name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>str</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                    ;
                                                </return>
                                                }
                                            </block>
                                        </then>
                                        <else>else
                                            <if>if
                                                <condition>(
                                                    <expr>
                                                        <call>
                                                            <name><name>str</name>.
                                                                <name>startsWith</name>
                                                            </name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>"#"</expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                        &amp;&amp;
                                                        <call>
                                                            <name><name>str</name>.
                                                                <name>length</name>
                                                            </name>
                                                            <argument_list>()</argument_list>
                                                        </call>
                                                        == 4
                                                    </expr>
                                                    )
                                                </condition>
                                                <then>
                                                    <block>{
                                                        <comment type="line">// Three digits hex value</comment>
                                                        <decl_stmt>
                                                            <decl>
                                                                <type>
                                                                    <name>int</name>
                                                                </type>
                                                                <name>th</name> =
                                                                <init>
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>Integer</name>.
                                                                                <name>decode</name>
                                                                            </name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>str</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                </init>
                                                            </decl>
                                                            ;
                                                        </decl_stmt>
                                                        <return>return
                                                            <expr>new
                                                                <call>
                                                                    <name>Color</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>(<name>th</name> &amp; 0xf) | ((<name>
                                                                                th
                                                                            </name> &amp; 0xf) &lt;&lt; 4) |
                                                                                ((<name>th</name> &amp; 0xf0) &lt;&lt;
                                                                                4) | ((<name>th</name> &amp; 0xf0) &lt;&lt;
                                                                                8) |
                                                                                ((<name>th</name> &amp; 0xf00) &lt;&lt;
                                                                                8) | ((<name>th</name> &amp; 0xf00) &lt;&lt;
                                                                                12)
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            ;
                                                        </return>
                                                        }
                                                    </block>
                                                </then>
                                                <else>else
                                                    <if>if
                                                        <condition>(
                                                            <expr>
                                                                <call>
                                                                    <name><name>str</name>.
                                                                        <name>startsWith</name>
                                                                    </name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>"rgb"</expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <block>{
                                                                <try>try
                                                                    <block>{
                                                                        <decl_stmt>
                                                                            <decl>
                                                                                <type>
                                                                                    <name>StringTokenizer</name>
                                                                                </type>
                                                                                <name>tt</name> =
                                                                                <init>
                                                                                    <expr>new
                                                                                        <call>
                                                                                            <name>StringTokenizer</name>
                                                                                            <argument_list>(
                                                                                                <argument>
                                                                                                    <expr>
                                                                                                        <name>str</name>
                                                                                                    </expr>
                                                                                                </argument>
                                                                                                ,
                                                                                                <argument>
                                                                                                    <expr>"() ,"</expr>
                                                                                                </argument>
                                                                                                )
                                                                                            </argument_list>
                                                                                        </call>
                                                                                    </expr>
                                                                                </init>
                                                                            </decl>
                                                                            ;
                                                                        </decl_stmt>
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>tt</name>.
                                                                                        <name>nextToken</name>
                                                                                    </name>
                                                                                    <argument_list>()</argument_list>
                                                                                </call>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <decl_stmt>
                                                                            <decl>
                                                                                <type>
                                                                                    <name>String</name>
                                                                                </type>
                                                                                <name>r</name> =
                                                                                <init>
                                                                                    <expr>
                                                                                        <call>
                                                                                            <name><name>tt</name>.
                                                                                                <name>nextToken</name>
                                                                                            </name>
                                                                                            <argument_list>()
                                                                                            </argument_list>
                                                                                        </call>
                                                                                    </expr>
                                                                                </init>
                                                                            </decl>
                                                                            ;
                                                                        </decl_stmt>
                                                                        <decl_stmt>
                                                                            <decl>
                                                                                <type>
                                                                                    <name>String</name>
                                                                                </type>
                                                                                <name>g</name> =
                                                                                <init>
                                                                                    <expr>
                                                                                        <call>
                                                                                            <name><name>tt</name>.
                                                                                                <name>nextToken</name>
                                                                                            </name>
                                                                                            <argument_list>()
                                                                                            </argument_list>
                                                                                        </call>
                                                                                    </expr>
                                                                                </init>
                                                                            </decl>
                                                                            ;
                                                                        </decl_stmt>
                                                                        <decl_stmt>
                                                                            <decl>
                                                                                <type>
                                                                                    <name>String</name>
                                                                                </type>
                                                                                <name>b</name> =
                                                                                <init>
                                                                                    <expr>
                                                                                        <call>
                                                                                            <name><name>tt</name>.
                                                                                                <name>nextToken</name>
                                                                                            </name>
                                                                                            <argument_list>()
                                                                                            </argument_list>
                                                                                        </call>
                                                                                    </expr>
                                                                                </init>
                                                                            </decl>
                                                                            ;
                                                                        </decl_stmt>
                                                                        <decl_stmt>
                                                                            <decl>
                                                                                <type>
                                                                                    <name>Color</name>
                                                                                </type>
                                                                                <name>c</name> =
                                                                                <init>
                                                                                    <expr>new
                                                                                        <call>
                                                                                            <name>Color</name>
                                                                                            <argument_list>(
                                                                                                <argument>
                                                                                                    <expr>
                                                                                                        <call>
                                                                                                            <name><name>
                                                                                                                r</name>
                                                                                                                .
                                                                                                                <name>
                                                                                                                    endsWith
                                                                                                                </name>
                                                                                                            </name>
                                                                                                            <argument_list>
                                                                                                                (
                                                                                                                <argument>
                                                                                                                    <expr>
                                                                                                                        "%"
                                                                                                                    </expr>
                                                                                                                </argument>
                                                                                                                )
                                                                                                            </argument_list>
                                                                                                        </call>
                                                                                                        ?
                                                                                                        <call>(<name>
                                                                                                            int</name>)
                                                                                                            <argument_list>
                                                                                                                (
                                                                                                                <argument>
                                                                                                                    <expr>
                                                                                                                        <call>
                                                                                                                            <name>
                                                                                                                                <name>
                                                                                                                                    Integer</name>
                                                                                                                                .
                                                                                                                                <name>
                                                                                                                                    decode
                                                                                                                                </name>
                                                                                                                            </name>
                                                                                                                            <argument_list>
                                                                                                                                (
                                                                                                                                <argument>
                                                                                                                                    <expr>
                                                                                                                                        <call>
                                                                                                                                            <name>
                                                                                                                                                <name>
                                                                                                                                                    r</name>
                                                                                                                                                .
                                                                                                                                                <name>
                                                                                                                                                    substring
                                                                                                                                                </name>
                                                                                                                                            </name>
                                                                                                                                            <argument_list>
                                                                                                                                                (
                                                                                                                                                <argument>
                                                                                                                                                    <expr>
                                                                                                                                                        0
                                                                                                                                                    </expr>
                                                                                                                                                </argument>
                                                                                                                                                ,
                                                                                                                                                <argument>
                                                                                                                                                    <expr>
                                                                                                                                                        <call>
                                                                                                                                                            <name>
                                                                                                                                                                <name>
                                                                                                                                                                    r</name>
                                                                                                                                                                .
                                                                                                                                                                <name>
                                                                                                                                                                    length
                                                                                                                                                                </name>
                                                                                                                                                            </name>
                                                                                                                                                            <argument_list>
                                                                                                                                                                ()
                                                                                                                                                            </argument_list>
                                                                                                                                                        </call>
                                                                                                                                                        -
                                                                                                                                                        1
                                                                                                                                                    </expr>
                                                                                                                                                </argument>
                                                                                                                                                )
                                                                                                                                            </argument_list>
                                                                                                                                        </call>
                                                                                                                                    </expr>
                                                                                                                                </argument>
                                                                                                                                )
                                                                                                                            </argument_list>
                                                                                                                        </call>
                                                                                                                        *
                                                                                                                        2.55
                                                                                                                    </expr>
                                                                                                                </argument>
                                                                                                                )
                                                                                                            </argument_list>
                                                                                                        </call>
                                                                                                        :
                                                                                                        <call>
                                                                                                            <name><name>
                                                                                                                Integer</name>
                                                                                                                .
                                                                                                                <name>
                                                                                                                    decode
                                                                                                                </name>
                                                                                                            </name>
                                                                                                            <argument_list>
                                                                                                                (
                                                                                                                <argument>
                                                                                                                    <expr>
                                                                                                                        <name>
                                                                                                                            r
                                                                                                                        </name>
                                                                                                                    </expr>
                                                                                                                </argument>
                                                                                                                )
                                                                                                            </argument_list>
                                                                                                        </call>
                                                                                                    </expr>
                                                                                                </argument>
                                                                                                ,
                                                                                                <argument>
                                                                                                    <expr>
                                                                                                        <call>
                                                                                                            <name><name>
                                                                                                                g</name>
                                                                                                                .
                                                                                                                <name>
                                                                                                                    endsWith
                                                                                                                </name>
                                                                                                            </name>
                                                                                                            <argument_list>
                                                                                                                (
                                                                                                                <argument>
                                                                                                                    <expr>
                                                                                                                        "%"
                                                                                                                    </expr>
                                                                                                                </argument>
                                                                                                                )
                                                                                                            </argument_list>
                                                                                                        </call>
                                                                                                        ?
                                                                                                        <call>(<name>
                                                                                                            int</name>)
                                                                                                            <argument_list>
                                                                                                                (
                                                                                                                <argument>
                                                                                                                    <expr>
                                                                                                                        <call>
                                                                                                                            <name>
                                                                                                                                <name>
                                                                                                                                    Integer</name>
                                                                                                                                .
                                                                                                                                <name>
                                                                                                                                    decode
                                                                                                                                </name>
                                                                                                                            </name>
                                                                                                                            <argument_list>
                                                                                                                                (
                                                                                                                                <argument>
                                                                                                                                    <expr>
                                                                                                                                        <call>
                                                                                                                                            <name>
                                                                                                                                                <name>
                                                                                                                                                    g</name>
                                                                                                                                                .
                                                                                                                                                <name>
                                                                                                                                                    substring
                                                                                                                                                </name>
                                                                                                                                            </name>
                                                                                                                                            <argument_list>
                                                                                                                                                (
                                                                                                                                                <argument>
                                                                                                                                                    <expr>
                                                                                                                                                        0
                                                                                                                                                    </expr>
                                                                                                                                                </argument>
                                                                                                                                                ,
                                                                                                                                                <argument>
                                                                                                                                                    <expr>
                                                                                                                                                        <call>
                                                                                                                                                            <name>
                                                                                                                                                                <name>
                                                                                                                                                                    g</name>
                                                                                                                                                                .
                                                                                                                                                                <name>
                                                                                                                                                                    length
                                                                                                                                                                </name>
                                                                                                                                                            </name>
                                                                                                                                                            <argument_list>
                                                                                                                                                                ()
                                                                                                                                                            </argument_list>
                                                                                                                                                        </call>
                                                                                                                                                        -
                                                                                                                                                        1
                                                                                                                                                    </expr>
                                                                                                                                                </argument>
                                                                                                                                                )
                                                                                                                                            </argument_list>
                                                                                                                                        </call>
                                                                                                                                    </expr>
                                                                                                                                </argument>
                                                                                                                                )
                                                                                                                            </argument_list>
                                                                                                                        </call>
                                                                                                                        *
                                                                                                                        2.55
                                                                                                                    </expr>
                                                                                                                </argument>
                                                                                                                )
                                                                                                            </argument_list>
                                                                                                        </call>
                                                                                                        :
                                                                                                        <call>
                                                                                                            <name><name>
                                                                                                                Integer</name>
                                                                                                                .
                                                                                                                <name>
                                                                                                                    decode
                                                                                                                </name>
                                                                                                            </name>
                                                                                                            <argument_list>
                                                                                                                (
                                                                                                                <argument>
                                                                                                                    <expr>
                                                                                                                        <name>
                                                                                                                            g
                                                                                                                        </name>
                                                                                                                    </expr>
                                                                                                                </argument>
                                                                                                                )
                                                                                                            </argument_list>
                                                                                                        </call>
                                                                                                    </expr>
                                                                                                </argument>
                                                                                                ,
                                                                                                <argument>
                                                                                                    <expr>
                                                                                                        <call>
                                                                                                            <name><name>
                                                                                                                b</name>
                                                                                                                .
                                                                                                                <name>
                                                                                                                    endsWith
                                                                                                                </name>
                                                                                                            </name>
                                                                                                            <argument_list>
                                                                                                                (
                                                                                                                <argument>
                                                                                                                    <expr>
                                                                                                                        "%"
                                                                                                                    </expr>
                                                                                                                </argument>
                                                                                                                )
                                                                                                            </argument_list>
                                                                                                        </call>
                                                                                                        ?
                                                                                                        <call>(<name>
                                                                                                            int</name>)
                                                                                                            <argument_list>
                                                                                                                (
                                                                                                                <argument>
                                                                                                                    <expr>
                                                                                                                        <call>
                                                                                                                            <name>
                                                                                                                                <name>
                                                                                                                                    Integer</name>
                                                                                                                                .
                                                                                                                                <name>
                                                                                                                                    decode
                                                                                                                                </name>
                                                                                                                            </name>
                                                                                                                            <argument_list>
                                                                                                                                (
                                                                                                                                <argument>
                                                                                                                                    <expr>
                                                                                                                                        <call>
                                                                                                                                            <name>
                                                                                                                                                <name>
                                                                                                                                                    b</name>
                                                                                                                                                .
                                                                                                                                                <name>
                                                                                                                                                    substring
                                                                                                                                                </name>
                                                                                                                                            </name>
                                                                                                                                            <argument_list>
                                                                                                                                                (
                                                                                                                                                <argument>
                                                                                                                                                    <expr>
                                                                                                                                                        0
                                                                                                                                                    </expr>
                                                                                                                                                </argument>
                                                                                                                                                ,
                                                                                                                                                <argument>
                                                                                                                                                    <expr>
                                                                                                                                                        <call>
                                                                                                                                                            <name>
                                                                                                                                                                <name>
                                                                                                                                                                    b</name>
                                                                                                                                                                .
                                                                                                                                                                <name>
                                                                                                                                                                    length
                                                                                                                                                                </name>
                                                                                                                                                            </name>
                                                                                                                                                            <argument_list>
                                                                                                                                                                ()
                                                                                                                                                            </argument_list>
                                                                                                                                                        </call>
                                                                                                                                                        -
                                                                                                                                                        1
                                                                                                                                                    </expr>
                                                                                                                                                </argument>
                                                                                                                                                )
                                                                                                                                            </argument_list>
                                                                                                                                        </call>
                                                                                                                                    </expr>
                                                                                                                                </argument>
                                                                                                                                )
                                                                                                                            </argument_list>
                                                                                                                        </call>
                                                                                                                        *
                                                                                                                        2.55
                                                                                                                    </expr>
                                                                                                                </argument>
                                                                                                                )
                                                                                                            </argument_list>
                                                                                                        </call>
                                                                                                        :
                                                                                                        <call>
                                                                                                            <name><name>
                                                                                                                Integer</name>
                                                                                                                .
                                                                                                                <name>
                                                                                                                    decode
                                                                                                                </name>
                                                                                                            </name>
                                                                                                            <argument_list>
                                                                                                                (
                                                                                                                <argument>
                                                                                                                    <expr>
                                                                                                                        <name>
                                                                                                                            b
                                                                                                                        </name>
                                                                                                                    </expr>
                                                                                                                </argument>
                                                                                                                )
                                                                                                            </argument_list>
                                                                                                        </call>
                                                                                                    </expr>
                                                                                                </argument>
                                                                                                )
                                                                                            </argument_list>
                                                                                        </call>
                                                                                    </expr>
                                                                                </init>
                                                                            </decl>
                                                                            ;
                                                                        </decl_stmt>
                                                                        <return>return
                                                                            <expr>
                                                                                <name>c</name>
                                                                            </expr>
                                                                            ;
                                                                        </return>
                                                                        }
                                                                    </block>
                                                                    <catch>catch (
                                                                        <param>
                                                                            <decl>
                                                                                <type>
                                                                                    <name>Exception</name>
                                                                                </type>
                                                                                <name>e</name>
                                                                            </decl>
                                                                        </param>
                                                                        )
                                                                        <block>{
                                                                            <if>if
                                                                                <condition>(
                                                                                    <expr>
                                                                                        <name>DEBUG</name>
                                                                                    </expr>
                                                                                    )
                                                                                </condition>
                                                                                <then>
                                                                                    <block>{
                                                                                        <expr_stmt>
                                                                                            <expr>
                                                                                                <call>
                                                                                                    <name><name>
                                                                                                        System</name>
                                                                                                        .<name>
                                                                                                            out</name>.
                                                                                                        <name>println
                                                                                                        </name>
                                                                                                    </name>
                                                                                                    <argument_list>(
                                                                                                        <argument>
                                                                                                            <expr>
                                                                                                                "SVGInputFormat.toColor
                                                                                                                illegal
                                                                                                                RGB
                                                                                                                value "
                                                                                                                +
                                                                                                                <name>
                                                                                                                    str
                                                                                                                </name>
                                                                                                            </expr>
                                                                                                        </argument>
                                                                                                        )
                                                                                                    </argument_list>
                                                                                                </call>
                                                                                            </expr>
                                                                                            ;
                                                                                        </expr_stmt>
                                                                                        }
                                                                                    </block>
                                                                                </then>
                                                                            </if>
                                                                            <return>return
                                                                                <expr>
                                                                                    <name>null</name>
                                                                                </expr>
                                                                                ;
                                                                            </return>
                                                                            }
                                                                        </block>
                                                                    </catch>
                                                                </try>
                                                                }
                                                            </block>
                                                        </then>
                                                        <else>else
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>str</name>.
                                                                                <name>startsWith</name>
                                                                            </name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>"url"</expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <comment type="line">// FIXME - Implement me
                                                                        </comment>
                                                                        <if>if
                                                                            <condition>(
                                                                                <expr>
                                                                                    <name>DEBUG</name>
                                                                                </expr>
                                                                                )
                                                                            </condition>
                                                                            <then>
                                                                                <block>{
                                                                                    <expr_stmt>
                                                                                        <expr>
                                                                                            <call>
                                                                                                <name><name>
                                                                                                    System</name>.<name>
                                                                                                    out</name>.
                                                                                                    <name>println</name>
                                                                                                </name>
                                                                                                <argument_list>(
                                                                                                    <argument>
                                                                                                        <expr>
                                                                                                            "SVGInputFormat.toColor
                                                                                                            not
                                                                                                            implemented
                                                                                                            for " +
                                                                                                            <name>str
                                                                                                            </name>
                                                                                                        </expr>
                                                                                                    </argument>
                                                                                                    )
                                                                                                </argument_list>
                                                                                            </call>
                                                                                        </expr>
                                                                                        ;
                                                                                    </expr_stmt>
                                                                                    }
                                                                                </block>
                                                                            </then>
                                                                        </if>
                                                                        <return>return
                                                                            <expr>
                                                                                <name>null</name>
                                                                            </expr>
                                                                            ;
                                                                        </return>
                                                                        }
                                                                    </block>
                                                                </then>
                                                                <else>else
                                                                    <block>{
                                                                        <return>return
                                                                            <expr>
                                                                                <name>null</name>
                                                                            </expr>
                                                                            ;
                                                                        </return>
                                                                        }
                                                                    </block>
                                                                </else>
                                                            </if>
                                                        </else>
                                                    </if>
                                                </else>
                                            </if>
                                        </else>
                                    </if>
                                </else>
                            </if>
                        </else>
                    </if>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Reads a double attribute.
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>double</name>
                </type>
                <name>toDouble</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>value</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <return>return
                        <expr>
                            <call>
                                <name>toDouble</name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name>elem</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>value</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>0</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name><name>Double</name>.
                                                <name>MIN_VALUE</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name><name>Double</name>.
                                                <name>MAX_VALUE</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Reads a double attribute.
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>double</name>
                </type>
                <name>toDouble</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>value</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>defaultValue</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>min</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>double</name>
                            </type>
                            <name>max</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <try>try
                        <block>{
                            <decl_stmt>
                                <decl>
                                    <type>
                                        <name>double</name>
                                    </type>
                                    <name>d</name> =
                                    <init>
                                        <expr>
                                            <call>
                                                <name><name>Double</name>.
                                                    <name>valueOf</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>value</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                    </init>
                                </decl>
                                ;
                            </decl_stmt>
                            <return>return
                                <expr>
                                    <call>
                                        <name><name>Math</name>.
                                            <name>max</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <call>
                                                        <name><name>Math</name>.
                                                            <name>min</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>d</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>max</name>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>min</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                                ;
                            </return>
                            }
                        </block>
                        <catch>catch (
                            <param>
                                <decl>
                                    <type>
                                        <name>NumberFormatException</name>
                                    </type>
                                    <name>e</name>
                                </decl>
                            </param>
                            )
                            <block>{
                                <return>return
                                    <expr>
                                        <name>defaultValue</name>
                                    </expr>
                                    ;
                                </return>
                                <comment type="block">/*
                                    IOException ex = new IOException(elem.getTagName()+"@"+elem.getLineNr()+"
                                    "+e.getMessage());
                                    ex.initCause(e);
                                    throw ex;*/
                                </comment>
                                }
                            </block>
                        </catch>
                    </try>
                    }
                </block>
            </function>

            <comment type="javadoc">/**
                * Reads a text attribute.
                * This method takes the "xml:space" attribute into account.
                * http://www.w3.org/TR/SVGMobile12/text.html#WhiteSpace
                */
            </comment>
            <function>
                <type>
                    <specifier>private</specifier>
                    <name>String</name>
                </type>
                <name>toText</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>value</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>space</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name>readInheritAttribute</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>elem</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>"xml:space"</expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>"default"</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>space</name>.
                                        <name>equals</name>
                                    </name>
                                    <argument_list>(
                                        <argument>
                                            <expr>"default"</expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <return>return
                                    <expr>
                                        <call>
                                            <name><name>value</name>.
                                                <name>trim</name>
                                            </name>
                                            <argument_list>()</argument_list>
                                        </call>
                                        .
                                        <call>
                                            <name>replaceAll</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>"\\s++"</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>" "</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </return>
                                }
                            </block>
                        </then>
                        <else>else <comment type="block">/*if (space.equals("preserve"))*/</comment>
                            <block>{
                                <return>return
                                    <expr>
                                        <name>value</name>
                                    </expr>
                                    ;
                                </return>
                                }
                            </block>
                        </else>
                    </if>
                    }
                </block>
            </function>
            <comment type="block">/* Converts an SVG transform attribute value into an AffineTransform
                * as specified in
                * http://www.w3.org/TR/SVGMobile12/coords.html#TransformAttribute
                */
            </comment>

            <function>
                <type>
                    <specifier>public</specifier>
                    <specifier>static</specifier>
                    <name>AffineTransform</name>
                </type>
                <name>toTransform</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>IXMLElement</name>
                            </type>
                            <name>elem</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>str</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>AffineTransform</name>
                            </type>
                            <name>t</name> =
                            <init>
                                <expr>new
                                    <call>
                                        <name>AffineTransform</name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <if>if
                        <condition>(
                            <expr>
                                <name>str</name>
                                != <name>null</name> &amp;&amp; !
                                <call>
                                    <name><name>str</name>.
                                        <name>equals</name>
                                    </name>
                                    <argument_list>(
                                        <argument>
                                            <expr>"none"</expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{

                                <decl_stmt>
                                    <decl>
                                        <type>
                                            <name>StreamPosTokenizer</name>
                                        </type>
                                        <name>tt</name> =
                                        <init>
                                            <expr>new
                                                <call>
                                                    <name>StreamPosTokenizer</name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>new
                                                                <call>
                                                                    <name>StringReader</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>
                                                                                <name>str</name>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                        </init>
                                    </decl>
                                    ;
                                </decl_stmt>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>tt</name>.
                                                <name>resetSyntax</name>
                                            </name>
                                            <argument_list>()</argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>tt</name>.
                                                <name>wordChars</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>'a'</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>'z'</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>tt</name>.
                                                <name>wordChars</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>'A'</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>'Z'</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>tt</name>.
                                                <name>wordChars</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>128 + 32</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>255</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>tt</name>.
                                                <name>whitespaceChars</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>' '</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>tt</name>.
                                                <name>whitespaceChars</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>','</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>','</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>tt</name>.
                                                <name>parseNumbers</name>
                                            </name>
                                            <argument_list>()</argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>tt</name>.
                                                <name>parseExponents</name>
                                            </name>
                                            <argument_list>()</argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>

                                <while>while
                                    <condition>(
                                        <expr>
                                            <call>
                                                <name><name>tt</name>.
                                                    <name>nextToken</name>
                                                </name>
                                                <argument_list>()</argument_list>
                                            </call>
                                            !=
                                            <name><name>StreamPosTokenizer</name>.
                                                <name>TT_EOF</name>
                                            </name>
                                        </expr>
                                        )
                                    </condition>
                                    <block>{
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <name><name>tt</name>.
                                                        <name>ttype</name>
                                                    </name>
                                                    !=
                                                    <name><name>StreamPosTokenizer</name>.
                                                        <name>TT_WORD</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"Illegal transform " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <decl_stmt>
                                            <decl>
                                                <type>
                                                    <name>String</name>
                                                </type>
                                                <name>type</name> =
                                                <init>
                                                    <expr>
                                                        <name><name>tt</name>.
                                                            <name>sval</name>
                                                        </name>
                                                    </expr>
                                                </init>
                                            </decl>
                                            ;
                                        </decl_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    != '('
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"'(' not found in transform " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>type</name>.
                                                            <name>equals</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>"matrix"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <decl_stmt>
                                                        <decl>
                                                            <type>
                                                                <name>double</name>
                                                                <index>[]</index>
                                                            </type>
                                                            <name>m</name> =
                                                            <init>
                                                                <expr>new
                                                                    <name>
                                                                        <name>double</name>
                                                                        <index>[<expr>6</expr>]
                                                                        </index>
                                                                    </name>
                                                                </expr>
                                                            </init>
                                                        </decl>
                                                        ;
                                                    </decl_stmt>
                                                    <for>for (
                                                        <init>
                                                            <decl>
                                                                <type>
                                                                    <name>int</name>
                                                                </type>
                                                                <name>i</name> =
                                                                <init>
                                                                    <expr>0</expr>
                                                                </init>
                                                            </decl>
                                                            ;
                                                        </init>
                                                        <condition>
                                                            <expr>
                                                                <name>i</name>
                                                                &lt; 6
                                                            </expr>
                                                            ;
                                                        </condition>
                                                        <incr>
                                                            <expr><name>i</name>++
                                                            </expr>
                                                        </incr>
                                                        )
                                                        <block>{
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>tt</name>.
                                                                                <name>nextToken</name>
                                                                            </name>
                                                                            <argument_list>()</argument_list>
                                                                        </call>
                                                                        !=
                                                                        <name><name>StreamPosTokenizer</name>.
                                                                            <name>TT_NUMBER</name>
                                                                        </name>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <throw>throw
                                                                            <expr>new
                                                                                <call>
                                                                                    <name>IOException</name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>"Matrix value " + <name>
                                                                                                i
                                                                                            </name> + " not found in
                                                                                                transform " + <name>
                                                                                                    str
                                                                                                </name> + " token:" +
                                                                                                <name><name>tt</name>.
                                                                                                    <name>ttype</name>
                                                                                                </name>
                                                                                                + " " +
                                                                                                <name><name>tt</name>.
                                                                                                    <name>sval</name>
                                                                                                </name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                            ;
                                                                        </throw>
                                                                        }
                                                                    </block>
                                                                </then>
                                                            </if>
                                                            <expr_stmt>
                                                                <expr>
                                                                    <name>
                                                                        <name>m</name>
                                                                        <index>[
                                                                            <expr>
                                                                                <name>i</name>
                                                                            </expr>
                                                                            ]
                                                                        </index>
                                                                    </name>
                                                                    =
                                                                    <name><name>tt</name>.
                                                                        <name>nval</name>
                                                                    </name>
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            }
                                                        </block>
                                                    </for>
                                                    <expr_stmt>
                                                        <expr>
                                                            <call>
                                                                <name><name>t</name>.
                                                                    <name>concatenate</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>new
                                                                            <call>
                                                                                <name>AffineTransform</name>
                                                                                <argument_list>(
                                                                                    <argument>
                                                                                        <expr>
                                                                                            <name>m</name>
                                                                                        </expr>
                                                                                    </argument>
                                                                                    )
                                                                                </argument_list>
                                                                            </call>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </expr_stmt>

                                                    }
                                                </block>
                                            </then>
                                            <else>else
                                                <if>if
                                                    <condition>(
                                                        <expr>
                                                            <call>
                                                                <name><name>type</name>.
                                                                    <name>equals</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"translate"</expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        )
                                                    </condition>
                                                    <then>
                                                        <block>{
                                                            <decl_stmt>
                                                                <decl>
                                                                    <type>
                                                                        <name>double</name>
                                                                    </type>
                                                                    <name>tx</name>,
                                                                    <name>ty</name>
                                                                </decl>
                                                                ;
                                                            </decl_stmt>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>tt</name>.
                                                                                <name>nextToken</name>
                                                                            </name>
                                                                            <argument_list>()</argument_list>
                                                                        </call>
                                                                        !=
                                                                        <name><name>StreamPosTokenizer</name>.
                                                                            <name>TT_NUMBER</name>
                                                                        </name>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <throw>throw
                                                                            <expr>new
                                                                                <call>
                                                                                    <name>IOException</name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>"X-translation value
                                                                                                not found in transform "
                                                                                                +
                                                                                                <name>str</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                            ;
                                                                        </throw>
                                                                        }
                                                                    </block>
                                                                </then>
                                                            </if>
                                                            <expr_stmt>
                                                                <expr>
                                                                    <name>tx</name>
                                                                    =
                                                                    <name><name>tt</name>.
                                                                        <name>nval</name>
                                                                    </name>
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>tt</name>.
                                                                                <name>nextToken</name>
                                                                            </name>
                                                                            <argument_list>()</argument_list>
                                                                        </call>
                                                                        ==
                                                                        <name><name>StreamPosTokenizer</name>.
                                                                            <name>TT_NUMBER</name>
                                                                        </name>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name>ty</name>
                                                                                =
                                                                                <name><name>tt</name>.
                                                                                    <name>nval</name>
                                                                                </name>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        }
                                                                    </block>
                                                                </then>
                                                                <else>else
                                                                    <block>{
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>tt</name>.
                                                                                        <name>pushBack</name>
                                                                                    </name>
                                                                                    <argument_list>()</argument_list>
                                                                                </call>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name>ty</name>
                                                                                = 0
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        }
                                                                    </block>
                                                                </else>
                                                            </if>
                                                            <expr_stmt>
                                                                <expr>
                                                                    <call>
                                                                        <name><name>t</name>.
                                                                            <name>translate</name>
                                                                        </name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>
                                                                                    <name>tx</name>
                                                                                </expr>
                                                                            </argument>
                                                                            ,
                                                                            <argument>
                                                                                <expr>
                                                                                    <name>ty</name>
                                                                                </expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                                ;
                                                            </expr_stmt>

                                                            }
                                                        </block>
                                                    </then>
                                                    <else>else
                                                        <if>if
                                                            <condition>(
                                                                <expr>
                                                                    <call>
                                                                        <name><name>type</name>.
                                                                            <name>equals</name>
                                                                        </name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>"scale"</expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                                )
                                                            </condition>
                                                            <then>
                                                                <block>{
                                                                    <decl_stmt>
                                                                        <decl>
                                                                            <type>
                                                                                <name>double</name>
                                                                            </type>
                                                                            <name>sx</name>,
                                                                            <name>sy</name>
                                                                        </decl>
                                                                        ;
                                                                    </decl_stmt>
                                                                    <if>if
                                                                        <condition>(
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>tt</name>.
                                                                                        <name>nextToken</name>
                                                                                    </name>
                                                                                    <argument_list>()</argument_list>
                                                                                </call>
                                                                                !=
                                                                                <name><name>StreamPosTokenizer</name>.
                                                                                    <name>TT_NUMBER</name>
                                                                                </name>
                                                                            </expr>
                                                                            )
                                                                        </condition>
                                                                        <then>
                                                                            <block>{
                                                                                <throw>throw
                                                                                    <expr>new
                                                                                        <call>
                                                                                            <name>IOException</name>
                                                                                            <argument_list>(
                                                                                                <argument>
                                                                                                    <expr>"X-scale value
                                                                                                        not found in
                                                                                                        transform " +
                                                                                                        <name>str</name>
                                                                                                    </expr>
                                                                                                </argument>
                                                                                                )
                                                                                            </argument_list>
                                                                                        </call>
                                                                                    </expr>
                                                                                    ;
                                                                                </throw>
                                                                                }
                                                                            </block>
                                                                        </then>
                                                                    </if>
                                                                    <expr_stmt>
                                                                        <expr>
                                                                            <name>sx</name>
                                                                            =
                                                                            <name><name>tt</name>.
                                                                                <name>nval</name>
                                                                            </name>
                                                                        </expr>
                                                                        ;
                                                                    </expr_stmt>
                                                                    <if>if
                                                                        <condition>(
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>tt</name>.
                                                                                        <name>nextToken</name>
                                                                                    </name>
                                                                                    <argument_list>()</argument_list>
                                                                                </call>
                                                                                ==
                                                                                <name><name>StreamPosTokenizer</name>.
                                                                                    <name>TT_NUMBER</name>
                                                                                </name>
                                                                            </expr>
                                                                            )
                                                                        </condition>
                                                                        <then>
                                                                            <block>{
                                                                                <expr_stmt>
                                                                                    <expr>
                                                                                        <name>sy</name>
                                                                                        =
                                                                                        <name><name>tt</name>.
                                                                                            <name>nval</name>
                                                                                        </name>
                                                                                    </expr>
                                                                                    ;
                                                                                </expr_stmt>
                                                                                }
                                                                            </block>
                                                                        </then>
                                                                        <else>else
                                                                            <block>{
                                                                                <expr_stmt>
                                                                                    <expr>
                                                                                        <call>
                                                                                            <name><name>tt</name>.
                                                                                                <name>pushBack</name>
                                                                                            </name>
                                                                                            <argument_list>()
                                                                                            </argument_list>
                                                                                        </call>
                                                                                    </expr>
                                                                                    ;
                                                                                </expr_stmt>
                                                                                <expr_stmt>
                                                                                    <expr>
                                                                                        <name>sy</name>
                                                                                        =
                                                                                        <name>sx</name>
                                                                                    </expr>
                                                                                    ;
                                                                                </expr_stmt>
                                                                                }
                                                                            </block>
                                                                        </else>
                                                                    </if>
                                                                    <expr_stmt>
                                                                        <expr>
                                                                            <call>
                                                                                <name><name>t</name>.
                                                                                    <name>scale</name>
                                                                                </name>
                                                                                <argument_list>(
                                                                                    <argument>
                                                                                        <expr>
                                                                                            <name>sx</name>
                                                                                        </expr>
                                                                                    </argument>
                                                                                    ,
                                                                                    <argument>
                                                                                        <expr>
                                                                                            <name>sy</name>
                                                                                        </expr>
                                                                                    </argument>
                                                                                    )
                                                                                </argument_list>
                                                                            </call>
                                                                        </expr>
                                                                        ;
                                                                    </expr_stmt>

                                                                    }
                                                                </block>
                                                            </then>
                                                            <else>else
                                                                <if>if
                                                                    <condition>(
                                                                        <expr>
                                                                            <call>
                                                                                <name><name>type</name>.
                                                                                    <name>equals</name>
                                                                                </name>
                                                                                <argument_list>(
                                                                                    <argument>
                                                                                        <expr>"rotate"</expr>
                                                                                    </argument>
                                                                                    )
                                                                                </argument_list>
                                                                            </call>
                                                                        </expr>
                                                                        )
                                                                    </condition>
                                                                    <then>
                                                                        <block>{
                                                                            <decl_stmt>
                                                                                <decl>
                                                                                    <type>
                                                                                        <name>double</name>
                                                                                    </type>
                                                                                    <name>angle</name>, <name>cx</name>,
                                                                                    <name>cy</name>
                                                                                </decl>
                                                                                ;
                                                                            </decl_stmt>
                                                                            <if>if
                                                                                <condition>(
                                                                                    <expr>
                                                                                        <call>
                                                                                            <name><name>tt</name>.
                                                                                                <name>nextToken</name>
                                                                                            </name>
                                                                                            <argument_list>()
                                                                                            </argument_list>
                                                                                        </call>
                                                                                        !=
                                                                                        <name><name>
                                                                                            StreamPosTokenizer</name>.
                                                                                            <name>TT_NUMBER</name>
                                                                                        </name>
                                                                                    </expr>
                                                                                    )
                                                                                </condition>
                                                                                <then>
                                                                                    <block>{
                                                                                        <throw>throw
                                                                                            <expr>new
                                                                                                <call>
                                                                                                    <name>IOException
                                                                                                    </name>
                                                                                                    <argument_list>(
                                                                                                        <argument>
                                                                                                            <expr>"Angle
                                                                                                                value
                                                                                                                not
                                                                                                                found in
                                                                                                                transform
                                                                                                                " +
                                                                                                                <name>
                                                                                                                    str
                                                                                                                </name>
                                                                                                            </expr>
                                                                                                        </argument>
                                                                                                        )
                                                                                                    </argument_list>
                                                                                                </call>
                                                                                            </expr>
                                                                                            ;
                                                                                        </throw>
                                                                                        }
                                                                                    </block>
                                                                                </then>
                                                                            </if>
                                                                            <expr_stmt>
                                                                                <expr>
                                                                                    <name>angle</name>
                                                                                    =
                                                                                    <name><name>tt</name>.
                                                                                        <name>nval</name>
                                                                                    </name>
                                                                                </expr>
                                                                                ;
                                                                            </expr_stmt>
                                                                            <if>if
                                                                                <condition>(
                                                                                    <expr>
                                                                                        <call>
                                                                                            <name><name>tt</name>.
                                                                                                <name>nextToken</name>
                                                                                            </name>
                                                                                            <argument_list>()
                                                                                            </argument_list>
                                                                                        </call>
                                                                                        ==
                                                                                        <name><name>
                                                                                            StreamPosTokenizer</name>.
                                                                                            <name>TT_NUMBER</name>
                                                                                        </name>
                                                                                    </expr>
                                                                                    )
                                                                                </condition>
                                                                                <then>
                                                                                    <block>{
                                                                                        <expr_stmt>
                                                                                            <expr>
                                                                                                <name>cx</name>
                                                                                                =
                                                                                                <name><name>tt</name>.
                                                                                                    <name>nval</name>
                                                                                                </name>
                                                                                            </expr>
                                                                                            ;
                                                                                        </expr_stmt>
                                                                                        <if>if
                                                                                            <condition>(
                                                                                                <expr>
                                                                                                    <call>
                                                                                                        <name><name>
                                                                                                            tt</name>.
                                                                                                            <name>
                                                                                                                nextToken
                                                                                                            </name>
                                                                                                        </name>
                                                                                                        <argument_list>
                                                                                                            ()
                                                                                                        </argument_list>
                                                                                                    </call>
                                                                                                    !=
                                                                                                    <name><name>
                                                                                                        StreamPosTokenizer</name>
                                                                                                        .
                                                                                                        <name>
                                                                                                            TT_NUMBER
                                                                                                        </name>
                                                                                                    </name>
                                                                                                </expr>
                                                                                                )
                                                                                            </condition>
                                                                                            <then>
                                                                                                <block>{
                                                                                                    <throw>throw
                                                                                                        <expr>new
                                                                                                            <call>
                                                                                                                <name>
                                                                                                                    IOException
                                                                                                                </name>
                                                                                                                <argument_list>
                                                                                                                    (
                                                                                                                    <argument>
                                                                                                                        <expr>
                                                                                                                            "Y-center
                                                                                                                            value
                                                                                                                            not
                                                                                                                            found
                                                                                                                            in
                                                                                                                            transform
                                                                                                                            "
                                                                                                                            +
                                                                                                                            <name>
                                                                                                                                str
                                                                                                                            </name>
                                                                                                                        </expr>
                                                                                                                    </argument>
                                                                                                                    )
                                                                                                                </argument_list>
                                                                                                            </call>
                                                                                                        </expr>
                                                                                                        ;
                                                                                                    </throw>
                                                                                                    }
                                                                                                </block>
                                                                                            </then>
                                                                                        </if>
                                                                                        <expr_stmt>
                                                                                            <expr>
                                                                                                <name>cy</name>
                                                                                                =
                                                                                                <name><name>tt</name>.
                                                                                                    <name>nval</name>
                                                                                                </name>
                                                                                            </expr>
                                                                                            ;
                                                                                        </expr_stmt>
                                                                                        }
                                                                                    </block>
                                                                                </then>
                                                                                <else>else
                                                                                    <block>{
                                                                                        <expr_stmt>
                                                                                            <expr>
                                                                                                <call>
                                                                                                    <name><name>
                                                                                                        tt</name>.
                                                                                                        <name>pushBack
                                                                                                        </name>
                                                                                                    </name>
                                                                                                    <argument_list>()
                                                                                                    </argument_list>
                                                                                                </call>
                                                                                            </expr>
                                                                                            ;
                                                                                        </expr_stmt>
                                                                                        <expr_stmt>
                                                                                            <expr>
                                                                                                <name>cx</name>
                                                                                                = <name>cy</name> = 0
                                                                                            </expr>
                                                                                            ;
                                                                                        </expr_stmt>
                                                                                        }
                                                                                    </block>
                                                                                </else>
                                                                            </if>
                                                                            <expr_stmt>
                                                                                <expr>
                                                                                    <call>
                                                                                        <name><name>t</name>.
                                                                                            <name>rotate</name>
                                                                                        </name>
                                                                                        <argument_list>(
                                                                                            <argument>
                                                                                                <expr>
                                                                                                    <name>angle</name>
                                                                                                    *
                                                                                                    <name><name>
                                                                                                        Math</name>.
                                                                                                        <name>PI</name>
                                                                                                    </name>
                                                                                                    / 180d
                                                                                                </expr>
                                                                                            </argument>
                                                                                            ,
                                                                                            <argument>
                                                                                                <expr>
                                                                                                    <name>cx</name>
                                                                                                </expr>
                                                                                            </argument>
                                                                                            ,
                                                                                            <argument>
                                                                                                <expr>
                                                                                                    <name>cy</name>
                                                                                                </expr>
                                                                                            </argument>
                                                                                            )
                                                                                        </argument_list>
                                                                                    </call>
                                                                                </expr>
                                                                                ;
                                                                            </expr_stmt>


                                                                            }
                                                                        </block>
                                                                    </then>
                                                                    <else>else
                                                                        <if>if
                                                                            <condition>(
                                                                                <expr>
                                                                                    <call>
                                                                                        <name><name>type</name>.
                                                                                            <name>equals</name>
                                                                                        </name>
                                                                                        <argument_list>(
                                                                                            <argument>
                                                                                                <expr>"skewX"</expr>
                                                                                            </argument>
                                                                                            )
                                                                                        </argument_list>
                                                                                    </call>
                                                                                </expr>
                                                                                )
                                                                            </condition>
                                                                            <then>
                                                                                <block>{
                                                                                    <decl_stmt>
                                                                                        <decl>
                                                                                            <type>
                                                                                                <name>double</name>
                                                                                            </type>
                                                                                            <name>angle</name>
                                                                                        </decl>
                                                                                        ;
                                                                                    </decl_stmt>
                                                                                    <if>if
                                                                                        <condition>(
                                                                                            <expr>
                                                                                                <call>
                                                                                                    <name><name>
                                                                                                        tt</name>.
                                                                                                        <name>
                                                                                                            nextToken
                                                                                                        </name>
                                                                                                    </name>
                                                                                                    <argument_list>()
                                                                                                    </argument_list>
                                                                                                </call>
                                                                                                !=
                                                                                                <name><name>
                                                                                                    StreamPosTokenizer</name>
                                                                                                    .
                                                                                                    <name>TT_NUMBER
                                                                                                    </name>
                                                                                                </name>
                                                                                            </expr>
                                                                                            )
                                                                                        </condition>
                                                                                        <then>
                                                                                            <block>{
                                                                                                <throw>throw
                                                                                                    <expr>new
                                                                                                        <call>
                                                                                                            <name>
                                                                                                                IOException
                                                                                                            </name>
                                                                                                            <argument_list>
                                                                                                                (
                                                                                                                <argument>
                                                                                                                    <expr>
                                                                                                                        "Skew
                                                                                                                        angle
                                                                                                                        not
                                                                                                                        found
                                                                                                                        in
                                                                                                                        transform
                                                                                                                        "
                                                                                                                        +
                                                                                                                        <name>
                                                                                                                            str
                                                                                                                        </name>
                                                                                                                    </expr>
                                                                                                                </argument>
                                                                                                                )
                                                                                                            </argument_list>
                                                                                                        </call>
                                                                                                    </expr>
                                                                                                    ;
                                                                                                </throw>
                                                                                                }
                                                                                            </block>
                                                                                        </then>
                                                                                    </if>
                                                                                    <expr_stmt>
                                                                                        <expr>
                                                                                            <name>angle</name>
                                                                                            =
                                                                                            <name><name>tt</name>.
                                                                                                <name>nval</name>
                                                                                            </name>
                                                                                        </expr>
                                                                                        ;
                                                                                    </expr_stmt>
                                                                                    <expr_stmt>
                                                                                        <expr>
                                                                                            <call>
                                                                                                <name><name>t</name>.
                                                                                                    <name>concatenate
                                                                                                    </name>
                                                                                                </name>
                                                                                                <argument_list>(
                                                                                                    <argument>
                                                                                                        <expr>new
                                                                                                            <call>
                                                                                                                <name>
                                                                                                                    AffineTransform
                                                                                                                </name>
                                                                                                                <argument_list>
                                                                                                                    (
                                                                                                                    <argument>
                                                                                                                        <expr>
                                                                                                                            1
                                                                                                                        </expr>
                                                                                                                    </argument>
                                                                                                                    ,
                                                                                                                    <argument>
                                                                                                                        <expr>
                                                                                                                            0
                                                                                                                        </expr>
                                                                                                                    </argument>
                                                                                                                    ,
                                                                                                                    <argument>
                                                                                                                        <expr>
                                                                                                                            <call>
                                                                                                                                <name>
                                                                                                                                    <name>
                                                                                                                                        Math</name>
                                                                                                                                    .
                                                                                                                                    <name>
                                                                                                                                        tan
                                                                                                                                    </name>
                                                                                                                                </name>
                                                                                                                                <argument_list>
                                                                                                                                    (
                                                                                                                                    <argument>
                                                                                                                                        <expr>
                                                                                                                                            <name>
                                                                                                                                                angle
                                                                                                                                            </name>
                                                                                                                                            *
                                                                                                                                            <name>
                                                                                                                                                <name>
                                                                                                                                                    Math</name>
                                                                                                                                                .
                                                                                                                                                <name>
                                                                                                                                                    PI
                                                                                                                                                </name>
                                                                                                                                            </name>
                                                                                                                                            /
                                                                                                                                            180
                                                                                                                                        </expr>
                                                                                                                                    </argument>
                                                                                                                                    )
                                                                                                                                </argument_list>
                                                                                                                            </call>
                                                                                                                        </expr>
                                                                                                                    </argument>
                                                                                                                    ,
                                                                                                                    <argument>
                                                                                                                        <expr>
                                                                                                                            1
                                                                                                                        </expr>
                                                                                                                    </argument>
                                                                                                                    ,
                                                                                                                    <argument>
                                                                                                                        <expr>
                                                                                                                            0
                                                                                                                        </expr>
                                                                                                                    </argument>
                                                                                                                    ,
                                                                                                                    <argument>
                                                                                                                        <expr>
                                                                                                                            0
                                                                                                                        </expr>
                                                                                                                    </argument>
                                                                                                                    )
                                                                                                                </argument_list>
                                                                                                            </call>
                                                                                                        </expr>
                                                                                                    </argument>
                                                                                                    )
                                                                                                </argument_list>
                                                                                            </call>
                                                                                        </expr>
                                                                                        ;
                                                                                    </expr_stmt>

                                                                                    }
                                                                                </block>
                                                                            </then>
                                                                            <else>else
                                                                                <if>if
                                                                                    <condition>(
                                                                                        <expr>
                                                                                            <call>
                                                                                                <name><name>type</name>.
                                                                                                    <name>equals</name>
                                                                                                </name>
                                                                                                <argument_list>(
                                                                                                    <argument>
                                                                                                        <expr>"skewY"
                                                                                                        </expr>
                                                                                                    </argument>
                                                                                                    )
                                                                                                </argument_list>
                                                                                            </call>
                                                                                        </expr>
                                                                                        )
                                                                                    </condition>
                                                                                    <then>
                                                                                        <block>{
                                                                                            <decl_stmt>
                                                                                                <decl>
                                                                                                    <type>
                                                                                                        <name>double
                                                                                                        </name>
                                                                                                    </type>
                                                                                                    <name>angle</name>
                                                                                                </decl>
                                                                                                ;
                                                                                            </decl_stmt>
                                                                                            <if>if
                                                                                                <condition>(
                                                                                                    <expr>
                                                                                                        <call>
                                                                                                            <name><name>
                                                                                                                tt</name>
                                                                                                                .
                                                                                                                <name>
                                                                                                                    nextToken
                                                                                                                </name>
                                                                                                            </name>
                                                                                                            <argument_list>
                                                                                                                ()
                                                                                                            </argument_list>
                                                                                                        </call>
                                                                                                        !=
                                                                                                        <name><name>
                                                                                                            StreamPosTokenizer</name>
                                                                                                            .
                                                                                                            <name>
                                                                                                                TT_NUMBER
                                                                                                            </name>
                                                                                                        </name>
                                                                                                    </expr>
                                                                                                    )
                                                                                                </condition>
                                                                                                <then>
                                                                                                    <block>{
                                                                                                        <throw>throw
                                                                                                            <expr>new
                                                                                                                <call>
                                                                                                                    <name>
                                                                                                                        IOException
                                                                                                                    </name>
                                                                                                                    <argument_list>
                                                                                                                        (
                                                                                                                        <argument>
                                                                                                                            <expr>
                                                                                                                                "Skew
                                                                                                                                angle
                                                                                                                                not
                                                                                                                                found
                                                                                                                                in
                                                                                                                                transform
                                                                                                                                "
                                                                                                                                +
                                                                                                                                <name>
                                                                                                                                    str
                                                                                                                                </name>
                                                                                                                            </expr>
                                                                                                                        </argument>
                                                                                                                        )
                                                                                                                    </argument_list>
                                                                                                                </call>
                                                                                                            </expr>
                                                                                                            ;
                                                                                                        </throw>
                                                                                                        }
                                                                                                    </block>
                                                                                                </then>
                                                                                            </if>
                                                                                            <expr_stmt>
                                                                                                <expr>
                                                                                                    <name>angle</name>
                                                                                                    =
                                                                                                    <name><name>
                                                                                                        tt</name>.
                                                                                                        <name>nval
                                                                                                        </name>
                                                                                                    </name>
                                                                                                </expr>
                                                                                                ;
                                                                                            </expr_stmt>
                                                                                            <expr_stmt>
                                                                                                <expr>
                                                                                                    <call>
                                                                                                        <name><name>
                                                                                                            t</name>.
                                                                                                            <name>
                                                                                                                concatenate
                                                                                                            </name>
                                                                                                        </name>
                                                                                                        <argument_list>(
                                                                                                            <argument>
                                                                                                                <expr>
                                                                                                                    new
                                                                                                                    <call>
                                                                                                                        <name>
                                                                                                                            AffineTransform
                                                                                                                        </name>
                                                                                                                        <argument_list>
                                                                                                                            (
                                                                                                                            <argument>
                                                                                                                                <expr>
                                                                                                                                    1
                                                                                                                                </expr>
                                                                                                                            </argument>
                                                                                                                            ,
                                                                                                                            <argument>
                                                                                                                                <expr>
                                                                                                                                    <call>
                                                                                                                                        <name>
                                                                                                                                            <name>
                                                                                                                                                Math</name>
                                                                                                                                            .
                                                                                                                                            <name>
                                                                                                                                                tan
                                                                                                                                            </name>
                                                                                                                                        </name>
                                                                                                                                        <argument_list>
                                                                                                                                            (
                                                                                                                                            <argument>
                                                                                                                                                <expr>
                                                                                                                                                    <name>
                                                                                                                                                        angle
                                                                                                                                                    </name>
                                                                                                                                                    *
                                                                                                                                                    <name>
                                                                                                                                                        <name>
                                                                                                                                                            Math</name>
                                                                                                                                                        .
                                                                                                                                                        <name>
                                                                                                                                                            PI
                                                                                                                                                        </name>
                                                                                                                                                    </name>
                                                                                                                                                    /
                                                                                                                                                    180
                                                                                                                                                </expr>
                                                                                                                                            </argument>
                                                                                                                                            )
                                                                                                                                        </argument_list>
                                                                                                                                    </call>
                                                                                                                                </expr>
                                                                                                                            </argument>
                                                                                                                            ,
                                                                                                                            <argument>
                                                                                                                                <expr>
                                                                                                                                    0
                                                                                                                                </expr>
                                                                                                                            </argument>
                                                                                                                            ,
                                                                                                                            <argument>
                                                                                                                                <expr>
                                                                                                                                    1
                                                                                                                                </expr>
                                                                                                                            </argument>
                                                                                                                            ,
                                                                                                                            <argument>
                                                                                                                                <expr>
                                                                                                                                    0
                                                                                                                                </expr>
                                                                                                                            </argument>
                                                                                                                            ,
                                                                                                                            <argument>
                                                                                                                                <expr>
                                                                                                                                    0
                                                                                                                                </expr>
                                                                                                                            </argument>
                                                                                                                            )
                                                                                                                        </argument_list>
                                                                                                                    </call>
                                                                                                                </expr>
                                                                                                            </argument>
                                                                                                            )
                                                                                                        </argument_list>
                                                                                                    </call>
                                                                                                </expr>
                                                                                                ;
                                                                                            </expr_stmt>

                                                                                            }
                                                                                        </block>
                                                                                    </then>
                                                                                    <else>else
                                                                                        <block>{
                                                                                            <throw>throw
                                                                                                <expr>new
                                                                                                    <call>
                                                                                                        <name>
                                                                                                            IOException
                                                                                                        </name>
                                                                                                        <argument_list>(
                                                                                                            <argument>
                                                                                                                <expr>
                                                                                                                    "Unknown
                                                                                                                    transform
                                                                                                                    " + <name>
                                                                                                                    type
                                                                                                                </name> +
                                                                                                                    " in
                                                                                                                    " +
                                                                                                                    <name>
                                                                                                                        str
                                                                                                                    </name>
                                                                                                                </expr>
                                                                                                            </argument>
                                                                                                            )
                                                                                                        </argument_list>
                                                                                                    </call>
                                                                                                </expr>
                                                                                                ;
                                                                                            </throw>
                                                                                            }
                                                                                        </block>
                                                                                    </else>
                                                                                </if>
                                                                            </else>
                                                                        </if>
                                                                    </else>
                                                                </if>
                                                            </else>
                                                        </if>
                                                    </else>
                                                </if>
                                            </else>
                                        </if>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>tt</name>.
                                                            <name>nextToken</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                    != ')'
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <throw>throw
                                                        <expr>new
                                                            <call>
                                                                <name>IOException</name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>"')' not found in transform " +
                                                                            <name>str</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </throw>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        }
                                    </block>
                                </while>
                                }
                            </block>
                        </then>
                    </if>
                    <return>return
                        <expr>
                            <name>t</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <function>
                <type>
                    <specifier>public</specifier>
                    <name><name>javax</name>.<name>swing</name>.<name>filechooser</name>.
                        <name>FileFilter</name>
                    </name>
                </type>
                <name>getFileFilter</name>
                <parameter_list>()</parameter_list>
                <block>{
                    <return>return
                        <expr>new
                            <call>
                                <name>ExtensionFileFilter</name>
                                <argument_list>(
                                    <argument>
                                        <expr>"Scalable Vector Graphics (SVG)"</expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>"svg"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <function>
                <type>
                    <specifier>public</specifier>
                    <name>JComponent</name>
                </type>
                <name>getInputFormatAccessory</name>
                <parameter_list>()</parameter_list>
                <block>{
                    <return>return
                        <expr>
                            <name>null</name>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <function>
                <type>
                    <specifier>public</specifier>
                    <name>void</name>
                </type>
                <name>read</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>File</name>
                            </type>
                            <name>file</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>Drawing</name>
                            </type>
                            <name>drawing</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <expr_stmt>
                        <expr>
                            <name><name>this</name>.
                                <name>url</name>
                            </name>
                            =
                            <call>
                                <name><name>file</name>.
                                    <name>toURL</name>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>BufferedInputStream</name>
                            </type>
                            <name>in</name> =
                            <init>
                                <expr>
                                    <name>null</name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <try>try
                        <block>{
                            <expr_stmt>
                                <expr>
                                    <name>in</name>
                                    = new
                                    <call>
                                        <name>BufferedInputStream</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>new
                                                    <call>
                                                        <name>FileInputStream</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>file</name>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                                ;
                            </expr_stmt>
                            <expr_stmt>
                                <expr>
                                    <call>
                                        <name>read</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>in</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>drawing</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                                ;
                            </expr_stmt>
                            }
                        </block>
                        <finally>finally
                            <block>{
                                <if>if
                                    <condition>(
                                        <expr>
                                            <name>in</name>
                                            !=
                                            <name>null</name>
                                        </expr>
                                        )
                                    </condition>
                                    <then>
                                        <block>{
                                            <expr_stmt>
                                                <expr>
                                                    <call>
                                                        <name><name>in</name>.
                                                            <name>close</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                </expr>
                                                ;
                                            </expr_stmt>
                                            }
                                        </block>
                                    </then>
                                </if>
                                }
                            </block>
                        </finally>
                    </try>
                    <expr_stmt>
                        <expr>
                            <name><name>this</name>.
                                <name>url</name>
                            </name>
                            =
                            <name>null</name>
                        </expr>
                        ;
                    </expr_stmt>
                    }
                </block>
            </function>

            <function>
                <type>
                    <specifier>public</specifier>
                    <name>boolean</name>
                </type>
                <name>isDataFlavorSupported</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>DataFlavor</name>
                            </type>
                            <name>flavor</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <block>{
                    <return>return
                        <expr>
                            <call>
                                <name><name>flavor</name>.
                                    <name>getPrimaryType</name>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                            .
                            <call>
                                <name>equals</name>
                                <argument_list>(
                                    <argument>
                                        <expr>"image"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                            &amp;&amp;
                            <call>
                                <name><name>flavor</name>.
                                    <name>getSubType</name>
                                </name>
                                <argument_list>()</argument_list>
                            </call>
                            .
                            <call>
                                <name>equals</name>
                                <argument_list>(
                                    <argument>
                                        <expr>"svg+xml"</expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </return>
                    }
                </block>
            </function>

            <function>
                <type>
                    <specifier>public</specifier>
                    <name>void</name>
                </type>
                <name>read</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>Transferable</name>
                            </type>
                            <name>t</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>Drawing</name>
                            </type>
                            <name>drawing</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>UnsupportedFlavorException</name>
                        </expr>
                    </argument>
                    ,
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>InputStream</name>
                            </type>
                            <name>in</name> =
                            <init>
                                <expr>
                                    <name>null</name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <try>try
                        <block>{
                            <expr_stmt>
                                <expr>
                                    <name>in</name>
                                    = (<name>InputStream</name>)
                                    <call>
                                        <name><name>t</name>.
                                            <name>getTransferData</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>new
                                                    <call>
                                                        <name>DataFlavor</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>"image/svg+xml"</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>"Image SVG"</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                                ;
                            </expr_stmt>
                            <expr_stmt>
                                <expr>
                                    <call>
                                        <name>read</name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name>in</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>drawing</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>false</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                                ;
                            </expr_stmt>
                            }
                        </block>
                        <finally>finally
                            <block>{
                                <if>if
                                    <condition>(
                                        <expr>
                                            <name>in</name>
                                            !=
                                            <name>null</name>
                                        </expr>
                                        )
                                    </condition>
                                    <then>
                                        <block>{
                                            <expr_stmt>
                                                <expr>
                                                    <call>
                                                        <name><name>in</name>.
                                                            <name>close</name>
                                                        </name>
                                                        <argument_list>()</argument_list>
                                                    </call>
                                                </expr>
                                                ;
                                            </expr_stmt>
                                            }
                                        </block>
                                    </then>
                                </if>
                                }
                            </block>
                        </finally>
                    </try>
                    }
                </block>
            </function>
            }
        </block>
    </class>
</unit>
