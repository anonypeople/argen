<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.sdml.info/srcML/src" language="Java"
      filename="C:\Users\dnader\git\biorimp\BIO-RIMP\test_data\code\xerces\src\org\apache\xerces\impl\XML11EntityScanner.java">
    <comment type="block">/*
        * Copyright 1999-2002,2004 The Apache Software Foundation.
        *
        * Licensed under the Apache License, Version 2.0 (the "License");
        * you may not use this file except in compliance with the License.
        * You may obtain a copy of the License at
        *
        * http://www.apache.org/licenses/LICENSE-2.0
        *
        * Unless required by applicable law or agreed to in writing, software
        * distributed under the License is distributed on an "AS IS" BASIS,
        * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
        * See the License for the specific language governing permissions and
        * limitations under the License.
        */
    </comment>

    <package>package
        <name><name>org</name>.<name>apache</name>.<name>xerces</name>.
            <name>impl</name>
        </name>
        ;
    </package>

    <import>import
        <name><name>java</name>.<name>io</name>.
            <name>IOException</name>
        </name>
        ;
    </import>

    <import>import
        <name><name>org</name>.<name>apache</name>.<name>xerces</name>.<name>impl</name>.<name>msg</name>.
            <name>XMLMessageFormatter</name>
        </name>
        ;
    </import>
    <import>import
        <name><name>org</name>.<name>apache</name>.<name>xerces</name>.<name>util</name>.
            <name>XMLChar</name>
        </name>
        ;
    </import>
    <import>import
        <name><name>org</name>.<name>apache</name>.<name>xerces</name>.<name>util</name>.
            <name>XML11Char</name>
        </name>
        ;
    </import>
    <import>import
        <name><name>org</name>.<name>apache</name>.<name>xerces</name>.<name>util</name>.
            <name>XMLStringBuffer</name>
        </name>
        ;
    </import>
    <import>import
        <name><name>org</name>.<name>apache</name>.<name>xerces</name>.<name>xni</name>.
            <name>QName</name>
        </name>
        ;
    </import>
    <import>import
        <name><name>org</name>.<name>apache</name>.<name>xerces</name>.<name>xni</name>.
            <name>XMLString</name>
        </name>
        ;
    </import>

    <comment type="javadoc">/**
        * Implements the entity scanner methods in
        * the context of XML 1.1.
        *
        * @xerces.internal
        *
        * @author Michael Glavassevich, IBM
        * @author Neil Graham, IBM
        * @version $Id: XML11EntityScanner.java,v 1.14 2004/10/04 21:45:49 mrglavas Exp $
        */
    </comment>

    <class>
        <specifier>public</specifier>
        class
        <name>XML11EntityScanner</name>
        <super>
            <extends>extends
                <name>XMLEntityScanner</name>
            </extends>
        </super>
        <block>{

            <comment type="line">//</comment>
            <comment type="line">// Constructors</comment>
            <comment type="line">//</comment>

            <comment type="javadoc">/** Default constructor. */</comment>
            <constructor>
                <specifier>public</specifier>
                <name>XML11EntityScanner</name>
                <parameter_list>()</parameter_list>
                <block>{
                    <expr_stmt>
                        <expr>
                            <call>
                                <name>super</name>
                                <argument_list>()</argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>
                    }
                </block>
            </constructor>
            <comment type="line">// &lt;init&gt;()</comment>

            <comment type="line">//</comment>
            <comment type="line">// XMLEntityScanner methods</comment>
            <comment type="line">//</comment>

            <comment type="javadoc">/**
                * Returns the next character on the input.
                * &lt;p&gt;
                * &lt;strong&gt;Note:&lt;/strong&gt; The character is &lt;em&gt;not&lt;/em&gt; consumed.
                *
                * @throws IOException Thrown if i/o error occurs.
                * @throws EOFException Thrown on end of file.
                */
            </comment>
            <function>
                <type>
                    <specifier>public</specifier>
                    <name>int</name>
                </type>
                <name>peekChar</name>
                <parameter_list>()</parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{

                    <comment type="line">// load more characters, if needed</comment>
                    <if>if
                        <condition>(
                            <expr>
                                <name><name>fCurrentEntity</name>.
                                    <name>position</name>
                                </name>
                                ==
                                <name><name>fCurrentEntity</name>.
                                    <name>count</name>
                                </name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name>load</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>true</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>

                    <comment type="line">// peek at character</comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>c</name> =
                            <init>
                                <expr>
                                    <name><name>fCurrentEntity</name>.
                                        <name>ch</name>
                                        <index>[
                                            <expr>
                                                <name><name>fCurrentEntity</name>.
                                                    <name>position</name>
                                                </name>
                                            </expr>
                                            ]
                                        </index>
                                    </name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <comment type="line">// return peeked character</comment>
                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>fCurrentEntity</name>.
                                        <name>isExternal</name>
                                    </name>
                                    <argument_list>()</argument_list>
                                </call>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <return>return
                                    <expr>(<name>c</name> != '\r' &amp;&amp; <name>c</name> != 0x85 &amp;&amp; <name>c
                                    </name> != 0x2028) ? <name>c</name> : '\n'
                                    </expr>
                                    ;
                                </return>
                                }
                            </block>
                        </then>
                        <else>else
                            <block>{
                                <return>return
                                    <expr>
                                        <name>c</name>
                                    </expr>
                                    ;
                                </return>
                                }
                            </block>
                        </else>
                    </if>

                    }
                </block>
            </function>
            <comment type="line">// peekChar():int</comment>

            <comment type="javadoc">/**
                * Returns the next character on the input.
                * &lt;p&gt;
                * &lt;strong&gt;Note:&lt;/strong&gt; The character is consumed.
                *
                * @throws IOException Thrown if i/o error occurs.
                * @throws EOFException Thrown on end of file.
                */
            </comment>
            <function>
                <type>
                    <specifier>public</specifier>
                    <name>int</name>
                </type>
                <name>scanChar</name>
                <parameter_list>()</parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{

                    <comment type="line">// load more characters, if needed</comment>
                    <if>if
                        <condition>(
                            <expr>
                                <name><name>fCurrentEntity</name>.
                                    <name>position</name>
                                </name>
                                ==
                                <name><name>fCurrentEntity</name>.
                                    <name>count</name>
                                </name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name>load</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>true</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>

                    <comment type="line">// scan character</comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>c</name> =
                            <init>
                                <expr>
                                    <name><name>fCurrentEntity</name>.
                                        <name>ch</name>
                                        <index>[
                                            <expr>
                                                <name><name>fCurrentEntity</name>.
                                                    <name>position</name>
                                                </name>
                                                ++
                                            </expr>
                                            ]
                                        </index>
                                    </name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>boolean</name>
                            </type>
                            <name>external</name> =
                            <init>
                                <expr>false</expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>c</name>
                                == '\n' ||
                                ((<name>c</name> == '\r' || <name>c</name> == 0x85 || <name>c</name> == 0x2028) &amp;&amp;
                                (<name>external</name> =
                                <call>
                                    <name><name>fCurrentEntity</name>.
                                        <name>isExternal</name>
                                    </name>
                                    <argument_list>()</argument_list>
                                </call>
                                ))
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name><name>fCurrentEntity</name>.
                                            <name>lineNumber</name>
                                        </name>
                                        ++
                                    </expr>
                                    ;
                                </expr_stmt>
                                <expr_stmt>
                                    <expr>
                                        <name><name>fCurrentEntity</name>.
                                            <name>columnNumber</name>
                                        </name>
                                        = 1
                                    </expr>
                                    ;
                                </expr_stmt>
                                <if>if
                                    <condition>(
                                        <expr>
                                            <name><name>fCurrentEntity</name>.
                                                <name>position</name>
                                            </name>
                                            ==
                                            <name><name>fCurrentEntity</name>.
                                                <name>count</name>
                                            </name>
                                        </expr>
                                        )
                                    </condition>
                                    <then>
                                        <block>{
                                            <expr_stmt>
                                                <expr>
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>ch</name>
                                                        <index>[<expr>0</expr>]
                                                        </index>
                                                    </name>
                                                    = (<name>char</name>)
                                                    <name>c</name>
                                                </expr>
                                                ;
                                            </expr_stmt>
                                            <expr_stmt>
                                                <expr>
                                                    <call>
                                                        <name>load</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>1</expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>false</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                ;
                                            </expr_stmt>
                                            }
                                        </block>
                                    </then>
                                </if>
                                <if>if
                                    <condition>(
                                        <expr>
                                            <name>c</name>
                                            == '\r' &amp;&amp;
                                            <name>external</name>
                                        </expr>
                                        )
                                    </condition>
                                    <then>
                                        <block>{
                                            <decl_stmt>
                                                <decl>
                                                    <type>
                                                        <name>int</name>
                                                    </type>
                                                    <name>cc</name> =
                                                    <init>
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>ch</name>
                                                                <index>[
                                                                    <expr>
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>position</name>
                                                                        </name>
                                                                        ++
                                                                    </expr>
                                                                    ]
                                                                </index>
                                                            </name>
                                                        </expr>
                                                    </init>
                                                </decl>
                                                ;
                                            </decl_stmt>
                                            <if>if
                                                <condition>(
                                                    <expr>
                                                        <name>cc</name>
                                                        != '\n' &amp;&amp; <name>cc</name> != 0x85
                                                    </expr>
                                                    )
                                                </condition>
                                                <then>
                                                    <block>{
                                                        <expr_stmt>
                                                            <expr>
                                                                <name><name>fCurrentEntity</name>.
                                                                    <name>position</name>
                                                                </name>
                                                                --
                                                            </expr>
                                                            ;
                                                        </expr_stmt>
                                                        }
                                                    </block>
                                                </then>
                                            </if>
                                            }
                                        </block>
                                    </then>
                                </if>
                                <expr_stmt>
                                    <expr>
                                        <name>c</name>
                                        = '\n'
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>

                    <comment type="line">// return character that was scanned</comment>
                    <expr_stmt>
                        <expr>
                            <name><name>fCurrentEntity</name>.
                                <name>columnNumber</name>
                            </name>
                            ++
                        </expr>
                        ;
                    </expr_stmt>
                    <return>return
                        <expr>
                            <name>c</name>
                        </expr>
                        ;
                    </return>

                    }
                </block>
            </function>
            <comment type="line">// scanChar():int</comment>

            <comment type="javadoc">/**
                * Returns a string matching the NMTOKEN production appearing immediately
                * on the input as a symbol, or null if NMTOKEN Name string is present.
                * &lt;p&gt;
                * &lt;strong&gt;Note:&lt;/strong&gt; The NMTOKEN characters are consumed.
                * &lt;p&gt;
                * &lt;strong&gt;Note:&lt;/strong&gt; The string returned must be a symbol. The
                * SymbolTable can be used for this purpose.
                *
                * @throws IOException Thrown if i/o error occurs.
                * @throws EOFException Thrown on end of file.
                *
                * @see org.apache.xerces.util.SymbolTable
                * @see org.apache.xerces.util.XML11Char#isXML11Name
                */
            </comment>
            <function>
                <type>
                    <specifier>public</specifier>
                    <name>String</name>
                </type>
                <name>scanNmtoken</name>
                <parameter_list>()</parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <comment type="line">// load more characters, if needed</comment>
                    <if>if
                        <condition>(
                            <expr>
                                <name><name>fCurrentEntity</name>.
                                    <name>position</name>
                                </name>
                                ==
                                <name><name>fCurrentEntity</name>.
                                    <name>count</name>
                                </name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name>load</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>true</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>

                    <comment type="line">// scan nmtoken</comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>offset</name> =
                            <init>
                                <expr>
                                    <name><name>fCurrentEntity</name>.
                                        <name>position</name>
                                    </name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <do>do
                        <block>{
                            <decl_stmt>
                                <decl>
                                    <type>
                                        <name>char</name>
                                    </type>
                                    <name>ch</name> =
                                    <init>
                                        <expr>
                                            <name><name>fCurrentEntity</name>.
                                                <name>ch</name>
                                                <index>[
                                                    <expr>
                                                        <name><name>fCurrentEntity</name>.
                                                            <name>position</name>
                                                        </name>
                                                    </expr>
                                                    ]
                                                </index>
                                            </name>
                                        </expr>
                                    </init>
                                </decl>
                                ;
                            </decl_stmt>
                            <if>if
                                <condition>(
                                    <expr>
                                        <call>
                                            <name><name>XML11Char</name>.
                                                <name>isXML11Name</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>ch</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <if>if
                                            <condition>(
                                                <expr>++
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>position</name>
                                                    </name>
                                                    ==
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>count</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <decl_stmt>
                                                        <decl>
                                                            <type>
                                                                <name>int</name>
                                                            </type>
                                                            <name>length</name> =
                                                            <init>
                                                                <expr>
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>position</name>
                                                                    </name>
                                                                    -
                                                                    <name>offset</name>
                                                                </expr>
                                                            </init>
                                                        </decl>
                                                        ;
                                                    </decl_stmt>
                                                    <if>if
                                                        <condition>(
                                                            <expr>
                                                                <name>length</name>
                                                                ==
                                                                <name><name>fCurrentEntity</name>.<name>ch</name>.
                                                                    <name>length</name>
                                                                </name>
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <block>{
                                                                <comment type="line">// bad luck we have to resize our
                                                                    buffer
                                                                </comment>
                                                                <decl_stmt>
                                                                    <decl>
                                                                        <type>
                                                                            <name>char</name>
                                                                            <index>[]</index>
                                                                        </type>
                                                                        <name>tmp</name> =
                                                                        <init>
                                                                            <expr>new
                                                                                <name>
                                                                                    <name>char</name>
                                                                                    <index>[
                                                                                        <expr>
                                                                                            <name><name>
                                                                                                fCurrentEntity</name>
                                                                                                .<name>ch</name>.
                                                                                                <name>length</name>
                                                                                            </name>
                                                                                            &lt;&lt; 1
                                                                                        </expr>
                                                                                        ]
                                                                                    </index>
                                                                                </name>
                                                                            </expr>
                                                                        </init>
                                                                    </decl>
                                                                    ;
                                                                </decl_stmt>
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>System</name>.
                                                                                <name>arraycopy</name>
                                                                            </name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name><name>
                                                                                            fCurrentEntity</name>.
                                                                                            <name>ch</name>
                                                                                        </name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>offset</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>tmp</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>0</expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>length</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>ch</name>
                                                                        </name>
                                                                        =
                                                                        <name>tmp</name>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                }
                                                            </block>
                                                        </then>
                                                        <else>else
                                                            <block>{
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>System</name>.
                                                                                <name>arraycopy</name>
                                                                            </name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name><name>
                                                                                            fCurrentEntity</name>.
                                                                                            <name>ch</name>
                                                                                        </name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>offset</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name><name>
                                                                                            fCurrentEntity</name>.
                                                                                            <name>ch</name>
                                                                                        </name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>0</expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>length</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                }
                                                            </block>
                                                        </else>
                                                    </if>
                                                    <expr_stmt>
                                                        <expr>
                                                            <name>offset</name>
                                                            = 0
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <if>if
                                                        <condition>(
                                                            <expr>
                                                                <call>
                                                                    <name>load</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>
                                                                                <name>length</name>
                                                                            </expr>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <expr>false</expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <block>{
                                                                <break>break;</break>
                                                                }
                                                            </block>
                                                        </then>
                                                    </if>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        }
                                    </block>
                                </then>
                                <else>else
                                    <if>if
                                        <condition>(
                                            <expr>
                                                <call>
                                                    <name><name>XML11Char</name>.
                                                        <name>isXML11NameHighSurrogate</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>ch</name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            )
                                        </condition>
                                        <then>
                                            <block>{
                                                <if>if
                                                    <condition>(
                                                        <expr>++
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>position</name>
                                                            </name>
                                                            ==
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>count</name>
                                                            </name>
                                                        </expr>
                                                        )
                                                    </condition>
                                                    <then>
                                                        <block>{
                                                            <decl_stmt>
                                                                <decl>
                                                                    <type>
                                                                        <name>int</name>
                                                                    </type>
                                                                    <name>length</name> =
                                                                    <init>
                                                                        <expr>
                                                                            <name><name>fCurrentEntity</name>.
                                                                                <name>position</name>
                                                                            </name>
                                                                            -
                                                                            <name>offset</name>
                                                                        </expr>
                                                                    </init>
                                                                </decl>
                                                                ;
                                                            </decl_stmt>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <name>length</name>
                                                                        ==
                                                                        <name><name>fCurrentEntity</name>.<name>
                                                                            ch</name>.
                                                                            <name>length</name>
                                                                        </name>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <comment type="line">// bad luck we have to
                                                                            resize our buffer
                                                                        </comment>
                                                                        <decl_stmt>
                                                                            <decl>
                                                                                <type>
                                                                                    <name>char</name>
                                                                                    <index>[]</index>
                                                                                </type>
                                                                                <name>tmp</name> =
                                                                                <init>
                                                                                    <expr>new
                                                                                        <name>
                                                                                            <name>char</name>
                                                                                            <index>[
                                                                                                <expr>
                                                                                                    <name><name>
                                                                                                        fCurrentEntity</name>
                                                                                                        .<name>ch</name>.
                                                                                                        <name>length
                                                                                                        </name>
                                                                                                    </name>
                                                                                                    &lt;&lt; 1
                                                                                                </expr>
                                                                                                ]
                                                                                            </index>
                                                                                        </name>
                                                                                    </expr>
                                                                                </init>
                                                                            </decl>
                                                                            ;
                                                                        </decl_stmt>
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>System</name>.
                                                                                        <name>arraycopy</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name><name>
                                                                                                    fCurrentEntity</name>
                                                                                                    .
                                                                                                    <name>ch</name>
                                                                                                </name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>offset</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>tmp</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>0</expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>length</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>ch</name>
                                                                                </name>
                                                                                =
                                                                                <name>tmp</name>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        }
                                                                    </block>
                                                                </then>
                                                                <else>else
                                                                    <block>{
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>System</name>.
                                                                                        <name>arraycopy</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name><name>
                                                                                                    fCurrentEntity</name>
                                                                                                    .
                                                                                                    <name>ch</name>
                                                                                                </name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>offset</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name><name>
                                                                                                    fCurrentEntity</name>
                                                                                                    .
                                                                                                    <name>ch</name>
                                                                                                </name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>0</expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>length</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        }
                                                                    </block>
                                                                </else>
                                                            </if>
                                                            <expr_stmt>
                                                                <expr>
                                                                    <name>offset</name>
                                                                    = 0
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <call>
                                                                            <name>load</name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>length</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>false</expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <expr_stmt>
                                                                            <expr>--
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>startPosition</name>
                                                                                </name>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <expr_stmt>
                                                                            <expr>--
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>position</name>
                                                                                </name>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <break>break;</break>
                                                                        }
                                                                    </block>
                                                                </then>
                                                            </if>
                                                            }
                                                        </block>
                                                    </then>
                                                </if>
                                                <decl_stmt>
                                                    <decl>
                                                        <type>
                                                            <name>char</name>
                                                        </type>
                                                        <name>ch2</name> =
                                                        <init>
                                                            <expr>
                                                                <name><name>fCurrentEntity</name>.
                                                                    <name>ch</name>
                                                                    <index>[
                                                                        <expr>
                                                                            <name><name>fCurrentEntity</name>.
                                                                                <name>position</name>
                                                                            </name>
                                                                        </expr>
                                                                        ]
                                                                    </index>
                                                                </name>
                                                            </expr>
                                                        </init>
                                                    </decl>
                                                    ;
                                                </decl_stmt>
                                                <if>if
                                                    <condition>(
                                                        <expr>!
                                                            <call>
                                                                <name><name>XMLChar</name>.
                                                                    <name>isLowSurrogate</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            <name>ch2</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                            ||
                                                            !
                                                            <call>
                                                                <name><name>XML11Char</name>.
                                                                    <name>isXML11Name</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            <call>
                                                                                <name><name>XMLChar</name>.
                                                                                    <name>supplemental</name>
                                                                                </name>
                                                                                <argument_list>(
                                                                                    <argument>
                                                                                        <expr>
                                                                                            <name>ch</name>
                                                                                        </expr>
                                                                                    </argument>
                                                                                    ,
                                                                                    <argument>
                                                                                        <expr>
                                                                                            <name>ch2</name>
                                                                                        </expr>
                                                                                    </argument>
                                                                                    )
                                                                                </argument_list>
                                                                            </call>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        )
                                                    </condition>
                                                    <then>
                                                        <block>{
                                                            <expr_stmt>
                                                                <expr>--
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>position</name>
                                                                    </name>
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            <break>break;</break>
                                                            }
                                                        </block>
                                                    </then>
                                                </if>
                                                <if>if
                                                    <condition>(
                                                        <expr>++
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>position</name>
                                                            </name>
                                                            ==
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>count</name>
                                                            </name>
                                                        </expr>
                                                        )
                                                    </condition>
                                                    <then>
                                                        <block>{
                                                            <decl_stmt>
                                                                <decl>
                                                                    <type>
                                                                        <name>int</name>
                                                                    </type>
                                                                    <name>length</name> =
                                                                    <init>
                                                                        <expr>
                                                                            <name><name>fCurrentEntity</name>.
                                                                                <name>position</name>
                                                                            </name>
                                                                            -
                                                                            <name>offset</name>
                                                                        </expr>
                                                                    </init>
                                                                </decl>
                                                                ;
                                                            </decl_stmt>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <name>length</name>
                                                                        ==
                                                                        <name><name>fCurrentEntity</name>.<name>
                                                                            ch</name>.
                                                                            <name>length</name>
                                                                        </name>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <comment type="line">// bad luck we have to
                                                                            resize our buffer
                                                                        </comment>
                                                                        <decl_stmt>
                                                                            <decl>
                                                                                <type>
                                                                                    <name>char</name>
                                                                                    <index>[]</index>
                                                                                </type>
                                                                                <name>tmp</name> =
                                                                                <init>
                                                                                    <expr>new
                                                                                        <name>
                                                                                            <name>char</name>
                                                                                            <index>[
                                                                                                <expr>
                                                                                                    <name><name>
                                                                                                        fCurrentEntity</name>
                                                                                                        .<name>ch</name>.
                                                                                                        <name>length
                                                                                                        </name>
                                                                                                    </name>
                                                                                                    &lt;&lt; 1
                                                                                                </expr>
                                                                                                ]
                                                                                            </index>
                                                                                        </name>
                                                                                    </expr>
                                                                                </init>
                                                                            </decl>
                                                                            ;
                                                                        </decl_stmt>
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>System</name>.
                                                                                        <name>arraycopy</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name><name>
                                                                                                    fCurrentEntity</name>
                                                                                                    .
                                                                                                    <name>ch</name>
                                                                                                </name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>offset</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>tmp</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>0</expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>length</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>ch</name>
                                                                                </name>
                                                                                =
                                                                                <name>tmp</name>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        }
                                                                    </block>
                                                                </then>
                                                                <else>else
                                                                    <block>{
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>System</name>.
                                                                                        <name>arraycopy</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name><name>
                                                                                                    fCurrentEntity</name>
                                                                                                    .
                                                                                                    <name>ch</name>
                                                                                                </name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>offset</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name><name>
                                                                                                    fCurrentEntity</name>
                                                                                                    .
                                                                                                    <name>ch</name>
                                                                                                </name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>0</expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>length</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        }
                                                                    </block>
                                                                </else>
                                                            </if>
                                                            <expr_stmt>
                                                                <expr>
                                                                    <name>offset</name>
                                                                    = 0
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <call>
                                                                            <name>load</name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>length</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>false</expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <break>break;</break>
                                                                        }
                                                                    </block>
                                                                </then>
                                                            </if>
                                                            }
                                                        </block>
                                                    </then>
                                                </if>
                                                }
                                            </block>
                                        </then>
                                        <else>else
                                            <block>{
                                                <break>break;</break>
                                                }
                                            </block>
                                        </else>
                                    </if>
                                </else>
                            </if>
                            }
                        </block>
                        while
                        <condition>(<expr>true</expr>)
                        </condition>
                        ;
                    </do>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>length</name> =
                            <init>
                                <expr>
                                    <name><name>fCurrentEntity</name>.
                                        <name>position</name>
                                    </name>
                                    -
                                    <name>offset</name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <name><name>fCurrentEntity</name>.
                                <name>columnNumber</name>
                            </name>
                            +=
                            <name>length</name>
                        </expr>
                        ;
                    </expr_stmt>

                    <comment type="line">// return nmtoken</comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>symbol</name> =
                            <init>
                                <expr>
                                    <name>null</name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>length</name>
                                &gt; 0
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name>symbol</name>
                                        =
                                        <call>
                                            <name><name>fSymbolTable</name>.
                                                <name>addSymbol</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name><name>fCurrentEntity</name>.
                                                            <name>ch</name>
                                                        </name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name>offset</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name>length</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>
                    <return>return
                        <expr>
                            <name>symbol</name>
                        </expr>
                        ;
                    </return>

                    }
                </block>
            </function>
            <comment type="line">// scanNmtoken():String</comment>

            <comment type="javadoc">/**
                * Returns a string matching the Name production appearing immediately
                * on the input as a symbol, or null if no Name string is present.
                * &lt;p&gt;
                * &lt;strong&gt;Note:&lt;/strong&gt; The Name characters are consumed.
                * &lt;p&gt;
                * &lt;strong&gt;Note:&lt;/strong&gt; The string returned must be a symbol. The
                * SymbolTable can be used for this purpose.
                *
                * @throws IOException Thrown if i/o error occurs.
                * @throws EOFException Thrown on end of file.
                *
                * @see org.apache.xerces.util.SymbolTable
                * @see org.apache.xerces.util.XML11Char#isXML11Name
                * @see org.apache.xerces.util.XML11Char#isXML11NameStart
                */
            </comment>
            <function>
                <type>
                    <specifier>public</specifier>
                    <name>String</name>
                </type>
                <name>scanName</name>
                <parameter_list>()</parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{
                    <comment type="line">// load more characters, if needed</comment>
                    <if>if
                        <condition>(
                            <expr>
                                <name><name>fCurrentEntity</name>.
                                    <name>position</name>
                                </name>
                                ==
                                <name><name>fCurrentEntity</name>.
                                    <name>count</name>
                                </name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name>load</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>true</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>

                    <comment type="line">// scan name</comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>offset</name> =
                            <init>
                                <expr>
                                    <name><name>fCurrentEntity</name>.
                                        <name>position</name>
                                    </name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>char</name>
                            </type>
                            <name>ch</name> =
                            <init>
                                <expr>
                                    <name><name>fCurrentEntity</name>.
                                        <name>ch</name>
                                        <index>[
                                            <expr>
                                                <name>offset</name>
                                            </expr>
                                            ]
                                        </index>
                                    </name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>XML11Char</name>.
                                        <name>isXML11NameStart</name>
                                    </name>
                                    <argument_list>(
                                        <argument>
                                            <expr>
                                                <name>ch</name>
                                            </expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <if>if
                                    <condition>(
                                        <expr>++
                                            <name><name>fCurrentEntity</name>.
                                                <name>position</name>
                                            </name>
                                            ==
                                            <name><name>fCurrentEntity</name>.
                                                <name>count</name>
                                            </name>
                                        </expr>
                                        )
                                    </condition>
                                    <then>
                                        <block>{
                                            <expr_stmt>
                                                <expr>
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>ch</name>
                                                        <index>[<expr>0</expr>]
                                                        </index>
                                                    </name>
                                                    =
                                                    <name>ch</name>
                                                </expr>
                                                ;
                                            </expr_stmt>
                                            <expr_stmt>
                                                <expr>
                                                    <name>offset</name>
                                                    = 0
                                                </expr>
                                                ;
                                            </expr_stmt>
                                            <if>if
                                                <condition>(
                                                    <expr>
                                                        <call>
                                                            <name>load</name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>1</expr>
                                                                </argument>
                                                                ,
                                                                <argument>
                                                                    <expr>false</expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                    )
                                                </condition>
                                                <then>
                                                    <block>{
                                                        <expr_stmt>
                                                            <expr>
                                                                <name><name>fCurrentEntity</name>.
                                                                    <name>columnNumber</name>
                                                                </name>
                                                                ++
                                                            </expr>
                                                            ;
                                                        </expr_stmt>
                                                        <decl_stmt>
                                                            <decl>
                                                                <type>
                                                                    <name>String</name>
                                                                </type>
                                                                <name>symbol</name> =
                                                                <init>
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>fSymbolTable</name>.
                                                                                <name>addSymbol</name>
                                                                            </name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name><name>
                                                                                            fCurrentEntity</name>.
                                                                                            <name>ch</name>
                                                                                        </name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>0</expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>1</expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                </init>
                                                            </decl>
                                                            ;
                                                        </decl_stmt>
                                                        <return>return
                                                            <expr>
                                                                <name>symbol</name>
                                                            </expr>
                                                            ;
                                                        </return>
                                                        }
                                                    </block>
                                                </then>
                                            </if>
                                            }
                                        </block>
                                    </then>
                                </if>
                                }
                            </block>
                        </then>
                        <else>else
                            <if>if
                                <condition>(
                                    <expr>
                                        <call>
                                            <name><name>XML11Char</name>.
                                                <name>isXML11NameHighSurrogate</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>ch</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <if>if
                                            <condition>(
                                                <expr>++
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>position</name>
                                                    </name>
                                                    ==
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>count</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <expr_stmt>
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>ch</name>
                                                                <index>[<expr>0</expr>]
                                                                </index>
                                                            </name>
                                                            =
                                                            <name>ch</name>
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <expr_stmt>
                                                        <expr>
                                                            <name>offset</name>
                                                            = 0
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <if>if
                                                        <condition>(
                                                            <expr>
                                                                <call>
                                                                    <name>load</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>1</expr>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <expr>false</expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <block>{
                                                                <expr_stmt>
                                                                    <expr>--
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>position</name>
                                                                        </name>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                <expr_stmt>
                                                                    <expr>--
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>startPosition</name>
                                                                        </name>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                <return>return
                                                                    <expr>
                                                                        <name>null</name>
                                                                    </expr>
                                                                    ;
                                                                </return>
                                                                }
                                                            </block>
                                                        </then>
                                                    </if>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <decl_stmt>
                                            <decl>
                                                <type>
                                                    <name>char</name>
                                                </type>
                                                <name>ch2</name> =
                                                <init>
                                                    <expr>
                                                        <name><name>fCurrentEntity</name>.
                                                            <name>ch</name>
                                                            <index>[
                                                                <expr>
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>position</name>
                                                                    </name>
                                                                </expr>
                                                                ]
                                                            </index>
                                                        </name>
                                                    </expr>
                                                </init>
                                            </decl>
                                            ;
                                        </decl_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>!
                                                    <call>
                                                        <name><name>XMLChar</name>.
                                                            <name>isLowSurrogate</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>ch2</name>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                    ||
                                                    !
                                                    <call>
                                                        <name><name>XML11Char</name>.
                                                            <name>isXML11NameStart</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <call>
                                                                        <name><name>XMLChar</name>.
                                                                            <name>supplemental</name>
                                                                        </name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>
                                                                                    <name>ch</name>
                                                                                </expr>
                                                                            </argument>
                                                                            ,
                                                                            <argument>
                                                                                <expr>
                                                                                    <name>ch2</name>
                                                                                </expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <expr_stmt>
                                                        <expr>--
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>position</name>
                                                            </name>
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <return>return
                                                        <expr>
                                                            <name>null</name>
                                                        </expr>
                                                        ;
                                                    </return>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <if>if
                                            <condition>(
                                                <expr>++
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>position</name>
                                                    </name>
                                                    ==
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>count</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <expr_stmt>
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>ch</name>
                                                                <index>[<expr>0</expr>]
                                                                </index>
                                                            </name>
                                                            =
                                                            <name>ch</name>
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <expr_stmt>
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>ch</name>
                                                                <index>[<expr>1</expr>]
                                                                </index>
                                                            </name>
                                                            =
                                                            <name>ch2</name>
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <expr_stmt>
                                                        <expr>
                                                            <name>offset</name>
                                                            = 0
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <if>if
                                                        <condition>(
                                                            <expr>
                                                                <call>
                                                                    <name>load</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>2</expr>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <expr>false</expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <block>{
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>columnNumber</name>
                                                                        </name>
                                                                        += 2
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                <decl_stmt>
                                                                    <decl>
                                                                        <type>
                                                                            <name>String</name>
                                                                        </type>
                                                                        <name>symbol</name> =
                                                                        <init>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>fSymbolTable</name>.
                                                                                        <name>addSymbol</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name><name>
                                                                                                    fCurrentEntity</name>
                                                                                                    .
                                                                                                    <name>ch</name>
                                                                                                </name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>0</expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>2</expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                        </init>
                                                                    </decl>
                                                                    ;
                                                                </decl_stmt>
                                                                <return>return
                                                                    <expr>
                                                                        <name>symbol</name>
                                                                    </expr>
                                                                    ;
                                                                </return>
                                                                }
                                                            </block>
                                                        </then>
                                                    </if>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        }
                                    </block>
                                </then>
                                <else>else
                                    <block>{
                                        <return>return
                                            <expr>
                                                <name>null</name>
                                            </expr>
                                            ;
                                        </return>
                                        }
                                    </block>
                                </else>
                            </if>
                        </else>
                    </if>

                    <do>do
                        <block>{
                            <expr_stmt>
                                <expr>
                                    <name>ch</name>
                                    =
                                    <name><name>fCurrentEntity</name>.
                                        <name>ch</name>
                                        <index>[
                                            <expr>
                                                <name><name>fCurrentEntity</name>.
                                                    <name>position</name>
                                                </name>
                                            </expr>
                                            ]
                                        </index>
                                    </name>
                                </expr>
                                ;
                            </expr_stmt>
                            <if>if
                                <condition>(
                                    <expr>
                                        <call>
                                            <name><name>XML11Char</name>.
                                                <name>isXML11Name</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>ch</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <if>if
                                            <condition>(
                                                <expr>++
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>position</name>
                                                    </name>
                                                    ==
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>count</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <decl_stmt>
                                                        <decl>
                                                            <type>
                                                                <name>int</name>
                                                            </type>
                                                            <name>length</name> =
                                                            <init>
                                                                <expr>
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>position</name>
                                                                    </name>
                                                                    -
                                                                    <name>offset</name>
                                                                </expr>
                                                            </init>
                                                        </decl>
                                                        ;
                                                    </decl_stmt>
                                                    <if>if
                                                        <condition>(
                                                            <expr>
                                                                <name>length</name>
                                                                ==
                                                                <name><name>fCurrentEntity</name>.<name>ch</name>.
                                                                    <name>length</name>
                                                                </name>
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <block>{
                                                                <comment type="line">// bad luck we have to resize our
                                                                    buffer
                                                                </comment>
                                                                <decl_stmt>
                                                                    <decl>
                                                                        <type>
                                                                            <name>char</name>
                                                                            <index>[]</index>
                                                                        </type>
                                                                        <name>tmp</name> =
                                                                        <init>
                                                                            <expr>new
                                                                                <name>
                                                                                    <name>char</name>
                                                                                    <index>[
                                                                                        <expr>
                                                                                            <name><name>
                                                                                                fCurrentEntity</name>
                                                                                                .<name>ch</name>.
                                                                                                <name>length</name>
                                                                                            </name>
                                                                                            &lt;&lt; 1
                                                                                        </expr>
                                                                                        ]
                                                                                    </index>
                                                                                </name>
                                                                            </expr>
                                                                        </init>
                                                                    </decl>
                                                                    ;
                                                                </decl_stmt>
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>System</name>.
                                                                                <name>arraycopy</name>
                                                                            </name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name><name>
                                                                                            fCurrentEntity</name>.
                                                                                            <name>ch</name>
                                                                                        </name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>offset</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>tmp</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>0</expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>length</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>ch</name>
                                                                        </name>
                                                                        =
                                                                        <name>tmp</name>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                }
                                                            </block>
                                                        </then>
                                                        <else>else
                                                            <block>{
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>System</name>.
                                                                                <name>arraycopy</name>
                                                                            </name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name><name>
                                                                                            fCurrentEntity</name>.
                                                                                            <name>ch</name>
                                                                                        </name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>offset</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name><name>
                                                                                            fCurrentEntity</name>.
                                                                                            <name>ch</name>
                                                                                        </name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>0</expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>length</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                }
                                                            </block>
                                                        </else>
                                                    </if>
                                                    <expr_stmt>
                                                        <expr>
                                                            <name>offset</name>
                                                            = 0
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <if>if
                                                        <condition>(
                                                            <expr>
                                                                <call>
                                                                    <name>load</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>
                                                                                <name>length</name>
                                                                            </expr>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <expr>false</expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <block>{
                                                                <break>break;</break>
                                                                }
                                                            </block>
                                                        </then>
                                                    </if>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        }
                                    </block>
                                </then>
                                <else>else
                                    <if>if
                                        <condition>(
                                            <expr>
                                                <call>
                                                    <name><name>XML11Char</name>.
                                                        <name>isXML11NameHighSurrogate</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>ch</name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            )
                                        </condition>
                                        <then>
                                            <block>{
                                                <if>if
                                                    <condition>(
                                                        <expr>++
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>position</name>
                                                            </name>
                                                            ==
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>count</name>
                                                            </name>
                                                        </expr>
                                                        )
                                                    </condition>
                                                    <then>
                                                        <block>{
                                                            <decl_stmt>
                                                                <decl>
                                                                    <type>
                                                                        <name>int</name>
                                                                    </type>
                                                                    <name>length</name> =
                                                                    <init>
                                                                        <expr>
                                                                            <name><name>fCurrentEntity</name>.
                                                                                <name>position</name>
                                                                            </name>
                                                                            -
                                                                            <name>offset</name>
                                                                        </expr>
                                                                    </init>
                                                                </decl>
                                                                ;
                                                            </decl_stmt>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <name>length</name>
                                                                        ==
                                                                        <name><name>fCurrentEntity</name>.<name>
                                                                            ch</name>.
                                                                            <name>length</name>
                                                                        </name>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <comment type="line">// bad luck we have to
                                                                            resize our buffer
                                                                        </comment>
                                                                        <decl_stmt>
                                                                            <decl>
                                                                                <type>
                                                                                    <name>char</name>
                                                                                    <index>[]</index>
                                                                                </type>
                                                                                <name>tmp</name> =
                                                                                <init>
                                                                                    <expr>new
                                                                                        <name>
                                                                                            <name>char</name>
                                                                                            <index>[
                                                                                                <expr>
                                                                                                    <name><name>
                                                                                                        fCurrentEntity</name>
                                                                                                        .<name>ch</name>.
                                                                                                        <name>length
                                                                                                        </name>
                                                                                                    </name>
                                                                                                    &lt;&lt; 1
                                                                                                </expr>
                                                                                                ]
                                                                                            </index>
                                                                                        </name>
                                                                                    </expr>
                                                                                </init>
                                                                            </decl>
                                                                            ;
                                                                        </decl_stmt>
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>System</name>.
                                                                                        <name>arraycopy</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name><name>
                                                                                                    fCurrentEntity</name>
                                                                                                    .
                                                                                                    <name>ch</name>
                                                                                                </name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>offset</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>tmp</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>0</expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>length</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>ch</name>
                                                                                </name>
                                                                                =
                                                                                <name>tmp</name>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        }
                                                                    </block>
                                                                </then>
                                                                <else>else
                                                                    <block>{
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>System</name>.
                                                                                        <name>arraycopy</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name><name>
                                                                                                    fCurrentEntity</name>
                                                                                                    .
                                                                                                    <name>ch</name>
                                                                                                </name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>offset</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name><name>
                                                                                                    fCurrentEntity</name>
                                                                                                    .
                                                                                                    <name>ch</name>
                                                                                                </name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>0</expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>length</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        }
                                                                    </block>
                                                                </else>
                                                            </if>
                                                            <expr_stmt>
                                                                <expr>
                                                                    <name>offset</name>
                                                                    = 0
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <call>
                                                                            <name>load</name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>length</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>false</expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <expr_stmt>
                                                                            <expr>--
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>position</name>
                                                                                </name>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <expr_stmt>
                                                                            <expr>--
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>startPosition</name>
                                                                                </name>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <break>break;</break>
                                                                        }
                                                                    </block>
                                                                </then>
                                                            </if>
                                                            }
                                                        </block>
                                                    </then>
                                                </if>
                                                <decl_stmt>
                                                    <decl>
                                                        <type>
                                                            <name>char</name>
                                                        </type>
                                                        <name>ch2</name> =
                                                        <init>
                                                            <expr>
                                                                <name><name>fCurrentEntity</name>.
                                                                    <name>ch</name>
                                                                    <index>[
                                                                        <expr>
                                                                            <name><name>fCurrentEntity</name>.
                                                                                <name>position</name>
                                                                            </name>
                                                                        </expr>
                                                                        ]
                                                                    </index>
                                                                </name>
                                                            </expr>
                                                        </init>
                                                    </decl>
                                                    ;
                                                </decl_stmt>
                                                <if>if
                                                    <condition>(
                                                        <expr>!
                                                            <call>
                                                                <name><name>XMLChar</name>.
                                                                    <name>isLowSurrogate</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            <name>ch2</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                            ||
                                                            !
                                                            <call>
                                                                <name><name>XML11Char</name>.
                                                                    <name>isXML11Name</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            <call>
                                                                                <name><name>XMLChar</name>.
                                                                                    <name>supplemental</name>
                                                                                </name>
                                                                                <argument_list>(
                                                                                    <argument>
                                                                                        <expr>
                                                                                            <name>ch</name>
                                                                                        </expr>
                                                                                    </argument>
                                                                                    ,
                                                                                    <argument>
                                                                                        <expr>
                                                                                            <name>ch2</name>
                                                                                        </expr>
                                                                                    </argument>
                                                                                    )
                                                                                </argument_list>
                                                                            </call>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        )
                                                    </condition>
                                                    <then>
                                                        <block>{
                                                            <expr_stmt>
                                                                <expr>--
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>position</name>
                                                                    </name>
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            <break>break;</break>
                                                            }
                                                        </block>
                                                    </then>
                                                </if>
                                                <if>if
                                                    <condition>(
                                                        <expr>++
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>position</name>
                                                            </name>
                                                            ==
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>count</name>
                                                            </name>
                                                        </expr>
                                                        )
                                                    </condition>
                                                    <then>
                                                        <block>{
                                                            <decl_stmt>
                                                                <decl>
                                                                    <type>
                                                                        <name>int</name>
                                                                    </type>
                                                                    <name>length</name> =
                                                                    <init>
                                                                        <expr>
                                                                            <name><name>fCurrentEntity</name>.
                                                                                <name>position</name>
                                                                            </name>
                                                                            -
                                                                            <name>offset</name>
                                                                        </expr>
                                                                    </init>
                                                                </decl>
                                                                ;
                                                            </decl_stmt>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <name>length</name>
                                                                        ==
                                                                        <name><name>fCurrentEntity</name>.<name>
                                                                            ch</name>.
                                                                            <name>length</name>
                                                                        </name>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <comment type="line">// bad luck we have to
                                                                            resize our buffer
                                                                        </comment>
                                                                        <decl_stmt>
                                                                            <decl>
                                                                                <type>
                                                                                    <name>char</name>
                                                                                    <index>[]</index>
                                                                                </type>
                                                                                <name>tmp</name> =
                                                                                <init>
                                                                                    <expr>new
                                                                                        <name>
                                                                                            <name>char</name>
                                                                                            <index>[
                                                                                                <expr>
                                                                                                    <name><name>
                                                                                                        fCurrentEntity</name>
                                                                                                        .<name>ch</name>.
                                                                                                        <name>length
                                                                                                        </name>
                                                                                                    </name>
                                                                                                    &lt;&lt; 1
                                                                                                </expr>
                                                                                                ]
                                                                                            </index>
                                                                                        </name>
                                                                                    </expr>
                                                                                </init>
                                                                            </decl>
                                                                            ;
                                                                        </decl_stmt>
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>System</name>.
                                                                                        <name>arraycopy</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name><name>
                                                                                                    fCurrentEntity</name>
                                                                                                    .
                                                                                                    <name>ch</name>
                                                                                                </name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>offset</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>tmp</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>0</expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>length</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>ch</name>
                                                                                </name>
                                                                                =
                                                                                <name>tmp</name>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        }
                                                                    </block>
                                                                </then>
                                                                <else>else
                                                                    <block>{
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>System</name>.
                                                                                        <name>arraycopy</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name><name>
                                                                                                    fCurrentEntity</name>
                                                                                                    .
                                                                                                    <name>ch</name>
                                                                                                </name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>offset</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name><name>
                                                                                                    fCurrentEntity</name>
                                                                                                    .
                                                                                                    <name>ch</name>
                                                                                                </name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>0</expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>length</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        }
                                                                    </block>
                                                                </else>
                                                            </if>
                                                            <expr_stmt>
                                                                <expr>
                                                                    <name>offset</name>
                                                                    = 0
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <call>
                                                                            <name>load</name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>length</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>false</expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <break>break;</break>
                                                                        }
                                                                    </block>
                                                                </then>
                                                            </if>
                                                            }
                                                        </block>
                                                    </then>
                                                </if>
                                                }
                                            </block>
                                        </then>
                                        <else>else
                                            <block>{
                                                <break>break;</break>
                                                }
                                            </block>
                                        </else>
                                    </if>
                                </else>
                            </if>
                            }
                        </block>
                        while
                        <condition>(<expr>true</expr>)
                        </condition>
                        ;
                    </do>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>length</name> =
                            <init>
                                <expr>
                                    <name><name>fCurrentEntity</name>.
                                        <name>position</name>
                                    </name>
                                    -
                                    <name>offset</name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <name><name>fCurrentEntity</name>.
                                <name>columnNumber</name>
                            </name>
                            +=
                            <name>length</name>
                        </expr>
                        ;
                    </expr_stmt>

                    <comment type="line">// return name</comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>symbol</name> =
                            <init>
                                <expr>
                                    <name>null</name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>length</name>
                                &gt; 0
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name>symbol</name>
                                        =
                                        <call>
                                            <name><name>fSymbolTable</name>.
                                                <name>addSymbol</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name><name>fCurrentEntity</name>.
                                                            <name>ch</name>
                                                        </name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name>offset</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name>length</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>
                    <return>return
                        <expr>
                            <name>symbol</name>
                        </expr>
                        ;
                    </return>

                    }
                </block>
            </function>
            <comment type="line">// scanName():String</comment>

            <comment type="javadoc">/**
                * Returns a string matching the NCName production appearing immediately
                * on the input as a symbol, or null if no NCName string is present.
                * &lt;p&gt;
                * &lt;strong&gt;Note:&lt;/strong&gt; The NCName characters are consumed.
                * &lt;p&gt;
                * &lt;strong&gt;Note:&lt;/strong&gt; The string returned must be a symbol. The
                * SymbolTable can be used for this purpose.
                *
                * @throws IOException Thrown if i/o error occurs.
                * @throws EOFException Thrown on end of file.
                *
                * @see org.apache.xerces.util.SymbolTable
                * @see org.apache.xerces.util.XML11Char#isXML11NCName
                * @see org.apache.xerces.util.XML11Char#isXML11NCNameStart
                */
            </comment>
            <function>
                <type>
                    <specifier>public</specifier>
                    <name>String</name>
                </type>
                <name>scanNCName</name>
                <parameter_list>()</parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{

                    <comment type="line">// load more characters, if needed</comment>
                    <if>if
                        <condition>(
                            <expr>
                                <name><name>fCurrentEntity</name>.
                                    <name>position</name>
                                </name>
                                ==
                                <name><name>fCurrentEntity</name>.
                                    <name>count</name>
                                </name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name>load</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>true</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>

                    <comment type="line">// scan name</comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>offset</name> =
                            <init>
                                <expr>
                                    <name><name>fCurrentEntity</name>.
                                        <name>position</name>
                                    </name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>char</name>
                            </type>
                            <name>ch</name> =
                            <init>
                                <expr>
                                    <name><name>fCurrentEntity</name>.
                                        <name>ch</name>
                                        <index>[
                                            <expr>
                                                <name>offset</name>
                                            </expr>
                                            ]
                                        </index>
                                    </name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>XML11Char</name>.
                                        <name>isXML11NCNameStart</name>
                                    </name>
                                    <argument_list>(
                                        <argument>
                                            <expr>
                                                <name>ch</name>
                                            </expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <if>if
                                    <condition>(
                                        <expr>++
                                            <name><name>fCurrentEntity</name>.
                                                <name>position</name>
                                            </name>
                                            ==
                                            <name><name>fCurrentEntity</name>.
                                                <name>count</name>
                                            </name>
                                        </expr>
                                        )
                                    </condition>
                                    <then>
                                        <block>{
                                            <expr_stmt>
                                                <expr>
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>ch</name>
                                                        <index>[<expr>0</expr>]
                                                        </index>
                                                    </name>
                                                    =
                                                    <name>ch</name>
                                                </expr>
                                                ;
                                            </expr_stmt>
                                            <expr_stmt>
                                                <expr>
                                                    <name>offset</name>
                                                    = 0
                                                </expr>
                                                ;
                                            </expr_stmt>
                                            <if>if
                                                <condition>(
                                                    <expr>
                                                        <call>
                                                            <name>load</name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>1</expr>
                                                                </argument>
                                                                ,
                                                                <argument>
                                                                    <expr>false</expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                    )
                                                </condition>
                                                <then>
                                                    <block>{
                                                        <expr_stmt>
                                                            <expr>
                                                                <name><name>fCurrentEntity</name>.
                                                                    <name>columnNumber</name>
                                                                </name>
                                                                ++
                                                            </expr>
                                                            ;
                                                        </expr_stmt>
                                                        <decl_stmt>
                                                            <decl>
                                                                <type>
                                                                    <name>String</name>
                                                                </type>
                                                                <name>symbol</name> =
                                                                <init>
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>fSymbolTable</name>.
                                                                                <name>addSymbol</name>
                                                                            </name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name><name>
                                                                                            fCurrentEntity</name>.
                                                                                            <name>ch</name>
                                                                                        </name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>0</expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>1</expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                </init>
                                                            </decl>
                                                            ;
                                                        </decl_stmt>
                                                        <return>return
                                                            <expr>
                                                                <name>symbol</name>
                                                            </expr>
                                                            ;
                                                        </return>
                                                        }
                                                    </block>
                                                </then>
                                            </if>
                                            }
                                        </block>
                                    </then>
                                </if>
                                }
                            </block>
                        </then>
                        <else>else
                            <if>if
                                <condition>(
                                    <expr>
                                        <call>
                                            <name><name>XML11Char</name>.
                                                <name>isXML11NameHighSurrogate</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>ch</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <if>if
                                            <condition>(
                                                <expr>++
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>position</name>
                                                    </name>
                                                    ==
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>count</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <expr_stmt>
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>ch</name>
                                                                <index>[<expr>0</expr>]
                                                                </index>
                                                            </name>
                                                            =
                                                            <name>ch</name>
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <expr_stmt>
                                                        <expr>
                                                            <name>offset</name>
                                                            = 0
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <if>if
                                                        <condition>(
                                                            <expr>
                                                                <call>
                                                                    <name>load</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>1</expr>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <expr>false</expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <block>{
                                                                <expr_stmt>
                                                                    <expr>--
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>position</name>
                                                                        </name>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                <expr_stmt>
                                                                    <expr>--
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>startPosition</name>
                                                                        </name>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                <return>return
                                                                    <expr>
                                                                        <name>null</name>
                                                                    </expr>
                                                                    ;
                                                                </return>
                                                                }
                                                            </block>
                                                        </then>
                                                    </if>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <decl_stmt>
                                            <decl>
                                                <type>
                                                    <name>char</name>
                                                </type>
                                                <name>ch2</name> =
                                                <init>
                                                    <expr>
                                                        <name><name>fCurrentEntity</name>.
                                                            <name>ch</name>
                                                            <index>[
                                                                <expr>
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>position</name>
                                                                    </name>
                                                                </expr>
                                                                ]
                                                            </index>
                                                        </name>
                                                    </expr>
                                                </init>
                                            </decl>
                                            ;
                                        </decl_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>!
                                                    <call>
                                                        <name><name>XMLChar</name>.
                                                            <name>isLowSurrogate</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>ch2</name>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                    ||
                                                    !
                                                    <call>
                                                        <name><name>XML11Char</name>.
                                                            <name>isXML11NCNameStart</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <call>
                                                                        <name><name>XMLChar</name>.
                                                                            <name>supplemental</name>
                                                                        </name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>
                                                                                    <name>ch</name>
                                                                                </expr>
                                                                            </argument>
                                                                            ,
                                                                            <argument>
                                                                                <expr>
                                                                                    <name>ch2</name>
                                                                                </expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <expr_stmt>
                                                        <expr>--
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>position</name>
                                                            </name>
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <return>return
                                                        <expr>
                                                            <name>null</name>
                                                        </expr>
                                                        ;
                                                    </return>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <if>if
                                            <condition>(
                                                <expr>++
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>position</name>
                                                    </name>
                                                    ==
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>count</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <expr_stmt>
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>ch</name>
                                                                <index>[<expr>0</expr>]
                                                                </index>
                                                            </name>
                                                            =
                                                            <name>ch</name>
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <expr_stmt>
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>ch</name>
                                                                <index>[<expr>1</expr>]
                                                                </index>
                                                            </name>
                                                            =
                                                            <name>ch2</name>
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <expr_stmt>
                                                        <expr>
                                                            <name>offset</name>
                                                            = 0
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <if>if
                                                        <condition>(
                                                            <expr>
                                                                <call>
                                                                    <name>load</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>2</expr>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <expr>false</expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <block>{
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>columnNumber</name>
                                                                        </name>
                                                                        += 2
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                <decl_stmt>
                                                                    <decl>
                                                                        <type>
                                                                            <name>String</name>
                                                                        </type>
                                                                        <name>symbol</name> =
                                                                        <init>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>fSymbolTable</name>.
                                                                                        <name>addSymbol</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name><name>
                                                                                                    fCurrentEntity</name>
                                                                                                    .
                                                                                                    <name>ch</name>
                                                                                                </name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>0</expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>2</expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                        </init>
                                                                    </decl>
                                                                    ;
                                                                </decl_stmt>
                                                                <return>return
                                                                    <expr>
                                                                        <name>symbol</name>
                                                                    </expr>
                                                                    ;
                                                                </return>
                                                                }
                                                            </block>
                                                        </then>
                                                    </if>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        }
                                    </block>
                                </then>
                                <else>else
                                    <block>{
                                        <return>return
                                            <expr>
                                                <name>null</name>
                                            </expr>
                                            ;
                                        </return>
                                        }
                                    </block>
                                </else>
                            </if>
                        </else>
                    </if>

                    <do>do
                        <block>{
                            <expr_stmt>
                                <expr>
                                    <name>ch</name>
                                    =
                                    <name><name>fCurrentEntity</name>.
                                        <name>ch</name>
                                        <index>[
                                            <expr>
                                                <name><name>fCurrentEntity</name>.
                                                    <name>position</name>
                                                </name>
                                            </expr>
                                            ]
                                        </index>
                                    </name>
                                </expr>
                                ;
                            </expr_stmt>
                            <if>if
                                <condition>(
                                    <expr>
                                        <call>
                                            <name><name>XML11Char</name>.
                                                <name>isXML11NCName</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>ch</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <if>if
                                            <condition>(
                                                <expr>++
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>position</name>
                                                    </name>
                                                    ==
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>count</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <decl_stmt>
                                                        <decl>
                                                            <type>
                                                                <name>int</name>
                                                            </type>
                                                            <name>length</name> =
                                                            <init>
                                                                <expr>
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>position</name>
                                                                    </name>
                                                                    -
                                                                    <name>offset</name>
                                                                </expr>
                                                            </init>
                                                        </decl>
                                                        ;
                                                    </decl_stmt>
                                                    <if>if
                                                        <condition>(
                                                            <expr>
                                                                <name>length</name>
                                                                ==
                                                                <name><name>fCurrentEntity</name>.<name>ch</name>.
                                                                    <name>length</name>
                                                                </name>
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <block>{
                                                                <comment type="line">// bad luck we have to resize our
                                                                    buffer
                                                                </comment>
                                                                <decl_stmt>
                                                                    <decl>
                                                                        <type>
                                                                            <name>char</name>
                                                                            <index>[]</index>
                                                                        </type>
                                                                        <name>tmp</name> =
                                                                        <init>
                                                                            <expr>new
                                                                                <name>
                                                                                    <name>char</name>
                                                                                    <index>[
                                                                                        <expr>
                                                                                            <name><name>
                                                                                                fCurrentEntity</name>
                                                                                                .<name>ch</name>.
                                                                                                <name>length</name>
                                                                                            </name>
                                                                                            &lt;&lt; 1
                                                                                        </expr>
                                                                                        ]
                                                                                    </index>
                                                                                </name>
                                                                            </expr>
                                                                        </init>
                                                                    </decl>
                                                                    ;
                                                                </decl_stmt>
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>System</name>.
                                                                                <name>arraycopy</name>
                                                                            </name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name><name>
                                                                                            fCurrentEntity</name>.
                                                                                            <name>ch</name>
                                                                                        </name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>offset</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>tmp</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>0</expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>length</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>ch</name>
                                                                        </name>
                                                                        =
                                                                        <name>tmp</name>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                }
                                                            </block>
                                                        </then>
                                                        <else>else
                                                            <block>{
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>System</name>.
                                                                                <name>arraycopy</name>
                                                                            </name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name><name>
                                                                                            fCurrentEntity</name>.
                                                                                            <name>ch</name>
                                                                                        </name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>offset</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name><name>
                                                                                            fCurrentEntity</name>.
                                                                                            <name>ch</name>
                                                                                        </name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>0</expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>length</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                }
                                                            </block>
                                                        </else>
                                                    </if>
                                                    <expr_stmt>
                                                        <expr>
                                                            <name>offset</name>
                                                            = 0
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <if>if
                                                        <condition>(
                                                            <expr>
                                                                <call>
                                                                    <name>load</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>
                                                                                <name>length</name>
                                                                            </expr>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <expr>false</expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <block>{
                                                                <break>break;</break>
                                                                }
                                                            </block>
                                                        </then>
                                                    </if>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        }
                                    </block>
                                </then>
                                <else>else
                                    <if>if
                                        <condition>(
                                            <expr>
                                                <call>
                                                    <name><name>XML11Char</name>.
                                                        <name>isXML11NameHighSurrogate</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>ch</name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            )
                                        </condition>
                                        <then>
                                            <block>{
                                                <if>if
                                                    <condition>(
                                                        <expr>++
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>position</name>
                                                            </name>
                                                            ==
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>count</name>
                                                            </name>
                                                        </expr>
                                                        )
                                                    </condition>
                                                    <then>
                                                        <block>{
                                                            <decl_stmt>
                                                                <decl>
                                                                    <type>
                                                                        <name>int</name>
                                                                    </type>
                                                                    <name>length</name> =
                                                                    <init>
                                                                        <expr>
                                                                            <name><name>fCurrentEntity</name>.
                                                                                <name>position</name>
                                                                            </name>
                                                                            -
                                                                            <name>offset</name>
                                                                        </expr>
                                                                    </init>
                                                                </decl>
                                                                ;
                                                            </decl_stmt>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <name>length</name>
                                                                        ==
                                                                        <name><name>fCurrentEntity</name>.<name>
                                                                            ch</name>.
                                                                            <name>length</name>
                                                                        </name>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <comment type="line">// bad luck we have to
                                                                            resize our buffer
                                                                        </comment>
                                                                        <decl_stmt>
                                                                            <decl>
                                                                                <type>
                                                                                    <name>char</name>
                                                                                    <index>[]</index>
                                                                                </type>
                                                                                <name>tmp</name> =
                                                                                <init>
                                                                                    <expr>new
                                                                                        <name>
                                                                                            <name>char</name>
                                                                                            <index>[
                                                                                                <expr>
                                                                                                    <name><name>
                                                                                                        fCurrentEntity</name>
                                                                                                        .<name>ch</name>.
                                                                                                        <name>length
                                                                                                        </name>
                                                                                                    </name>
                                                                                                    &lt;&lt; 1
                                                                                                </expr>
                                                                                                ]
                                                                                            </index>
                                                                                        </name>
                                                                                    </expr>
                                                                                </init>
                                                                            </decl>
                                                                            ;
                                                                        </decl_stmt>
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>System</name>.
                                                                                        <name>arraycopy</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name><name>
                                                                                                    fCurrentEntity</name>
                                                                                                    .
                                                                                                    <name>ch</name>
                                                                                                </name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>offset</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>tmp</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>0</expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>length</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>ch</name>
                                                                                </name>
                                                                                =
                                                                                <name>tmp</name>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        }
                                                                    </block>
                                                                </then>
                                                                <else>else
                                                                    <block>{
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>System</name>.
                                                                                        <name>arraycopy</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name><name>
                                                                                                    fCurrentEntity</name>
                                                                                                    .
                                                                                                    <name>ch</name>
                                                                                                </name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>offset</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name><name>
                                                                                                    fCurrentEntity</name>
                                                                                                    .
                                                                                                    <name>ch</name>
                                                                                                </name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>0</expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>length</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        }
                                                                    </block>
                                                                </else>
                                                            </if>
                                                            <expr_stmt>
                                                                <expr>
                                                                    <name>offset</name>
                                                                    = 0
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <call>
                                                                            <name>load</name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>length</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>false</expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <expr_stmt>
                                                                            <expr>--
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>startPosition</name>
                                                                                </name>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <expr_stmt>
                                                                            <expr>--
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>position</name>
                                                                                </name>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <break>break;</break>
                                                                        }
                                                                    </block>
                                                                </then>
                                                            </if>
                                                            }
                                                        </block>
                                                    </then>
                                                </if>
                                                <decl_stmt>
                                                    <decl>
                                                        <type>
                                                            <name>char</name>
                                                        </type>
                                                        <name>ch2</name> =
                                                        <init>
                                                            <expr>
                                                                <name><name>fCurrentEntity</name>.
                                                                    <name>ch</name>
                                                                    <index>[
                                                                        <expr>
                                                                            <name><name>fCurrentEntity</name>.
                                                                                <name>position</name>
                                                                            </name>
                                                                        </expr>
                                                                        ]
                                                                    </index>
                                                                </name>
                                                            </expr>
                                                        </init>
                                                    </decl>
                                                    ;
                                                </decl_stmt>
                                                <if>if
                                                    <condition>(
                                                        <expr>!
                                                            <call>
                                                                <name><name>XMLChar</name>.
                                                                    <name>isLowSurrogate</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            <name>ch2</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                            ||
                                                            !
                                                            <call>
                                                                <name><name>XML11Char</name>.
                                                                    <name>isXML11NCName</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            <call>
                                                                                <name><name>XMLChar</name>.
                                                                                    <name>supplemental</name>
                                                                                </name>
                                                                                <argument_list>(
                                                                                    <argument>
                                                                                        <expr>
                                                                                            <name>ch</name>
                                                                                        </expr>
                                                                                    </argument>
                                                                                    ,
                                                                                    <argument>
                                                                                        <expr>
                                                                                            <name>ch2</name>
                                                                                        </expr>
                                                                                    </argument>
                                                                                    )
                                                                                </argument_list>
                                                                            </call>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        )
                                                    </condition>
                                                    <then>
                                                        <block>{
                                                            <expr_stmt>
                                                                <expr>--
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>position</name>
                                                                    </name>
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            <break>break;</break>
                                                            }
                                                        </block>
                                                    </then>
                                                </if>
                                                <if>if
                                                    <condition>(
                                                        <expr>++
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>position</name>
                                                            </name>
                                                            ==
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>count</name>
                                                            </name>
                                                        </expr>
                                                        )
                                                    </condition>
                                                    <then>
                                                        <block>{
                                                            <decl_stmt>
                                                                <decl>
                                                                    <type>
                                                                        <name>int</name>
                                                                    </type>
                                                                    <name>length</name> =
                                                                    <init>
                                                                        <expr>
                                                                            <name><name>fCurrentEntity</name>.
                                                                                <name>position</name>
                                                                            </name>
                                                                            -
                                                                            <name>offset</name>
                                                                        </expr>
                                                                    </init>
                                                                </decl>
                                                                ;
                                                            </decl_stmt>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <name>length</name>
                                                                        ==
                                                                        <name><name>fCurrentEntity</name>.<name>
                                                                            ch</name>.
                                                                            <name>length</name>
                                                                        </name>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <comment type="line">// bad luck we have to
                                                                            resize our buffer
                                                                        </comment>
                                                                        <decl_stmt>
                                                                            <decl>
                                                                                <type>
                                                                                    <name>char</name>
                                                                                    <index>[]</index>
                                                                                </type>
                                                                                <name>tmp</name> =
                                                                                <init>
                                                                                    <expr>new
                                                                                        <name>
                                                                                            <name>char</name>
                                                                                            <index>[
                                                                                                <expr>
                                                                                                    <name><name>
                                                                                                        fCurrentEntity</name>
                                                                                                        .<name>ch</name>.
                                                                                                        <name>length
                                                                                                        </name>
                                                                                                    </name>
                                                                                                    &lt;&lt; 1
                                                                                                </expr>
                                                                                                ]
                                                                                            </index>
                                                                                        </name>
                                                                                    </expr>
                                                                                </init>
                                                                            </decl>
                                                                            ;
                                                                        </decl_stmt>
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>System</name>.
                                                                                        <name>arraycopy</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name><name>
                                                                                                    fCurrentEntity</name>
                                                                                                    .
                                                                                                    <name>ch</name>
                                                                                                </name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>offset</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>tmp</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>0</expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>length</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>ch</name>
                                                                                </name>
                                                                                =
                                                                                <name>tmp</name>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        }
                                                                    </block>
                                                                </then>
                                                                <else>else
                                                                    <block>{
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>System</name>.
                                                                                        <name>arraycopy</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name><name>
                                                                                                    fCurrentEntity</name>
                                                                                                    .
                                                                                                    <name>ch</name>
                                                                                                </name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>offset</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name><name>
                                                                                                    fCurrentEntity</name>
                                                                                                    .
                                                                                                    <name>ch</name>
                                                                                                </name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>0</expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>length</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        }
                                                                    </block>
                                                                </else>
                                                            </if>
                                                            <expr_stmt>
                                                                <expr>
                                                                    <name>offset</name>
                                                                    = 0
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <call>
                                                                            <name>load</name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>length</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>false</expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <break>break;</break>
                                                                        }
                                                                    </block>
                                                                </then>
                                                            </if>
                                                            }
                                                        </block>
                                                    </then>
                                                </if>
                                                }
                                            </block>
                                        </then>
                                        <else>else
                                            <block>{
                                                <break>break;</break>
                                                }
                                            </block>
                                        </else>
                                    </if>
                                </else>
                            </if>
                            }
                        </block>
                        while
                        <condition>(<expr>true</expr>)
                        </condition>
                        ;
                    </do>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>length</name> =
                            <init>
                                <expr>
                                    <name><name>fCurrentEntity</name>.
                                        <name>position</name>
                                    </name>
                                    -
                                    <name>offset</name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <name><name>fCurrentEntity</name>.
                                <name>columnNumber</name>
                            </name>
                            +=
                            <name>length</name>
                        </expr>
                        ;
                    </expr_stmt>

                    <comment type="line">// return name</comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>symbol</name> =
                            <init>
                                <expr>
                                    <name>null</name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>length</name>
                                &gt; 0
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name>symbol</name>
                                        =
                                        <call>
                                            <name><name>fSymbolTable</name>.
                                                <name>addSymbol</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name><name>fCurrentEntity</name>.
                                                            <name>ch</name>
                                                        </name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name>offset</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name>length</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>
                    <return>return
                        <expr>
                            <name>symbol</name>
                        </expr>
                        ;
                    </return>

                    }
                </block>
            </function>
            <comment type="line">// scanNCName():String</comment>

            <comment type="javadoc">/**
                * Scans a qualified name from the input, setting the fields of the
                * QName structure appropriately.
                * &lt;p&gt;
                * &lt;strong&gt;Note:&lt;/strong&gt; The qualified name characters are consumed.
                * &lt;p&gt;
                * &lt;strong&gt;Note:&lt;/strong&gt; The strings used to set the values of the
                * QName structure must be symbols. The SymbolTable can be used for
                * this purpose.
                *
                * @param qname The qualified name structure to fill.
                *
                * @return Returns true if a qualified name appeared immediately on
                * the input and was scanned, false otherwise.
                *
                * @throws IOException Thrown if i/o error occurs.
                * @throws EOFException Thrown on end of file.
                *
                * @see org.apache.xerces.util.SymbolTable
                * @see org.apache.xerces.util.XML11Char#isXML11Name
                * @see org.apache.xerces.util.XML11Char#isXML11NameStart
                */
            </comment>
            <function>
                <type>
                    <specifier>public</specifier>
                    <name>boolean</name>
                </type>
                <name>scanQName</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>QName</name>
                            </type>
                            <name>qname</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{

                    <comment type="line">// load more characters, if needed</comment>
                    <if>if
                        <condition>(
                            <expr>
                                <name><name>fCurrentEntity</name>.
                                    <name>position</name>
                                </name>
                                ==
                                <name><name>fCurrentEntity</name>.
                                    <name>count</name>
                                </name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name>load</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>true</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>

                    <comment type="line">// scan qualified name</comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>offset</name> =
                            <init>
                                <expr>
                                    <name><name>fCurrentEntity</name>.
                                        <name>position</name>
                                    </name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>char</name>
                            </type>
                            <name>ch</name> =
                            <init>
                                <expr>
                                    <name><name>fCurrentEntity</name>.
                                        <name>ch</name>
                                        <index>[
                                            <expr>
                                                <name>offset</name>
                                            </expr>
                                            ]
                                        </index>
                                    </name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>XML11Char</name>.
                                        <name>isXML11NCNameStart</name>
                                    </name>
                                    <argument_list>(
                                        <argument>
                                            <expr>
                                                <name>ch</name>
                                            </expr>
                                        </argument>
                                        )
                                    </argument_list>
                                </call>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <if>if
                                    <condition>(
                                        <expr>++
                                            <name><name>fCurrentEntity</name>.
                                                <name>position</name>
                                            </name>
                                            ==
                                            <name><name>fCurrentEntity</name>.
                                                <name>count</name>
                                            </name>
                                        </expr>
                                        )
                                    </condition>
                                    <then>
                                        <block>{
                                            <expr_stmt>
                                                <expr>
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>ch</name>
                                                        <index>[<expr>0</expr>]
                                                        </index>
                                                    </name>
                                                    =
                                                    <name>ch</name>
                                                </expr>
                                                ;
                                            </expr_stmt>
                                            <expr_stmt>
                                                <expr>
                                                    <name>offset</name>
                                                    = 0
                                                </expr>
                                                ;
                                            </expr_stmt>
                                            <if>if
                                                <condition>(
                                                    <expr>
                                                        <call>
                                                            <name>load</name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>1</expr>
                                                                </argument>
                                                                ,
                                                                <argument>
                                                                    <expr>false</expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                    )
                                                </condition>
                                                <then>
                                                    <block>{
                                                        <expr_stmt>
                                                            <expr>
                                                                <name><name>fCurrentEntity</name>.
                                                                    <name>columnNumber</name>
                                                                </name>
                                                                ++
                                                            </expr>
                                                            ;
                                                        </expr_stmt>
                                                        <decl_stmt>
                                                            <decl>
                                                                <type>
                                                                    <name>String</name>
                                                                </type>
                                                                <name>name</name> =
                                                                <init>
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>fSymbolTable</name>.
                                                                                <name>addSymbol</name>
                                                                            </name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name><name>
                                                                                            fCurrentEntity</name>.
                                                                                            <name>ch</name>
                                                                                        </name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>0</expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>1</expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                </init>
                                                            </decl>
                                                            ;
                                                        </decl_stmt>
                                                        <expr_stmt>
                                                            <expr>
                                                                <call>
                                                                    <name><name>qname</name>.
                                                                        <name>setValues</name>
                                                                    </name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>
                                                                                <name>null</name>
                                                                            </expr>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <expr>
                                                                                <name>name</name>
                                                                            </expr>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <expr>
                                                                                <name>name</name>
                                                                            </expr>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <expr>
                                                                                <name>null</name>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            ;
                                                        </expr_stmt>
                                                        <return>return <expr>true</expr>;
                                                        </return>
                                                        }
                                                    </block>
                                                </then>
                                            </if>
                                            }
                                        </block>
                                    </then>
                                </if>
                                }
                            </block>
                        </then>
                        <else>else
                            <if>if
                                <condition>(
                                    <expr>
                                        <call>
                                            <name><name>XML11Char</name>.
                                                <name>isXML11NameHighSurrogate</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>ch</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <if>if
                                            <condition>(
                                                <expr>++
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>position</name>
                                                    </name>
                                                    ==
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>count</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <expr_stmt>
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>ch</name>
                                                                <index>[<expr>0</expr>]
                                                                </index>
                                                            </name>
                                                            =
                                                            <name>ch</name>
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <expr_stmt>
                                                        <expr>
                                                            <name>offset</name>
                                                            = 0
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <if>if
                                                        <condition>(
                                                            <expr>
                                                                <call>
                                                                    <name>load</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>1</expr>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <expr>false</expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <block>{
                                                                <expr_stmt>
                                                                    <expr>--
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>startPosition</name>
                                                                        </name>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                <expr_stmt>
                                                                    <expr>--
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>position</name>
                                                                        </name>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                <return>return <expr>false</expr>;
                                                                </return>
                                                                }
                                                            </block>
                                                        </then>
                                                    </if>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <decl_stmt>
                                            <decl>
                                                <type>
                                                    <name>char</name>
                                                </type>
                                                <name>ch2</name> =
                                                <init>
                                                    <expr>
                                                        <name><name>fCurrentEntity</name>.
                                                            <name>ch</name>
                                                            <index>[
                                                                <expr>
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>position</name>
                                                                    </name>
                                                                </expr>
                                                                ]
                                                            </index>
                                                        </name>
                                                    </expr>
                                                </init>
                                            </decl>
                                            ;
                                        </decl_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>!
                                                    <call>
                                                        <name><name>XMLChar</name>.
                                                            <name>isLowSurrogate</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>ch2</name>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                    ||
                                                    !
                                                    <call>
                                                        <name><name>XML11Char</name>.
                                                            <name>isXML11NCNameStart</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <call>
                                                                        <name><name>XMLChar</name>.
                                                                            <name>supplemental</name>
                                                                        </name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>
                                                                                    <name>ch</name>
                                                                                </expr>
                                                                            </argument>
                                                                            ,
                                                                            <argument>
                                                                                <expr>
                                                                                    <name>ch2</name>
                                                                                </expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <expr_stmt>
                                                        <expr>--
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>position</name>
                                                            </name>
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <return>return <expr>false</expr>;
                                                    </return>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <if>if
                                            <condition>(
                                                <expr>++
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>position</name>
                                                    </name>
                                                    ==
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>count</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <expr_stmt>
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>ch</name>
                                                                <index>[<expr>0</expr>]
                                                                </index>
                                                            </name>
                                                            =
                                                            <name>ch</name>
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <expr_stmt>
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>ch</name>
                                                                <index>[<expr>1</expr>]
                                                                </index>
                                                            </name>
                                                            =
                                                            <name>ch2</name>
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <expr_stmt>
                                                        <expr>
                                                            <name>offset</name>
                                                            = 0
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <if>if
                                                        <condition>(
                                                            <expr>
                                                                <call>
                                                                    <name>load</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>2</expr>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <expr>false</expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <block>{
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>columnNumber</name>
                                                                        </name>
                                                                        += 2
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                <decl_stmt>
                                                                    <decl>
                                                                        <type>
                                                                            <name>String</name>
                                                                        </type>
                                                                        <name>name</name> =
                                                                        <init>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>fSymbolTable</name>.
                                                                                        <name>addSymbol</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name><name>
                                                                                                    fCurrentEntity</name>
                                                                                                    .
                                                                                                    <name>ch</name>
                                                                                                </name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>0</expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>2</expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                        </init>
                                                                    </decl>
                                                                    ;
                                                                </decl_stmt>
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>qname</name>.
                                                                                <name>setValues</name>
                                                                            </name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>null</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>name</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>name</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>null</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                <return>return <expr>true</expr>;
                                                                </return>
                                                                }
                                                            </block>
                                                        </then>
                                                    </if>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        }
                                    </block>
                                </then>
                                <else>else
                                    <block>{
                                        <return>return <expr>false</expr>;
                                        </return>
                                        }
                                    </block>
                                </else>
                            </if>
                        </else>
                    </if>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>index</name> =
                            <init>
                                <expr>-1</expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>boolean</name>
                            </type>
                            <name>sawIncompleteSurrogatePair</name> =
                            <init>
                                <expr>false</expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <do>do
                        <block>{
                            <expr_stmt>
                                <expr>
                                    <name>ch</name>
                                    =
                                    <name><name>fCurrentEntity</name>.
                                        <name>ch</name>
                                        <index>[
                                            <expr>
                                                <name><name>fCurrentEntity</name>.
                                                    <name>position</name>
                                                </name>
                                            </expr>
                                            ]
                                        </index>
                                    </name>
                                </expr>
                                ;
                            </expr_stmt>
                            <if>if
                                <condition>(
                                    <expr>
                                        <call>
                                            <name><name>XML11Char</name>.
                                                <name>isXML11Name</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>ch</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <name>ch</name>
                                                    == ':'
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <if>if
                                                        <condition>(
                                                            <expr>
                                                                <name>index</name>
                                                                != -1
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <block>{
                                                                <break>break;</break>
                                                                }
                                                            </block>
                                                        </then>
                                                    </if>
                                                    <expr_stmt>
                                                        <expr>
                                                            <name>index</name>
                                                            =
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>position</name>
                                                            </name>
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        <if>if
                                            <condition>(
                                                <expr>++
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>position</name>
                                                    </name>
                                                    ==
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>count</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <decl_stmt>
                                                        <decl>
                                                            <type>
                                                                <name>int</name>
                                                            </type>
                                                            <name>length</name> =
                                                            <init>
                                                                <expr>
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>position</name>
                                                                    </name>
                                                                    -
                                                                    <name>offset</name>
                                                                </expr>
                                                            </init>
                                                        </decl>
                                                        ;
                                                    </decl_stmt>
                                                    <if>if
                                                        <condition>(
                                                            <expr>
                                                                <name>length</name>
                                                                ==
                                                                <name><name>fCurrentEntity</name>.<name>ch</name>.
                                                                    <name>length</name>
                                                                </name>
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <block>{
                                                                <comment type="line">// bad luck we have to resize our
                                                                    buffer
                                                                </comment>
                                                                <decl_stmt>
                                                                    <decl>
                                                                        <type>
                                                                            <name>char</name>
                                                                            <index>[]</index>
                                                                        </type>
                                                                        <name>tmp</name> =
                                                                        <init>
                                                                            <expr>new
                                                                                <name>
                                                                                    <name>char</name>
                                                                                    <index>[
                                                                                        <expr>
                                                                                            <name><name>
                                                                                                fCurrentEntity</name>
                                                                                                .<name>ch</name>.
                                                                                                <name>length</name>
                                                                                            </name>
                                                                                            &lt;&lt; 1
                                                                                        </expr>
                                                                                        ]
                                                                                    </index>
                                                                                </name>
                                                                            </expr>
                                                                        </init>
                                                                    </decl>
                                                                    ;
                                                                </decl_stmt>
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>System</name>.
                                                                                <name>arraycopy</name>
                                                                            </name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name><name>
                                                                                            fCurrentEntity</name>.
                                                                                            <name>ch</name>
                                                                                        </name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>offset</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>tmp</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>0</expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>length</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>ch</name>
                                                                        </name>
                                                                        =
                                                                        <name>tmp</name>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                }
                                                            </block>
                                                        </then>
                                                        <else>else
                                                            <block>{
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <call>
                                                                            <name><name>System</name>.
                                                                                <name>arraycopy</name>
                                                                            </name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name><name>
                                                                                            fCurrentEntity</name>.
                                                                                            <name>ch</name>
                                                                                        </name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>offset</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name><name>
                                                                                            fCurrentEntity</name>.
                                                                                            <name>ch</name>
                                                                                        </name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>0</expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>length</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                }
                                                            </block>
                                                        </else>
                                                    </if>
                                                    <if>if
                                                        <condition>(
                                                            <expr>
                                                                <name>index</name>
                                                                != -1
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <block>{
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <name>index</name>
                                                                        = <name>index</name> -
                                                                        <name>offset</name>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                }
                                                            </block>
                                                        </then>
                                                    </if>
                                                    <expr_stmt>
                                                        <expr>
                                                            <name>offset</name>
                                                            = 0
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <if>if
                                                        <condition>(
                                                            <expr>
                                                                <call>
                                                                    <name>load</name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>
                                                                                <name>length</name>
                                                                            </expr>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <expr>false</expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <block>{
                                                                <break>break;</break>
                                                                }
                                                            </block>
                                                        </then>
                                                    </if>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        }
                                    </block>
                                </then>
                                <else>else
                                    <if>if
                                        <condition>(
                                            <expr>
                                                <call>
                                                    <name><name>XML11Char</name>.
                                                        <name>isXML11NameHighSurrogate</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name>ch</name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            )
                                        </condition>
                                        <then>
                                            <block>{
                                                <if>if
                                                    <condition>(
                                                        <expr>++
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>position</name>
                                                            </name>
                                                            ==
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>count</name>
                                                            </name>
                                                        </expr>
                                                        )
                                                    </condition>
                                                    <then>
                                                        <block>{
                                                            <decl_stmt>
                                                                <decl>
                                                                    <type>
                                                                        <name>int</name>
                                                                    </type>
                                                                    <name>length</name> =
                                                                    <init>
                                                                        <expr>
                                                                            <name><name>fCurrentEntity</name>.
                                                                                <name>position</name>
                                                                            </name>
                                                                            -
                                                                            <name>offset</name>
                                                                        </expr>
                                                                    </init>
                                                                </decl>
                                                                ;
                                                            </decl_stmt>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <name>length</name>
                                                                        ==
                                                                        <name><name>fCurrentEntity</name>.<name>
                                                                            ch</name>.
                                                                            <name>length</name>
                                                                        </name>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <comment type="line">// bad luck we have to
                                                                            resize our buffer
                                                                        </comment>
                                                                        <decl_stmt>
                                                                            <decl>
                                                                                <type>
                                                                                    <name>char</name>
                                                                                    <index>[]</index>
                                                                                </type>
                                                                                <name>tmp</name> =
                                                                                <init>
                                                                                    <expr>new
                                                                                        <name>
                                                                                            <name>char</name>
                                                                                            <index>[
                                                                                                <expr>
                                                                                                    <name><name>
                                                                                                        fCurrentEntity</name>
                                                                                                        .<name>ch</name>.
                                                                                                        <name>length
                                                                                                        </name>
                                                                                                    </name>
                                                                                                    &lt;&lt; 1
                                                                                                </expr>
                                                                                                ]
                                                                                            </index>
                                                                                        </name>
                                                                                    </expr>
                                                                                </init>
                                                                            </decl>
                                                                            ;
                                                                        </decl_stmt>
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>System</name>.
                                                                                        <name>arraycopy</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name><name>
                                                                                                    fCurrentEntity</name>
                                                                                                    .
                                                                                                    <name>ch</name>
                                                                                                </name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>offset</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>tmp</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>0</expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>length</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>ch</name>
                                                                                </name>
                                                                                =
                                                                                <name>tmp</name>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        }
                                                                    </block>
                                                                </then>
                                                                <else>else
                                                                    <block>{
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>System</name>.
                                                                                        <name>arraycopy</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name><name>
                                                                                                    fCurrentEntity</name>
                                                                                                    .
                                                                                                    <name>ch</name>
                                                                                                </name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>offset</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name><name>
                                                                                                    fCurrentEntity</name>
                                                                                                    .
                                                                                                    <name>ch</name>
                                                                                                </name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>0</expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>length</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        }
                                                                    </block>
                                                                </else>
                                                            </if>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <name>index</name>
                                                                        != -1
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name>index</name>
                                                                                = <name>index</name> -
                                                                                <name>offset</name>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        }
                                                                    </block>
                                                                </then>
                                                            </if>
                                                            <expr_stmt>
                                                                <expr>
                                                                    <name>offset</name>
                                                                    = 0
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <call>
                                                                            <name>load</name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>length</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>false</expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name>sawIncompleteSurrogatePair</name>
                                                                                = true
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <expr_stmt>
                                                                            <expr>--
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>startPosition</name>
                                                                                </name>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <expr_stmt>
                                                                            <expr>--
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>position</name>
                                                                                </name>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <break>break;</break>
                                                                        }
                                                                    </block>
                                                                </then>
                                                            </if>
                                                            }
                                                        </block>
                                                    </then>
                                                </if>
                                                <decl_stmt>
                                                    <decl>
                                                        <type>
                                                            <name>char</name>
                                                        </type>
                                                        <name>ch2</name> =
                                                        <init>
                                                            <expr>
                                                                <name><name>fCurrentEntity</name>.
                                                                    <name>ch</name>
                                                                    <index>[
                                                                        <expr>
                                                                            <name><name>fCurrentEntity</name>.
                                                                                <name>position</name>
                                                                            </name>
                                                                        </expr>
                                                                        ]
                                                                    </index>
                                                                </name>
                                                            </expr>
                                                        </init>
                                                    </decl>
                                                    ;
                                                </decl_stmt>
                                                <if>if
                                                    <condition>(
                                                        <expr>!
                                                            <call>
                                                                <name><name>XMLChar</name>.
                                                                    <name>isLowSurrogate</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            <name>ch2</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                            ||
                                                            !
                                                            <call>
                                                                <name><name>XML11Char</name>.
                                                                    <name>isXML11Name</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            <call>
                                                                                <name><name>XMLChar</name>.
                                                                                    <name>supplemental</name>
                                                                                </name>
                                                                                <argument_list>(
                                                                                    <argument>
                                                                                        <expr>
                                                                                            <name>ch</name>
                                                                                        </expr>
                                                                                    </argument>
                                                                                    ,
                                                                                    <argument>
                                                                                        <expr>
                                                                                            <name>ch2</name>
                                                                                        </expr>
                                                                                    </argument>
                                                                                    )
                                                                                </argument_list>
                                                                            </call>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        )
                                                    </condition>
                                                    <then>
                                                        <block>{
                                                            <expr_stmt>
                                                                <expr>
                                                                    <name>sawIncompleteSurrogatePair</name>
                                                                    = true
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            <expr_stmt>
                                                                <expr>--
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>position</name>
                                                                    </name>
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            <break>break;</break>
                                                            }
                                                        </block>
                                                    </then>
                                                </if>
                                                <if>if
                                                    <condition>(
                                                        <expr>++
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>position</name>
                                                            </name>
                                                            ==
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>count</name>
                                                            </name>
                                                        </expr>
                                                        )
                                                    </condition>
                                                    <then>
                                                        <block>{
                                                            <decl_stmt>
                                                                <decl>
                                                                    <type>
                                                                        <name>int</name>
                                                                    </type>
                                                                    <name>length</name> =
                                                                    <init>
                                                                        <expr>
                                                                            <name><name>fCurrentEntity</name>.
                                                                                <name>position</name>
                                                                            </name>
                                                                            -
                                                                            <name>offset</name>
                                                                        </expr>
                                                                    </init>
                                                                </decl>
                                                                ;
                                                            </decl_stmt>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <name>length</name>
                                                                        ==
                                                                        <name><name>fCurrentEntity</name>.<name>
                                                                            ch</name>.
                                                                            <name>length</name>
                                                                        </name>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <comment type="line">// bad luck we have to
                                                                            resize our buffer
                                                                        </comment>
                                                                        <decl_stmt>
                                                                            <decl>
                                                                                <type>
                                                                                    <name>char</name>
                                                                                    <index>[]</index>
                                                                                </type>
                                                                                <name>tmp</name> =
                                                                                <init>
                                                                                    <expr>new
                                                                                        <name>
                                                                                            <name>char</name>
                                                                                            <index>[
                                                                                                <expr>
                                                                                                    <name><name>
                                                                                                        fCurrentEntity</name>
                                                                                                        .<name>ch</name>.
                                                                                                        <name>length
                                                                                                        </name>
                                                                                                    </name>
                                                                                                    &lt;&lt; 1
                                                                                                </expr>
                                                                                                ]
                                                                                            </index>
                                                                                        </name>
                                                                                    </expr>
                                                                                </init>
                                                                            </decl>
                                                                            ;
                                                                        </decl_stmt>
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>System</name>.
                                                                                        <name>arraycopy</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name><name>
                                                                                                    fCurrentEntity</name>
                                                                                                    .
                                                                                                    <name>ch</name>
                                                                                                </name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>offset</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>tmp</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>0</expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>length</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>ch</name>
                                                                                </name>
                                                                                =
                                                                                <name>tmp</name>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        }
                                                                    </block>
                                                                </then>
                                                                <else>else
                                                                    <block>{
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>System</name>.
                                                                                        <name>arraycopy</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name><name>
                                                                                                    fCurrentEntity</name>
                                                                                                    .
                                                                                                    <name>ch</name>
                                                                                                </name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>offset</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name><name>
                                                                                                    fCurrentEntity</name>
                                                                                                    .
                                                                                                    <name>ch</name>
                                                                                                </name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>0</expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>length</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        }
                                                                    </block>
                                                                </else>
                                                            </if>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <name>index</name>
                                                                        != -1
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name>index</name>
                                                                                = <name>index</name> -
                                                                                <name>offset</name>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        }
                                                                    </block>
                                                                </then>
                                                            </if>
                                                            <expr_stmt>
                                                                <expr>
                                                                    <name>offset</name>
                                                                    = 0
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <call>
                                                                            <name>load</name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>
                                                                                        <name>length</name>
                                                                                    </expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>false</expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <break>break;</break>
                                                                        }
                                                                    </block>
                                                                </then>
                                                            </if>
                                                            }
                                                        </block>
                                                    </then>
                                                </if>
                                                }
                                            </block>
                                        </then>
                                        <else>else
                                            <block>{
                                                <break>break;</break>
                                                }
                                            </block>
                                        </else>
                                    </if>
                                </else>
                            </if>
                            }
                        </block>
                        while
                        <condition>(<expr>true</expr>)
                        </condition>
                        ;
                    </do>

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>length</name> =
                            <init>
                                <expr>
                                    <name><name>fCurrentEntity</name>.
                                        <name>position</name>
                                    </name>
                                    -
                                    <name>offset</name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <name><name>fCurrentEntity</name>.
                                <name>columnNumber</name>
                            </name>
                            +=
                            <name>length</name>
                        </expr>
                        ;
                    </expr_stmt>

                    <if>if
                        <condition>(
                            <expr>
                                <name>length</name>
                                &gt; 0
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <decl_stmt>
                                    <decl>
                                        <type>
                                            <name>String</name>
                                        </type>
                                        <name>prefix</name> =
                                        <init>
                                            <expr>
                                                <name>null</name>
                                            </expr>
                                        </init>
                                    </decl>
                                    ;
                                </decl_stmt>
                                <decl_stmt>
                                    <decl>
                                        <type>
                                            <name>String</name>
                                        </type>
                                        <name>localpart</name> =
                                        <init>
                                            <expr>
                                                <name>null</name>
                                            </expr>
                                        </init>
                                    </decl>
                                    ;
                                </decl_stmt>
                                <decl_stmt>
                                    <decl>
                                        <type>
                                            <name>String</name>
                                        </type>
                                        <name>rawname</name> =
                                        <init>
                                            <expr>
                                                <call>
                                                    <name><name>fSymbolTable</name>.
                                                        <name>addSymbol</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name><name>fCurrentEntity</name>.
                                                                    <name>ch</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name>offset</name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name>length</name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                        </init>
                                    </decl>
                                    ;
                                </decl_stmt>
                                <if>if
                                    <condition>(
                                        <expr>
                                            <name>index</name>
                                            != -1
                                        </expr>
                                        )
                                    </condition>
                                    <then>
                                        <block>{
                                            <decl_stmt>
                                                <decl>
                                                    <type>
                                                        <name>int</name>
                                                    </type>
                                                    <name>prefixLength</name> =
                                                    <init>
                                                        <expr>
                                                            <name>index</name>
                                                            -
                                                            <name>offset</name>
                                                        </expr>
                                                    </init>
                                                </decl>
                                                ;
                                            </decl_stmt>
                                            <expr_stmt>
                                                <expr>
                                                    <name>prefix</name>
                                                    =
                                                    <call>
                                                        <name><name>fSymbolTable</name>.
                                                            <name>addSymbol</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>ch</name>
                                                                    </name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>offset</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>prefixLength</name>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                ;
                                            </expr_stmt>
                                            <decl_stmt>
                                                <decl>
                                                    <type>
                                                        <name>int</name>
                                                    </type>
                                                    <name>len</name> =
                                                    <init>
                                                        <expr>
                                                            <name>length</name>
                                                            - <name>prefixLength</name> - 1
                                                        </expr>
                                                    </init>
                                                </decl>
                                                ;
                                            </decl_stmt>
                                            <decl_stmt>
                                                <decl>
                                                    <type>
                                                        <name>int</name>
                                                    </type>
                                                    <name>startLocal</name> =
                                                    <init>
                                                        <expr>
                                                            <name>index</name>
                                                            +1
                                                        </expr>
                                                    </init>
                                                </decl>
                                                ;
                                            </decl_stmt>
                                            <if>if
                                                <condition>(
                                                    <expr>!
                                                        <call>
                                                            <name><name>XML11Char</name>.
                                                                <name>isXML11NCNameStart</name>
                                                            </name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>ch</name>
                                                                            <index>[
                                                                                <expr>
                                                                                    <name>startLocal</name>
                                                                                </expr>
                                                                                ]
                                                                            </index>
                                                                        </name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                        &amp;&amp;
                                                        (!
                                                        <call>
                                                            <name><name>XML11Char</name>.
                                                                <name>isXML11NameHighSurrogate</name>
                                                            </name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>ch</name>
                                                                            <index>[
                                                                                <expr>
                                                                                    <name>startLocal</name>
                                                                                </expr>
                                                                                ]
                                                                            </index>
                                                                        </name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                        ||
                                                        <name>sawIncompleteSurrogatePair</name>)
                                                    </expr>
                                                    )
                                                </condition>
                                                <then>
                                                    <block>{
                                                        <expr_stmt>
                                                            <expr>
                                                                <call>
                                                                    <name><name>fErrorReporter</name>.
                                                                        <name>reportError</name>
                                                                    </name>
                                                                    <argument_list>(
                                                                        <argument>
                                                                            <expr>
                                                                                <name><name>XMLMessageFormatter</name>.
                                                                                    <name>XML_DOMAIN</name>
                                                                                </name>
                                                                            </expr>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <expr>"IllegalQName"</expr>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <expr>
                                                                                <name>null</name>
                                                                            </expr>
                                                                        </argument>
                                                                        ,
                                                                        <argument>
                                                                            <expr>
                                                                                <name><name>XMLErrorReporter</name>.
                                                                                    <name>SEVERITY_FATAL_ERROR</name>
                                                                                </name>
                                                                            </expr>
                                                                        </argument>
                                                                        )
                                                                    </argument_list>
                                                                </call>
                                                            </expr>
                                                            ;
                                                        </expr_stmt>
                                                        }
                                                    </block>
                                                </then>
                                            </if>
                                            <expr_stmt>
                                                <expr>
                                                    <name>localpart</name>
                                                    =
                                                    <call>
                                                        <name><name>fSymbolTable</name>.
                                                            <name>addSymbol</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>ch</name>
                                                                    </name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>index</name>
                                                                    + 1
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>len</name>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                ;
                                            </expr_stmt>

                                            }
                                        </block>
                                    </then>
                                    <else>else
                                        <block>{
                                            <expr_stmt>
                                                <expr>
                                                    <name>localpart</name>
                                                    =
                                                    <name>rawname</name>
                                                </expr>
                                                ;
                                            </expr_stmt>
                                            }
                                        </block>
                                    </else>
                                </if>
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name><name>qname</name>.
                                                <name>setValues</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>prefix</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name>localpart</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name>rawname</name>
                                                    </expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>
                                                        <name>null</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <return>return <expr>true</expr>;
                                </return>
                                }
                            </block>
                        </then>
                    </if>
                    <return>return <expr>false</expr>;
                    </return>

                    }
                </block>
            </function>
            <comment type="line">// scanQName(QName):boolean</comment>

            <comment type="javadoc">/**
                * Scans a range of parsed character data, setting the fields of the
                * XMLString structure, appropriately.
                * &lt;p&gt;
                * &lt;strong&gt;Note:&lt;/strong&gt; The characters are consumed.
                * &lt;p&gt;
                * &lt;strong&gt;Note:&lt;/strong&gt; This method does not guarantee to return
                * the longest run of parsed character data. This method may return
                * before markup due to reaching the end of the input buffer or any
                * other reason.
                * &lt;p&gt;
                * &lt;strong&gt;Note:&lt;/strong&gt; The fields contained in the XMLString
                * structure are not guaranteed to remain valid upon subsequent calls
                * to the entity scanner. Therefore, the caller is responsible for
                * immediately using the returned character data or making a copy of
                * the character data.
                *
                * @param content The content structure to fill.
                *
                * @return Returns the next character on the input, if known. This
                * value may be -1 but this does &lt;em&gt;note&lt;/em&gt; designate
                * end of file.
                *
                * @throws IOException Thrown if i/o error occurs.
                * @throws EOFException Thrown on end of file.
                */
            </comment>
            <function>
                <type>
                    <specifier>public</specifier>
                    <name>int</name>
                </type>
                <name>scanContent</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>XMLString</name>
                            </type>
                            <name>content</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{

                    <comment type="line">// load more characters, if needed</comment>
                    <if>if
                        <condition>(
                            <expr>
                                <name><name>fCurrentEntity</name>.
                                    <name>position</name>
                                </name>
                                ==
                                <name><name>fCurrentEntity</name>.
                                    <name>count</name>
                                </name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name>load</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>true</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                        <else>else
                            <if>if
                                <condition>(
                                    <expr>
                                        <name><name>fCurrentEntity</name>.
                                            <name>position</name>
                                        </name>
                                        ==
                                        <name><name>fCurrentEntity</name>.
                                            <name>count</name>
                                        </name>
                                        - 1
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name><name>fCurrentEntity</name>.
                                                    <name>ch</name>
                                                    <index>[<expr>0</expr>]
                                                    </index>
                                                </name>
                                                =
                                                <name><name>fCurrentEntity</name>.
                                                    <name>ch</name>
                                                    <index>[
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>count</name>
                                                            </name>
                                                            - 1
                                                        </expr>
                                                        ]
                                                    </index>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name>load</name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>1</expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>false</expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>fCurrentEntity</name>.
                                                    <name>position</name>
                                                </name>
                                                = 0
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>fCurrentEntity</name>.
                                                    <name>startPosition</name>
                                                </name>
                                                = 0
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </then>
                            </if>
                        </else>
                    </if>

                    <comment type="line">// normalize newlines</comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>offset</name> =
                            <init>
                                <expr>
                                    <name><name>fCurrentEntity</name>.
                                        <name>position</name>
                                    </name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>c</name> =
                            <init>
                                <expr>
                                    <name><name>fCurrentEntity</name>.
                                        <name>ch</name>
                                        <index>[
                                            <expr>
                                                <name>offset</name>
                                            </expr>
                                            ]
                                        </index>
                                    </name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>newlines</name> =
                            <init>
                                <expr>0</expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>boolean</name>
                            </type>
                            <name>external</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>fCurrentEntity</name>.
                                            <name>isExternal</name>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>c</name>
                                == '\n' || ((<name>c</name> == '\r' || <name>c</name> == 0x85 || <name>c</name> ==
                                0x2028) &amp;&amp; <name>external</name>)
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <do>do
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name>c</name>
                                                =
                                                <name><name>fCurrentEntity</name>.
                                                    <name>ch</name>
                                                    <index>[
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>position</name>
                                                            </name>
                                                            ++
                                                        </expr>
                                                        ]
                                                    </index>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>(<name>c</name> == '\r' ) &amp;&amp;
                                                    <name>external</name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <expr_stmt>
                                                        <expr><name>newlines</name>++
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <expr_stmt>
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>lineNumber</name>
                                                            </name>
                                                            ++
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <expr_stmt>
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>columnNumber</name>
                                                            </name>
                                                            = 1
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <if>if
                                                        <condition>(
                                                            <expr>
                                                                <name><name>fCurrentEntity</name>.
                                                                    <name>position</name>
                                                                </name>
                                                                ==
                                                                <name><name>fCurrentEntity</name>.
                                                                    <name>count</name>
                                                                </name>
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <block>{
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <name>offset</name>
                                                                        = 0
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>baseCharOffset</name>
                                                                        </name>
                                                                        += (
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>position</name>
                                                                        </name>
                                                                        -
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>startPosition</name>
                                                                        </name>
                                                                        )
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>position</name>
                                                                        </name>
                                                                        =
                                                                        <name>newlines</name>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>startPosition</name>
                                                                        </name>
                                                                        =
                                                                        <name>newlines</name>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                <if>if
                                                                    <condition>(
                                                                        <expr>
                                                                            <call>
                                                                                <name>load</name>
                                                                                <argument_list>(
                                                                                    <argument>
                                                                                        <expr>
                                                                                            <name>newlines</name>
                                                                                        </expr>
                                                                                    </argument>
                                                                                    ,
                                                                                    <argument>
                                                                                        <expr>false</expr>
                                                                                    </argument>
                                                                                    )
                                                                                </argument_list>
                                                                            </call>
                                                                        </expr>
                                                                        )
                                                                    </condition>
                                                                    <then>
                                                                        <block>{
                                                                            <break>break;</break>
                                                                            }
                                                                        </block>
                                                                    </then>
                                                                </if>
                                                                }
                                                            </block>
                                                        </then>
                                                    </if>
                                                    <decl_stmt>
                                                        <decl>
                                                            <type>
                                                                <name>int</name>
                                                            </type>
                                                            <name>cc</name> =
                                                            <init>
                                                                <expr>
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>ch</name>
                                                                        <index>[
                                                                            <expr>
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>position</name>
                                                                                </name>
                                                                            </expr>
                                                                            ]
                                                                        </index>
                                                                    </name>
                                                                </expr>
                                                            </init>
                                                        </decl>
                                                        ;
                                                    </decl_stmt>
                                                    <if>if
                                                        <condition>(
                                                            <expr>
                                                                <name>cc</name>
                                                                == '\n' || <name>cc</name> == 0x85
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <block>{
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>position</name>
                                                                        </name>
                                                                        ++
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                <expr_stmt>
                                                                    <expr><name>offset</name>++
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                }
                                                            </block>
                                                        </then>
                                                    </if>
                                                    <comment type="javadoc">/*** NEWLINE NORMALIZATION ***/</comment>
                                                    <else>else
                                                        <block>{
                                                            <expr_stmt>
                                                                <expr><name>newlines</name>++
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            }
                                                        </block>
                                                    </else>
                                                    }
                                                </block>
                                            </then>
                                            <else>else
                                                <if>if
                                                    <condition>(
                                                        <expr>
                                                            <name>c</name>
                                                            == '\n' || ((<name>c</name> == 0x85 || <name>c</name> ==
                                                            0x2028) &amp;&amp; <name>external</name>)
                                                        </expr>
                                                        )
                                                    </condition>
                                                    <then>
                                                        <block>{
                                                            <expr_stmt>
                                                                <expr><name>newlines</name>++
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            <expr_stmt>
                                                                <expr>
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>lineNumber</name>
                                                                    </name>
                                                                    ++
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            <expr_stmt>
                                                                <expr>
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>columnNumber</name>
                                                                    </name>
                                                                    = 1
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>position</name>
                                                                        </name>
                                                                        ==
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>count</name>
                                                                        </name>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name>offset</name>
                                                                                = 0
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>baseCharOffset</name>
                                                                                </name>
                                                                                += (
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>position</name>
                                                                                </name>
                                                                                -
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>startPosition</name>
                                                                                </name>
                                                                                )
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>position</name>
                                                                                </name>
                                                                                =
                                                                                <name>newlines</name>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>startPosition</name>
                                                                                </name>
                                                                                =
                                                                                <name>newlines</name>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <if>if
                                                                            <condition>(
                                                                                <expr>
                                                                                    <call>
                                                                                        <name>load</name>
                                                                                        <argument_list>(
                                                                                            <argument>
                                                                                                <expr>
                                                                                                    <name>newlines
                                                                                                    </name>
                                                                                                </expr>
                                                                                            </argument>
                                                                                            ,
                                                                                            <argument>
                                                                                                <expr>false</expr>
                                                                                            </argument>
                                                                                            )
                                                                                        </argument_list>
                                                                                    </call>
                                                                                </expr>
                                                                                )
                                                                            </condition>
                                                                            <then>
                                                                                <block>{
                                                                                    <break>break;</break>
                                                                                    }
                                                                                </block>
                                                                            </then>
                                                                        </if>
                                                                        }
                                                                    </block>
                                                                </then>
                                                            </if>
                                                            }
                                                        </block>
                                                    </then>
                                                    <else>else
                                                        <block>{
                                                            <expr_stmt>
                                                                <expr>
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>position</name>
                                                                    </name>
                                                                    --
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            <break>break;</break>
                                                            }
                                                        </block>
                                                    </else>
                                                </if>
                                            </else>
                                        </if>
                                        }
                                    </block>
                                    while
                                    <condition>(
                                        <expr>
                                            <name><name>fCurrentEntity</name>.
                                                <name>position</name>
                                            </name>
                                            &lt;
                                            <name><name>fCurrentEntity</name>.
                                                <name>count</name>
                                            </name>
                                            - 1
                                        </expr>
                                        )
                                    </condition>
                                    ;
                                </do>
                                <for>for (
                                    <init>
                                        <decl>
                                            <type>
                                                <name>int</name>
                                            </type>
                                            <name>i</name> =
                                            <init>
                                                <expr>
                                                    <name>offset</name>
                                                </expr>
                                            </init>
                                        </decl>
                                        ;
                                    </init>
                                    <condition>
                                        <expr>
                                            <name>i</name>
                                            &lt;
                                            <name><name>fCurrentEntity</name>.
                                                <name>position</name>
                                            </name>
                                        </expr>
                                        ;
                                    </condition>
                                    <incr>
                                        <expr><name>i</name>++
                                        </expr>
                                    </incr>
                                    )
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name><name>fCurrentEntity</name>.
                                                    <name>ch</name>
                                                    <index>[
                                                        <expr>
                                                            <name>i</name>
                                                        </expr>
                                                        ]
                                                    </index>
                                                </name>
                                                = '\n'
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </for>
                                <decl_stmt>
                                    <decl>
                                        <type>
                                            <name>int</name>
                                        </type>
                                        <name>length</name> =
                                        <init>
                                            <expr>
                                                <name><name>fCurrentEntity</name>.
                                                    <name>position</name>
                                                </name>
                                                -
                                                <name>offset</name>
                                            </expr>
                                        </init>
                                    </decl>
                                    ;
                                </decl_stmt>
                                <if>if
                                    <condition>(
                                        <expr>
                                            <name><name>fCurrentEntity</name>.
                                                <name>position</name>
                                            </name>
                                            ==
                                            <name><name>fCurrentEntity</name>.
                                                <name>count</name>
                                            </name>
                                            - 1
                                        </expr>
                                        )
                                    </condition>
                                    <then>
                                        <block>{
                                            <expr_stmt>
                                                <expr>
                                                    <call>
                                                        <name><name>content</name>.
                                                            <name>setValues</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>ch</name>
                                                                    </name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>offset</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>length</name>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                ;
                                            </expr_stmt>
                                            <return>return <expr>-1</expr>;
                                            </return>
                                            }
                                        </block>
                                    </then>
                                </if>
                                }
                            </block>
                        </then>
                    </if>

                    <comment type="line">// inner loop, scanning for content</comment>
                    <if>if
                        <condition>(
                            <expr>
                                <name>external</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <while>while
                                    <condition>(
                                        <expr>
                                            <name><name>fCurrentEntity</name>.
                                                <name>position</name>
                                            </name>
                                            &lt;
                                            <name><name>fCurrentEntity</name>.
                                                <name>count</name>
                                            </name>
                                        </expr>
                                        )
                                    </condition>
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name>c</name>
                                                =
                                                <name><name>fCurrentEntity</name>.
                                                    <name>ch</name>
                                                    <index>[
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>position</name>
                                                            </name>
                                                            ++
                                                        </expr>
                                                        ]
                                                    </index>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>!
                                                    <call>
                                                        <name><name>XML11Char</name>.
                                                            <name>isXML11Content</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>c</name>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                    || <name>c</name> == 0x85 || <name>c</name> == 0x2028
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <expr_stmt>
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>position</name>
                                                            </name>
                                                            --
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <break>break;</break>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        }
                                    </block>
                                </while>
                                }
                            </block>
                        </then>
                        <else>else
                            <block>{
                                <while>while
                                    <condition>(
                                        <expr>
                                            <name><name>fCurrentEntity</name>.
                                                <name>position</name>
                                            </name>
                                            &lt;
                                            <name><name>fCurrentEntity</name>.
                                                <name>count</name>
                                            </name>
                                        </expr>
                                        )
                                    </condition>
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name>c</name>
                                                =
                                                <name><name>fCurrentEntity</name>.
                                                    <name>ch</name>
                                                    <index>[
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>position</name>
                                                            </name>
                                                            ++
                                                        </expr>
                                                        ]
                                                    </index>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <comment type="line">// In internal entities control characters are allowed to
                                            appear unescaped.
                                        </comment>
                                        <if>if
                                            <condition>(
                                                <expr>!
                                                    <call>
                                                        <name><name>XML11Char</name>.
                                                            <name>isXML11InternalEntityContent</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>c</name>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <expr_stmt>
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>position</name>
                                                            </name>
                                                            --
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <break>break;</break>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        }
                                    </block>
                                </while>
                                }
                            </block>
                        </else>
                    </if>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>length</name> =
                            <init>
                                <expr>
                                    <name><name>fCurrentEntity</name>.
                                        <name>position</name>
                                    </name>
                                    -
                                    <name>offset</name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <name><name>fCurrentEntity</name>.
                                <name>columnNumber</name>
                            </name>
                            += <name>length</name> -
                            <name>newlines</name>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>content</name>.
                                    <name>setValues</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name><name>fCurrentEntity</name>.
                                                <name>ch</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>offset</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>length</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <comment type="line">// return next character</comment>
                    <if>if
                        <condition>(
                            <expr>
                                <name><name>fCurrentEntity</name>.
                                    <name>position</name>
                                </name>
                                !=
                                <name><name>fCurrentEntity</name>.
                                    <name>count</name>
                                </name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name>c</name>
                                        =
                                        <name><name>fCurrentEntity</name>.
                                            <name>ch</name>
                                            <index>[
                                                <expr>
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>position</name>
                                                    </name>
                                                </expr>
                                                ]
                                            </index>
                                        </name>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <comment type="line">// REVISIT: Does this need to be updated to fix the</comment>
                                <comment type="line">// #x0D ^#x0A newline normalization problem? -Ac</comment>
                                <if>if
                                    <condition>(
                                        <expr>(<name>c</name> == '\r' || <name>c</name> == 0x85 || <name>c</name> ==
                                            0x2028) &amp;&amp;
                                            <name>external</name>
                                        </expr>
                                        )
                                    </condition>
                                    <then>
                                        <block>{
                                            <expr_stmt>
                                                <expr>
                                                    <name>c</name>
                                                    = '\n'
                                                </expr>
                                                ;
                                            </expr_stmt>
                                            }
                                        </block>
                                    </then>
                                </if>
                                }
                            </block>
                        </then>
                        <else>else
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name>c</name>
                                        = -1
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </else>
                    </if>
                    <return>return
                        <expr>
                            <name>c</name>
                        </expr>
                        ;
                    </return>

                    }
                </block>
            </function>
            <comment type="line">// scanContent(XMLString):int</comment>

            <comment type="javadoc">/**
                * Scans a range of attribute value data, setting the fields of the
                * XMLString structure, appropriately.
                * &lt;p&gt;
                * &lt;strong&gt;Note:&lt;/strong&gt; The characters are consumed.
                * &lt;p&gt;
                * &lt;strong&gt;Note:&lt;/strong&gt; This method does not guarantee to return
                * the longest run of attribute value data. This method may return
                * before the quote character due to reaching the end of the input
                * buffer or any other reason.
                * &lt;p&gt;
                * &lt;strong&gt;Note:&lt;/strong&gt; The fields contained in the XMLString
                * structure are not guaranteed to remain valid upon subsequent calls
                * to the entity scanner. Therefore, the caller is responsible for
                * immediately using the returned character data or making a copy of
                * the character data.
                *
                * @param quote The quote character that signifies the end of the
                * attribute value data.
                * @param content The content structure to fill.
                *
                * @return Returns the next character on the input, if known. This
                * value may be -1 but this does &lt;em&gt;note&lt;/em&gt; designate
                * end of file.
                *
                * @throws IOException Thrown if i/o error occurs.
                * @throws EOFException Thrown on end of file.
                */
            </comment>
            <function>
                <type>
                    <specifier>public</specifier>
                    <name>int</name>
                </type>
                <name>scanLiteral</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>quote</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>XMLString</name>
                            </type>
                            <name>content</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{

                    <comment type="line">// load more characters, if needed</comment>
                    <if>if
                        <condition>(
                            <expr>
                                <name><name>fCurrentEntity</name>.
                                    <name>position</name>
                                </name>
                                ==
                                <name><name>fCurrentEntity</name>.
                                    <name>count</name>
                                </name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name>load</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>true</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                        <else>else
                            <if>if
                                <condition>(
                                    <expr>
                                        <name><name>fCurrentEntity</name>.
                                            <name>position</name>
                                        </name>
                                        ==
                                        <name><name>fCurrentEntity</name>.
                                            <name>count</name>
                                        </name>
                                        - 1
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name><name>fCurrentEntity</name>.
                                                    <name>ch</name>
                                                    <index>[<expr>0</expr>]
                                                    </index>
                                                </name>
                                                =
                                                <name><name>fCurrentEntity</name>.
                                                    <name>ch</name>
                                                    <index>[
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>count</name>
                                                            </name>
                                                            - 1
                                                        </expr>
                                                        ]
                                                    </index>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name>load</name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>1</expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>false</expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>fCurrentEntity</name>.
                                                    <name>startPosition</name>
                                                </name>
                                                = 0
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>fCurrentEntity</name>.
                                                    <name>position</name>
                                                </name>
                                                = 0
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </then>
                            </if>
                        </else>
                    </if>

                    <comment type="line">// normalize newlines</comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>offset</name> =
                            <init>
                                <expr>
                                    <name><name>fCurrentEntity</name>.
                                        <name>position</name>
                                    </name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>c</name> =
                            <init>
                                <expr>
                                    <name><name>fCurrentEntity</name>.
                                        <name>ch</name>
                                        <index>[
                                            <expr>
                                                <name>offset</name>
                                            </expr>
                                            ]
                                        </index>
                                    </name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>newlines</name> =
                            <init>
                                <expr>0</expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>boolean</name>
                            </type>
                            <name>external</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>fCurrentEntity</name>.
                                            <name>isExternal</name>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>c</name>
                                == '\n' || ((<name>c</name> == '\r' || <name>c</name> == 0x85 || <name>c</name> ==
                                0x2028) &amp;&amp; <name>external</name>)
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <do>do
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name>c</name>
                                                =
                                                <name><name>fCurrentEntity</name>.
                                                    <name>ch</name>
                                                    <index>[
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>position</name>
                                                            </name>
                                                            ++
                                                        </expr>
                                                        ]
                                                    </index>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>(<name>c</name> == '\r' ) &amp;&amp;
                                                    <name>external</name>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <expr_stmt>
                                                        <expr><name>newlines</name>++
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <expr_stmt>
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>lineNumber</name>
                                                            </name>
                                                            ++
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <expr_stmt>
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>columnNumber</name>
                                                            </name>
                                                            = 1
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <if>if
                                                        <condition>(
                                                            <expr>
                                                                <name><name>fCurrentEntity</name>.
                                                                    <name>position</name>
                                                                </name>
                                                                ==
                                                                <name><name>fCurrentEntity</name>.
                                                                    <name>count</name>
                                                                </name>
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <block>{
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <name>offset</name>
                                                                        = 0
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>baseCharOffset</name>
                                                                        </name>
                                                                        += (
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>position</name>
                                                                        </name>
                                                                        -
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>startPosition</name>
                                                                        </name>
                                                                        )
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>position</name>
                                                                        </name>
                                                                        =
                                                                        <name>newlines</name>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>startPosition</name>
                                                                        </name>
                                                                        =
                                                                        <name>newlines</name>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                <if>if
                                                                    <condition>(
                                                                        <expr>
                                                                            <call>
                                                                                <name>load</name>
                                                                                <argument_list>(
                                                                                    <argument>
                                                                                        <expr>
                                                                                            <name>newlines</name>
                                                                                        </expr>
                                                                                    </argument>
                                                                                    ,
                                                                                    <argument>
                                                                                        <expr>false</expr>
                                                                                    </argument>
                                                                                    )
                                                                                </argument_list>
                                                                            </call>
                                                                        </expr>
                                                                        )
                                                                    </condition>
                                                                    <then>
                                                                        <block>{
                                                                            <break>break;</break>
                                                                            }
                                                                        </block>
                                                                    </then>
                                                                </if>
                                                                }
                                                            </block>
                                                        </then>
                                                    </if>
                                                    <decl_stmt>
                                                        <decl>
                                                            <type>
                                                                <name>int</name>
                                                            </type>
                                                            <name>cc</name> =
                                                            <init>
                                                                <expr>
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>ch</name>
                                                                        <index>[
                                                                            <expr>
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>position</name>
                                                                                </name>
                                                                            </expr>
                                                                            ]
                                                                        </index>
                                                                    </name>
                                                                </expr>
                                                            </init>
                                                        </decl>
                                                        ;
                                                    </decl_stmt>
                                                    <if>if
                                                        <condition>(
                                                            <expr>
                                                                <name>cc</name>
                                                                == '\n' || <name>cc</name> == 0x85
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <block>{
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>position</name>
                                                                        </name>
                                                                        ++
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                <expr_stmt>
                                                                    <expr><name>offset</name>++
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                }
                                                            </block>
                                                        </then>
                                                    </if>
                                                    <comment type="javadoc">/*** NEWLINE NORMALIZATION ***/</comment>
                                                    <else>else
                                                        <block>{
                                                            <expr_stmt>
                                                                <expr><name>newlines</name>++
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            }
                                                        </block>
                                                    </else>
                                                    }
                                                </block>
                                            </then>
                                            <else>else
                                                <if>if
                                                    <condition>(
                                                        <expr>
                                                            <name>c</name>
                                                            == '\n' || ((<name>c</name> == 0x85 || <name>c</name> ==
                                                            0x2028) &amp;&amp; <name>external</name>)
                                                        </expr>
                                                        )
                                                    </condition>
                                                    <then>
                                                        <block>{
                                                            <expr_stmt>
                                                                <expr><name>newlines</name>++
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            <expr_stmt>
                                                                <expr>
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>lineNumber</name>
                                                                    </name>
                                                                    ++
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            <expr_stmt>
                                                                <expr>
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>columnNumber</name>
                                                                    </name>
                                                                    = 1
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>position</name>
                                                                        </name>
                                                                        ==
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>count</name>
                                                                        </name>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name>offset</name>
                                                                                = 0
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>baseCharOffset</name>
                                                                                </name>
                                                                                += (
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>position</name>
                                                                                </name>
                                                                                -
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>startPosition</name>
                                                                                </name>
                                                                                )
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>position</name>
                                                                                </name>
                                                                                =
                                                                                <name>newlines</name>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>startPosition</name>
                                                                                </name>
                                                                                =
                                                                                <name>newlines</name>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <if>if
                                                                            <condition>(
                                                                                <expr>
                                                                                    <call>
                                                                                        <name>load</name>
                                                                                        <argument_list>(
                                                                                            <argument>
                                                                                                <expr>
                                                                                                    <name>newlines
                                                                                                    </name>
                                                                                                </expr>
                                                                                            </argument>
                                                                                            ,
                                                                                            <argument>
                                                                                                <expr>false</expr>
                                                                                            </argument>
                                                                                            )
                                                                                        </argument_list>
                                                                                    </call>
                                                                                </expr>
                                                                                )
                                                                            </condition>
                                                                            <then>
                                                                                <block>{
                                                                                    <break>break;</break>
                                                                                    }
                                                                                </block>
                                                                            </then>
                                                                        </if>
                                                                        }
                                                                    </block>
                                                                </then>
                                                            </if>
                                                            }
                                                        </block>
                                                    </then>
                                                    <else>else
                                                        <block>{
                                                            <expr_stmt>
                                                                <expr>
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>position</name>
                                                                    </name>
                                                                    --
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            <break>break;</break>
                                                            }
                                                        </block>
                                                    </else>
                                                </if>
                                            </else>
                                        </if>
                                        }
                                    </block>
                                    while
                                    <condition>(
                                        <expr>
                                            <name><name>fCurrentEntity</name>.
                                                <name>position</name>
                                            </name>
                                            &lt;
                                            <name><name>fCurrentEntity</name>.
                                                <name>count</name>
                                            </name>
                                            - 1
                                        </expr>
                                        )
                                    </condition>
                                    ;
                                </do>
                                <for>for (
                                    <init>
                                        <decl>
                                            <type>
                                                <name>int</name>
                                            </type>
                                            <name>i</name> =
                                            <init>
                                                <expr>
                                                    <name>offset</name>
                                                </expr>
                                            </init>
                                        </decl>
                                        ;
                                    </init>
                                    <condition>
                                        <expr>
                                            <name>i</name>
                                            &lt;
                                            <name><name>fCurrentEntity</name>.
                                                <name>position</name>
                                            </name>
                                        </expr>
                                        ;
                                    </condition>
                                    <incr>
                                        <expr><name>i</name>++
                                        </expr>
                                    </incr>
                                    )
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name><name>fCurrentEntity</name>.
                                                    <name>ch</name>
                                                    <index>[
                                                        <expr>
                                                            <name>i</name>
                                                        </expr>
                                                        ]
                                                    </index>
                                                </name>
                                                = '\n'
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </for>
                                <decl_stmt>
                                    <decl>
                                        <type>
                                            <name>int</name>
                                        </type>
                                        <name>length</name> =
                                        <init>
                                            <expr>
                                                <name><name>fCurrentEntity</name>.
                                                    <name>position</name>
                                                </name>
                                                -
                                                <name>offset</name>
                                            </expr>
                                        </init>
                                    </decl>
                                    ;
                                </decl_stmt>
                                <if>if
                                    <condition>(
                                        <expr>
                                            <name><name>fCurrentEntity</name>.
                                                <name>position</name>
                                            </name>
                                            ==
                                            <name><name>fCurrentEntity</name>.
                                                <name>count</name>
                                            </name>
                                            - 1
                                        </expr>
                                        )
                                    </condition>
                                    <then>
                                        <block>{
                                            <expr_stmt>
                                                <expr>
                                                    <call>
                                                        <name><name>content</name>.
                                                            <name>setValues</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>ch</name>
                                                                    </name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>offset</name>
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>
                                                                    <name>length</name>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                ;
                                            </expr_stmt>
                                            <return>return <expr>-1</expr>;
                                            </return>
                                            }
                                        </block>
                                    </then>
                                </if>
                                }
                            </block>
                        </then>
                    </if>

                    <comment type="line">// scan literal value</comment>
                    <if>if
                        <condition>(
                            <expr>
                                <name>external</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <while>while
                                    <condition>(
                                        <expr>
                                            <name><name>fCurrentEntity</name>.
                                                <name>position</name>
                                            </name>
                                            &lt;
                                            <name><name>fCurrentEntity</name>.
                                                <name>count</name>
                                            </name>
                                        </expr>
                                        )
                                    </condition>
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name>c</name>
                                                =
                                                <name><name>fCurrentEntity</name>.
                                                    <name>ch</name>
                                                    <index>[
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>position</name>
                                                            </name>
                                                            ++
                                                        </expr>
                                                        ]
                                                    </index>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <name>c</name>
                                                    == <name>quote</name> || <name>c</name> == '%' || !
                                                    <call>
                                                        <name><name>XML11Char</name>.
                                                            <name>isXML11Content</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>c</name>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                    || <name>c</name> == 0x85 || <name>c</name> == 0x2028
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <expr_stmt>
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>position</name>
                                                            </name>
                                                            --
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <break>break;</break>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        }
                                    </block>
                                </while>
                                }
                            </block>
                        </then>
                        <else>else
                            <block>{
                                <while>while
                                    <condition>(
                                        <expr>
                                            <name><name>fCurrentEntity</name>.
                                                <name>position</name>
                                            </name>
                                            &lt;
                                            <name><name>fCurrentEntity</name>.
                                                <name>count</name>
                                            </name>
                                        </expr>
                                        )
                                    </condition>
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name>c</name>
                                                =
                                                <name><name>fCurrentEntity</name>.
                                                    <name>ch</name>
                                                    <index>[
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>position</name>
                                                            </name>
                                                            ++
                                                        </expr>
                                                        ]
                                                    </index>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <comment type="line">// In internal entities control characters are allowed to
                                            appear unescaped.
                                        </comment>
                                        <if>if
                                            <condition>(
                                                <expr>(<name>c</name> == <name>quote</name> &amp;&amp; !
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>literal</name>
                                                    </name>
                                                    )
                                                    || <name>c</name> == '%' || !
                                                    <call>
                                                        <name><name>XML11Char</name>.
                                                            <name>isXML11InternalEntityContent</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>c</name>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <expr_stmt>
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>position</name>
                                                            </name>
                                                            --
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <break>break;</break>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        }
                                    </block>
                                </while>
                                }
                            </block>
                        </else>
                    </if>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>length</name> =
                            <init>
                                <expr>
                                    <name><name>fCurrentEntity</name>.
                                        <name>position</name>
                                    </name>
                                    -
                                    <name>offset</name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <expr_stmt>
                        <expr>
                            <name><name>fCurrentEntity</name>.
                                <name>columnNumber</name>
                            </name>
                            += <name>length</name> -
                            <name>newlines</name>
                        </expr>
                        ;
                    </expr_stmt>
                    <expr_stmt>
                        <expr>
                            <call>
                                <name><name>content</name>.
                                    <name>setValues</name>
                                </name>
                                <argument_list>(
                                    <argument>
                                        <expr>
                                            <name><name>fCurrentEntity</name>.
                                                <name>ch</name>
                                            </name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>offset</name>
                                        </expr>
                                    </argument>
                                    ,
                                    <argument>
                                        <expr>
                                            <name>length</name>
                                        </expr>
                                    </argument>
                                    )
                                </argument_list>
                            </call>
                        </expr>
                        ;
                    </expr_stmt>

                    <comment type="line">// return next character</comment>
                    <if>if
                        <condition>(
                            <expr>
                                <name><name>fCurrentEntity</name>.
                                    <name>position</name>
                                </name>
                                !=
                                <name><name>fCurrentEntity</name>.
                                    <name>count</name>
                                </name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name>c</name>
                                        =
                                        <name><name>fCurrentEntity</name>.
                                            <name>ch</name>
                                            <index>[
                                                <expr>
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>position</name>
                                                    </name>
                                                </expr>
                                                ]
                                            </index>
                                        </name>
                                    </expr>
                                    ;
                                </expr_stmt>
                                <comment type="line">// NOTE: We don't want to accidentally signal the</comment>
                                <comment type="line">// end of the literal if we're expanding an</comment>
                                <comment type="line">// entity appearing in the literal. -Ac</comment>
                                <if>if
                                    <condition>(
                                        <expr>
                                            <name>c</name>
                                            == <name>quote</name> &amp;&amp;
                                            <name><name>fCurrentEntity</name>.
                                                <name>literal</name>
                                            </name>
                                        </expr>
                                        )
                                    </condition>
                                    <then>
                                        <block>{
                                            <expr_stmt>
                                                <expr>
                                                    <name>c</name>
                                                    = -1
                                                </expr>
                                                ;
                                            </expr_stmt>
                                            }
                                        </block>
                                    </then>
                                </if>
                                }
                            </block>
                        </then>
                        <else>else
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name>c</name>
                                        = -1
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </else>
                    </if>
                    <return>return
                        <expr>
                            <name>c</name>
                        </expr>
                        ;
                    </return>

                    }
                </block>
            </function>
            <comment type="line">// scanLiteral(int,XMLString):int</comment>

            <comment type="javadoc">/**
                * Scans a range of character data up to the specicied delimiter,
                * setting the fields of the XMLString structure, appropriately.
                * &lt;p&gt;
                * &lt;strong&gt;Note:&lt;/strong&gt; The characters are consumed.
                * &lt;p&gt;
                * &lt;strong&gt;Note:&lt;/strong&gt; This assumes that the internal buffer is
                * at least the same size, or bigger, than the length of the delimiter
                * and that the delimiter contains at least one character.
                * &lt;p&gt;
                * &lt;strong&gt;Note:&lt;/strong&gt; This method does not guarantee to return
                * the longest run of character data. This method may return before
                * the delimiter due to reaching the end of the input buffer or any
                * other reason.
                * &lt;p&gt;
                * &lt;strong&gt;Note:&lt;/strong&gt; The fields contained in the XMLString
                * structure are not guaranteed to remain valid upon subsequent calls
                * to the entity scanner. Therefore, the caller is responsible for
                * immediately using the returned character data or making a copy of
                * the character data.
                *
                * @param delimiter The string that signifies the end of the character
                * data to be scanned.
                * @param data The data structure to fill.
                *
                * @return Returns true if there is more data to scan, false otherwise.
                *
                * @throws IOException Thrown if i/o error occurs.
                * @throws EOFException Thrown on end of file.
                */
            </comment>
            <function>
                <type>
                    <specifier>public</specifier>
                    <name>boolean</name>
                </type>
                <name>scanData</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>delimiter</name>
                        </decl>
                    </param>
                    ,
                    <param>
                        <decl>
                            <type>
                                <name>XMLStringBuffer</name>
                            </type>
                            <name>buffer</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{

                    <decl_stmt>
                        <decl>
                            <type>
                                <name>boolean</name>
                            </type>
                            <name>done</name> =
                            <init>
                                <expr>false</expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>delimLen</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>delimiter</name>.
                                            <name>length</name>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>char</name>
                            </type>
                            <name>charAt0</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>delimiter</name>.
                                            <name>charAt</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>0</expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>boolean</name>
                            </type>
                            <name>external</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>fCurrentEntity</name>.
                                            <name>isExternal</name>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <do>do
                        <block>{
                            <comment type="line">// load more characters, if needed</comment>
                            <if>if
                                <condition>(
                                    <expr>
                                        <name><name>fCurrentEntity</name>.
                                            <name>position</name>
                                        </name>
                                        ==
                                        <name><name>fCurrentEntity</name>.
                                            <name>count</name>
                                        </name>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name>load</name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>0</expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>true</expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </then>
                            </if>

                            <decl_stmt>
                                <decl>
                                    <type>
                                        <name>boolean</name>
                                    </type>
                                    <name>bNextEntity</name> =
                                    <init>
                                        <expr>false</expr>
                                    </init>
                                </decl>
                                ;
                            </decl_stmt>

                            <while>while
                                <condition>(
                                    <expr>(
                                        <name><name>fCurrentEntity</name>.
                                            <name>position</name>
                                        </name>
                                        &gt;=
                                        <name><name>fCurrentEntity</name>.
                                            <name>count</name>
                                        </name>
                                        - <name>delimLen</name>)
                                        &amp;&amp; (!<name>bNextEntity</name>)
                                    </expr>
                                    )
                                </condition>
                                <block>{
                                    <expr_stmt>
                                        <expr>
                                            <call>
                                                <name><name>System</name>.
                                                    <name>arraycopy</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>ch</name>
                                                            </name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>position</name>
                                                            </name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>ch</name>
                                                            </name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>0</expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>count</name>
                                                            </name>
                                                            -
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>position</name>
                                                            </name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                        ;
                                    </expr_stmt>

                                    <expr_stmt>
                                        <expr>
                                            <name>bNextEntity</name>
                                            =
                                            <call>
                                                <name>load</name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>count</name>
                                                            </name>
                                                            -
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>position</name>
                                                            </name>
                                                        </expr>
                                                    </argument>
                                                    ,
                                                    <argument>
                                                        <expr>false</expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                        ;
                                    </expr_stmt>
                                    <expr_stmt>
                                        <expr>
                                            <name><name>fCurrentEntity</name>.
                                                <name>position</name>
                                            </name>
                                            = 0
                                        </expr>
                                        ;
                                    </expr_stmt>
                                    <expr_stmt>
                                        <expr>
                                            <name><name>fCurrentEntity</name>.
                                                <name>startPosition</name>
                                            </name>
                                            = 0
                                        </expr>
                                        ;
                                    </expr_stmt>
                                    }
                                </block>
                            </while>

                            <if>if
                                <condition>(
                                    <expr>
                                        <name><name>fCurrentEntity</name>.
                                            <name>position</name>
                                        </name>
                                        &gt;=
                                        <name><name>fCurrentEntity</name>.
                                            <name>count</name>
                                        </name>
                                        -
                                        <name>delimLen</name>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <comment type="line">// something must be wrong with the input: e.g., file ends
                                            an unterminated comment
                                        </comment>
                                        <decl_stmt>
                                            <decl>
                                                <type>
                                                    <name>int</name>
                                                </type>
                                                <name>length</name> =
                                                <init>
                                                    <expr>
                                                        <name><name>fCurrentEntity</name>.
                                                            <name>count</name>
                                                        </name>
                                                        -
                                                        <name><name>fCurrentEntity</name>.
                                                            <name>position</name>
                                                        </name>
                                                    </expr>
                                                </init>
                                            </decl>
                                            ;
                                        </decl_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>buffer</name>.
                                                        <name>append</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name><name>fCurrentEntity</name>.
                                                                    <name>ch</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>fCurrentEntity</name>.
                                                                    <name>position</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name>length</name>
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>fCurrentEntity</name>.
                                                    <name>columnNumber</name>
                                                </name>
                                                +=
                                                <name><name>fCurrentEntity</name>.
                                                    <name>count</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>fCurrentEntity</name>.
                                                    <name>baseCharOffset</name>
                                                </name>
                                                += (
                                                <name><name>fCurrentEntity</name>.
                                                    <name>position</name>
                                                </name>
                                                -
                                                <name><name>fCurrentEntity</name>.
                                                    <name>startPosition</name>
                                                </name>
                                                )
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>fCurrentEntity</name>.
                                                    <name>position</name>
                                                </name>
                                                =
                                                <name><name>fCurrentEntity</name>.
                                                    <name>count</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>fCurrentEntity</name>.
                                                    <name>startPosition</name>
                                                </name>
                                                =
                                                <name><name>fCurrentEntity</name>.
                                                    <name>count</name>
                                                </name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name>load</name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>0</expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>true</expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <return>return <expr>false</expr>;
                                        </return>
                                        }
                                    </block>
                                </then>
                            </if>

                            <comment type="line">// normalize newlines</comment>
                            <decl_stmt>
                                <decl>
                                    <type>
                                        <name>int</name>
                                    </type>
                                    <name>offset</name> =
                                    <init>
                                        <expr>
                                            <name><name>fCurrentEntity</name>.
                                                <name>position</name>
                                            </name>
                                        </expr>
                                    </init>
                                </decl>
                                ;
                            </decl_stmt>
                            <decl_stmt>
                                <decl>
                                    <type>
                                        <name>int</name>
                                    </type>
                                    <name>c</name> =
                                    <init>
                                        <expr>
                                            <name><name>fCurrentEntity</name>.
                                                <name>ch</name>
                                                <index>[
                                                    <expr>
                                                        <name>offset</name>
                                                    </expr>
                                                    ]
                                                </index>
                                            </name>
                                        </expr>
                                    </init>
                                </decl>
                                ;
                            </decl_stmt>
                            <decl_stmt>
                                <decl>
                                    <type>
                                        <name>int</name>
                                    </type>
                                    <name>newlines</name> =
                                    <init>
                                        <expr>0</expr>
                                    </init>
                                </decl>
                                ;
                            </decl_stmt>
                            <if>if
                                <condition>(
                                    <expr>
                                        <name>c</name>
                                        == '\n' || ((<name>c</name> == '\r' || <name>c</name> == 0x85 || <name>c</name> ==
                                        0x2028) &amp;&amp; <name>external</name>)
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <do>do
                                            <block>{
                                                <expr_stmt>
                                                    <expr>
                                                        <name>c</name>
                                                        =
                                                        <name><name>fCurrentEntity</name>.
                                                            <name>ch</name>
                                                            <index>[
                                                                <expr>
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>position</name>
                                                                    </name>
                                                                    ++
                                                                </expr>
                                                                ]
                                                            </index>
                                                        </name>
                                                    </expr>
                                                    ;
                                                </expr_stmt>
                                                <if>if
                                                    <condition>(
                                                        <expr>(<name>c</name> == '\r' ) &amp;&amp;
                                                            <name>external</name>
                                                        </expr>
                                                        )
                                                    </condition>
                                                    <then>
                                                        <block>{
                                                            <expr_stmt>
                                                                <expr><name>newlines</name>++
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            <expr_stmt>
                                                                <expr>
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>lineNumber</name>
                                                                    </name>
                                                                    ++
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            <expr_stmt>
                                                                <expr>
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>columnNumber</name>
                                                                    </name>
                                                                    = 1
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>position</name>
                                                                        </name>
                                                                        ==
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>count</name>
                                                                        </name>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name>offset</name>
                                                                                = 0
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>baseCharOffset</name>
                                                                                </name>
                                                                                += (
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>position</name>
                                                                                </name>
                                                                                -
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>startPosition</name>
                                                                                </name>
                                                                                )
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>position</name>
                                                                                </name>
                                                                                =
                                                                                <name>newlines</name>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>startPosition</name>
                                                                                </name>
                                                                                =
                                                                                <name>newlines</name>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <if>if
                                                                            <condition>(
                                                                                <expr>
                                                                                    <call>
                                                                                        <name>load</name>
                                                                                        <argument_list>(
                                                                                            <argument>
                                                                                                <expr>
                                                                                                    <name>newlines
                                                                                                    </name>
                                                                                                </expr>
                                                                                            </argument>
                                                                                            ,
                                                                                            <argument>
                                                                                                <expr>false</expr>
                                                                                            </argument>
                                                                                            )
                                                                                        </argument_list>
                                                                                    </call>
                                                                                </expr>
                                                                                )
                                                                            </condition>
                                                                            <then>
                                                                                <block>{
                                                                                    <break>break;</break>
                                                                                    }
                                                                                </block>
                                                                            </then>
                                                                        </if>
                                                                        }
                                                                    </block>
                                                                </then>
                                                            </if>
                                                            <decl_stmt>
                                                                <decl>
                                                                    <type>
                                                                        <name>int</name>
                                                                    </type>
                                                                    <name>cc</name> =
                                                                    <init>
                                                                        <expr>
                                                                            <name><name>fCurrentEntity</name>.
                                                                                <name>ch</name>
                                                                                <index>[
                                                                                    <expr>
                                                                                        <name><name>
                                                                                            fCurrentEntity</name>.
                                                                                            <name>position</name>
                                                                                        </name>
                                                                                    </expr>
                                                                                    ]
                                                                                </index>
                                                                            </name>
                                                                        </expr>
                                                                    </init>
                                                                </decl>
                                                                ;
                                                            </decl_stmt>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <name>cc</name>
                                                                        == '\n' || <name>cc</name> == 0x85
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>position</name>
                                                                                </name>
                                                                                ++
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <expr_stmt>
                                                                            <expr><name>offset</name>++
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        }
                                                                    </block>
                                                                </then>
                                                            </if>
                                                            <comment type="javadoc">/*** NEWLINE NORMALIZATION ***/
                                                            </comment>
                                                            <else>else
                                                                <block>{
                                                                    <expr_stmt>
                                                                        <expr><name>newlines</name>++
                                                                        </expr>
                                                                        ;
                                                                    </expr_stmt>
                                                                    }
                                                                </block>
                                                            </else>
                                                            }
                                                        </block>
                                                    </then>
                                                    <else>else
                                                        <if>if
                                                            <condition>(
                                                                <expr>
                                                                    <name>c</name>
                                                                    == '\n' || ((<name>c</name> == 0x85 || <name>c
                                                                </name> == 0x2028) &amp;&amp; <name>external</name>)
                                                                </expr>
                                                                )
                                                            </condition>
                                                            <then>
                                                                <block>{
                                                                    <expr_stmt>
                                                                        <expr><name>newlines</name>++
                                                                        </expr>
                                                                        ;
                                                                    </expr_stmt>
                                                                    <expr_stmt>
                                                                        <expr>
                                                                            <name><name>fCurrentEntity</name>.
                                                                                <name>lineNumber</name>
                                                                            </name>
                                                                            ++
                                                                        </expr>
                                                                        ;
                                                                    </expr_stmt>
                                                                    <expr_stmt>
                                                                        <expr>
                                                                            <name><name>fCurrentEntity</name>.
                                                                                <name>columnNumber</name>
                                                                            </name>
                                                                            = 1
                                                                        </expr>
                                                                        ;
                                                                    </expr_stmt>
                                                                    <if>if
                                                                        <condition>(
                                                                            <expr>
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>position</name>
                                                                                </name>
                                                                                ==
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>count</name>
                                                                                </name>
                                                                            </expr>
                                                                            )
                                                                        </condition>
                                                                        <then>
                                                                            <block>{
                                                                                <expr_stmt>
                                                                                    <expr>
                                                                                        <name>offset</name>
                                                                                        = 0
                                                                                    </expr>
                                                                                    ;
                                                                                </expr_stmt>
                                                                                <expr_stmt>
                                                                                    <expr>
                                                                                        <name><name>
                                                                                            fCurrentEntity</name>.
                                                                                            <name>baseCharOffset</name>
                                                                                        </name>
                                                                                        += (
                                                                                        <name><name>
                                                                                            fCurrentEntity</name>.
                                                                                            <name>position</name>
                                                                                        </name>
                                                                                        -
                                                                                        <name><name>
                                                                                            fCurrentEntity</name>.
                                                                                            <name>startPosition</name>
                                                                                        </name>
                                                                                        )
                                                                                    </expr>
                                                                                    ;
                                                                                </expr_stmt>
                                                                                <expr_stmt>
                                                                                    <expr>
                                                                                        <name><name>
                                                                                            fCurrentEntity</name>.
                                                                                            <name>position</name>
                                                                                        </name>
                                                                                        =
                                                                                        <name>newlines</name>
                                                                                    </expr>
                                                                                    ;
                                                                                </expr_stmt>
                                                                                <expr_stmt>
                                                                                    <expr>
                                                                                        <name><name>
                                                                                            fCurrentEntity</name>.
                                                                                            <name>startPosition</name>
                                                                                        </name>
                                                                                        =
                                                                                        <name>newlines</name>
                                                                                    </expr>
                                                                                    ;
                                                                                </expr_stmt>
                                                                                <expr_stmt>
                                                                                    <expr>
                                                                                        <name><name>
                                                                                            fCurrentEntity</name>.
                                                                                            <name>count</name>
                                                                                        </name>
                                                                                        =
                                                                                        <name>newlines</name>
                                                                                    </expr>
                                                                                    ;
                                                                                </expr_stmt>
                                                                                <if>if
                                                                                    <condition>(
                                                                                        <expr>
                                                                                            <call>
                                                                                                <name>load</name>
                                                                                                <argument_list>(
                                                                                                    <argument>
                                                                                                        <expr>
                                                                                                            <name>
                                                                                                                newlines
                                                                                                            </name>
                                                                                                        </expr>
                                                                                                    </argument>
                                                                                                    ,
                                                                                                    <argument>
                                                                                                        <expr>false
                                                                                                        </expr>
                                                                                                    </argument>
                                                                                                    )
                                                                                                </argument_list>
                                                                                            </call>
                                                                                        </expr>
                                                                                        )
                                                                                    </condition>
                                                                                    <then>
                                                                                        <block>{
                                                                                            <break>break;</break>
                                                                                            }
                                                                                        </block>
                                                                                    </then>
                                                                                </if>
                                                                                }
                                                                            </block>
                                                                        </then>
                                                                    </if>
                                                                    }
                                                                </block>
                                                            </then>
                                                            <else>else
                                                                <block>{
                                                                    <expr_stmt>
                                                                        <expr>
                                                                            <name><name>fCurrentEntity</name>.
                                                                                <name>position</name>
                                                                            </name>
                                                                            --
                                                                        </expr>
                                                                        ;
                                                                    </expr_stmt>
                                                                    <break>break;</break>
                                                                    }
                                                                </block>
                                                            </else>
                                                        </if>
                                                    </else>
                                                </if>
                                                }
                                            </block>
                                            while
                                            <condition>(
                                                <expr>
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>position</name>
                                                    </name>
                                                    &lt;
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>count</name>
                                                    </name>
                                                    - 1
                                                </expr>
                                                )
                                            </condition>
                                            ;
                                        </do>
                                        <for>for (
                                            <init>
                                                <decl>
                                                    <type>
                                                        <name>int</name>
                                                    </type>
                                                    <name>i</name> =
                                                    <init>
                                                        <expr>
                                                            <name>offset</name>
                                                        </expr>
                                                    </init>
                                                </decl>
                                                ;
                                            </init>
                                            <condition>
                                                <expr>
                                                    <name>i</name>
                                                    &lt;
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>position</name>
                                                    </name>
                                                </expr>
                                                ;
                                            </condition>
                                            <incr>
                                                <expr><name>i</name>++
                                                </expr>
                                            </incr>
                                            )
                                            <block>{
                                                <expr_stmt>
                                                    <expr>
                                                        <name><name>fCurrentEntity</name>.
                                                            <name>ch</name>
                                                            <index>[
                                                                <expr>
                                                                    <name>i</name>
                                                                </expr>
                                                                ]
                                                            </index>
                                                        </name>
                                                        = '\n'
                                                    </expr>
                                                    ;
                                                </expr_stmt>
                                                }
                                            </block>
                                        </for>
                                        <decl_stmt>
                                            <decl>
                                                <type>
                                                    <name>int</name>
                                                </type>
                                                <name>length</name> =
                                                <init>
                                                    <expr>
                                                        <name><name>fCurrentEntity</name>.
                                                            <name>position</name>
                                                        </name>
                                                        -
                                                        <name>offset</name>
                                                    </expr>
                                                </init>
                                            </decl>
                                            ;
                                        </decl_stmt>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>position</name>
                                                    </name>
                                                    ==
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>count</name>
                                                    </name>
                                                    - 1
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <expr_stmt>
                                                        <expr>
                                                            <call>
                                                                <name><name>buffer</name>.
                                                                    <name>append</name>
                                                                </name>
                                                                <argument_list>(
                                                                    <argument>
                                                                        <expr>
                                                                            <name><name>fCurrentEntity</name>.
                                                                                <name>ch</name>
                                                                            </name>
                                                                        </expr>
                                                                    </argument>
                                                                    ,
                                                                    <argument>
                                                                        <expr>
                                                                            <name>offset</name>
                                                                        </expr>
                                                                    </argument>
                                                                    ,
                                                                    <argument>
                                                                        <expr>
                                                                            <name>length</name>
                                                                        </expr>
                                                                    </argument>
                                                                    )
                                                                </argument_list>
                                                            </call>
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <return>return <expr>true</expr>;
                                                    </return>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        }
                                    </block>
                                </then>
                            </if>

                            <comment type="line">// iterate over buffer looking for delimiter</comment>
                            <if>if
                                <condition>(
                                    <expr>
                                        <name>external</name>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <label><name>OUTER</name>:
                                        </label>
                                        <while>while
                                            <condition>(
                                                <expr>
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>position</name>
                                                    </name>
                                                    &lt;
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>count</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <block>{
                                                <expr_stmt>
                                                    <expr>
                                                        <name>c</name>
                                                        =
                                                        <name><name>fCurrentEntity</name>.
                                                            <name>ch</name>
                                                            <index>[
                                                                <expr>
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>position</name>
                                                                    </name>
                                                                    ++
                                                                </expr>
                                                                ]
                                                            </index>
                                                        </name>
                                                    </expr>
                                                    ;
                                                </expr_stmt>
                                                <if>if
                                                    <condition>(
                                                        <expr>
                                                            <name>c</name>
                                                            ==
                                                            <name>charAt0</name>
                                                        </expr>
                                                        )
                                                    </condition>
                                                    <then>
                                                        <block>{
                                                            <comment type="line">// looks like we just hit the
                                                                delimiter
                                                            </comment>
                                                            <decl_stmt>
                                                                <decl>
                                                                    <type>
                                                                        <name>int</name>
                                                                    </type>
                                                                    <name>delimOffset</name> =
                                                                    <init>
                                                                        <expr>
                                                                            <name><name>fCurrentEntity</name>.
                                                                                <name>position</name>
                                                                            </name>
                                                                            - 1
                                                                        </expr>
                                                                    </init>
                                                                </decl>
                                                                ;
                                                            </decl_stmt>
                                                            <for>for (
                                                                <init>
                                                                    <decl>
                                                                        <type>
                                                                            <name>int</name>
                                                                        </type>
                                                                        <name>i</name> =
                                                                        <init>
                                                                            <expr>1</expr>
                                                                        </init>
                                                                    </decl>
                                                                    ;
                                                                </init>
                                                                <condition>
                                                                    <expr>
                                                                        <name>i</name>
                                                                        &lt;
                                                                        <name>delimLen</name>
                                                                    </expr>
                                                                    ;
                                                                </condition>
                                                                <incr>
                                                                    <expr><name>i</name>++
                                                                    </expr>
                                                                </incr>
                                                                )
                                                                <block>{
                                                                    <if>if
                                                                        <condition>(
                                                                            <expr>
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>position</name>
                                                                                </name>
                                                                                ==
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>count</name>
                                                                                </name>
                                                                            </expr>
                                                                            )
                                                                        </condition>
                                                                        <then>
                                                                            <block>{
                                                                                <expr_stmt>
                                                                                    <expr>
                                                                                        <name><name>
                                                                                            fCurrentEntity</name>.
                                                                                            <name>position</name>
                                                                                        </name>
                                                                                        -=
                                                                                        <name>i</name>
                                                                                    </expr>
                                                                                    ;
                                                                                </expr_stmt>
                                                                                <break>break OUTER;</break>
                                                                                }
                                                                            </block>
                                                                        </then>
                                                                    </if>
                                                                    <expr_stmt>
                                                                        <expr>
                                                                            <name>c</name>
                                                                            =
                                                                            <name><name>fCurrentEntity</name>.
                                                                                <name>ch</name>
                                                                                <index>[
                                                                                    <expr>
                                                                                        <name><name>
                                                                                            fCurrentEntity</name>.
                                                                                            <name>position</name>
                                                                                        </name>
                                                                                        ++
                                                                                    </expr>
                                                                                    ]
                                                                                </index>
                                                                            </name>
                                                                        </expr>
                                                                        ;
                                                                    </expr_stmt>
                                                                    <if>if
                                                                        <condition>(
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>delimiter</name>.
                                                                                        <name>charAt</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>i</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                                !=
                                                                                <name>c</name>
                                                                            </expr>
                                                                            )
                                                                        </condition>
                                                                        <then>
                                                                            <block>{
                                                                                <expr_stmt>
                                                                                    <expr>
                                                                                        <name><name>
                                                                                            fCurrentEntity</name>.
                                                                                            <name>position</name>
                                                                                        </name>
                                                                                        --
                                                                                    </expr>
                                                                                    ;
                                                                                </expr_stmt>
                                                                                <break>break;</break>
                                                                                }
                                                                            </block>
                                                                        </then>
                                                                    </if>
                                                                    }
                                                                </block>
                                                            </for>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>position</name>
                                                                        </name>
                                                                        == <name>delimOffset</name> +
                                                                        <name>delimLen</name>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name>done</name>
                                                                                = true
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <break>break;</break>
                                                                        }
                                                                    </block>
                                                                </then>
                                                            </if>
                                                            }
                                                        </block>
                                                    </then>
                                                    <else>else
                                                        <if>if
                                                            <condition>(
                                                                <expr>
                                                                    <name>c</name>
                                                                    == '\n' || <name>c</name> == '\r' || <name>c</name> ==
                                                                    0x85 || <name>c</name> == 0x2028
                                                                </expr>
                                                                )
                                                            </condition>
                                                            <then>
                                                                <block>{
                                                                    <expr_stmt>
                                                                        <expr>
                                                                            <name><name>fCurrentEntity</name>.
                                                                                <name>position</name>
                                                                            </name>
                                                                            --
                                                                        </expr>
                                                                        ;
                                                                    </expr_stmt>
                                                                    <break>break;</break>
                                                                    }
                                                                </block>
                                                            </then>
                                                            <comment type="line">// In external entities control
                                                                characters cannot appear
                                                            </comment>
                                                            <comment type="line">// as literals so do not skip over
                                                                them.
                                                            </comment>
                                                            <else>else
                                                                <if>if
                                                                    <condition>(
                                                                        <expr>!
                                                                            <call>
                                                                                <name><name>XML11Char</name>.
                                                                                    <name>isXML11ValidLiteral</name>
                                                                                </name>
                                                                                <argument_list>(
                                                                                    <argument>
                                                                                        <expr>
                                                                                            <name>c</name>
                                                                                        </expr>
                                                                                    </argument>
                                                                                    )
                                                                                </argument_list>
                                                                            </call>
                                                                        </expr>
                                                                        )
                                                                    </condition>
                                                                    <then>
                                                                        <block>{
                                                                            <expr_stmt>
                                                                                <expr>
                                                                                    <name><name>fCurrentEntity</name>.
                                                                                        <name>position</name>
                                                                                    </name>
                                                                                    --
                                                                                </expr>
                                                                                ;
                                                                            </expr_stmt>
                                                                            <decl_stmt>
                                                                                <decl>
                                                                                    <type>
                                                                                        <name>int</name>
                                                                                    </type>
                                                                                    <name>length</name> =
                                                                                    <init>
                                                                                        <expr>
                                                                                            <name><name>
                                                                                                fCurrentEntity</name>.
                                                                                                <name>position</name>
                                                                                            </name>
                                                                                            -
                                                                                            <name>offset</name>
                                                                                        </expr>
                                                                                    </init>
                                                                                </decl>
                                                                                ;
                                                                            </decl_stmt>
                                                                            <expr_stmt>
                                                                                <expr>
                                                                                    <name><name>fCurrentEntity</name>.
                                                                                        <name>columnNumber</name>
                                                                                    </name>
                                                                                    += <name>length</name> -
                                                                                    <name>newlines</name>
                                                                                </expr>
                                                                                ;
                                                                            </expr_stmt>
                                                                            <expr_stmt>
                                                                                <expr>
                                                                                    <call>
                                                                                        <name><name>buffer</name>.
                                                                                            <name>append</name>
                                                                                        </name>
                                                                                        <argument_list>(
                                                                                            <argument>
                                                                                                <expr>
                                                                                                    <name><name>
                                                                                                        fCurrentEntity</name>
                                                                                                        .
                                                                                                        <name>ch</name>
                                                                                                    </name>
                                                                                                </expr>
                                                                                            </argument>
                                                                                            ,
                                                                                            <argument>
                                                                                                <expr>
                                                                                                    <name>offset</name>
                                                                                                </expr>
                                                                                            </argument>
                                                                                            ,
                                                                                            <argument>
                                                                                                <expr>
                                                                                                    <name>length</name>
                                                                                                </expr>
                                                                                            </argument>
                                                                                            )
                                                                                        </argument_list>
                                                                                    </call>
                                                                                </expr>
                                                                                ;
                                                                            </expr_stmt>
                                                                            <return>return <expr>true</expr>;
                                                                            </return>
                                                                            }
                                                                        </block>
                                                                    </then>
                                                                </if>
                                                            </else>
                                                        </if>
                                                    </else>
                                                </if>
                                                }
                                            </block>
                                        </while>
                                        }
                                    </block>
                                </then>
                                <else>else
                                    <block>{
                                        <label><name>OUTER</name>:
                                        </label>
                                        <while>while
                                            <condition>(
                                                <expr>
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>position</name>
                                                    </name>
                                                    &lt;
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>count</name>
                                                    </name>
                                                </expr>
                                                )
                                            </condition>
                                            <block>{
                                                <expr_stmt>
                                                    <expr>
                                                        <name>c</name>
                                                        =
                                                        <name><name>fCurrentEntity</name>.
                                                            <name>ch</name>
                                                            <index>[
                                                                <expr>
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>position</name>
                                                                    </name>
                                                                    ++
                                                                </expr>
                                                                ]
                                                            </index>
                                                        </name>
                                                    </expr>
                                                    ;
                                                </expr_stmt>
                                                <if>if
                                                    <condition>(
                                                        <expr>
                                                            <name>c</name>
                                                            ==
                                                            <name>charAt0</name>
                                                        </expr>
                                                        )
                                                    </condition>
                                                    <then>
                                                        <block>{
                                                            <comment type="line">// looks like we just hit the
                                                                delimiter
                                                            </comment>
                                                            <decl_stmt>
                                                                <decl>
                                                                    <type>
                                                                        <name>int</name>
                                                                    </type>
                                                                    <name>delimOffset</name> =
                                                                    <init>
                                                                        <expr>
                                                                            <name><name>fCurrentEntity</name>.
                                                                                <name>position</name>
                                                                            </name>
                                                                            - 1
                                                                        </expr>
                                                                    </init>
                                                                </decl>
                                                                ;
                                                            </decl_stmt>
                                                            <for>for (
                                                                <init>
                                                                    <decl>
                                                                        <type>
                                                                            <name>int</name>
                                                                        </type>
                                                                        <name>i</name> =
                                                                        <init>
                                                                            <expr>1</expr>
                                                                        </init>
                                                                    </decl>
                                                                    ;
                                                                </init>
                                                                <condition>
                                                                    <expr>
                                                                        <name>i</name>
                                                                        &lt;
                                                                        <name>delimLen</name>
                                                                    </expr>
                                                                    ;
                                                                </condition>
                                                                <incr>
                                                                    <expr><name>i</name>++
                                                                    </expr>
                                                                </incr>
                                                                )
                                                                <block>{
                                                                    <if>if
                                                                        <condition>(
                                                                            <expr>
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>position</name>
                                                                                </name>
                                                                                ==
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>count</name>
                                                                                </name>
                                                                            </expr>
                                                                            )
                                                                        </condition>
                                                                        <then>
                                                                            <block>{
                                                                                <expr_stmt>
                                                                                    <expr>
                                                                                        <name><name>
                                                                                            fCurrentEntity</name>.
                                                                                            <name>position</name>
                                                                                        </name>
                                                                                        -=
                                                                                        <name>i</name>
                                                                                    </expr>
                                                                                    ;
                                                                                </expr_stmt>
                                                                                <break>break OUTER;</break>
                                                                                }
                                                                            </block>
                                                                        </then>
                                                                    </if>
                                                                    <expr_stmt>
                                                                        <expr>
                                                                            <name>c</name>
                                                                            =
                                                                            <name><name>fCurrentEntity</name>.
                                                                                <name>ch</name>
                                                                                <index>[
                                                                                    <expr>
                                                                                        <name><name>
                                                                                            fCurrentEntity</name>.
                                                                                            <name>position</name>
                                                                                        </name>
                                                                                        ++
                                                                                    </expr>
                                                                                    ]
                                                                                </index>
                                                                            </name>
                                                                        </expr>
                                                                        ;
                                                                    </expr_stmt>
                                                                    <if>if
                                                                        <condition>(
                                                                            <expr>
                                                                                <call>
                                                                                    <name><name>delimiter</name>.
                                                                                        <name>charAt</name>
                                                                                    </name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>
                                                                                                <name>i</name>
                                                                                            </expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                                !=
                                                                                <name>c</name>
                                                                            </expr>
                                                                            )
                                                                        </condition>
                                                                        <then>
                                                                            <block>{
                                                                                <expr_stmt>
                                                                                    <expr>
                                                                                        <name><name>
                                                                                            fCurrentEntity</name>.
                                                                                            <name>position</name>
                                                                                        </name>
                                                                                        --
                                                                                    </expr>
                                                                                    ;
                                                                                </expr_stmt>
                                                                                <break>break;</break>
                                                                                }
                                                                            </block>
                                                                        </then>
                                                                    </if>
                                                                    }
                                                                </block>
                                                            </for>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>position</name>
                                                                        </name>
                                                                        == <name>delimOffset</name> +
                                                                        <name>delimLen</name>
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name>done</name>
                                                                                = true
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <break>break;</break>
                                                                        }
                                                                    </block>
                                                                </then>
                                                            </if>
                                                            }
                                                        </block>
                                                    </then>
                                                    <else>else
                                                        <if>if
                                                            <condition>(
                                                                <expr>
                                                                    <name>c</name>
                                                                    == '\n'
                                                                </expr>
                                                                )
                                                            </condition>
                                                            <then>
                                                                <block>{
                                                                    <expr_stmt>
                                                                        <expr>
                                                                            <name><name>fCurrentEntity</name>.
                                                                                <name>position</name>
                                                                            </name>
                                                                            --
                                                                        </expr>
                                                                        ;
                                                                    </expr_stmt>
                                                                    <break>break;</break>
                                                                    }
                                                                </block>
                                                            </then>
                                                            <comment type="line">// Control characters are allowed to
                                                                appear as literals
                                                            </comment>
                                                            <comment type="line">// in internal entities.</comment>
                                                            <else>else
                                                                <if>if
                                                                    <condition>(
                                                                        <expr>!
                                                                            <call>
                                                                                <name><name>XML11Char</name>.
                                                                                    <name>isXML11Valid</name>
                                                                                </name>
                                                                                <argument_list>(
                                                                                    <argument>
                                                                                        <expr>
                                                                                            <name>c</name>
                                                                                        </expr>
                                                                                    </argument>
                                                                                    )
                                                                                </argument_list>
                                                                            </call>
                                                                        </expr>
                                                                        )
                                                                    </condition>
                                                                    <then>
                                                                        <block>{
                                                                            <expr_stmt>
                                                                                <expr>
                                                                                    <name><name>fCurrentEntity</name>.
                                                                                        <name>position</name>
                                                                                    </name>
                                                                                    --
                                                                                </expr>
                                                                                ;
                                                                            </expr_stmt>
                                                                            <decl_stmt>
                                                                                <decl>
                                                                                    <type>
                                                                                        <name>int</name>
                                                                                    </type>
                                                                                    <name>length</name> =
                                                                                    <init>
                                                                                        <expr>
                                                                                            <name><name>
                                                                                                fCurrentEntity</name>.
                                                                                                <name>position</name>
                                                                                            </name>
                                                                                            -
                                                                                            <name>offset</name>
                                                                                        </expr>
                                                                                    </init>
                                                                                </decl>
                                                                                ;
                                                                            </decl_stmt>
                                                                            <expr_stmt>
                                                                                <expr>
                                                                                    <name><name>fCurrentEntity</name>.
                                                                                        <name>columnNumber</name>
                                                                                    </name>
                                                                                    += <name>length</name> -
                                                                                    <name>newlines</name>
                                                                                </expr>
                                                                                ;
                                                                            </expr_stmt>
                                                                            <expr_stmt>
                                                                                <expr>
                                                                                    <call>
                                                                                        <name><name>buffer</name>.
                                                                                            <name>append</name>
                                                                                        </name>
                                                                                        <argument_list>(
                                                                                            <argument>
                                                                                                <expr>
                                                                                                    <name><name>
                                                                                                        fCurrentEntity</name>
                                                                                                        .
                                                                                                        <name>ch</name>
                                                                                                    </name>
                                                                                                </expr>
                                                                                            </argument>
                                                                                            ,
                                                                                            <argument>
                                                                                                <expr>
                                                                                                    <name>offset</name>
                                                                                                </expr>
                                                                                            </argument>
                                                                                            ,
                                                                                            <argument>
                                                                                                <expr>
                                                                                                    <name>length</name>
                                                                                                </expr>
                                                                                            </argument>
                                                                                            )
                                                                                        </argument_list>
                                                                                    </call>
                                                                                </expr>
                                                                                ;
                                                                            </expr_stmt>
                                                                            <return>return <expr>true</expr>;
                                                                            </return>
                                                                            }
                                                                        </block>
                                                                    </then>
                                                                </if>
                                                            </else>
                                                        </if>
                                                    </else>
                                                </if>
                                                }
                                            </block>
                                        </while>
                                        }
                                    </block>
                                </else>
                            </if>
                            <decl_stmt>
                                <decl>
                                    <type>
                                        <name>int</name>
                                    </type>
                                    <name>length</name> =
                                    <init>
                                        <expr>
                                            <name><name>fCurrentEntity</name>.
                                                <name>position</name>
                                            </name>
                                            -
                                            <name>offset</name>
                                        </expr>
                                    </init>
                                </decl>
                                ;
                            </decl_stmt>
                            <expr_stmt>
                                <expr>
                                    <name><name>fCurrentEntity</name>.
                                        <name>columnNumber</name>
                                    </name>
                                    += <name>length</name> -
                                    <name>newlines</name>
                                </expr>
                                ;
                            </expr_stmt>
                            <if>if
                                <condition>(
                                    <expr>
                                        <name>done</name>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name>length</name>
                                                -=
                                                <name>delimLen</name>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        }
                                    </block>
                                </then>
                            </if>
                            <expr_stmt>
                                <expr>
                                    <call>
                                        <name><name>buffer</name>.
                                            <name>append</name>
                                        </name>
                                        <argument_list>(
                                            <argument>
                                                <expr>
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>ch</name>
                                                    </name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>offset</name>
                                                </expr>
                                            </argument>
                                            ,
                                            <argument>
                                                <expr>
                                                    <name>length</name>
                                                </expr>
                                            </argument>
                                            )
                                        </argument_list>
                                    </call>
                                </expr>
                                ;
                            </expr_stmt>

                            <comment type="line">// return true if string was skipped</comment>
                            }
                        </block>
                        while
                        <condition>(
                            <expr>!
                                <name>done</name>
                            </expr>
                            )
                        </condition>
                        ;
                    </do>
                    <return>return
                        <expr>!
                            <name>done</name>
                        </expr>
                        ;
                    </return>

                    }
                </block>
            </function>
            <comment type="line">// scanData(String,XMLString)</comment>

            <comment type="javadoc">/**
                * Skips a character appearing immediately on the input.
                * &lt;p&gt;
                * &lt;strong&gt;Note:&lt;/strong&gt; The character is consumed only if it matches
                * the specified character.
                *
                * @param c The character to skip.
                *
                * @return Returns true if the character was skipped.
                *
                * @throws IOException Thrown if i/o error occurs.
                * @throws EOFException Thrown on end of file.
                */
            </comment>
            <function>
                <type>
                    <specifier>public</specifier>
                    <name>boolean</name>
                </type>
                <name>skipChar</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>c</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{

                    <comment type="line">// load more characters, if needed</comment>
                    <if>if
                        <condition>(
                            <expr>
                                <name><name>fCurrentEntity</name>.
                                    <name>position</name>
                                </name>
                                ==
                                <name><name>fCurrentEntity</name>.
                                    <name>count</name>
                                </name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name>load</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>true</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>

                    <comment type="line">// skip character</comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>cc</name> =
                            <init>
                                <expr>
                                    <name><name>fCurrentEntity</name>.
                                        <name>ch</name>
                                        <index>[
                                            <expr>
                                                <name><name>fCurrentEntity</name>.
                                                    <name>position</name>
                                                </name>
                                            </expr>
                                            ]
                                        </index>
                                    </name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <if>if
                        <condition>(
                            <expr>
                                <name>cc</name>
                                ==
                                <name>c</name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <name><name>fCurrentEntity</name>.
                                            <name>position</name>
                                        </name>
                                        ++
                                    </expr>
                                    ;
                                </expr_stmt>
                                <if>if
                                    <condition>(
                                        <expr>
                                            <name>c</name>
                                            == '\n'
                                        </expr>
                                        )
                                    </condition>
                                    <then>
                                        <block>{
                                            <expr_stmt>
                                                <expr>
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>lineNumber</name>
                                                    </name>
                                                    ++
                                                </expr>
                                                ;
                                            </expr_stmt>
                                            <expr_stmt>
                                                <expr>
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>columnNumber</name>
                                                    </name>
                                                    = 1
                                                </expr>
                                                ;
                                            </expr_stmt>
                                            }
                                        </block>
                                    </then>
                                    <else>else
                                        <block>{
                                            <expr_stmt>
                                                <expr>
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>columnNumber</name>
                                                    </name>
                                                    ++
                                                </expr>
                                                ;
                                            </expr_stmt>
                                            }
                                        </block>
                                    </else>
                                </if>
                                <return>return <expr>true</expr>;
                                </return>
                                }
                            </block>
                        </then>
                        <else>else
                            <if>if
                                <condition>(
                                    <expr>
                                        <name>c</name>
                                        == '\n' &amp;&amp; ((<name>cc</name> == 0x2028 || <name>cc</name> == 0x85) &amp;&amp;
                                        <call>
                                            <name><name>fCurrentEntity</name>.
                                                <name>isExternal</name>
                                            </name>
                                            <argument_list>()</argument_list>
                                        </call>
                                        )
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name><name>fCurrentEntity</name>.
                                                    <name>position</name>
                                                </name>
                                                ++
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>fCurrentEntity</name>.
                                                    <name>lineNumber</name>
                                                </name>
                                                ++
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <expr_stmt>
                                            <expr>
                                                <name><name>fCurrentEntity</name>.
                                                    <name>columnNumber</name>
                                                </name>
                                                = 1
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <return>return <expr>true</expr>;
                                        </return>
                                        }
                                    </block>
                                </then>
                                <else>else
                                    <if>if
                                        <condition>(
                                            <expr>
                                                <name>c</name>
                                                == '\n' &amp;&amp; (<name>cc</name> == '\r' ) &amp;&amp;
                                                <call>
                                                    <name><name>fCurrentEntity</name>.
                                                        <name>isExternal</name>
                                                    </name>
                                                    <argument_list>()</argument_list>
                                                </call>
                                            </expr>
                                            )
                                        </condition>
                                        <then>
                                            <block>{
                                                <comment type="line">// handle newlines</comment>
                                                <if>if
                                                    <condition>(
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>position</name>
                                                            </name>
                                                            ==
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>count</name>
                                                            </name>
                                                        </expr>
                                                        )
                                                    </condition>
                                                    <then>
                                                        <block>{
                                                            <expr_stmt>
                                                                <expr>
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>ch</name>
                                                                        <index>[<expr>0</expr>]
                                                                        </index>
                                                                    </name>
                                                                    = (<name>char</name>)
                                                                    <name>cc</name>
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            <expr_stmt>
                                                                <expr>
                                                                    <call>
                                                                        <name>load</name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>1</expr>
                                                                            </argument>
                                                                            ,
                                                                            <argument>
                                                                                <expr>false</expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            }
                                                        </block>
                                                    </then>
                                                </if>
                                                <decl_stmt>
                                                    <decl>
                                                        <type>
                                                            <name>int</name>
                                                        </type>
                                                        <name>ccc</name> =
                                                        <init>
                                                            <expr>
                                                                <name><name>fCurrentEntity</name>.
                                                                    <name>ch</name>
                                                                    <index>[
                                                                        <expr>++
                                                                            <name><name>fCurrentEntity</name>.
                                                                                <name>position</name>
                                                                            </name>
                                                                        </expr>
                                                                        ]
                                                                    </index>
                                                                </name>
                                                            </expr>
                                                        </init>
                                                    </decl>
                                                    ;
                                                </decl_stmt>
                                                <if>if
                                                    <condition>(
                                                        <expr>
                                                            <name>ccc</name>
                                                            == '\n' || <name>ccc</name> == 0x85
                                                        </expr>
                                                        )
                                                    </condition>
                                                    <then>
                                                        <block>{
                                                            <expr_stmt>
                                                                <expr>
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>position</name>
                                                                    </name>
                                                                    ++
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            }
                                                        </block>
                                                    </then>
                                                </if>
                                                <expr_stmt>
                                                    <expr>
                                                        <name><name>fCurrentEntity</name>.
                                                            <name>lineNumber</name>
                                                        </name>
                                                        ++
                                                    </expr>
                                                    ;
                                                </expr_stmt>
                                                <expr_stmt>
                                                    <expr>
                                                        <name><name>fCurrentEntity</name>.
                                                            <name>columnNumber</name>
                                                        </name>
                                                        = 1
                                                    </expr>
                                                    ;
                                                </expr_stmt>
                                                <return>return <expr>true</expr>;
                                                </return>
                                                }
                                            </block>
                                        </then>
                                    </if>
                                </else>
                            </if>
                        </else>
                    </if>

                    <comment type="line">// character was not skipped</comment>
                    <return>return <expr>false</expr>;
                    </return>

                    }
                </block>
            </function>
            <comment type="line">// skipChar(int):boolean</comment>

            <comment type="javadoc">/**
                * Skips space characters appearing immediately on the input.
                * &lt;p&gt;
                * &lt;strong&gt;Note:&lt;/strong&gt; The characters are consumed only if they are
                * space characters.
                *
                * @return Returns true if at least one space character was skipped.
                *
                * @throws IOException Thrown if i/o error occurs.
                * @throws EOFException Thrown on end of file.
                *
                * @see org.apache.xerces.util.XMLChar#isSpace
                * @see org.apache.xerces.util.XML11Char#isXML11Space
                */
            </comment>
            <function>
                <type>
                    <specifier>public</specifier>
                    <name>boolean</name>
                </type>
                <name>skipSpaces</name>
                <parameter_list>()</parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{

                    <comment type="line">// load more characters, if needed</comment>
                    <if>if
                        <condition>(
                            <expr>
                                <name><name>fCurrentEntity</name>.
                                    <name>position</name>
                                </name>
                                ==
                                <name><name>fCurrentEntity</name>.
                                    <name>count</name>
                                </name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name>load</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>true</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>

                    <comment type="line">// skip spaces</comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <name>int</name>
                            </type>
                            <name>c</name> =
                            <init>
                                <expr>
                                    <name><name>fCurrentEntity</name>.
                                        <name>ch</name>
                                        <index>[
                                            <expr>
                                                <name><name>fCurrentEntity</name>.
                                                    <name>position</name>
                                                </name>
                                            </expr>
                                            ]
                                        </index>
                                    </name>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>

                    <comment type="line">// External -- Match: S + 0x85 + 0x2028, and perform end of line
                        normalization
                    </comment>
                    <if>if
                        <condition>(
                            <expr>
                                <call>
                                    <name><name>fCurrentEntity</name>.
                                        <name>isExternal</name>
                                    </name>
                                    <argument_list>()</argument_list>
                                </call>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <if>if
                                    <condition>(
                                        <expr>
                                            <call>
                                                <name><name>XML11Char</name>.
                                                    <name>isXML11Space</name>
                                                </name>
                                                <argument_list>(
                                                    <argument>
                                                        <expr>
                                                            <name>c</name>
                                                        </expr>
                                                    </argument>
                                                    )
                                                </argument_list>
                                            </call>
                                        </expr>
                                        )
                                    </condition>
                                    <then>
                                        <block>{
                                            <do>do
                                                <block>{
                                                    <decl_stmt>
                                                        <decl>
                                                            <type>
                                                                <name>boolean</name>
                                                            </type>
                                                            <name>entityChanged</name> =
                                                            <init>
                                                                <expr>false</expr>
                                                            </init>
                                                        </decl>
                                                        ;
                                                    </decl_stmt>
                                                    <comment type="line">// handle newlines</comment>
                                                    <if>if
                                                        <condition>(
                                                            <expr>
                                                                <name>c</name>
                                                                == '\n' || <name>c</name> == '\r' || <name>c</name> ==
                                                                0x85 || <name>c</name> == 0x2028
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <block>{
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>lineNumber</name>
                                                                        </name>
                                                                        ++
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>columnNumber</name>
                                                                        </name>
                                                                        = 1
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                <if>if
                                                                    <condition>(
                                                                        <expr>
                                                                            <name><name>fCurrentEntity</name>.
                                                                                <name>position</name>
                                                                            </name>
                                                                            ==
                                                                            <name><name>fCurrentEntity</name>.
                                                                                <name>count</name>
                                                                            </name>
                                                                            - 1
                                                                        </expr>
                                                                        )
                                                                    </condition>
                                                                    <then>
                                                                        <block>{
                                                                            <expr_stmt>
                                                                                <expr>
                                                                                    <name><name>fCurrentEntity</name>.
                                                                                        <name>ch</name>
                                                                                        <index>[<expr>0</expr>]
                                                                                        </index>
                                                                                    </name>
                                                                                    = (<name>char</name>)
                                                                                    <name>c</name>
                                                                                </expr>
                                                                                ;
                                                                            </expr_stmt>
                                                                            <expr_stmt>
                                                                                <expr>
                                                                                    <name>entityChanged</name>
                                                                                    =
                                                                                    <call>
                                                                                        <name>load</name>
                                                                                        <argument_list>(
                                                                                            <argument>
                                                                                                <expr>1</expr>
                                                                                            </argument>
                                                                                            ,
                                                                                            <argument>
                                                                                                <expr>true</expr>
                                                                                            </argument>
                                                                                            )
                                                                                        </argument_list>
                                                                                    </call>
                                                                                </expr>
                                                                                ;
                                                                            </expr_stmt>
                                                                            <if>if
                                                                                <condition>(
                                                                                    <expr>!
                                                                                        <name>entityChanged</name>
                                                                                    </expr>
                                                                                    )
                                                                                </condition>
                                                                                <then>
                                                                                    <block>{
                                                                                        <comment type="line">// the load
                                                                                            change the position to be 1,
                                                                                        </comment>
                                                                                        <comment type="line">// need to
                                                                                            restore it when entity not
                                                                                            changed
                                                                                        </comment>
                                                                                        <expr_stmt>
                                                                                            <expr>
                                                                                                <name><name>
                                                                                                    fCurrentEntity</name>
                                                                                                    .
                                                                                                    <name>
                                                                                                        startPosition
                                                                                                    </name>
                                                                                                </name>
                                                                                                = 0
                                                                                            </expr>
                                                                                            ;
                                                                                        </expr_stmt>
                                                                                        <expr_stmt>
                                                                                            <expr>
                                                                                                <name><name>
                                                                                                    fCurrentEntity</name>
                                                                                                    .
                                                                                                    <name>position
                                                                                                    </name>
                                                                                                </name>
                                                                                                = 0
                                                                                            </expr>
                                                                                            ;
                                                                                        </expr_stmt>
                                                                                        }
                                                                                    </block>
                                                                                </then>
                                                                            </if>
                                                                            }
                                                                        </block>
                                                                    </then>
                                                                </if>
                                                                <if>if
                                                                    <condition>(
                                                                        <expr>
                                                                            <name>c</name>
                                                                            == '\r'
                                                                        </expr>
                                                                        )
                                                                    </condition>
                                                                    <then>
                                                                        <block>{
                                                                            <comment type="line">// REVISIT: Does this
                                                                                need to be updated to fix the
                                                                            </comment>
                                                                            <comment type="line">// #x0D ^#x0A newline
                                                                                normalization problem? -Ac
                                                                            </comment>
                                                                            <decl_stmt>
                                                                                <decl>
                                                                                    <type>
                                                                                        <name>int</name>
                                                                                    </type>
                                                                                    <name>cc</name> =
                                                                                    <init>
                                                                                        <expr>
                                                                                            <name><name>
                                                                                                fCurrentEntity</name>.
                                                                                                <name>ch</name>
                                                                                                <index>[
                                                                                                    <expr>++
                                                                                                        <name><name>
                                                                                                            fCurrentEntity</name>
                                                                                                            .
                                                                                                            <name>
                                                                                                                position
                                                                                                            </name>
                                                                                                        </name>
                                                                                                    </expr>
                                                                                                    ]
                                                                                                </index>
                                                                                            </name>
                                                                                        </expr>
                                                                                    </init>
                                                                                </decl>
                                                                                ;
                                                                            </decl_stmt>
                                                                            <if>if
                                                                                <condition>(
                                                                                    <expr>
                                                                                        <name>cc</name>
                                                                                        != '\n' &amp;&amp; <name>cc
                                                                                    </name> != 0x85
                                                                                    </expr>
                                                                                    )
                                                                                </condition>
                                                                                <then>
                                                                                    <block>{
                                                                                        <expr_stmt>
                                                                                            <expr>
                                                                                                <name><name>
                                                                                                    fCurrentEntity</name>
                                                                                                    .
                                                                                                    <name>position
                                                                                                    </name>
                                                                                                </name>
                                                                                                --
                                                                                            </expr>
                                                                                            ;
                                                                                        </expr_stmt>
                                                                                        }
                                                                                    </block>
                                                                                </then>
                                                                            </if>
                                                                            }
                                                                        </block>
                                                                    </then>
                                                                </if>
                                                                }
                                                            </block>
                                                        </then>
                                                        <else>else
                                                            <block>{
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>columnNumber</name>
                                                                        </name>
                                                                        ++
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                }
                                                            </block>
                                                        </else>
                                                    </if>
                                                    <comment type="line">// load more characters, if needed</comment>
                                                    <if>if
                                                        <condition>(
                                                            <expr>!
                                                                <name>entityChanged</name>
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <expr_stmt>
                                                                <expr>
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>position</name>
                                                                    </name>
                                                                    ++
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                        </then>
                                                    </if>
                                                    <if>if
                                                        <condition>(
                                                            <expr>
                                                                <name><name>fCurrentEntity</name>.
                                                                    <name>position</name>
                                                                </name>
                                                                ==
                                                                <name><name>fCurrentEntity</name>.
                                                                    <name>count</name>
                                                                </name>
                                                            </expr>
                                                            )
                                                        </condition>
                                                        <then>
                                                            <block>{
                                                                <expr_stmt>
                                                                    <expr>
                                                                        <call>
                                                                            <name>load</name>
                                                                            <argument_list>(
                                                                                <argument>
                                                                                    <expr>0</expr>
                                                                                </argument>
                                                                                ,
                                                                                <argument>
                                                                                    <expr>true</expr>
                                                                                </argument>
                                                                                )
                                                                            </argument_list>
                                                                        </call>
                                                                    </expr>
                                                                    ;
                                                                </expr_stmt>
                                                                }
                                                            </block>
                                                        </then>
                                                    </if>
                                                    }
                                                </block>
                                                while
                                                <condition>(
                                                    <expr>
                                                        <call>
                                                            <name><name>XML11Char</name>.
                                                                <name>isXML11Space</name>
                                                            </name>
                                                            <argument_list>(
                                                                <argument>
                                                                    <expr>
                                                                        <name>c</name>
                                                                        =
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>ch</name>
                                                                            <index>[
                                                                                <expr>
                                                                                    <name><name>fCurrentEntity</name>.
                                                                                        <name>position</name>
                                                                                    </name>
                                                                                </expr>
                                                                                ]
                                                                            </index>
                                                                        </name>
                                                                    </expr>
                                                                </argument>
                                                                )
                                                            </argument_list>
                                                        </call>
                                                    </expr>
                                                    )
                                                </condition>
                                                ;
                                            </do>
                                            <return>return <expr>true</expr>;
                                            </return>
                                            }
                                        </block>
                                    </then>
                                </if>
                                }
                            </block>
                        </then>
                        <comment type="line">// Internal -- Match: S (only)</comment>
                        <else>else
                            <if>if
                                <condition>(
                                    <expr>
                                        <call>
                                            <name><name>XMLChar</name>.
                                                <name>isSpace</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>c</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <do>do
                                            <block>{
                                                <decl_stmt>
                                                    <decl>
                                                        <type>
                                                            <name>boolean</name>
                                                        </type>
                                                        <name>entityChanged</name> =
                                                        <init>
                                                            <expr>false</expr>
                                                        </init>
                                                    </decl>
                                                    ;
                                                </decl_stmt>
                                                <comment type="line">// handle newlines</comment>
                                                <if>if
                                                    <condition>(
                                                        <expr>
                                                            <name>c</name>
                                                            == '\n'
                                                        </expr>
                                                        )
                                                    </condition>
                                                    <then>
                                                        <block>{
                                                            <expr_stmt>
                                                                <expr>
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>lineNumber</name>
                                                                    </name>
                                                                    ++
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            <expr_stmt>
                                                                <expr>
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>columnNumber</name>
                                                                    </name>
                                                                    = 1
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            <if>if
                                                                <condition>(
                                                                    <expr>
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>position</name>
                                                                        </name>
                                                                        ==
                                                                        <name><name>fCurrentEntity</name>.
                                                                            <name>count</name>
                                                                        </name>
                                                                        - 1
                                                                    </expr>
                                                                    )
                                                                </condition>
                                                                <then>
                                                                    <block>{
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>ch</name>
                                                                                    <index>[<expr>0</expr>]
                                                                                    </index>
                                                                                </name>
                                                                                = (<name>char</name>)
                                                                                <name>c</name>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <expr_stmt>
                                                                            <expr>
                                                                                <name>entityChanged</name>
                                                                                =
                                                                                <call>
                                                                                    <name>load</name>
                                                                                    <argument_list>(
                                                                                        <argument>
                                                                                            <expr>1</expr>
                                                                                        </argument>
                                                                                        ,
                                                                                        <argument>
                                                                                            <expr>true</expr>
                                                                                        </argument>
                                                                                        )
                                                                                    </argument_list>
                                                                                </call>
                                                                            </expr>
                                                                            ;
                                                                        </expr_stmt>
                                                                        <if>if
                                                                            <condition>(
                                                                                <expr>!
                                                                                    <name>entityChanged</name>
                                                                                </expr>
                                                                                )
                                                                            </condition>
                                                                            <then>
                                                                                <block>{
                                                                                    <comment type="line">// the load
                                                                                        change the position to be 1,
                                                                                    </comment>
                                                                                    <comment type="line">// need to
                                                                                        restore it when entity not
                                                                                        changed
                                                                                    </comment>
                                                                                    <expr_stmt>
                                                                                        <expr>
                                                                                            <name><name>
                                                                                                fCurrentEntity</name>.
                                                                                                <name>startPosition
                                                                                                </name>
                                                                                            </name>
                                                                                            = 0
                                                                                        </expr>
                                                                                        ;
                                                                                    </expr_stmt>
                                                                                    <expr_stmt>
                                                                                        <expr>
                                                                                            <name><name>
                                                                                                fCurrentEntity</name>.
                                                                                                <name>position</name>
                                                                                            </name>
                                                                                            = 0
                                                                                        </expr>
                                                                                        ;
                                                                                    </expr_stmt>
                                                                                    }
                                                                                </block>
                                                                            </then>
                                                                        </if>
                                                                        }
                                                                    </block>
                                                                </then>
                                                            </if>
                                                            }
                                                        </block>
                                                    </then>
                                                    <else>else
                                                        <block>{
                                                            <expr_stmt>
                                                                <expr>
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>columnNumber</name>
                                                                    </name>
                                                                    ++
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            }
                                                        </block>
                                                    </else>
                                                </if>
                                                <comment type="line">// load more characters, if needed</comment>
                                                <if>if
                                                    <condition>(
                                                        <expr>!
                                                            <name>entityChanged</name>
                                                        </expr>
                                                        )
                                                    </condition>
                                                    <then>
                                                        <expr_stmt>
                                                            <expr>
                                                                <name><name>fCurrentEntity</name>.
                                                                    <name>position</name>
                                                                </name>
                                                                ++
                                                            </expr>
                                                            ;
                                                        </expr_stmt>
                                                    </then>
                                                </if>
                                                <if>if
                                                    <condition>(
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>position</name>
                                                            </name>
                                                            ==
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>count</name>
                                                            </name>
                                                        </expr>
                                                        )
                                                    </condition>
                                                    <then>
                                                        <block>{
                                                            <expr_stmt>
                                                                <expr>
                                                                    <call>
                                                                        <name>load</name>
                                                                        <argument_list>(
                                                                            <argument>
                                                                                <expr>0</expr>
                                                                            </argument>
                                                                            ,
                                                                            <argument>
                                                                                <expr>true</expr>
                                                                            </argument>
                                                                            )
                                                                        </argument_list>
                                                                    </call>
                                                                </expr>
                                                                ;
                                                            </expr_stmt>
                                                            }
                                                        </block>
                                                    </then>
                                                </if>
                                                }
                                            </block>
                                            while
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name><name>XMLChar</name>.
                                                            <name>isSpace</name>
                                                        </name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>c</name>
                                                                    =
                                                                    <name><name>fCurrentEntity</name>.
                                                                        <name>ch</name>
                                                                        <index>[
                                                                            <expr>
                                                                                <name><name>fCurrentEntity</name>.
                                                                                    <name>position</name>
                                                                                </name>
                                                                            </expr>
                                                                            ]
                                                                        </index>
                                                                    </name>
                                                                </expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                )
                                            </condition>
                                            ;
                                        </do>
                                        <return>return <expr>true</expr>;
                                        </return>
                                        }
                                    </block>
                                </then>
                            </if>
                        </else>
                    </if>

                    <comment type="line">// no spaces were found</comment>
                    <return>return <expr>false</expr>;
                    </return>

                    }
                </block>
            </function>
            <comment type="line">// skipSpaces():boolean</comment>

            <comment type="javadoc">/**
                * Skips the specified string appearing immediately on the input.
                * &lt;p&gt;
                * &lt;strong&gt;Note:&lt;/strong&gt; The characters are consumed only if they are
                * space characters.
                *
                * @param s The string to skip.
                *
                * @return Returns true if the string was skipped.
                *
                * @throws IOException Thrown if i/o error occurs.
                * @throws EOFException Thrown on end of file.
                */
            </comment>
            <function>
                <type>
                    <specifier>public</specifier>
                    <name>boolean</name>
                </type>
                <name>skipString</name>
                <parameter_list>(
                    <param>
                        <decl>
                            <type>
                                <name>String</name>
                            </type>
                            <name>s</name>
                        </decl>
                    </param>
                    )
                </parameter_list>
                <throws>throws
                    <argument>
                        <expr>
                            <name>IOException</name>
                        </expr>
                    </argument>
                </throws>
                <block>{

                    <comment type="line">// load more characters, if needed</comment>
                    <if>if
                        <condition>(
                            <expr>
                                <name><name>fCurrentEntity</name>.
                                    <name>position</name>
                                </name>
                                ==
                                <name><name>fCurrentEntity</name>.
                                    <name>count</name>
                                </name>
                            </expr>
                            )
                        </condition>
                        <then>
                            <block>{
                                <expr_stmt>
                                    <expr>
                                        <call>
                                            <name>load</name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>0</expr>
                                                </argument>
                                                ,
                                                <argument>
                                                    <expr>true</expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    ;
                                </expr_stmt>
                                }
                            </block>
                        </then>
                    </if>

                    <comment type="line">// skip string</comment>
                    <decl_stmt>
                        <decl>
                            <type>
                                <specifier>final</specifier>
                                <name>int</name>
                            </type>
                            <name>length</name> =
                            <init>
                                <expr>
                                    <call>
                                        <name><name>s</name>.
                                            <name>length</name>
                                        </name>
                                        <argument_list>()</argument_list>
                                    </call>
                                </expr>
                            </init>
                        </decl>
                        ;
                    </decl_stmt>
                    <for>for (
                        <init>
                            <decl>
                                <type>
                                    <name>int</name>
                                </type>
                                <name>i</name> =
                                <init>
                                    <expr>0</expr>
                                </init>
                            </decl>
                            ;
                        </init>
                        <condition>
                            <expr>
                                <name>i</name>
                                &lt;
                                <name>length</name>
                            </expr>
                            ;
                        </condition>
                        <incr>
                            <expr><name>i</name>++
                            </expr>
                        </incr>
                        )
                        <block>{
                            <decl_stmt>
                                <decl>
                                    <type>
                                        <name>char</name>
                                    </type>
                                    <name>c</name> =
                                    <init>
                                        <expr>
                                            <name><name>fCurrentEntity</name>.
                                                <name>ch</name>
                                                <index>[
                                                    <expr>
                                                        <name><name>fCurrentEntity</name>.
                                                            <name>position</name>
                                                        </name>
                                                        ++
                                                    </expr>
                                                    ]
                                                </index>
                                            </name>
                                        </expr>
                                    </init>
                                </decl>
                                ;
                            </decl_stmt>
                            <if>if
                                <condition>(
                                    <expr>
                                        <name>c</name>
                                        !=
                                        <call>
                                            <name><name>s</name>.
                                                <name>charAt</name>
                                            </name>
                                            <argument_list>(
                                                <argument>
                                                    <expr>
                                                        <name>i</name>
                                                    </expr>
                                                </argument>
                                                )
                                            </argument_list>
                                        </call>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <name><name>fCurrentEntity</name>.
                                                    <name>position</name>
                                                </name>
                                                -= <name>i</name> + 1
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <return>return <expr>false</expr>;
                                        </return>
                                        }
                                    </block>
                                </then>
                            </if>
                            <if>if
                                <condition>(
                                    <expr>
                                        <name>i</name>
                                        &lt; <name>length</name> - 1 &amp;&amp;
                                        <name><name>fCurrentEntity</name>.
                                            <name>position</name>
                                        </name>
                                        ==
                                        <name><name>fCurrentEntity</name>.
                                            <name>count</name>
                                        </name>
                                    </expr>
                                    )
                                </condition>
                                <then>
                                    <block>{
                                        <expr_stmt>
                                            <expr>
                                                <call>
                                                    <name><name>System</name>.
                                                        <name>arraycopy</name>
                                                    </name>
                                                    <argument_list>(
                                                        <argument>
                                                            <expr>
                                                                <name><name>fCurrentEntity</name>.
                                                                    <name>ch</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>fCurrentEntity</name>.
                                                                    <name>count</name>
                                                                </name>
                                                                - <name>i</name> - 1
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name><name>fCurrentEntity</name>.
                                                                    <name>ch</name>
                                                                </name>
                                                            </expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>0</expr>
                                                        </argument>
                                                        ,
                                                        <argument>
                                                            <expr>
                                                                <name>i</name>
                                                                + 1
                                                            </expr>
                                                        </argument>
                                                        )
                                                    </argument_list>
                                                </call>
                                            </expr>
                                            ;
                                        </expr_stmt>
                                        <comment type="line">// REVISIT: Can a string to be skipped cross an</comment>
                                        <comment type="line">// entity boundary? -Ac</comment>
                                        <if>if
                                            <condition>(
                                                <expr>
                                                    <call>
                                                        <name>load</name>
                                                        <argument_list>(
                                                            <argument>
                                                                <expr>
                                                                    <name>i</name>
                                                                    + 1
                                                                </expr>
                                                            </argument>
                                                            ,
                                                            <argument>
                                                                <expr>false</expr>
                                                            </argument>
                                                            )
                                                        </argument_list>
                                                    </call>
                                                </expr>
                                                )
                                            </condition>
                                            <then>
                                                <block>{
                                                    <expr_stmt>
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>startPosition</name>
                                                            </name>
                                                            -= <name>i</name> + 1
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <expr_stmt>
                                                        <expr>
                                                            <name><name>fCurrentEntity</name>.
                                                                <name>position</name>
                                                            </name>
                                                            -= <name>i</name> + 1
                                                        </expr>
                                                        ;
                                                    </expr_stmt>
                                                    <return>return <expr>false</expr>;
                                                    </return>
                                                    }
                                                </block>
                                            </then>
                                        </if>
                                        }
                                    </block>
                                </then>
                            </if>
                            }
                        </block>
                    </for>
                    <expr_stmt>
                        <expr>
                            <name><name>fCurrentEntity</name>.
                                <name>columnNumber</name>
                            </name>
                            +=
                            <name>length</name>
                        </expr>
                        ;
                    </expr_stmt>
                    <return>return <expr>true</expr>;
                    </return>

                    }
                </block>
            </function>
            <comment type="line">// skipString(String):boolean</comment>

            }
        </block>
    </class>
    <comment type="line">// class XML11EntityScanner</comment>

</unit>
